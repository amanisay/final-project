(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[16102,55378,28543,58789,77713,68743,102,66898,3827,31403,10298,56416,48994,29062],{240684:(e,t,i)=>{"use strict";i.d(t,{TA:()=>w,ZP:()=>E});var r=i(667294),n=i(263366),o=i(487462),s=i(497326),l=i(894578),a=i(659864),d=i(108679),c=i.n(d);function u(e){console.warn("loadable: "+e)}var h=r.createContext(),p={initialChunks:{}},_="PENDING",g="REJECTED",m=function(e){return e};function f(e){var t=e.defaultResolveComponent,i=void 0===t?m:t,d=e.render,u=e.onLoad;function f(e,t){void 0===t&&(t={});var m,f="function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e,x={};function b(e){return t.cacheKey?t.cacheKey(e):f.resolve?f.resolve(e):"static"}function y(e,r,n){var o=t.resolveComponent?t.resolveComponent(e,r):i(e);if(t.resolveComponent&&!(0,a.isValidElementType)(o))throw Error("resolveComponent returned something that is not a React component!");return c()(n,o,{preload:!0}),o}var v=(m=function(e){function i(i){var r;return((r=e.call(this,i)||this).state={result:null,error:null,loading:!0,cacheKey:b(i)},function(e,t){if(!e){var i=Error("loadable: "+t);throw i.framesToPop=1,i.name="Invariant Violation",i}}(!i.__chunkExtractor||f.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),i.__chunkExtractor)?(!1===t.ssr||(f.requireAsync(i).catch(function(){return null}),r.loadSync(),i.__chunkExtractor.addChunk(f.chunkName(i))),(0,s.Z)(r)):(!1!==t.ssr&&(f.isReady&&f.isReady(i)||f.chunkName&&p.initialChunks[f.chunkName(i)])&&r.loadSync(),r)}(0,l.Z)(i,e),i.getDerivedStateFromProps=function(e,t){var i=b(e);return(0,o.Z)({},t,{cacheKey:i,loading:t.loading||t.cacheKey!==i})};var r=i.prototype;return r.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===g&&this.setCache(),this.state.loading&&this.loadAsync()},r.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},r.componentWillUnmount=function(){this.mounted=!1},r.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},r.getCacheKey=function(){return b(this.props)},r.getCache=function(){return x[this.getCacheKey()]},r.setCache=function(e){void 0===e&&(e=void 0),x[this.getCacheKey()]=e},r.triggerOnLoad=function(){var e=this;u&&setTimeout(function(){u(e.state.result,e.props)})},r.loadSync=function(){if(this.state.loading)try{var e=f.requireSync(this.props),t=y(e,this.props,P);this.state.result=t,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:f.resolve(this.props),chunkName:f.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},r.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then(function(t){var i=y(t,e.props,{Loadable:P});e.safeSetState({result:i,loading:!1},function(){return e.triggerOnLoad()})}).catch(function(t){return e.safeSetState({error:t,loading:!1})}),t},r.resolveAsync=function(){var e=this,t=this.props,i=(t.__chunkExtractor,t.forwardedRef,(0,n.Z)(t,["__chunkExtractor","forwardedRef"])),r=this.getCache();return r||((r=f.requireAsync(i)).status=_,this.setCache(r),r.then(function(){r.status="RESOLVED"},function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:f.resolve(e.props),chunkName:f.chunkName(e.props),error:t?t.message:t}),r.status=g})),r},r.render=function(){var e=this.props,i=e.forwardedRef,r=e.fallback,s=(e.__chunkExtractor,(0,n.Z)(e,["forwardedRef","fallback","__chunkExtractor"])),l=this.state,a=l.error,c=l.loading,u=l.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===_)throw this.loadAsync();if(a)throw a;var h=r||t.fallback||null;return c?h:d({fallback:h,result:u,options:t,props:(0,o.Z)({},s,{ref:i})})},i}(r.Component),function(e){return r.createElement(h.Consumer,null,function(t){return r.createElement(m,Object.assign({__chunkExtractor:t},e))})}),P=r.forwardRef(function(e,t){return r.createElement(v,Object.assign({forwardedRef:t},e))});return P.preload=function(e){f.requireAsync(e)},P.load=function(e){return f.requireAsync(e)},P}return{loadable:f,lazy:function(e,t){return f(e,(0,o.Z)({},t,{suspense:!0}))}}}var x=f({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,i=e.props;return r.createElement(t,i)}}),b=x.loadable,y=x.lazy,v=f({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,i=e.props;return i.children?i.children(t):null}}),P=v.loadable,S=v.lazy,A="undefined"!=typeof window;function w(e,t){void 0===e&&(e=function(){});var i=(void 0===t?{}:t).namespace;if(!A)return u("`loadableReady()` must be called in browser only"),e(),Promise.resolve();var r=null;if(A){var n=""+(void 0===i?"":i)+"__LOADABLE_REQUIRED_CHUNKS__",o=document.getElementById(n);if(o){r=JSON.parse(o.textContent);var s=document.getElementById(n+"_ext");if(s)JSON.parse(s.textContent).namedChunks.forEach(function(e){p.initialChunks[e]=!0});else throw Error("loadable-component: @loadable/server does not match @loadable/component")}}if(!r)return u("`loadableReady()` requires state, please use `getScriptTags` or `getScriptElements` server-side"),e(),Promise.resolve();var l=!1;return new Promise(function(e){window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[];var t=window.__LOADABLE_LOADED_CHUNKS__,i=t.push.bind(t);function n(){r.every(function(e){return t.some(function(t){return t[0].indexOf(e)>-1})})&&!l&&(l=!0,e())}t.push=function(){i.apply(void 0,arguments),n()},n()}).then(e)}b.lib=P,y.lib=S;let E=b},169272:(e,t,i)=>{"use strict";var r=i(310723),n=[],o=[],s=r.makeRequestCallFromTimer(function(){if(o.length)throw o.shift()});function l(e){var t;(t=n.length?n.pop():new a).task=e,r(t)}function a(){this.task=null}e.exports=l,a.prototype.call=function(){try{this.task.call()}catch(e){l.onerror?l.onerror(e):(o.push(e),s())}finally{this.task=null,n[n.length]=this}}},310723:(e,t,i)=>{"use strict";function r(e){a.length||l(),a[a.length]=e}e.exports=r;var n,o,s,l,a=[],d=0;function c(){for(;d<a.length;){var e=d;if(d+=1,a[e].call(),d>1024){for(var t=0,i=a.length-d;t<i;t++)a[t]=a[t+d];a.length-=d,d=0}}a.length=0,d=0}var u=void 0!==i.g?i.g:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(r,0),i=setInterval(r,50);function r(){clearTimeout(t),clearInterval(i),e()}}}l="function"==typeof h?(n=1,o=new h(c),s=document.createTextNode(""),o.observe(s,{characterData:!0}),function(){n=-n,s.data=n}):p(c),r.requestFlush=l,r.makeRequestCallFromTimer=p},58545:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(983946),n=i(51820),o=i(13882);function s(e,t){(0,o.Z)(2,arguments);var i=(0,r.Z)(t);return(0,n.Z)(e,6e4*i)}},959910:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(619013),n=i(13882);function o(e,t){(0,n.Z)(2,arguments);var i=(0,r.Z)(e),o=(0,r.Z)(t);return i.getTime()-o.getTime()}},969690:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(959910),n=i(13882);function o(e,t){(0,n.Z)(2,arguments);var i=(0,r.Z)(e,t)/6e4;return i>0?Math.floor(i):Math.ceil(i)}},383894:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(619013),n=i(13882);function o(e){(0,n.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(23,59,59,999),t}},69119:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(619013),n=i(13882);function o(e){(0,n.Z)(1,arguments);var t=(0,r.Z)(e);return t.setHours(0,0,0,0),t}},538334:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(120975),n=i(649610),o=i(116434),s=i(325921),l=i(284125),a=function(){function e(e,t,i){var o,a,d=this;void 0===t&&(t={}),void 0===i&&(i=!1),this.context=t,this.isSetUp=!1,this.handleRefCountChange=function(){var e=d.store.getState().refCount>0;e&&!d.isSetUp?(d.backend.setup(),d.isSetUp=!0):!e&&d.isSetUp&&(d.backend.teardown(),d.isSetUp=!1)};var c=(o=i,a="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,r.createStore(n.default,o&&a&&a({name:"dnd-core",instanceId:"dnd-core"})));this.store=c,this.monitor=new s.default(c,new l.default(c)),this.backend=e(this),c.subscribe(this.handleRefCountChange)}return e.prototype.getContext=function(){return this.context},e.prototype.getMonitor=function(){return this.monitor},e.prototype.getBackend=function(){return this.backend},e.prototype.getRegistry=function(){return this.monitor.registry},e.prototype.getActions=function(){var e=this,t=this.store.dispatch,i=o.default(this);return Object.keys(i).reduce(function(r,n){var o=i[n];return r[n]=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var n=o.apply(e,i);void 0!==n&&t(n)},r},{})},e.prototype.dispatch=function(e){this.store.dispatch(e)},e}();t.default=a},325921:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(640809),n=i(952705),o=i(442520),s=i(441143),l=function(){function e(e,t){this.store=e,this.registry=t}return e.prototype.subscribeToStateChange=function(e,t){var i=this;void 0===t&&(t={handlerIds:void 0});var r=t.handlerIds;s("function"==typeof e,"listener must be a function."),s(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");var n=this.store.getState().stateId;return this.store.subscribe(function(){var t=i.store.getState(),s=t.stateId;try{s!==n&&(s!==n+1||o.areDirty(t.dirtyHandlerIds,r))&&e()}finally{n=s}})},e.prototype.subscribeToOffsetChange=function(e){var t=this;s("function"==typeof e,"listener must be a function.");var i=this.store.getState().dragOffset;return this.store.subscribe(function(){var r=t.store.getState().dragOffset;r!==i&&(i=r,e())})},e.prototype.canDragSource=function(e){if(!e)return!1;var t=this.registry.getSource(e);return s(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)},e.prototype.canDropOnTarget=function(e){if(!e)return!1;var t=this.registry.getTarget(e);if(s(t,"Expected to find a valid target."),!this.isDragging()||this.didDrop())return!1;var i=this.registry.getTargetType(e),n=this.getItemType();return r.default(i,n)&&t.canDrop(this,e)},e.prototype.isDragging=function(){return!!this.getItemType()},e.prototype.isDraggingSource=function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return s(t,"Expected to find a valid source."),!!(this.isDragging()&&this.isSourcePublic())&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)},e.prototype.isOverTarget=function(e,t){if(void 0===t&&(t={shallow:!1}),!e)return!1;var i=t.shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),o=this.getItemType();if(o&&!r.default(n,o))return!1;var s=this.getTargetIds();if(!s.length)return!1;var l=s.indexOf(e);return i?l===s.length-1:l>-1},e.prototype.getItemType=function(){return this.store.getState().dragOperation.itemType},e.prototype.getItem=function(){return this.store.getState().dragOperation.item},e.prototype.getSourceId=function(){return this.store.getState().dragOperation.sourceId},e.prototype.getTargetIds=function(){return this.store.getState().dragOperation.targetIds},e.prototype.getDropResult=function(){return this.store.getState().dragOperation.dropResult},e.prototype.didDrop=function(){return this.store.getState().dragOperation.didDrop},e.prototype.isSourcePublic=function(){return this.store.getState().dragOperation.isSourcePublic},e.prototype.getInitialClientOffset=function(){return this.store.getState().dragOffset.initialClientOffset},e.prototype.getInitialSourceClientOffset=function(){return this.store.getState().dragOffset.initialSourceClientOffset},e.prototype.getClientOffset=function(){return this.store.getState().dragOffset.clientOffset},e.prototype.getSourceClientOffset=function(){return n.getSourceClientOffset(this.store.getState().dragOffset)},e.prototype.getDifferenceFromInitialOffset=function(){return n.getDifferenceFromInitialOffset(this.store.getState().dragOffset)},e}();t.default=l},284125:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(4963),n=i(547227),o=i(556141),s=i(834314),l=i(441143),a=i(169272);function d(e){switch(e[0]){case"S":return o.HandlerRole.SOURCE;case"T":return o.HandlerRole.TARGET;default:l(!1,"Cannot parse handler ID: "+e)}}function c(e,t){var i=e.entries(),r=!1;do{var n=i.next(),o=n.done;if(n.value[1]===t)return!0;r=o}while(!r)return!1}var u=function(){function e(e){this.store=e,this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null}return e.prototype.addSource=function(e,t){s.validateType(e),s.validateSourceContract(t);var i=this.addHandler(o.HandlerRole.SOURCE,e,t);return this.store.dispatch(r.addSource(i)),i},e.prototype.addTarget=function(e,t){s.validateType(e,!0),s.validateTargetContract(t);var i=this.addHandler(o.HandlerRole.TARGET,e,t);return this.store.dispatch(r.addTarget(i)),i},e.prototype.containsHandler=function(e){return c(this.dragSources,e)||c(this.dropTargets,e)},e.prototype.getSource=function(e,t){return void 0===t&&(t=!1),l(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)},e.prototype.getTarget=function(e){return l(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)},e.prototype.getSourceType=function(e){return l(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)},e.prototype.getTargetType=function(e){return l(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)},e.prototype.isSourceId=function(e){return d(e)===o.HandlerRole.SOURCE},e.prototype.isTargetId=function(e){return d(e)===o.HandlerRole.TARGET},e.prototype.removeSource=function(e){var t=this;l(this.getSource(e),"Expected an existing source."),this.store.dispatch(r.removeSource(e)),a(function(){t.dragSources.delete(e),t.types.delete(e)})},e.prototype.removeTarget=function(e){l(this.getTarget(e),"Expected an existing target."),this.store.dispatch(r.removeTarget(e)),this.dropTargets.delete(e),this.types.delete(e)},e.prototype.pinSource=function(e){var t=this.getSource(e);l(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t},e.prototype.unpinSource=function(){l(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null},e.prototype.addHandler=function(e,t,i){var r=function(e){var t=n.default().toString();switch(e){case o.HandlerRole.SOURCE:return"S"+t;case o.HandlerRole.TARGET:return"T"+t;default:throw Error("Unknown Handler Role: "+e)}}(e);return this.types.set(r,t),e===o.HandlerRole.SOURCE?this.dragSources.set(r,i):e===o.HandlerRole.TARGET&&this.dropTargets.set(r,i),r},e}();t.default=u},84554:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(446714),n=i(315033),o=i(441143),s=i(59980),l={type:s.INIT_COORDS,payload:{clientOffset:null,sourceClientOffset:null}};t.default=function(e){return function(t,i){void 0===t&&(t=[]),void 0===i&&(i={publishSource:!0});var a=i.publishSource,d=i.clientOffset,c=i.getSourceClientOffset,u=e.getMonitor(),h=e.getRegistry();e.dispatch(r.setClientOffset(d)),function(e,t,i){o(!t.isDragging(),"Cannot call beginDrag while dragging.");for(var r=0;r<e.length;r++){var n=e[r];o(i.getSource(n),"Expected sourceIds to be registered.")}}(t,u,h);var p=function(e,t){for(var i=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){i=e[r];break}return i}(t,u);if(null===p){e.dispatch(l);return}var _=null;d&&(o("function"==typeof c,"When clientOffset is provided, getSourceClientOffset must be a function."),_=c(p)),e.dispatch(r.setClientOffset(d,_));var g=h.getSource(p).beginDrag(u,p);o(n.isObject(g),"Item must be an object."),h.pinSource(p);var m=h.getSourceType(p);return{type:s.BEGIN_DRAG,payload:{itemType:m,item:g,sourceId:p,clientOffset:d||null,sourceClientOffset:_||null,isSourcePublic:!!(void 0===a||a)}}}}},676402:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(59980),o=i(315033),s=i(441143);t.default=function(e){return function(t){void 0===t&&(t={});var i,l=e.getMonitor(),a=e.getRegistry();s(l.isDragging(),"Cannot call drop while not dragging."),s(!l.didDrop(),"Cannot call drop twice during one drag operation."),((i=l.getTargetIds().filter(l.canDropOnTarget,l)).reverse(),i).forEach(function(i,d){var c,u,h,p=(s(void 0===(h=u=(c=a.getTarget(i))?c.drop(l,i):void 0)||o.isObject(h),"Drop result must either be an object or undefined."),void 0===u&&(u=0===d?{}:l.getDropResult()),u),_={type:n.DROP,payload:{dropResult:r({},t,p)}};e.dispatch(_)})}}},852126:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(59980),n=i(441143);t.default=function(e){return function(){var t=e.getMonitor(),i=e.getRegistry();n(t.isDragging(),"Cannot call endDrag while not dragging.");var o=t.getSourceId();return i.getSource(o,!0).endDrag(t,o),i.unpinSource(),{type:r.END_DRAG}}}},645140:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(640809),n=i(59980),o=i(441143);t.default=function(e){return function(t,i){var s=(void 0===i?{}:i).clientOffset;o(Array.isArray(t),"Expected targetIds to be an array.");var l=t.slice(0),a=e.getMonitor(),d=e.getRegistry();return function(e,t,i){o(t.isDragging(),"Cannot call hover while not dragging."),o(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var n=e[r];o(e.lastIndexOf(n)===r,"Expected targetIds to be unique in the passed array."),o(i.getTarget(n),"Expected targetIds to be registered.")}}(l,a,d),function(e,t,i){for(var n=e.length-1;n>=0;n--){var o=e[n],s=t.getTargetType(o);r.default(s,i)||e.splice(n,1)}}(l,d,a.getItemType()),function(e,t,i){for(var r=0;r<e.length;r++){var n=e[r];i.getTarget(n).hover(t,n)}}(l,a,d),{type:n.HOVER,payload:{targetIds:l,clientOffset:s||null}}}}},116434:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(84554),n=i(86045),o=i(645140),s=i(676402),l=i(852126);!function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(59980)),t.default=function(e){return{beginDrag:r.default(e),publishDragSource:n.default(e),hover:o.default(e),drop:s.default(e),endDrag:l.default(e)}}},446714:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(59980);t.setClientOffset=function(e,t){return{type:r.INIT_COORDS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}},86045:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(59980);t.default=function(e){return function(){if(e.getMonitor().isDragging())return{type:r.PUBLISH_DRAG_SOURCE}}}},59980:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_COORDS="dnd-core/INIT_COORDS",t.BEGIN_DRAG="dnd-core/BEGIN_DRAG",t.PUBLISH_DRAG_SOURCE="dnd-core/PUBLISH_DRAG_SOURCE",t.HOVER="dnd-core/HOVER",t.DROP="dnd-core/DROP",t.END_DRAG="dnd-core/END_DRAG"},4963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_SOURCE="dnd-core/ADD_SOURCE",t.ADD_TARGET="dnd-core/ADD_TARGET",t.REMOVE_SOURCE="dnd-core/REMOVE_SOURCE",t.REMOVE_TARGET="dnd-core/REMOVE_TARGET",t.addSource=function(e){return{type:t.ADD_SOURCE,payload:{sourceId:e}}},t.addTarget=function(e){return{type:t.ADD_TARGET,payload:{targetId:e}}},t.removeSource=function(e){return{type:t.REMOVE_SOURCE,payload:{sourceId:e}}},t.removeTarget=function(e){return{type:t.REMOVE_TARGET,payload:{targetId:e}}}},834314:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(441143);t.validateSourceContract=function(e){r("function"==typeof e.canDrag,"Expected canDrag to be a function."),r("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),r("function"==typeof e.endDrag,"Expected endDrag to be a function.")},t.validateTargetContract=function(e){r("function"==typeof e.canDrop,"Expected canDrop to be a function."),r("function"==typeof e.hover,"Expected hover to be a function."),r("function"==typeof e.drop,"Expected beginDrag to be a function.")},t.validateType=function e(t,i){if(i&&Array.isArray(t)){t.forEach(function(t){return e(t,!1)});return}r("string"==typeof t||"symbol"==typeof t,i?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}},294662:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(538334);t.createDragDropManager=function(e,t,i){return new r.default(e,t,i)}},720369:(e,t,i)=>{"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(556141)),r(i(294662))},556141:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),(i=t.HandlerRole||(t.HandlerRole={})).SOURCE="SOURCE",i.TARGET="TARGET"},354014:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(116434),n=i(4963),o=i(171939),s=i(442520),l=i(315033);t.default=function(e,t){switch(void 0===e&&(e=s.NONE),t.type){case r.HOVER:break;case n.ADD_SOURCE:case n.ADD_TARGET:case n.REMOVE_TARGET:case n.REMOVE_SOURCE:return s.NONE;case r.BEGIN_DRAG:case r.PUBLISH_DRAG_SOURCE:case r.END_DRAG:case r.DROP:default:return s.ALL}var i=t.payload,a=i.targetIds,d=void 0===a?[]:a,c=i.prevTargetIds,u=void 0===c?[]:c,h=l.xor(d,u);if(!(h.length>0||!o.areArraysEqual(d,u)))return s.NONE;var p=u[u.length-1],_=d[d.length-1];return p!==_&&(p&&h.push(p),_&&h.push(_)),h}},14095:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(116434),o=i(171939),s={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};t.default=function(e,t){void 0===e&&(e=s);var i=t.payload;switch(t.type){case n.INIT_COORDS:case n.BEGIN_DRAG:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case n.HOVER:if(o.areCoordsEqual(e.clientOffset,i.clientOffset))return e;return r({},e,{clientOffset:i.clientOffset});case n.END_DRAG:case n.DROP:return s;default:return e}}},345596:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(116434),o=i(4963),s=i(315033),l={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};t.default=function(e,t){void 0===e&&(e=l);var i=t.payload;switch(t.type){case n.BEGIN_DRAG:return r({},e,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case n.PUBLISH_DRAG_SOURCE:return r({},e,{isSourcePublic:!0});case n.HOVER:return r({},e,{targetIds:i.targetIds});case o.REMOVE_TARGET:if(-1===e.targetIds.indexOf(i.targetId))return e;return r({},e,{targetIds:s.without(e.targetIds,i.targetId)});case n.DROP:return r({},e,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case n.END_DRAG:return r({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}},649610:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(14095),o=i(345596),s=i(378508),l=i(354014),a=i(938910),d=i(315033);t.default=function(e,t){return void 0===e&&(e={}),{dirtyHandlerIds:l.default(e.dirtyHandlerIds,{type:t.type,payload:r({},t.payload,{prevTargetIds:d.get(e,"dragOperation.targetIds",[])})}),dragOffset:n.default(e.dragOffset,t),refCount:s.default(e.refCount,t),dragOperation:o.default(e.dragOperation,t),stateId:a.default(e.stateId)}}},378508:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(4963);t.default=function(e,t){switch(void 0===e&&(e=0),t.type){case r.ADD_SOURCE:case r.ADD_TARGET:return e+1;case r.REMOVE_SOURCE:case r.REMOVE_TARGET:return e-1;default:return e}}},938910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e=0),e+1}},952705:(e,t)=>{"use strict";function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function r(e,t){return{x:e.x-t.x,y:e.y-t.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.add=i,t.subtract=r,t.getSourceClientOffset=function(e){var t=e.clientOffset,n=e.initialClientOffset,o=e.initialSourceClientOffset;return t&&n&&o?r(i(t,o),n):null},t.getDifferenceFromInitialOffset=function(e){var t=e.clientOffset,i=e.initialClientOffset;return t&&i?r(t,i):null}},442520:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(315033);t.NONE=[],t.ALL=[],t.NONE.__IS_NONE__=!0,t.ALL.__IS_ALL__=!0,t.areDirty=function(e,i){return e!==t.NONE&&(e===t.ALL||void 0===i||r.intersection(i,e).length>0)}},315033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,i){return t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:i||null},e)},t.without=function(e,t){return e.filter(function(e){return e!==t})},t.isString=function(e){return"string"==typeof e},t.isObject=function(e){return"object"==typeof e},t.xor=function(e,t){var i=new Map,r=function(e){return i.set(e,i.has(e)?i.get(e)+1:1)};e.forEach(r),t.forEach(r);var n=[];return i.forEach(function(e,t){1===e&&n.push(t)}),n},t.intersection=function(e,t){return e.filter(function(e){return t.indexOf(e)>-1})}},171939:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.strictEquality=function(e,t){return e===t},t.areCoordsEqual=function(e,t){return!e&&!t||!!e&&!!t&&e.x===t.x&&e.y===t.y},t.areArraysEqual=function(e,i,r){if(void 0===r&&(r=t.strictEquality),e.length!==i.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],i[n]))return!1;return!0}},547227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.default=function(){return i++}},640809:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return null===t?null===e:Array.isArray(e)?e.some(function(e){return e===t}):e===t}},120975:(e,t,i)=>{"use strict";i.r(t),i.d(t,{__DO_NOT_USE__ActionTypes:()=>l,applyMiddleware:()=>_,bindActionCreators:()=>h,combineReducers:()=>c,compose:()=>p,createStore:()=>a,legacy_createStore:()=>d});var r=i(601413);function n(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var o="function"==typeof Symbol&&Symbol.observable||"@@observable",s=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+s(),REPLACE:"@@redux/REPLACE"+s(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+s()}};function a(e,t,i){if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw Error(n(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw Error(n(1));return i(a)(e,t)}if("function"!=typeof e)throw Error(n(2));var r,s=e,d=t,c=[],u=c,h=!1;function p(){u===c&&(u=c.slice())}function _(){if(h)throw Error(n(3));return d}function g(e){if("function"!=typeof e)throw Error(n(4));if(h)throw Error(n(5));var t=!0;return p(),u.push(e),function(){if(t){if(h)throw Error(n(6));t=!1,p();var i=u.indexOf(e);u.splice(i,1),c=null}}}function m(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(n(7));if(void 0===e.type)throw Error(n(8));if(h)throw Error(n(9));try{h=!0,d=s(d,e)}finally{h=!1}for(var t=c=u,i=0;i<t.length;i++)(0,t[i])();return e}return m({type:l.INIT}),(r={dispatch:m,subscribe:g,getState:_,replaceReducer:function(e){if("function"!=typeof e)throw Error(n(10));s=e,m({type:l.REPLACE})}})[o]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(n(11));function t(){e.next&&e.next(_())}return t(),{unsubscribe:g(t)}}})[o]=function(){return this},e},r}var d=a;function c(e){for(var t,i=Object.keys(e),r={},o=0;o<i.length;o++){var s=i[o];"function"==typeof e[s]&&(r[s]=e[s])}var a=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var i=e[t];if(void 0===i(void 0,{type:l.INIT}))throw Error(n(12));if(void 0===i(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw Error(n(13))})}(r)}catch(e){t=e}return function(e,i){if(void 0===e&&(e={}),t)throw t;for(var o=!1,s={},l=0;l<a.length;l++){var d=a[l],c=r[d],u=e[d],h=c(u,i);if(void 0===h)throw i&&i.type,Error(n(14));s[d]=h,o=o||h!==u}return(o=o||a.length!==Object.keys(e).length)?s:e}}function u(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return u(e,t);if("object"!=typeof e||null===e)throw Error(n(16));var i={};for(var r in e){var o=e[r];"function"==typeof o&&(i[r]=u(o,t))}return i}function p(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function _(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return function(){var i=e.apply(void 0,arguments),o=function(){throw Error(n(15))},s={getState:i.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=t.map(function(e){return e(s)});return o=p.apply(void 0,l)(i.dispatch),(0,r.Z)((0,r.Z)({},i),{},{dispatch:o})}}}},701305:e=>{"use strict";var t=[],i=[];e.exports=/**
 * Checks if two values are equal. Values may be primitives, arrays, or objects.
 * Returns true if both arguments have the same keys and values.
 *
 * @see http://underscorejs.org
 * @copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * @license MIT
 */function(e,r){var n=t.length?t.pop():[],o=i.length?i.pop():[],s=function e(t,i,r,n){if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i||"object"!=typeof t||"object"!=typeof i)return!1;var o=Object.prototype.toString,s=o.call(t);if(s!=o.call(i))return!1;switch(s){case"[object String]":return t==String(i);case"[object Number]":return!(isNaN(t)||isNaN(i))&&t==Number(i);case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}for(var l=r.length;l--;)if(r[l]==t)return n[l]==i;r.push(t),n.push(i);var a=0;if("[object Array]"===s){if((a=t.length)!==i.length)return!1;for(;a--;)if(!e(t[a],i[a],r,n))return!1}else{if(t.constructor!==i.constructor)return!1;if(t.hasOwnProperty("valueOf")&&i.hasOwnProperty("valueOf"))return t.valueOf()==i.valueOf();var d=Object.keys(t);if(d.length!=Object.keys(i).length)return!1;for(var c=0;c<d.length;c++)if(!e(t[d[c]],i[d[c]],r,n))return!1}return r.pop(),n.pop(),!0}(e,r,n,o);return n.length=0,o.length=0,t.push(n),i.push(o),s}},60139:e=>{"use strict";function t(e){return function(){return e}}var i=function(){};i.thatReturns=t,i.thatReturnsFalse=t(!1),i.thatReturnsTrue=t(!0),i.thatReturnsNull=t(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},663620:(e,t,i)=>{"use strict";var r=i(60139);e.exports=r},537347:e=>{!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function r(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function n(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function o(e,i){function r(){n(o)&&o.a.parentNode&&i(o.g)}var o=e;t(e.b,r),t(e.c,r),n(e)}function s(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var l=null,a=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function h(e,t){return[e.style,e.weight,!function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?"":e.stretch,"100px",t].join(" ")}s.prototype.load=function(e,t){var n=this,s=e||"BESbswy",d=0,c=t||3e3,p=(new Date).getTime();return new Promise(function(e,t){if(u()&&!function(){if(null===a){if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);a=!!e&&603>parseInt(e[1],10)}else a=!1}return a}()){var _,g=new Promise(function(e,t){!function i(){(new Date).getTime()-p>=c?t(Error(""+c+"ms timeout exceeded")):document.fonts.load(h(n,'"'+n.family+'"'),s).then(function(t){1<=t.length?e():setTimeout(i,25)},t)}()});Promise.race([new Promise(function(e,t){d=setTimeout(function(){t(Error(""+c+"ms timeout exceeded"))},c)}),g]).then(function(){clearTimeout(d),e(n)},t)}else _=function(){function a(){var t;(t=-1!=m&&-1!=f||-1!=m&&-1!=x||-1!=f&&-1!=x)&&((t=m!=f&&m!=x&&f!=x)||(null===l&&(l=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=l&&(m==b&&f==b&&x==b||m==y&&f==y&&x==y||m==v&&f==v&&x==v)),t=!t),t&&(P.parentNode&&P.parentNode.removeChild(P),clearTimeout(d),e(n))}var u=new i(s),_=new i(s),g=new i(s),m=-1,f=-1,x=-1,b=-1,y=-1,v=-1,P=document.createElement("div");P.dir="ltr",r(u,h(n,"sans-serif")),r(_,h(n,"serif")),r(g,h(n,"monospace")),P.appendChild(u.a),P.appendChild(_.a),P.appendChild(g.a),document.body.appendChild(P),b=u.a.offsetWidth,y=_.a.offsetWidth,v=g.a.offsetWidth,function e(){if((new Date).getTime()-p>=c)P.parentNode&&P.parentNode.removeChild(P),t(Error(""+c+"ms timeout exceeded"));else{var i=document.hidden;(!0===i||void 0===i)&&(m=u.a.offsetWidth,f=_.a.offsetWidth,x=g.a.offsetWidth,a()),d=setTimeout(e,50)}}(),o(u,function(e){m=e,a()}),r(u,h(n,'"'+n.family+'",sans-serif')),o(_,function(e){f=e,a()}),r(_,h(n,'"'+n.family+'",serif')),o(g,function(e){x=e,a()}),r(g,h(n,'"'+n.family+'",monospace'))},document.body?_():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),_()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),_())})})},e.exports=s}()},108679:(e,t,i)=>{"use strict";var r=i(121296),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function a(e){return r.isMemo(e)?s:l[e.$$typeof]||n}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[r.Memo]=s;var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,r){if("string"!=typeof i){if(_){var n=p(i);n&&n!==_&&e(t,n,r)}var s=c(i);u&&(s=s.concat(u(i)));for(var l=a(t),g=a(i),m=0;m<s.length;++m){var f=s[m];if(!o[f]&&!(r&&r[f])&&!(g&&g[f])&&!(l&&l[f])){var x=h(i,f);try{d(t,f,x)}catch(e){}}}}return t}},396103:(e,t)=>{"use strict";/** @license React v16.8.4
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,a=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case u:case o:case l:case s:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case a:return e;default:return t}}case g:case _:case n:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=a,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=_,t.Portal=n,t.Profiler=l,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===u||e===l||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===a||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===o},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===n},t.isProfiler=function(e){return m(e)===l},t.isStrictMode=function(e){return m(e)===s},t.isSuspense=function(e){return m(e)===p}},121296:(e,t,i)=>{"use strict";e.exports=i(396103)},288709:e=>{e.exports=/[\-0-9a-z\xB7\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0135\u0137\u0138\u013A\u013C\u013E\u0142\u0144\u0146\u0148\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BB\u01BD-\u01C3\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u02AF\u02B9-\u02C1\u02C6-\u02D1\u02EC\u02EE\u0300-\u033F\u0342\u0346-\u034E\u0350-\u036F\u0371\u0373\u0375\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF\u03F3\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u0483-\u0487\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0559\u0561-\u0586\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F4\u0610-\u061A\u0620-\u063F\u0641-\u0669\u066E-\u0674\u0679-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u0800-\u082D\u0840-\u085B\u0900-\u0957\u0960-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09E0-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A35\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A5C\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E32\u0E34-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB2\u0EB4-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F00\u0F0B\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F42\u0F44-\u0F47\u0F49-\u0F4C\u0F4E-\u0F51\u0F53-\u0F56\u0F58-\u0F5B\u0F5D-\u0F68\u0F6A-\u0F6C\u0F71\u0F72\u0F74\u0F7A-\u0F80\u0F82-\u0F84\u0F86-\u0F92\u0F94-\u0F97\u0F99-\u0F9C\u0F9E-\u0FA1\u0FA3-\u0FA6\u0FA8-\u0FAB\u0FAD-\u0FB8\u0FBA-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10D0-\u10FA\u1200-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17B3\u17B6-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BAA\u1BAE-\u1BB9\u1BC0-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF2\u1D00-\u1D2B\u1D2F\u1D3B\u1D4E\u1D6B-\u1D77\u1D79-\u1D9A\u1DC0-\u1DE6\u1DFC-\u1DFF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E99\u1E9C\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70\u1F72\u1F74\u1F76\u1F78\u1F7A\u1F7C\u1FB0\u1FB1\u1FB6\u1FC6\u1FD0-\u1FD2\u1FD6\u1FD7\u1FE0-\u1FE2\u1FE4-\u1FE7\u1FF6\u200C\u200D\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE-\u2CF1\u2D00-\u2D25\u2D30-\u2D65\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3041-\u3096\u3099\u309A\u309D\u309E\u30A1-\u30FE\u3105-\u312D\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCB\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D-\uA66F\uA67C\uA67D\uA67F\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA6A0-\uA6E5\uA6F0\uA6F1\uA717-\uA71F\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA788\uA78C\uA78E\uA791\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uFA0E\uFA0F\uFA11\uFA13\uFA14\uFA1F\uFA21\uFA23\uFA24\uFA27-\uFA29\uFB1E\uFE20-\uFE26\uFE73]|\uD800[\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD802[\uDC40-\uDC55\uDD00-\uDD15\uDD20-\uDD39\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72]|\uD803[\uDC00-\uDC48]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC80-\uDCBA]|\uD808[\uDC00-\uDF6E]|[\uD80C\uD840-\uD868\uD86A-\uD86C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD81A[\uDC00-\uDE38]|\uD82C[\uDC00\uDC01]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D]/},441143:e=>{"use strict";e.exports=function(e,t,i,r,n,o,s,l){if(!e){var a;if(void 0===t)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,r,n,o,s,l],c=0;(a=Error(t.replace(/%s/g,function(){return d[c++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}},16243:e=>{if(!t)var t={map:function(e,t){var i={};return t?e.map(function(e,r){return i.index=r,t.call(i,e)}):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var i={};return e.reduce(t?function(e,r,n){return i.index=n,e+t.call(i,r)}:function(e,t){return e+t},0)},max:function(e,i){return Math.max.apply(null,i?t.map(e,i):e)}};var i=function(){function e(e,t,i){return(e<<10)+(t<<5)+i}function i(e){var t=[],i=!1;function r(){t.sort(e),i=!0}return{push:function(e){t.push(e),i=!1},peek:function(e){return i||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return i||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return i||r(),t}}}function r(e,t,i,r,n,o,s){this.r1=e,this.r2=t,this.g1=i,this.g2=r,this.b1=n,this.b2=o,this.histo=s}function n(){this.vboxes=new i(function(e,i){return t.naturalOrder(e.vbox.count()*e.vbox.volume(),i.vbox.count()*i.vbox.volume())})}return r.prototype={volume:function(e){return(!this._volume||e)&&(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var i=this.histo;if(!this._count_set||t){var r,n,o,s=0;for(r=this.r1;r<=this.r2;r++)for(n=this.g1;n<=this.g2;n++)for(o=this.b1;o<=this.b2;o++)s+=i[e(r,n,o)]||0;this._count=s,this._count_set=!0}return this._count},copy:function(){return new r(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){var i=this.histo;if(!this._avg||t){var r,n,o,s,l=0,a=0,d=0,c=0;for(n=this.r1;n<=this.r2;n++)for(o=this.g1;o<=this.g2;o++)for(s=this.b1;s<=this.b2;s++)l+=r=i[e(n,o,s)]||0,a+=r*(n+.5)*8,d+=r*(o+.5)*8,c+=r*(s+.5)*8;l?this._avg=[~~(a/l),~~(d/l),~~(c/l)]:this._avg=[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(e){var t=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},n.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,i=0;i<t.size();i++)if(t.peek(i).vbox.contains(e))return t.peek(i).color;return this.nearest(e)},nearest:function(e){for(var t,i,r,n=this.vboxes,o=0;o<n.size();o++)((i=Math.sqrt(Math.pow(e[0]-n.peek(o).color[0],2)+Math.pow(e[1]-n.peek(o).color[1],2)+Math.pow(e[2]-n.peek(o).color[2],2)))<t||void 0===t)&&(t=i,r=n.peek(o).color);return r},forcebw:function(){var e=this.vboxes;e.sort(function(e,i){return t.naturalOrder(t.sum(e.color),t.sum(i.color))});var i=e[0].color;i[0]<5&&i[1]<5&&i[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,n=e[r].color;n[0]>251&&n[1]>251&&n[2]>251&&(e[r].color=[255,255,255])}},{quantize:function(o,s){if(!o.length||s<2||s>256)return!1;var l,a,d,c,u,h,p,_,g,m,f,x=(a=Array(32768),o.forEach(function(t){a[l=e(t[0]>>3,t[1]>>3,t[2]>>3)]=(a[l]||0)+1}),a),b=0;x.forEach(function(){b++});var y=(h=1e6,p=0,_=1e6,g=0,m=1e6,f=0,o.forEach(function(e){d=e[0]>>3,c=e[1]>>3,u=e[2]>>3,d<h?h=d:d>p&&(p=d),c<_?_=c:c>g&&(g=c),u<m?m=u:u>f&&(f=u)}),new r(h,p,_,g,m,f,x)),v=new i(function(e,i){return t.naturalOrder(e.count(),i.count())});function P(i,r){for(var n,o=1,s=0;s<1e3;){if(!(n=i.pop()).count()){i.push(n),s++;continue}var l=function(i,r){if(r.count()){var n=r.r2-r.r1+1,o=r.g2-r.g1+1,s=r.b2-r.b1+1,l=t.max([n,o,s]);if(1==r.count())return[r.copy()];var a,d,c,u,h=0,p=[],_=[];if(l==n)for(a=r.r1;a<=r.r2;a++){for(u=0,d=r.g1;d<=r.g2;d++)for(c=r.b1;c<=r.b2;c++)u+=i[e(a,d,c)]||0;h+=u,p[a]=h}else if(l==o)for(a=r.g1;a<=r.g2;a++){for(u=0,d=r.r1;d<=r.r2;d++)for(c=r.b1;c<=r.b2;c++)u+=i[e(d,a,c)]||0;h+=u,p[a]=h}else for(a=r.b1;a<=r.b2;a++){for(u=0,d=r.r1;d<=r.r2;d++)for(c=r.g1;c<=r.g2;c++)u+=i[e(d,c,a)]||0;h+=u,p[a]=h}return p.forEach(function(e,t){_[t]=h-e}),function(e){var t,i,n,o,s,l=e+"1",d=e+"2",c=0;for(a=r[l];a<=r[d];a++)if(p[a]>h/2){for(n=r.copy(),o=r.copy(),s=(t=a-r[l])<=(i=r[d]-a)?Math.min(r[d]-1,~~(a+i/2)):Math.max(r[l],~~(a-1-t/2));!p[s];)s++;for(c=_[s];!c&&p[s-1];)c=_[--s];return n[d]=s,o[l]=n[d]+1,[n,o]}}(l==n?"r":l==o?"g":"b")}}(x,n),a=l[0],d=l[1];if(!a||(i.push(a),d&&(i.push(d),o++),o>=r||s++>1e3))return}}v.push(y),P(v,.75*s);for(var S=new i(function(e,i){return t.naturalOrder(e.count()*e.volume(),i.count()*i.volume())});v.size();)S.push(v.pop());P(S,s-S.size());for(var A=new n;S.size();)A.push(S.pop());return A}}}();e.exports=i.quantize},860682:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(946580);t.isFirefox=r.memoize(function(){return/firefox/i.test(navigator.userAgent)}),t.isSafari=r.memoize(function(){return!!window.safari})},527594:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(946580),n=function(){function e(e){this.entered=[],this.isNodeInDocument=e}return e.prototype.enter=function(e){var t=this,i=this.entered.length;return this.entered=r.union(this.entered.filter(function(i){return t.isNodeInDocument(i)&&(!i.contains||i.contains(e))}),[e]),0===i&&this.entered.length>0},e.prototype.leave=function(e){var t=this.entered.length;return this.entered=r.without(this.entered.filter(this.isNodeInDocument),e),t>0&&0===this.entered.length},e.prototype.reset=function(){this.entered=[]},e}();t.default=n},613087:function(e,t,i){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=i(527594),o=i(860682),s=i(796538),l=i(36076),a=i(278201),d=function(){function e(e){var t=this;this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.getSourceClientOffset=function(e){return s.getNodeClientOffset(t.sourceNodes.get(e))},this.endDragNativeItem=function(){t.isDraggingNativeItem()&&(t.actions.endDrag(),t.registry.removeSource(t.currentNativeHandle),t.currentNativeHandle=null,t.currentNativeSource=null)},this.isNodeInDocument=function(e){return!!document&&document.body.contains(e)||!!t.window&&t.window.document.body.contains(e)},this.endDragIfSourceWasRemovedFromDOM=function(){var e=t.currentDragSourceNode;!t.isNodeInDocument(e)&&t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragStartCapture=function(){t.clearCurrentDragSourceNode(),t.dragStartSourceIds=[]},this.handleTopDragStart=function(e){var i=t.dragStartSourceIds;t.dragStartSourceIds=null;var r=s.getEventClientOffset(e);t.monitor.isDragging()&&t.actions.endDrag(),t.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:t.getSourceClientOffset,clientOffset:r});var n=e.dataTransfer,o=l.matchNativeItemType(n);if(t.monitor.isDragging()){if(n&&"function"==typeof n.setDragImage){var a=t.monitor.getSourceId(),d=t.sourceNodes.get(a),c=t.sourcePreviewNodes.get(a)||d;if(c){var u=t.getCurrentSourcePreviewNodeOptions(),h=u.anchorX,p=u.anchorY,_=u.offsetX,g=u.offsetY,m=s.getDragPreviewOffset(d,c,r,{anchorX:h,anchorY:p},{offsetX:_,offsetY:g});n.setDragImage(c,m.x,m.y)}}try{n.setData("application/json",{})}catch(e){}t.setCurrentDragSourceNode(e.target),t.getCurrentSourcePreviewNodeOptions().captureDraggingState?t.actions.publishDragSource():setTimeout(function(){return t.actions.publishDragSource()},0)}else if(o)t.beginDragNativeItem(o);else{if(n&&!n.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=function(){t.clearCurrentDragSourceNode()&&t.actions.endDrag()},this.handleTopDragEnterCapture=function(e){if(t.dragEnterTargetIds=[],!(!t.enterLeaveCounter.enter(e.target)||t.monitor.isDragging())){var i=e.dataTransfer,r=l.matchNativeItemType(i);r&&t.beginDragNativeItem(r)}},this.handleTopDragEnter=function(e){var i=t.dragEnterTargetIds;t.dragEnterTargetIds=[],t.monitor.isDragging()&&(t.altKeyPressed=e.altKey,o.isFirefox()||t.actions.hover(i,{clientOffset:s.getEventClientOffset(e)}),i.some(function(e){return t.monitor.canDropOnTarget(e)})&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())))},this.handleTopDragOverCapture=function(){t.dragOverTargetIds=[]},this.handleTopDragOver=function(e){var i=t.dragOverTargetIds;if(t.dragOverTargetIds=[],!t.monitor.isDragging()){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none");return}t.altKeyPressed=e.altKey,t.actions.hover(i||[],{clientOffset:s.getEventClientOffset(e)}),(i||[]).some(function(e){return t.monitor.canDropOnTarget(e)})?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=t.getCurrentDropEffect())):t.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=function(e){t.isDraggingNativeItem()&&e.preventDefault(),t.enterLeaveCounter.leave(e.target)&&t.isDraggingNativeItem()&&t.endDragNativeItem()},this.handleTopDropCapture=function(e){t.dropTargetIds=[],e.preventDefault(),t.isDraggingNativeItem()&&t.currentNativeSource.mutateItemByReadingDataTransfer(e.dataTransfer),t.enterLeaveCounter.reset()},this.handleTopDrop=function(e){var i=t.dropTargetIds;t.dropTargetIds=[],t.actions.hover(i,{clientOffset:s.getEventClientOffset(e)}),t.actions.drop({dropEffect:t.getCurrentDropEffect()}),t.isDraggingNativeItem()?t.endDragNativeItem():t.endDragIfSourceWasRemovedFromDOM()},this.handleSelectStart=function(e){var t=e.target;"function"!=typeof t.dragDrop||"INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop())},this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.context=e.getContext(),this.enterLeaveCounter=new n.default(this.isNodeInDocument)}return Object.defineProperty(e.prototype,"window",{get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0},enumerable:!0,configurable:!0}),e.prototype.setup=function(){if(void 0!==this.window){if(this.window.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");this.window.__isReactDndBackendSetUp=!0,this.addEventListeners(this.window)}},e.prototype.teardown=function(){void 0!==this.window&&(this.window.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.window),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&this.window.cancelAnimationFrame(this.asyncEndDragFrameId))},e.prototype.connectDragPreview=function(e,t,i){var r=this;return this.sourcePreviewNodeOptions.set(e,i),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}},e.prototype.connectDragSource=function(e,t,i){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,i);var n=function(t){return r.handleDragStart(t,e)},o=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",n),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",n),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}},e.prototype.connectDropTarget=function(e,t){var i=this,r=function(t){return i.handleDragEnter(t,e)},n=function(t){return i.handleDragOver(t,e)},o=function(t){return i.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",n),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",n),t.removeEventListener("drop",o)}},e.prototype.addEventListeners=function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.removeEventListeners=function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))},e.prototype.getCurrentSourceNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return r({dropEffect:this.altKeyPressed?"copy":"move"},t||{})},e.prototype.getCurrentDropEffect=function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect},e.prototype.getCurrentSourcePreviewNodeOptions=function(){var e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return r({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})},e.prototype.isDraggingNativeItem=function(){var e=this.monitor.getItemType();return Object.keys(a).some(function(t){return a[t]===e})},e.prototype.beginDragNativeItem=function(e){this.clearCurrentDragSourceNode(),this.currentNativeSource=l.createNativeDragSource(e),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])},e.prototype.setCurrentDragSourceNode=function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(function(){return t.window&&t.window.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)},1e3)},e.prototype.clearCurrentDragSourceNode=function(){return!!this.currentDragSourceNode&&(this.currentDragSourceNode=null,this.window&&(this.window.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.window.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)),this.mouseMoveTimeoutTimer=null,!0)},e.prototype.handleDragStart=function(e,t){this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t)},e.prototype.handleDragEnter=function(e,t){this.dragEnterTargetIds.unshift(t)},e.prototype.handleDragOver=function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)},e.prototype.handleDrop=function(e,t){this.dropTargetIds.unshift(t)},e}();t.default=d},328775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i,r,n,o=e.length,s=[],l=0;l<o;l++)s.push(l);s.sort(function(t,i){return e[t]<e[i]?-1:1});for(var a=[],d=[],c=[],l=0;l<o-1;l++)i=e[l+1]-e[l],r=t[l+1]-t[l],d.push(i),a.push(r),c.push(r/i);for(var u=[c[0]],l=0;l<d.length-1;l++){var h=c[l],p=c[l+1];if(h*p<=0)u.push(0);else{i=d[l];var _=d[l+1],g=i+_;u.push(3*g/((g+_)/h+(g+i)/p))}}u.push(c[c.length-1]);for(var m=[],f=[],l=0;l<u.length-1;l++){n=c[l];var x=u[l],b=1/d[l],g=x+u[l+1]-n-n;m.push((n-x-g)*b),f.push(g*b*b)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=m,this.c3s=f}return e.prototype.interpolate=function(e){var t,i=this.xs,r=this.ys,n=this.c1s,o=this.c2s,s=this.c3s,l=i.length-1;if(e===i[l])return r[l];for(var a=0,d=s.length-1;a<=d;){var c=i[t=Math.floor(.5*(a+d))];if(c<e)a=t+1;else{if(!(c>e))return r[t];d=t-1}}var u=e-i[l=Math.max(0,d)],h=u*u;return r[l]+n[l]*u+o[l]*h+s[l]*u*h},e}();t.default=i},50013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;this.config=e,this.item={},Object.keys(this.config.exposeProperties).forEach(function(e){Object.defineProperty(t.item,e,{configurable:!0,enumerable:!0,get:function(){return console.warn("Browser doesn't allow reading \""+e+'" until the drop event.'),null}})})}return e.prototype.mutateItemByReadingDataTransfer=function(e){var t=this,i={};e&&Object.keys(this.config.exposeProperties).forEach(function(r){i[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes)}}),Object.defineProperties(this.item,i)},e.prototype.canDrag=function(){return!0},e.prototype.beginDrag=function(){return this.item},e.prototype.isDragging=function(e,t){return t===e.getSourceId()},e.prototype.endDrag=function(){},e}();t.NativeDragSource=i},345349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFromDataTransfer=function(e,t,i){var r=t.reduce(function(t,i){return t||e.getData(i)},"");return null!=r?r:i}},36076:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(226851),n=i(50013);t.createNativeDragSource=function(e){return new n.NativeDragSource(r.nativeTypesConfig[e])},t.matchNativeItemType=function(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(r.nativeTypesConfig).filter(function(e){return r.nativeTypesConfig[e].matchesTypes.some(function(e){return t.indexOf(e)>-1})})[0]||null}},226851:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=i(278201),o=i(345349);t.nativeTypesConfig=((r={})[n.FILE]={exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items}},matchesTypes:["Files"]},r[n.URL]={exposeProperties:{urls:function(e,t){return o.getDataFromDataTransfer(e,t,"").split("\n")}},matchesTypes:["Url","text/uri-list"]},r[n.TEXT]={exposeProperties:{text:function(e,t){return o.getDataFromDataTransfer(e,t,"")}},matchesTypes:["Text","text/plain"]},r)},278201:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FILE="__NATIVE_FILE__",t.URL="__NATIVE_URL__",t.TEXT="__NATIVE_TEXT__"},796538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(860682),n=i(328775);function o(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var i=t.getBoundingClientRect(),r=i.top;return{x:i.left,y:r}}t.getNodeClientOffset=o,t.getEventClientOffset=function(e){return{x:e.clientX,y:e.clientY}},t.getDragPreviewOffset=function(e,t,i,s,l){var a,d,c,u="IMG"===t.nodeName&&(r.isFirefox()||!document.documentElement.contains(t)),h=o(u?e:t),p={x:i.x-h.x,y:i.y-h.y},_=e.offsetWidth,g=e.offsetHeight,m=s.anchorX,f=s.anchorY,x=(a=u?t.width:_,d=u?t.height:g,r.isSafari()&&u&&(d/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:d}),b=x.dragPreviewWidth,y=x.dragPreviewHeight,v=l.offsetX,P=l.offsetY;return{x:0===v||v?v:new n.default([0,.5,1],[p.x,p.x/_*b,p.x+b-_]).interpolate(m),y:0===P||P?P:(c=new n.default([0,.5,1],[p.y,p.y/g*y,p.y+y-g]).interpolate(f),r.isSafari()&&u&&(c+=(window.devicePixelRatio-1)*y),c)}}},19402:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return i||((i=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),i}},395141:(e,t,i)=>{"use strict";var r=i(613087);i(19402).default;var n=i(278201);t.NativeTypes=n,t.ZP=function(e){return new r.default(e)}},946580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e){var t=null;return function(){return null==t&&(t=e()),t}},t.without=function(e,t){return e.filter(function(e){return e!==t})},t.union=function(e,t){var i=new Set,r=function(e){return i.add(e)};e.forEach(r),t.forEach(r);var n=[];return i.forEach(function(e){return n.push(e)}),n}},925237:function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},s=this&&this.__rest||function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)0>t.indexOf(r[n])&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i};Object.defineProperty(t,"__esModule",{value:!0});var l=i(667294),a=i(720369),d=i(496395),c=i(489745),u=i(114774),h=i(215956);function p(e,t,i){return{dragDropManager:a.createDragDropManager(e,t,i)}}t.context=l.createContext({dragDropManager:void 0}),t.Consumer=t.context.Consumer,t.Provider=t.context.Provider,t.createChildContext=p,t.DragDropContextProvider=function(e){var i=e.children,r=s(e,["children"]),n="manager"in r?{dragDropManager:r.manager}:p(r.backend,r.context,r.debugMode);return l.createElement(t.Provider,{value:n},i)},t.DragDropContext=function(e,i,r){d.default("DragDropContext","backend",e);var s=p(e,i,r);return function(e){var i=e.displayName||e.name||"Component";return h(function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e.ref=l.createRef(),e.getManager=function(){return s.dragDropManager},e}return n(a,r),a.prototype.getDecoratedComponentInstance=function(){return u(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},a.prototype.render=function(){return l.createElement(t.Provider,{value:s},l.createElement(e,o({},this.props,{ref:c.isRefable(e)?this.ref:null})))},a.DecoratedComponent=e,a.displayName="DragDropContext("+i+")",a}(l.Component),e)}}},328202:function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(667294),l=i(496395),a=i(925237),d=i(489745),c=i(353924),u=i(215956),h=i(114774),p=i(596774);t.default=function(e,t){return void 0===t&&(t={}),l.default("DragLayer","collect[, options]",e,t),h("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),h(c.isPlainObject(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(i){var r=t.arePropsEqual,l=void 0===r?p:r,c=i.displayName||i.name||"Component";return u(function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCurrentlyMounted=!1,e.ref=s.createRef(),e.handleChange=function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();p(t,e.state)||e.setState(t)}},e}return n(r,t),r.prototype.getDecoratedComponentInstance=function(){return h(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current},r.prototype.shouldComponentUpdate=function(e,t){return!l(e,this.props)||!p(t,this.state)},r.prototype.componentDidMount=function(){this.isCurrentlyMounted=!0,this.handleChange()},r.prototype.componentWillUnmount=function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)},r.prototype.render=function(){var e=this;return s.createElement(a.Consumer,null,function(t){var r=t.dragDropManager;return void 0===r?null:(e.receiveDragDropManager(r),e.isCurrentlyMounted)?s.createElement(i,o({},e.props,e.state,{ref:d.isRefable(i)?e.ref:null})):null})},r.prototype.receiveDragDropManager=function(e){if(void 0===this.manager){this.manager=e,h("object"==typeof e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",c,c);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}},r.prototype.getCurrentState=function(){return this.manager?e(this.manager.getMonitor(),this.props):{}},r.displayName="DragLayer("+c+")",r.DecoratedComponent=i,r}(s.Component),i)}}},344319:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294).memo(function(e){var t=e.connect,i=e.src;if("undefined"!=typeof Image){var r=new Image;r.src=i,r.onload=function(){return t(r)}}return null});r.displayName="DragPreviewImage",t.default=r},450793:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(496395),n=i(42742),o=i(910513),s=i(626706),l=i(391081),a=i(147277),d=i(270942),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),r.default("DragSource","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(d.default(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var _=s.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',i),function(e){return n.default({containerDisplayName:"DragSource",createHandler:_,registerHandler:o.default,createConnector:function(e){return new a.default(e)},createMonitor:function(e){return new l.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},391081:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(114774),n=!1,o=!1,s=function(){function e(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.sourceId=e},e.prototype.getHandlerId=function(){return this.sourceId},e.prototype.canDrag=function(){r(!n,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return n=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{n=!1}},e.prototype.isDragging=function(){if(!this.sourceId)return!1;r(!o,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return o=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{o=!1}},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.isDraggingSource=function(e){return this.internalMonitor.isDraggingSource(e)},e.prototype.isOverTarget=function(e,t){return this.internalMonitor.isOverTarget(e,t)},e.prototype.getTargetIds=function(){return this.internalMonitor.getTargetIds()},e.prototype.isSourcePublic=function(){return this.internalMonitor.isSourcePublic()},e.prototype.getSourceId=function(){return this.internalMonitor.getSourceId()},e.prototype.subscribeToOffsetChange=function(e){return this.internalMonitor.subscribeToOffsetChange(e)},e.prototype.canDragSource=function(e){return this.internalMonitor.canDragSource(e)},e.prototype.canDropOnTarget=function(e){return this.internalMonitor.canDropOnTarget(e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=s},206059:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(496395),n=i(42742),o=i(548537),s=i(329492),l=i(270942),a=i(596177),d=i(750986),c=i(353924),u=i(114774);t.default=function(e,t,i,h){void 0===h&&(h={}),r.default("DropTarget","type, spec, collect[, options]",e,t,i,h);var p=e;"function"!=typeof e&&(u(l.default(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),p=function(){return e}),u(c.isPlainObject(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var _=s.default(t);return u("function"==typeof i,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),u(c.isPlainObject(h),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',i),function(e){return n.default({containerDisplayName:"DropTarget",createHandler:_,registerHandler:o.default,createMonitor:function(e){return new a.default(e)},createConnector:function(e){return new d.default(e)},DecoratedComponent:e,getType:p,collect:i,options:h})}}},596177:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(114774),n=!1,o=function(){function e(e){this.targetId=null,this.internalMonitor=e.getMonitor()}return e.prototype.receiveHandlerId=function(e){this.targetId=e},e.prototype.getHandlerId=function(){return this.targetId},e.prototype.subscribeToStateChange=function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)},e.prototype.canDrop=function(){if(!this.targetId)return!1;r(!n,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return n=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{n=!1}},e.prototype.isOver=function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)},e.prototype.getItemType=function(){return this.internalMonitor.getItemType()},e.prototype.getItem=function(){return this.internalMonitor.getItem()},e.prototype.getDropResult=function(){return this.internalMonitor.getDropResult()},e.prototype.didDrop=function(){return this.internalMonitor.didDrop()},e.prototype.getInitialClientOffset=function(){return this.internalMonitor.getInitialClientOffset()},e.prototype.getInitialSourceClientOffset=function(){return this.internalMonitor.getInitialSourceClientOffset()},e.prototype.getSourceClientOffset=function(){return this.internalMonitor.getSourceClientOffset()},e.prototype.getClientOffset=function(){return this.internalMonitor.getClientOffset()},e.prototype.getDifferenceFromInitialOffset=function(){return this.internalMonitor.getDifferenceFromInitialOffset()},e}();t.default=o},147277:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(65435),n=i(965525),o=i(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=r.default({dragSource:function(e,i){t.dragSourceOptions=i||null,n.isRef(e)?t.dragSourceRef=e:t.dragSourceNode=e,t.reconnectDragSource()},dragPreview:function(e,i){t.dragPreviewOptions=i||null,n.isRef(e)?t.dragPreviewRef=e:t.dragPreviewNode=e,t.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null}return e.prototype.receiveHandlerId=function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dragSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragSourceOptions",{get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreviewOptions",{get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){this.reconnectDragSource(),this.reconnectDragPreview()},e.prototype.reconnectDragSource=function(){var e=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();e&&this.disconnectDragSource();var t=this.dragSource;if(this.handlerId){if(!t){this.lastConnectedDragSource=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=t,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,t,this.dragSourceOptions))}},e.prototype.reconnectDragPreview=function(){var e=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();e&&this.disconnectDragPreview();var t=this.dragPreview;this.handlerId&&t&&e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))},e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didConnectedDragSourceChange=function(){return this.lastConnectedDragSource!==this.dragSource},e.prototype.didConnectedDragPreviewChange=function(){return this.lastConnectedDragPreview!==this.dragPreview},e.prototype.didDragSourceOptionsChange=function(){return!o(this.lastConnectedDragSourceOptions,this.dragSourceOptions)},e.prototype.didDragPreviewOptionsChange=function(){return!o(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)},e.prototype.disconnectDragSource=function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},e.prototype.disconnectDragPreview=function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)},Object.defineProperty(e.prototype,"dragSource",{get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragPreview",{get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},750986:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(65435),n=i(965525),o=i(596774),s=function(){function e(e){var t=this;this.backend=e,this.hooks=r.default({dropTarget:function(e,i){t.dropTargetOptions=i,n.isRef(e)?t.dropTargetRef=e:t.dropTargetNode=e,t.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null}return Object.defineProperty(e.prototype,"connectTarget",{get:function(){return this.dropTarget},enumerable:!0,configurable:!0}),e.prototype.reconnect=function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}},e.prototype.receiveHandlerId=function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())},Object.defineProperty(e.prototype,"dropTargetOptions",{get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e},enumerable:!0,configurable:!0}),e.prototype.didHandlerIdChange=function(){return this.lastConnectedHandlerId!==this.handlerId},e.prototype.didDropTargetChange=function(){return this.lastConnectedDropTarget!==this.dropTarget},e.prototype.didOptionsChange=function(){return!o(this.lastConnectedDropTargetOptions,this.dropTargetOptions)},e.prototype.disconnectDropTarget=function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)},Object.defineProperty(e.prototype,"dropTarget",{get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current},enumerable:!0,configurable:!0}),e}();t.default=s},626706:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(487943);i(353924);var n=i(114774),o=["canDrag","beginDrag","isDragging","endDrag"],s=["beginDrag"],l=function(){function e(e,t,i){var r=this;this.spec=e,this.monitor=t,this.ref=i,this.props=null,this.beginDrag=function(){if(r.props)return r.spec.beginDrag(r.props,r.monitor,r.ref.current)}}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.canDrag=function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))},e.prototype.isDragging=function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())},e.prototype.endDrag=function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,r.getDecoratedComponent(this.ref))},e}();t.default=function(e){return Object.keys(e).forEach(function(t){n(o.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',o.join(", "),t),n("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),s.forEach(function(t){n("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),function(t,i){return new l(e,t,i)}}},329492:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(487943);i(353924);var n=i(114774),o=["canDrop","hover","drop"],s=function(){function e(e,t,i){this.spec=e,this.monitor=t,this.ref=i,this.props=null}return e.prototype.receiveProps=function(e){this.props=e},e.prototype.receiveMonitor=function(e){this.monitor=e},e.prototype.canDrop=function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)},e.prototype.hover=function(){this.spec.hover&&this.spec.hover(this.props,this.monitor,r.getDecoratedComponent(this.ref))},e.prototype.drop=function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)},e}();t.default=function(e){return Object.keys(e).forEach(function(t){n(o.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',o.join(", "),t),n("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])}),function(t,i){return new s(e,t,i)}}},42742:function(e,t,i){"use strict";var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s=i(667294),l=i(925237),a=i(386998),d=i(489745);i(353924);var c=i(114774),u=i(215956),h=i(596774);t.default=function(e){var t=e.DecoratedComponent,i=e.createHandler,r=e.createMonitor,p=e.createConnector,_=e.registerHandler,g=e.containerDisplayName,m=e.getType,f=e.collect,x=e.options.arePropsEqual,b=void 0===x?h:x,y=t.displayName||t.name||"Component";return u(function(e){function u(t){var i=e.call(this,t)||this;return i.decoratedRef=s.createRef(),i.handleChange=function(){var e=i.getCurrentState();h(e,i.state)||i.setState(e)},i.disposable=new a.SerialDisposable,i.receiveProps(t),i.dispose(),i}return n(u,e),u.prototype.getHandlerId=function(){return this.handlerId},u.prototype.getDecoratedComponentInstance=function(){return c(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current},u.prototype.shouldComponentUpdate=function(e,t){return!b(e,this.props)||!h(t,this.state)},u.prototype.componentDidMount=function(){this.disposable=new a.SerialDisposable,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()},u.prototype.componentDidUpdate=function(e){b(this.props,e)||(this.receiveProps(this.props),this.handleChange())},u.prototype.componentWillUnmount=function(){this.dispose()},u.prototype.receiveProps=function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(m(e)))},u.prototype.receiveType=function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=_(e,this.handler,this.manager),i=t[0],r=t[1];this.handlerId=i,this.handlerMonitor.receiveHandlerId(i),this.handlerConnector.receiveHandlerId(i);var n=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[i]});this.disposable.setDisposable(new a.CompositeDisposable(new a.Disposable(n),new a.Disposable(r)))}},u.prototype.dispose=function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)},u.prototype.getCurrentState=function(){return this.handlerConnector?f(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}},u.prototype.render=function(){var e=this;return s.createElement(l.Consumer,null,function(i){var r=i.dragDropManager;return e.receiveDragDropManager(r),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(function(){return e.handlerConnector.reconnect()}),s.createElement(t,o({},e.props,e.getCurrentState(),{ref:d.isRefable(t)?e.decoratedRef:null}))})},u.prototype.receiveDragDropManager=function(e){void 0===this.manager&&(c(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",y,y),void 0!==e&&(this.manager=e,this.handlerMonitor=r(e),this.handlerConnector=p(e.getBackend()),this.handler=i(this.handlerMonitor,this.decoratedRef)))},u.DecoratedComponent=t,u.displayName=g+"("+y+")",u}(s.Component),t)}},76108:(e,t,i)=>{"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(774399)),r(i(387559)),r(i(459296))},741365:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(910513),o=i(998008),s=i(391081),l=i(147277),a=i(114774);t.useDragSourceMonitor=function(){var e=o.useDragDropManager();return[r.useMemo(function(){return new s.default(e)},[e]),r.useMemo(function(){return new l.default(e.getBackend())},[e])]},t.useDragHandler=function(e,t,i){var s=o.useDragDropManager(),l=r.useMemo(function(){return{beginDrag:function(){var i=e.current,r=i.begin,n=i.item;if(r){var o=r(t);return a(null==o||"object"==typeof o,"dragSpec.begin() must either return an object, undefined, or null"),o||n||{}}return n||{}},canDrag:function(){return"boolean"==typeof e.current.canDrag?e.current.canDrag:"function"!=typeof e.current.canDrag||e.current.canDrag(t)},isDragging:function(i,r){var n=e.current.isDragging;return n?n(t):r===i.getSourceId()},endDrag:function(){var r=e.current.end;r&&r(t.getItem(),t),i.reconnect()}}},[]);r.useEffect(function(){var r=n.default(e.current.item.type,l,s),o=r[0],a=r[1];return t.receiveHandlerId(o),i.receiveHandlerId(o),a},[])}},787458:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(548537),o=i(998008),s=i(750986),l=i(596177);t.useDropTargetMonitor=function(){var e=o.useDragDropManager();return[r.useMemo(function(){return new l.default(e)},[e]),r.useMemo(function(){return new s.default(e.getBackend())},[e])]},t.useDropHandler=function(e,t,i){var s=o.useDragDropManager(),l=r.useMemo(function(){return{canDrop:function(){var i=e.current.canDrop;return!i||i(t.getItem(),t)},hover:function(){var i=e.current.hover;i&&i(t.getItem(),t)},drop:function(){var i=e.current.drop;if(i)return i(t.getItem(),t)}}},[t]);r.useEffect(function(){var r=n.default(e.current.accept,l,s),o=r[0],a=r[1];return t.receiveHandlerId(o),i.receiveHandlerId(o),a},[t,i])}},365353:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(596774),n=i(667294);t.useCollector=function(e,t,i){var o=n.useState(function(){return t(e)}),s=o[0],l=o[1],a=n.useCallback(function(){var n=t(e);!r(s,n)&&(l(n),i&&i())},[s,e,i]);return[s,a]}},998008:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(925237),o=i(114774);t.useDragDropManager=function(){var e=r.useContext(n.context).dragDropManager;return o(null!=e,"Expected drag drop context"),e}},179411:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(365353);t.useMonitorOutput=function(e,t,i){var o=n.useCollector(e,t,i),s=o[0],l=o[1];return r.useEffect(function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(l,{handlerIds:[t]})},[e,l]),s}},774399:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(179411),n=i(741365),o=i(667294),s=i(114774);t.useDrag=function(e){var t=o.useRef(e);t.current=e,s(null!=e.item,"item must be defined"),s(null!=e.item.type,"item type must be defined");var i=n.useDragSourceMonitor(),l=i[0],a=i[1];n.useDragHandler(t,l,a);var d=r.useMonitorOutput(l,t.current.collect||function(){return{}},function(){return a.reconnect()}),c=o.useMemo(function(){return a.hooks.dragSource()},[a]),u=o.useMemo(function(){return a.hooks.dragPreview()},[a]);return o.useEffect(function(){a.dragSourceOptions=t.current.options||null,a.reconnect()},[a]),o.useEffect(function(){a.dragPreviewOptions=t.current.previewOptions||null,a.reconnect()},[a]),[d,c,u]}},459296:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(998008),o=i(365353);t.useDragLayer=function(e){var t=n.useDragDropManager().getMonitor(),i=o.useCollector(t,e),s=i[0],l=i[1];return r.useEffect(function(){return t.subscribeToOffsetChange(l)}),r.useEffect(function(){return t.subscribeToStateChange(l)}),s}},387559:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(179411),n=i(787458),o=i(667294),s=i(114774);t.useDrop=function(e){var t=o.useRef(e);t.current=e,s(null!=e.accept,"accept must be defined");var i=n.useDropTargetMonitor(),l=i[0],a=i[1];n.useDropHandler(t,l,a);var d=r.useMonitorOutput(l,t.current.collect||function(){return{}},function(){return a.reconnect()}),c=o.useMemo(function(){return a.hooks.dropTarget()},[a]);return o.useEffect(function(){a.dropTargetOptions=e.options||null,a.reconnect()},[e.options]),[d,c]}},60598:(e,t,i)=>{"use strict";var r=i(925237);t.Z5=r.DragDropContext,r.DragDropContextProvider,r.Consumer,i(328202).default;var n=i(450793);t.Ej=n.default;var o=i(206059);t.GR=o.default,i(344319).default;var s=i(76108);s.useDrag,s.useDragLayer,s.useDrop},910513:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var r=i.getRegistry(),n=r.addSource(e,t);return[n,function(){return r.removeSource(n)}]}},548537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var r=i.getRegistry(),n=r.addTarget(e,t);return[n,function(){return r.removeTarget(n)}]}},496395:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r]}},957523:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(114774);function o(e,t){"function"==typeof e?e(t):e.current=t}t.default=function(e,t){var i=e.ref;return(n("string"!=typeof i,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://facebook.github.io/react/docs/more-about-refs.html#the-ref-callback-attribute"),i)?r.cloneElement(e,{ref:function(e){o(t,e),i&&o(i,e)}}):r.cloneElement(e,{ref:t})}},353924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e},t.noop=function(){},t.isPlainObject=function(e){if(!("object"==typeof e&&null!==e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},590539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isDisposed=!1,this.disposables=e}return e.prototype.add=function(e){this.isDisposed?e.dispose():this.disposables.push(e)},e.prototype.remove=function(e){var t=!1;if(!this.isDisposed){var i=this.disposables.indexOf(e);-1!==i&&(t=!0,this.disposables.splice(i,1),e.dispose())}return t},e.prototype.clear=function(){if(!this.isDisposed){for(var e=this.disposables.length,t=Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(var i=0;i<e;i++)t[i].dispose()}},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=Array(e),i=0;i<e;i++)t[i]=this.disposables[i];this.disposables=[];for(var i=0;i<e;i++)t[i].dispose()}},e}();t.CompositeDisposable=i},653473:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(353924),n=function(){function e(e){this.isDisposed=!1,this.action=r.isFunction(e)?e:r.noop}return e.isDisposable=function(e){return e&&r.isFunction(e.dispose)},e._fixup=function(t){return e.isDisposable(t)?t:e.empty},e.create=function(t){return new e(t)},e.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},e.empty={dispose:r.noop},e}();t.Disposable=n},409591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.isDisposed=!1}return e.prototype.getDisposable=function(){return this.current},e.prototype.setDisposable=function(e){var t=this.isDisposed;if(!t){var i=this.current;this.current=e,i&&i.dispose()}t&&e&&e.dispose()},e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}},e}();t.SerialDisposable=i},386998:(e,t,i)=>{"use strict";function r(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),r(i(653473)),r(i(409591)),r(i(590539))},487943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDecoratedComponent=function(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}},965525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRef=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},489745:(e,t)=>{"use strict";function i(e){return e&&e.$$typeof&&"Symbol(react.forward_ref)"===e.$$typeof.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.isRefForwardingComponent=i,t.isRefable=function(e){return e&&e.prototype&&"function"==typeof e.prototype.render||i(e)}},270942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,i){return"string"==typeof t||"symbol"==typeof t||!!i&&Array.isArray(t)&&t.every(function(t){return e(t,!1)})}},152548:()=>{"use strict";String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e})},65435:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(667294),n=i(957523);i(152548),t.default=function(e){var t={};return Object.keys(e).forEach(function(i){var o=e[i];if(i.endsWith("Ref"))t[i]=e[i];else{var s=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=null),!r.isValidElement(e)){var i=e;return o(i,t),i}var s=e;!function(e){if("string"!=typeof e.type)throw Error("Only native element nodes can now be passed to React DnD connectors.You can either wrap "+(e.type.displayName||e.type.name||"the component")+" into a <div>, or turn it into a drag source or a drop target itself.")}(s);var l=t?function(e){return o(e,t)}:o;return n.default(s,l)};t[i]=function(){return s}}}),t}},215956:(e,t,i)=>{"use strict";var r=i(876618),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function a(e){return r.isMemo(e)?s:l[e.$$typeof]||n}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var d=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,_=Object.prototype;e.exports=function e(t,i,r){if("string"!=typeof i){if(_){var n=p(i);n&&n!==_&&e(t,n,r)}var s=c(i);u&&(s=s.concat(u(i)));for(var l=a(t),g=a(i),m=0;m<s.length;++m){var f=s[m];if(!o[f]&&!(r&&r[f])&&!(g&&g[f])&&!(l&&l[f])){var x=h(i,f);try{d(t,f,x)}catch(e){}}}}return t}},114774:e=>{"use strict";e.exports=function(e,t,i,r,n,o,s,l){if(!e){var a;if(void 0===t)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,r,n,o,s,l],c=0;(a=Error(t.replace(/%s/g,function(){return d[c++]}))).name="Invariant Violation"}throw a.framesToPop=1,a}}},121255:(e,t)=>{"use strict";/** @license React v16.8.4
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,a=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case u:case o:case l:case s:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case a:return e;default:return t}}case g:case _:case n:return t}}}function f(e){return m(e)===u}t.typeOf=m,t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=a,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=_,t.Portal=n,t.Profiler=l,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===u||e===l||e===s||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===a||e.$$typeof===d||e.$$typeof===h)},t.isAsyncMode=function(e){return f(e)||m(e)===c},t.isConcurrentMode=f,t.isContextConsumer=function(e){return m(e)===d},t.isContextProvider=function(e){return m(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return m(e)===h},t.isFragment=function(e){return m(e)===o},t.isLazy=function(e){return m(e)===g},t.isMemo=function(e){return m(e)===_},t.isPortal=function(e){return m(e)===n},t.isProfiler=function(e){return m(e)===l},t.isStrictMode=function(e){return m(e)===s},t.isSuspense=function(e){return m(e)===p}},876618:(e,t,i)=>{"use strict";e.exports=i(121255)},869921:(e,t)=>{"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i="function"==typeof Symbol&&Symbol.for,r=i?Symbol.for("react.element"):60103,n=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,a=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,u=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,_=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,f=i?Symbol.for("react.block"):60121,x=i?Symbol.for("react.fundamental"):60117,b=i?Symbol.for("react.responder"):60118,y=i?Symbol.for("react.scope"):60119;function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case u:case o:case l:case s:case p:return e;default:switch(e=e&&e.$$typeof){case d:case h:case m:case g:case a:return e;default:return t}}case n:return t}}}function P(e){return v(e)===u}t.AsyncMode=c,t.ConcurrentMode=u,t.ContextConsumer=d,t.ContextProvider=a,t.Element=r,t.ForwardRef=h,t.Fragment=o,t.Lazy=m,t.Memo=g,t.Portal=n,t.Profiler=l,t.StrictMode=s,t.Suspense=p,t.isAsyncMode=function(e){return P(e)||v(e)===c},t.isConcurrentMode=P,t.isContextConsumer=function(e){return v(e)===d},t.isContextProvider=function(e){return v(e)===a},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return v(e)===h},t.isFragment=function(e){return v(e)===o},t.isLazy=function(e){return v(e)===m},t.isMemo=function(e){return v(e)===g},t.isPortal=function(e){return v(e)===n},t.isProfiler=function(e){return v(e)===l},t.isStrictMode=function(e){return v(e)===s},t.isSuspense=function(e){return v(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===u||e===l||e===s||e===p||e===_||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===a||e.$$typeof===d||e.$$typeof===h||e.$$typeof===x||e.$$typeof===b||e.$$typeof===y||e.$$typeof===f)},t.typeOf=v},659864:(e,t,i)=>{"use strict";e.exports=i(869921)},442279:(e,t)=>{"use strict";function i(e,t){return e===t}t.P1=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=0,s=r.pop(),l=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e}))throw Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+t.map(function(e){return typeof e}).join(", ")+"]");return t}(r),a=e.apply(void 0,[function(){return o++,s.apply(void 0,arguments)}].concat(i)),d=function(e,t){for(var i=arguments.length,r=Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];var o=l.map(function(i){return i.apply(void 0,[e,t].concat(r))});return a.apply(void 0,function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}(o))};return d.resultFunc=s,d.recomputations=function(){return o},d.resetRecomputations=function(){return o=0},d}}(function(e){var t=arguments.length<=1||void 0===arguments[1]?i:arguments[1],r=null,n=null;return function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return null!==r&&r.length===o.length&&o.every(function(e,i){return t(e,r[i])})||(n=e.apply(void 0,o)),r=o,n}})},560053:(e,t)=>{"use strict";/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function i(e,t){var i=e.length;for(e.push(t);0<i;){var r=i-1>>>1,n=e[r];if(0<o(n,t))e[r]=t,e[i]=n,i=r;else break}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;for(var r=0,n=e.length,s=n>>>1;r<s;){var l=2*(r+1)-1,a=e[l],d=l+1,c=e[d];if(0>o(a,i))d<n&&0>o(c,a)?(e[r]=c,e[d]=i,r=d):(e[r]=a,e[l]=i,r=l);else if(d<n&&0>o(c,i))e[r]=c,e[d]=i,r=d;else break}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s,l=performance;t.unstable_now=function(){return l.now()}}else{var a=Date,d=a.now();t.unstable_now=function(){return a.now()-d}}var c=[],u=[],h=1,p=null,_=3,g=!1,m=!1,f=!1,x="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var t=r(u);null!==t;){if(null===t.callback)n(u);else if(t.startTime<=e)n(u),t.sortIndex=t.expirationTime,i(c,t);else break;t=r(u)}}function P(e){if(f=!1,v(e),!m){if(null!==r(c))m=!0,z(S);else{var t=r(u);null!==t&&R(P,t.startTime-e)}}}function S(e,i){m=!1,f&&(f=!1,b(E),E=-1),g=!0;var o=_;try{for(v(i),p=r(c);null!==p&&(!(p.expirationTime>i)||e&&!C());){var s=p.callback;if("function"==typeof s){p.callback=null,_=p.priorityLevel;var l=s(p.expirationTime<=i);i=t.unstable_now(),"function"==typeof l?p.callback=l:p===r(c)&&n(c),v(i)}else n(c);p=r(c)}if(null!==p)var a=!0;else{var d=r(u);null!==d&&R(P,d.startTime-i),a=!1}return a}finally{p=null,_=o,g=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A=!1,w=null,E=-1,I=5,j=-1;function C(){return!(t.unstable_now()-j<I)}function T(){if(null!==w){var e=t.unstable_now();j=e;var i=!0;try{i=w(!0,e)}finally{i?s():(A=!1,w=null)}}else A=!1}if("function"==typeof y)s=function(){y(T)};else if("undefined"!=typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=T,s=function(){O.postMessage(null)}}else s=function(){x(T,0)};function z(e){w=e,A||(A=!0,s())}function R(e,i){E=x(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,z(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(_){case 1:case 2:case 3:var t=3;break;default:t=_}var i=_;_=t;try{return e()}finally{_=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=_;_=e;try{return t()}finally{_=i}},t.unstable_scheduleCallback=function(e,n,o){var s=t.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?s+o:s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return l=o+l,e={id:h++,callback:n,priorityLevel:e,startTime:o,expirationTime:l,sortIndex:-1},o>s?(e.sortIndex=o,i(u,e),null===r(c)&&e===r(u)&&(f?(b(E),E=-1):f=!0,R(P,o-s))):(e.sortIndex=l,i(c,e),m||g||(m=!0,z(S))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=_;return function(){var i=_;_=t;try{return e.apply(this,arguments)}finally{_=i}}}},363840:(e,t,i)=>{"use strict";e.exports=i(560053)},596774:e=>{e.exports=function(e,t,i,r){var n=i?i.call(r,e,t):void 0;if(void 0!==n)return!!n;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),a=0;a<o.length;a++){var d=o[a];if(!l(d))return!1;var c=e[d],u=t[d];if(!1===(n=i?i.call(r,c,u,d):void 0)||void 0===n&&c!==u)return!1}return!0}},653250:(e,t,i)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=i(667294),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,s=r.useEffect,l=r.useLayoutEffect,a=r.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!n(e,i)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),r=o({inst:{value:i,getSnapshot:t}}),n=r[0].inst,c=r[1];return l(function(){n.value=i,n.getSnapshot=t,d(n)&&c({inst:n})},[e,i,t]),s(function(){return d(n)&&c({inst:n}),e(function(){d(n)&&c({inst:n})})},[e]),a(i),i};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},950139:(e,t,i)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=i(667294),n=i(61688),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,l=r.useRef,a=r.useEffect,d=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,r,n){var u=l(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=s(e,(u=d(function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==n&&h.hasValue){var t=h.value;if(n(t,e))return l=t}return l=e}if(t=l,o(s,e))return t;var i=r(e);return void 0!==n&&n(t,i)?t:(s=e,l=i)}var s,l,a=!1,d=void 0===i?null:i;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,i,r,n]))[0],u[1]);return a(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},61688:(e,t,i)=>{"use strict";e.exports=i(653250)},552798:(e,t,i)=>{"use strict";e.exports=i(950139)},802333:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinsPaneHelperGetPinTitle_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"typeName",storageKey:null}],storageKey:null},t],type:"Pin",abstractKey:null};i.hash="594842fa993e078b47ba30a204789923",e.exports=i},387399:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinsPaneHelperGetProductPrice_pin",selections:[{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:t=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:t,storageKey:null}],type:"Pin",abstractKey:null};i.hash="7c716add671f3d56448cd9d81ab6cc81",e.exports=i},644551:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/idea-ads-tool"]=function(){return i(714922).Z}},367677:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/idea-pin-builder"]=function(){return i(216834).Z}},61746:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin-creation-tool"]=function(){return i(76510).Z}},302667:(e,t,i)=>{"use strict";i.d(t,{X_:()=>o,Xo:()=>c,Xv:()=>d,fW:()=>u,h_:()=>a,vF:()=>l});var r=i(67347);let n=(e,t)=>{let i=`client.partner.quick_promote_button.${e}`;(0,r.nP)(i,{sampleRate:1,tags:{app_type:"web",location:t}})},o=e=>{e&&e.utm_campaign&&(0,r.nP)("client.partner.account.convert_attempt.utm_campaign.exists",{sampleRate:1,tags:e})},s=(e,t,i,r={},n)=>{n({event_type:e,component:t,element:10148,view_type:i,aux_data:{...r}})},l=(e,t,i,r,o,l,a={})=>{n(t,i),s(r,o,l,a,e)},a=e=>{e({event_type:8217})},d=()=>{(0,r.nP)("client.partner.biz_nux_v3.nux_start",{sampleRate:1,tags:{app_type:"web"}})},c=()=>{(0,r.nP)("client.partner.biz_nux_v3.nux_end",{sampleRate:1,tags:{app_type:"web"}})},u=e=>{let t=`client.partner.biz_nux_v3.render.${e}`;(0,r.nP)(t,{sampleRate:1,tags:{app_type:"web"}})}},480542:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(667294),n=i(883119),o=i(251183),s=i(700380),l=i(785893);function a(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d={gradientBackground:{left:{backgroundImage:"linear-gradient(to left, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"},right:{backgroundImage:"linear-gradient(to right, rgba(255, 255, 255, 0), #fff)",pointerEvents:"none"}},innerScrollContainer:{marginBottom:-17,overflowX:"auto",overflowY:"hidden",paddingBottom:17}};class c extends r.PureComponent{constructor(...e){super(...e),a(this,"state",{canScrollLeft:!1,canScrollRight:!1,isContainerHover:!1,isLeftHover:!1,isRightHover:!1}),a(this,"scroll",e=>{let{scrollbar:t}=this,{extendToEdgeDistanceX:i,scrollSpeedPxPerMs:r,minScrollDuration:n,easingFunction:s}=this.props;t&&0!==e&&(this.scrollAnimationManager&&this.scrollAnimationManager.cancel(),this.scrollAnimationManager=(0,o.Z)(t,e,0,{easingFunction:s,extendToEdgeDistanceX:i,scrollSpeedPxPerMs:r,minScrollDuration:n,onAnimationComplete:()=>{this.refreshScroll(),this.scrollAnimationManager=null}}),this.scrollAnimationManager.start())}),a(this,"refreshScroll",()=>{let{canScrollLeft:e,canScrollRight:t}=this.state;if(!this.scrollbar)return;let{scrollLeft:i,scrollWidth:r,clientWidth:n}=this.scrollbar,o={};if(n<r){let s=i>0,l=i<r-n;(e!==s||t!==l)&&(o.canScrollLeft=s,o.canScrollRight=l)}else(e||t)&&(o.canScrollLeft=!1,o.canScrollRight=!1);Object.keys(o).length&&this.setState(o)}),a(this,"refreshScrollThrottled",(0,s.Z)(this.refreshScroll,50)),a(this,"handleLeftArrowClick",()=>this.handleArrowClick("left")),a(this,"handleRightArrowClick",()=>this.handleArrowClick("right")),a(this,"handleArrowClick",e=>{if(!this.scrollbar)return;let{scrollDistanceRatio:t,scrollDistanceMin:i}=this.props,{clientWidth:r}=this.scrollbar;this.scroll(("left"===e?-1:1)*Math.max(Math.floor(t*r),i))}),a(this,"handleContainerMouseEnter",()=>{this.setState({isContainerHover:!0})}),a(this,"handleContainerMouseLeave",()=>{this.setState({isContainerHover:!1})}),a(this,"handleLeftArrowMouseEnter",()=>this.handleArrowHover("left",!0)),a(this,"handleLeftArrowMouseLeave",()=>this.handleArrowHover("left",!1)),a(this,"handleRightArrowMouseEnter",()=>this.handleArrowHover("right",!0)),a(this,"handleRightArrowMouseLeave",()=>this.handleArrowHover("right",!1)),a(this,"handleArrowHover",(e,t)=>{this.setState({["left"===e?"isLeftHover":"isRightHover"]:t})}),a(this,"saveScrollBarRef",e=>{this.scrollbar=e}),a(this,"Style",{...d,arrowBackground:{backgroundColor:"wide"===this.props.variant?"rgba(255, 255, 255, .97)":"rgba(0, 0, 0, .1)",boxShadow:"wide"===this.props.variant?"0 1px 20px 0 rgba(0, 0, 0, .1)":void 0},arrow:{default:{position:"absolute",top:"50%",transform:"wide"===this.props.variant?"translateY(-115%)":"translateY(-50%)"},left:{left:"wide"===this.props.variant?-84:-12},right:{right:"wide"===this.props.variant?-72:-12}}}),a(this,"renderArrow",e=>{var t;let{canScrollLeft:i,canScrollRight:r}=this.state,{variant:o}=this.props,s="wide"===o,a="left"===e?this.state.isLeftHover:this.state.isRightHover,d=a?"darkGray":"gray";s&&(d="left"===e&&i||"right"===e&&r?"darkGray":"gray");let c="left"===e?"arrow-back":"arrow-forward",u="left"===e?this.Style.arrow.left:this.Style.arrow.right;return(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{...this.Style.arrow.default,...u}},children:(0,l.jsx)(n.iP,{onMouseEnter:"left"===e?this.handleLeftArrowMouseEnter:this.handleRightArrowMouseEnter,onMouseLeave:"left"===e?this.handleLeftArrowMouseLeave:this.handleRightArrowMouseLeave,onTap:"left"===e?this.handleLeftArrowClick:this.handleRightArrowClick,rounding:"circle",children:(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:this.Style.arrowBackground},padding:1,rounding:"circle",children:(0,l.jsx)(n.Sj,{bgColor:"white",icon:c,iconColor:null!==(t=d)&&void 0!==t?t:"gray",size:s?"lg":"sm"})})},e)})})}componentDidMount(){window.addEventListener("resize",this.refreshScrollThrottled),this.refreshScroll()}componentDidUpdate(){this.refreshScroll()}componentWillUnmount(){window.removeEventListener("resize",this.refreshScrollThrottled),this.scrollAnimationManager&&this.scrollAnimationManager.cancel()}render(){let{canScrollLeft:e,canScrollRight:t,isContainerHover:i}=this.state,{alwaysShowArrows:r,children:o,showArrowsOnlyOnHover:s}=this.props,a=!s||i,d=e&&a,c=t&&a;return(0,l.jsxs)(n.xu,{onMouseEnter:this.handleContainerMouseEnter,onMouseLeave:this.handleContainerMouseLeave,position:"relative",children:[(0,l.jsx)(n.xu,{overflow:"hidden",children:(0,l.jsx)(n.xu,{ref:this.saveScrollBarRef,dangerouslySetInlineStyle:{__style:this.Style.innerScrollContainer},onScroll:this.refreshScrollThrottled,children:o})}),d&&!r&&(0,l.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.left},left:!0,position:"absolute",top:!0,width:60}),c&&!r&&(0,l.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:this.Style.gradientBackground.right},position:"absolute",right:!0,top:!0,width:60}),(d||r)&&this.renderArrow("left"),(c||r)&&this.renderArrow("right")]})}}a(c,"defaultProps",{easingFunction:"ease-in-out",extendToEdgeDistanceX:160,minScrollDuration:200,scrollDistanceMin:200,scrollDistanceRatio:3/4,scrollSpeedPxPerMs:1.2,showArrowsOnlyOnHover:!0,variant:"default"})},261130:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(288709),n=i.n(r);let o=RegExp(/^(https?:\/\/){0,1}/.source+"("+n().source+"){1,}"+/(\.){1,}/.source+"("+n().source+"){1,}"+/(\/){0,1}/.source,"gi")},464657:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294);let n="undefined"!=typeof document?document:{},o=()=>{let e=(0,r.useRef)(),t=n.documentElement,{body:i}=n;return t?[()=>{if(!i||!i.style||e.current)return;let r=window.innerWidth-t.clientWidth,n=parseInt(window.getComputedStyle(i).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",i.style.position="relative",i.style.overflow="hidden",i.style.paddingRight=`${n+r}px`,e.current=!0},()=>{i&&i.style&&e.current&&(t.style.position="",t.style.overflow="",i.style.position="",i.style.overflow="",i.style.paddingRight="",e.current=!1)}]:[]}},915206:(e,t,i)=>{"use strict";i.d(t,{Z:()=>P});var r=i(667294),n=i(702664),o=i(883119),s=i(214494),l=i(579014),a=i(858472),d=i(898781),c=i(780280),u=i(19121),h=i(76696),p=i(333206),_=i(456416),g=i(505132),m=i(785893);function f(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let x={dropdown:{alignItems:"center",backgroundColor:"#efefef",border:"none",cursor:"pointer",display:"flex",flexGrow:1,height:40,justifyContent:"space-between",minWidth:0,outline:0,padding:"0 14px",position:"relative"},button:{backgroundColor:a.x7,border:"none",cursor:"pointer",flex:"none",height:40,outline:0,padding:"0 14px"}},b=(e,t)=>({dropdown:{alignItems:"center",backgroundColor:`${t?"#efefef":"#ffffff"}`,border:`2px solid ${e?l.op:l.iX}`,cursor:"pointer",display:"flex",flexGrow:1,height:48,justifyContent:"space-between",minWidth:0,outline:0,position:"relative",borderRadius:16}}),y=e=>({color:e?"#111":"#6c6c6c"});class v extends r.Component{constructor(...e){super(...e),f(this,"state",{selectedBoard:null,showBoardCreate:!1,showFlyout:!1,suggestedBoardName:""}),f(this,"_setDefaultBoard",()=>{s.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0}).callGet({showError:!1}).then(e=>{let t=(((e||{}).resource_response||{}).data||{}).all_boards;if(t&&t.length>0){let{id:e,image_cover_url:i,owner:r,privacy:n,name:o,url:s}=t[0];if(this.props.selectedItem)return;this.handleItemChosen({boardId:e,imageCoverUrl:i,ownerUsername:null==r?void 0:r.username,privacy:n,title:o||"",url:s},!1)}})}),f(this,"setButtonRef",e=>{this.buttonRef=e}),f(this,"handleBoardDropdownClick",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),f(this,"handleSaveButtonClick",()=>{let{onSaveClick:e,selectedItem:t,disabledBoardPicker:i}=this.props;(t||i)&&e?e():this.setState({showFlyout:!0})}),f(this,"handleFlyoutClose",()=>{this.setState({showFlyout:!1})}),f(this,"handleItemChosen",(e,t=!0)=>{let{onItemChosen:i}=this.props;i(e),t&&this.handleFlyoutClose()}),f(this,"handleCreateSection",e=>{let{selectedBoard:t}=this.state;if(t){let{id:i,privacy:r}=t,{id:n,title:o}=e;this.handleItemChosen({boardId:i,privacy:r,sectionId:n,title:o||""})}this.handleBoardCreateClose()}),f(this,"handleBoardCreateShow",({title:e})=>{this.setState({showBoardCreate:!0,showFlyout:!1,suggestedBoardName:e})}),f(this,"handleBoardCreateClose",()=>{this.setState({showBoardCreate:!1,selectedBoard:null})}),f(this,"handleBoardCreate",e=>{this.props.invalidateBoardPickerBoardsResource();let{id:t,name:i,privacy:r,url:n}=e;this.handleItemChosen({boardId:t,privacy:r,title:i||"",url:n}),this.handleBoardCreateClose()}),f(this,"handleSetBoardWithSection",e=>{this.setState({selectedBoard:e})})}componentDidMount(){let{selectedItem:e,useDefaultBoard:t=!1,disableDefaultBoard:i=!1}=this.props;i||(t?this._setDefaultBoard():e||this._setDefaultBoard())}render(){let{accessibilityLabelText:e,buttonText:t,customItem:i,disabled:n,disabledBoardPicker:s,flyoutSize:l,flyoutZIndex:a,hasError:d,idealDirection:c,onSaveClick:u,placeholder:h,requestContext:f,selectedItem:v,showBoardCover:P,showButton:S,showCreateBoardButton:A,showFlyoutSaveButton:w,showSections:E,showSectionSaveButton:I,boardFilter:j,useLayer:C,useStoryboardStyle:T,useCreateModalWithNoLayer:D,showSaveToProfile:O}=this.props,{selectedBoard:z,showBoardCreate:R,showFlyout:k,suggestedBoardName:L}=this.state,{isRTL:N}=f,B=T?16:8,Z=`${B}px 0 0 ${B}px`,M=`0 ${B}px ${B}px 0`,{title:F}=v||{},U=P&&!!v&&F,H=n||s,V={...T?b(d,H).dropdown:x.dropdown,borderRadius:k||!S?B:N?M:Z,padding:U?"0 14px 0 7px":"0 14px",cursor:H?"default":"pointer",pointerEvents:H?"none":"auto"},G={...x.button,borderRadius:N?Z:M,...n?{backgroundColor:"#efefef",cursor:"default"}:{},pointerEvents:n?"none":"auto"};return(0,m.jsxs)(o.xu,{column:12,dangerouslySetInlineStyle:{__style:{borderRadius:8,boxShadow:d&&!T?"0 0 0 1px #e60023":void 0,zIndex:k?a:void 0}},position:"relative",children:[(0,m.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",width:"100%",children:[(0,m.jsxs)("button",{ref:this.setButtonRef,"aria-disabled":n,"data-test-id":"board-dropdown-select-button",disabled:n,onClick:this.handleBoardDropdownClick,style:V,children:[(0,m.jsxs)(o.xu,{alignItems:"center","data-test-id":v?"board-dropdown-item-selected":"board-dropdown-placeholder",display:"flex",marginEnd:2,minWidth:0,overflow:"hidden",children:[U&&(0,m.jsx)(o.xu,{marginEnd:2,children:(0,m.jsx)(o.zd,{height:32,rounding:2,width:32,children:null!=v&&v.imageCoverUrl?(0,m.jsx)(o.Ee,{alt:this.props.i18n.bt("Board cover", "Board cover", "boardDropdown.button.selectedBoard.boardCover", undefined, true),color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:v.imageCoverUrl||""}):(0,m.jsx)(o.xu,{color:"secondary",height:"100%",width:"100%"})})}),(0,m.jsx)(o.xv,{lineClamp:1,children:(0,m.jsx)("span",{style:y(!!v),children:v&&F?F:h})})]}),(0,m.jsx)(o.xu,{flex:"none",marginEnd:-1,children:(0,m.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Choose a board", "Choose a board", "Instructions to open board picker", undefined, true),color:H?"subtle":"default",icon:"arrow-down",size:12})})]}),!k&&S&&(0,m.jsx)("button",{"aria-disabled":n,"data-test-id":"board-dropdown-save-button",disabled:n,onClick:this.handleSaveButtonClick,style:G,children:(0,m.jsx)(o.xv,{color:n?"subtle":"inverse",weight:"bold",children:t||this.props.i18n.bt("Save", "Save", "Button to create new Pin", undefined, true)})})]}),k&&(0,m.jsx)(o.J2,{anchor:this.buttonRef,idealDirection:c||"down",onDismiss:this.handleFlyoutClose,size:l,children:(0,m.jsx)(_.sR,{accessibilityLabelText:e,boardFilter:j,buttonText:t,customItem:i&&(0,r.cloneElement)(i,{onItemChosen:this.handleFlyoutClose}),onBoardCreate:this.handleBoardCreateShow,onButtonClick:u,onItemChosen:this.handleItemChosen,paneWidth:"number"==typeof l?l:void 0,setBoardWithSection:this.handleSetBoardWithSection,showCreateBoardButton:A,showFlyoutSaveButton:w,showSaveToProfile:O,showSections:E,showSectionSaveButton:I,useLegoLayout:!1,useStoryboardStyle:T})}),R&&!z&&(0,m.jsx)(p.Z,{onBoardCreate:this.handleBoardCreate,onClose:this.handleBoardCreateClose,showSecretBoardCreateToggle:"public"===j,suggestedBoardName:L,useModalWithNoLayer:D}),R&&!!z&&(0,m.jsx)(g.Z,{onClose:this.handleBoardCreateClose,onSectionCreate:this.handleCreateSection,selectedBoard:z,useLayer:C})]})}}function P(e){let t=(0,d.ZP)(),i=(0,n.useDispatch)(),r=(0,u.Z)(),o=(0,h.Z)();return(0,m.jsx)(v,{...e,i18n:t,invalidateBoardPickerBoardsResource:()=>i((0,_.DR)(r,o)),requestContext:(0,c.B)()})}f(v,"defaultProps",{flyoutSize:"lg",flyoutZIndex:1,showButton:!0,disabled:!1})},668627:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=(e,t,i)=>({id:e,field_set_key:"auth_web_main_pin",add_fields:i?i.join(","):void 0,client_tracking_params:void 0,noCache:!0,fetch_visual_search_objects:!0,...t?{orbac_subject_id:t}:Object.freeze({})})},237056:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(773285),n=i(50286),o=i(19121),s=i(717615),l=i(231947);let a=Object.freeze({dweb:{organic:"web_sce_organic_pinbuilder_dep",monetized:"web_sce_monetized_pinbuilder_dep"},mweb:{organic:"mweb_sce_organic_pinbuilder_dep",monetized:"mweb_sce_monetized_pinbuilder_dep"}});function d(e){let t=(0,n.HG)(),{checkExperiment:i}=(0,r.F)(),d=(0,s.Z)(),c=(0,o.Z)(),u=(0,l.lJ)(c,d),h=a[t?"dweb":"mweb"],p=i(h.organic).anyEnabled,_=i(h.monetized).anyEnabled,g=i("uid_sce_lightswitch_advertisers").anyEnabled;return!u&&((e&&(i("sce_lightswitch_organic"),i("sce_lightswitch_monetized")),t)?!!(p||_||g):p||_)}},14798:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(773285),n=i(50286);let o=Object.freeze({mitigationBundleExp:"web_sce_multi_upload_and_redirect_to_drafts",dWebPinBuilderDepExp:"web_sce_organic_pinbuilder_dep",mWebPinBuilderDepExp:"mweb_sce_organic_pinbuilder_dep",parentExp:"sce_lightswitch_organic"}),s=new Set(["enabled3","enabled4","enabled5","enabled6"]);function l({bypass:e,skipActivation:t}){let i=(0,n.HG)(),{checkExperiment:l}=(0,r.F)(),{parentExp:a,mitigationBundleExp:d}=o;if(e)return!1;t||l(a);let c={dangerouslySkipActivation:t},u=l(d,c).anyEnabled,h=o[i?"dWebPinBuilderDepExp":"mWebPinBuilderDepExp"],p=l(h,c).group,_=i?s.has(p)||l("uid_sce_lightswitch_advertisers").anyEnabled:s.has(p);return u||_}},382891:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s,m:()=>o});var r=i(719286),n=i(709622);let o=["female","male","unknown"],s=e=>{let{interests:t,ages:i,genders:s,country:l}=e;return{AGE_BUCKET:i||[],APPTYPE:r.jz,GENDER:s||o,INTEREST:(t||[]).map(e=>e.topic_id),LOCATION:[...new Set((l||n.UF).split("+"))]}}},460985:(e,t,i)=>{"use strict";i.d(t,{xT:()=>y,cX:()=>v,ZP:()=>P});var r=i(667294),n=i(883119),o=i(444445);let s=3,l=500,a=(e,t=s,i=l)=>r=>{let n=r.target;t>0&&(setTimeout(()=>{n.src=`${e}?${Date.now()}${t}`},i),t-=1,i*=2)};var d=i(152028),c=i(785893);let u=e=>{let{skipImageReloadOnError:t=!1,video:i,rounding:s,image:l}=e,u=(0,r.createRef)();(0,r.useEffect)(()=>{u.current&&i&&(u.current.currentTime=i.thumbnail)},[i,u]);let h=void 0===e.containerWidth?o.yF:e.containerWidth,p=e.imgHeight||void 0;if(i){let e=i.customCoverImg;return(0,c.jsxs)(n.xu,{direction:"column",display:"flex",justifyContent:"center",overflow:"hidden",position:"relative",width:h,children:[(0,c.jsx)(n.zd,{height:"100%",rounding:2,wash:!0,width:"100%",children:e?(0,c.jsx)(n.Ee,{alt:e.name,naturalHeight:e.height,naturalWidth:e.width,src:e.src}):(0,c.jsx)(n.nk,{aspectRatio:i.width/i.height,autoplay:!0,captions:"",onPlay:()=>{},onPlayError:()=>{},src:i.src})}),(0,c.jsx)(n.xu,{alignItems:"end",bottom:!0,display:"flex",justifyContent:"start",left:!0,padding:2,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(d.Z,{duration:1e3*i.duration})})]})}if(l){let{altText:e,dominantColor:i,height:r,url:o,width:d}=l;return(0,c.jsx)(n.xu,{direction:"column",display:"flex",height:p,justifyContent:"center",overflow:"hidden",rounding:null!=s?s:2,width:h,children:(0,c.jsx)(n.Ee,{alt:null!=e?e:"",color:i||"#efefef",fit:p?"cover":"none",naturalHeight:null!=r?r:1,naturalWidth:null!=d?d:1,onError:t?()=>{}:()=>{a(null!=o?o:"",5)},src:null!=o?o:""})})}return null};var h=i(987765),p=i(356997),_=i(898781),g=i(883561);function m(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let f={base:({rounding:e,height:t})=>({borderRadius:e?4*e:4,display:"flex",flexDirection:"column",height:t,outline:"none",padding:8,transition:"background-color 0.25s cubic-bezier(0.31, 1, 0.34, 1)"}),focused:()=>({padding:4,border:"4px solid rgba(0, 132, 255, 0.5)"}),hovered:()=>({backgroundColor:"rgba(0, 0, 0, 0.05)",cursor:"pointer"}),selected:()=>({padding:6,border:"2px solid #e60023"})},x=(e,t)=>{let i=((e.rich_summary||{}).displayName||"").trim(),r=(e.description||"").trim(),n=(e.title||"").trim();return(0,g.ZP)(n||i||r,t)};class b extends r.Component{constructor(...e){super(...e),m(this,"state",{isHovered:!1,isFocused:!1}),m(this,"getIsActionable",()=>!!this.props.onSelect),m(this,"getStyle",()=>{let{isFocused:e,isHovered:t}=this.state,{selected:i}=this.props,r=this.getIsActionable();return Object.entries({base:!0,focused:r&&e,hovered:r&&t,selected:i}).reduce((e,[t,i])=>({...e,...i?f[t](this.props):{}}),{})}),m(this,"handleMouseEnter",()=>{this.setState({isHovered:!0})}),m(this,"handleMouseLeave",()=>{this.setState({isHovered:!1})}),m(this,"handleClick",()=>{let{onSelect:e,pin:t}=this.props;e&&e(t)}),m(this,"handleKeyPress",e=>{"Enter"===e.key&&this.handleClick()}),m(this,"handleFocus",()=>{this.setState({isFocused:!0})}),m(this,"handleBlur",()=>{this.setState({isFocused:!1})})}render(){let{pin:e,imageHeight:t,hideAuthorAttribution:i,maxDescriptionLength:r,promoted:s,showDescription:l,skipImageReloadOnError:a,width:d,video:h,rounding:p,isMobile:_=!1}=this.props,g=x(e,r),m=this.props.i18n.bt("No description available", "No description available", "[m10n]quickPromote.pin.noDescription", undefined, true),f=this.getIsActionable(),b=f?{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleClick,onKeyPress:this.handleKeyPress,onFocus:this.handleFocus,onBlur:this.handleBlur,role:"button",tabIndex:0}:{},P=(null==e?void 0:e.images)&&(e.images.orig||e.images["236x"]||e.images["474x"]||e.images["736x"]);return(0,c.jsxs)("div",{style:this.getStyle(),...b,"aria-label":g||m,children:[(0,c.jsx)(u,{containerWidth:d,image:e&&P&&{altText:e.altText,dominantColor:e.dominant_color,url:P.url,width:P.width,height:P.height},imgHeight:t,rounding:p,skipImageReloadOnError:a,video:h}),!s&&e.video_signature&&(0,c.jsx)(n.xu,{marginTop:1,children:(0,c.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Video play button", "Video play button", "[m10n] Accessibility label for a video play icon", undefined, true),color:"default",icon:"play",inline:!0,size:12})}),s&&!i&&!_&&(0,c.jsx)(y,{name:s.businessName}),l&&g.length>0&&(0,c.jsx)(n.xu,{maxWidth:d||o.yF,padding:s?1:void 0,paddingX:s?void 0:1,paddingY:s?void 0:4,children:(0,c.jsx)(n.xv,{size:_?"100":"200",weight:"bold",children:g})}),s&&(0,c.jsx)(v,{avatarUrl:s.avatarImageSmallUrl,businessName:s.businessName,isMobile:_})]})}}m(b,"defaultProps",{showDescription:!0});let y=({name:e})=>{let t=(0,_.ZP)();return(0,c.jsxs)(n.xu,{display:"flex",padding:1,children:[(0,c.jsx)(n.xu,{marginEnd:1,children:(0,c.jsx)(n.JO,{accessibilityLabel:t.bt("Pin link arrow", "Pin link arrow", "Accessibility label for pin preview link icon", undefined, true),color:"default",icon:"arrow-up-right",inline:!0,size:10})}),(0,c.jsx)(n.xu,{children:(0,c.jsx)(n.xv,{inline:!0,size:"200",children:e})})]})},v=({avatarUrl:e,businessName:t,isMobile:i=!1})=>{let r=(0,_.ZP)();return(0,c.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:i?"evenly":"start",paddingY:1,children:[(0,c.jsx)(n.xu,{children:(0,c.jsx)(p.qE,{name:t,size:i?"xs":"sm",src:e})}),(0,c.jsxs)(n.xu,{marginStart:i?0:1,children:[(0,c.jsx)(h.Z,{size:i?"100":"200",weight:"bold",children:r.bt("Promoted by", "Promoted by", "Label for who promoted the pin", undefined, true)}),(0,c.jsx)(n.xv,{size:i?"100":"200",children:t})]})]})},P=function(e){let t=(0,_.ZP)(),{badgeMessage:i}=e;return(0,c.jsxs)(n.xu,{children:[(0,c.jsx)(b,{...e,i18n:t}),i&&(0,c.jsx)(n.xu,{"data-test-id":"recommended-pins",display:"inlineBlock",left:!0,padding:4,position:"absolute",top:!0,children:(0,c.jsx)(n.Ct,{text:i})})]})}},28956:(e,t,i)=>{"use strict";i.d(t,{Z:()=>eQ});var r=i(667294),n=i(883119),o=i(480542),s=i(237056),l=i(702664),a=i(186656),d=i(898781),c=i(177471),u=i(780280),h=i(19121),p=i(356997);let _=(e,t,i)=>{let r=e.name.toLocaleLowerCase(),n=t.name.toLocaleLowerCase();return r<n?i?-1:1:r>n?i?1:-1:0},g=(e,t,i)=>e.lastModified||t.lastModified?e.lastModified?t.lastModified?e.lastModified<t.lastModified?i?-1:1:e.lastModified>t.lastModified?i?1:-1:_(e,t,!0):1:-1:_(e,t,!0);var m=i(785893);function f({path:e="",rootName:t="Home",onChangeDirectory:i}){let r=e;e&&"/"!==e.charAt(0)&&(r="/".concat(r)),e&&"/"===e.charAt(e.length-1)&&(r=r.substring(0,e.length-1));let o=r.split("/");return(0,m.jsx)(n.kC,{alignItems:"start",justifyContent:"start",children:o.map((e,r)=>{let s=o.slice(0,r+1).join("/");return(0,m.jsxs)(n.xu,{display:"flex",children:[r>0&&(0,m.jsx)(n.xu,{paddingX:1,children:(0,m.jsx)(n.xv,{color:"subtle",children:">"})}),(0,m.jsx)(n.xu,{paddingX:1,children:(0,m.jsx)(n.iP,{onTap:()=>i(s),children:(0,m.jsx)(n.xv,{color:r===o.length-1?"default":"subtle",children:0===r?t:e})})})]},s)})})}var x=i(795067);function b(e){return -1===e.indexOf(".")?"":e.trim().split(".").pop().toLowerCase()}var y=i(531245);function v(e){let t=b(e.name);return"dropboxFolder"===e.type||!!t&&y.P7.includes(t)||!!t&&y.sc.includes(t)}function P(e,t){let i=e.lastIndexOf("."),r=i-3,n=e.substr(r);return e.length>t&&r-3>=1?`${e.substr(0,t-(n.length+3))}...${n}`:e}var S=i(938999);function A({item:e}){let{name:t,type:i}=e,r=e.thumbnail?"data:image/jpeg;base64,".concat(e.thumbnail):"",o=v(e);return(0,m.jsx)(n.zd,{rounding:2,height:"100%",width:"100%",children:(0,m.jsx)(n.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:o&&r?(0,m.jsx)(n.Ee,{alt:t||"",fit:"cover",src:r,naturalHeight:1,naturalWidth:1}):(0,m.jsx)(n.JO,{icon:"dropboxFolder"===i?"folder":"file-unknown",accessibilityLabel:"dropboxFolder"===i?"Folder icon":"Unknown file icon",size:"60%"})})})}function w({color:e,duration:t,type:i}){let o=(0,d.ZP)();return(0,m.jsx)(n.xu,{color:e,display:"flex",rounding:"pill",paddingX:2,paddingY:1,children:"localVideo"===i||"dropboxVideo"===i?(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(n.JO,{accessibilityLabel:o.bt("Video icon", "Video icon", "Icon label to tell if media type is a video", undefined, true),color:"inverse",icon:"video-camera"}),!!t&&(0,m.jsx)(n.xu,{marginStart:1,children:(0,m.jsx)(n.xv,{color:"inverse",size:"200",children:t})})]}):(0,m.jsx)(n.xv,{color:"inverse",size:"200",children:o.bt("GIF", "GIF", "Text to represent media is a GIF image", undefined, true)})})}function E({number:e}){return(0,m.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:24,justifyContent:"center",margin:3,right:!0,position:"absolute",rounding:"circle",top:!0,width:24,"data-test-id":"number-overlay",children:(0,m.jsx)(n.xv,{color:"inverse",size:"200",weight:"bold",children:e})})}let I={paddingInlineStyle:{__style:{padding:6}},disabledOverlayInlineStyle:{__style:{padding:2,opacity:.5}},marginInlineStyle:{margin:2},thumbnailInlineStyle:{padding:2,cursor:"pointer"}};function j({item:e,onClick:t,selected:i,selectedIndex:o}){let[s,l]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>t(e),[e,t]),d=(0,r.useCallback)(()=>l(!0),[l]),c=(0,r.useCallback)(()=>l(!1),[l]),u=v(e),h=(0,x.Z)(e),p=(0,m.jsxs)(n.xu,{rounding:2,height:153,width:153,position:"relative",display:"flex",alignItems:"center",justifyContent:"center",color:s?"lightWash":"secondary",children:[(0,m.jsx)(A,{item:e}),o>=0&&(0,m.jsx)(E,{number:o+1}),!!h&&(0,m.jsx)(n.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,m.jsx)(w,{color:"transparentDarkGray",type:h})})]}),_=(0,m.jsxs)(n.xu,{paddingY:2,children:[(0,m.jsx)(n.xv,{size:"200",lineClamp:1,children:P(e.name,20)}),(0,m.jsxs)(n.xu,{paddingY:1,children:[!!e.items&&(0,m.jsx)(n.xv,{size:"100",lineClamp:1,children:`${e.items} items`}),!!e.size&&(0,m.jsx)(n.xv,{size:"100",lineClamp:1,children:e.size})]})]});return(0,m.jsx)(S.Z,{onClick:u?a:void 0,rounded:!0,style:I.marginInlineStyle,children:(0,m.jsx)(n.xu,{rounding:2,width:168,dangerouslySetInlineStyle:u?I.paddingInlineStyle:I.disabledOverlayInlineStyle,children:u?(0,m.jsxs)(n.st,{onMouseEnter:d,onMouseLeave:c,children:[(0,m.jsx)(S.Z,{selected:i,rounded:!0,style:I.thumbnailInlineStyle,children:p}),_]}):(0,m.jsxs)(r.Fragment,{children:[p,_]})})})}function C({items:e,selected:t,onClick:i}){return(0,m.jsx)(n.Rk,{renderItem:({data:e})=>{let r=t.map(e=>e.id);return(0,m.jsx)(j,{item:e,onClick:i,selected:r.includes(e.id),selectedIndex:r.indexOf(e.id)},e.id)},columnWidth:168,layout:"uniformRow",gutterWidth:4,items:e,minCols:5})}function T(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let D=["grid","list"],O={grid:0,list:1},z={__style:{zIndex:1e3}};class R extends r.Component{constructor(...e){super(...e),T(this,"state",{view:this.props.initialView,sort:"newest",query:"",isFlyoutOpen:!1}),T(this,"handleSearch",({value:e})=>this.setState({query:e})),T(this,"handleChangeView",({activeIndex:e})=>{this.setState({view:D[e]})}),T(this,"handleSort",({value:e})=>this.setState({sort:e})),T(this,"handleSetRef",e=>{this._ref=e}),T(this,"handleAvatarClick",()=>{let{onFlyoutChange:e}=this.props,{isFlyoutOpen:t}=this.state;this.setState({isFlyoutOpen:!t}),e&&e(!t)}),T(this,"handleFlyoutDismiss",()=>{let{onFlyoutChange:e}=this.props;this.setState({isFlyoutOpen:!1}),e&&e(!1)}),T(this,"options",[{label:this.props.i18n.bt("Newest", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Oldest", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("A to Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Z to A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),T(this,"getSort",e=>{switch(e){case"oldest":return(e,t)=>g(e,t,!0);case"a-z":return(e,t)=>_(e,t,!0);case"z-a":return(e,t)=>_(e,t,!1);default:return(e,t)=>g(e,t,!1)}})}render(){let{path:e,items:t,selected:i,name:r,avatarUrl:o,onChangeDirectory:s,onFileClick:l,onLogout:a}=this.props,{view:d,sort:c,query:u,isFlyoutOpen:h}=this.state,_=[...t].sort(this.getSort(c)),g=u.length>0?_.filter(e=>e.name.toLocaleLowerCase().includes(u.toLocaleLowerCase())):_;return(0,m.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:"100%",children:[(0,m.jsxs)(n.xu,{direction:"row",display:"flex",paddingY:2,marginStart:-1,marginEnd:-1,children:[(0,m.jsx)(n.xu,{paddingX:2,ref:this.handleSetRef,children:(0,m.jsx)(n.iP,{onTap:this.handleAvatarClick,rounding:"circle",children:(0,m.jsx)(p.qE,{size:"sm",name:r,src:o})})}),(0,m.jsx)(n.xu,{flex:"grow",paddingX:2,children:(0,m.jsx)(n.Um,{accessibilityLabel:this.props.i18n.bt("Search", "Search", "Accessibility label for the searching through dropbox items and folders", undefined, true),id:"dropbox-search-field",onChange:this.handleSearch,placeholder:this.props.i18n.bt("Search", "Search", "Placeholder for search field", undefined, true),size:"lg",value:u})}),(0,m.jsx)(n.xu,{paddingX:2,children:(0,m.jsx)(n.sY,{items:[(0,m.jsx)(n.JO,{icon:"view-type-default",accessibilityLabel:"Switch to Grid View"}),(0,m.jsx)(n.JO,{icon:"view-type-list",accessibilityLabel:"Switch to List View"})],selectedItemIndex:O[d],onChange:this.handleChangeView})}),(0,m.jsx)(n.xu,{paddingX:2,width:174,children:(0,m.jsx)(n.EI,{id:"asset-picker-dropbox-sort-select-list",onChange:this.handleSort,value:c,children:this.options.map(({label:e,value:t})=>(0,m.jsx)(n.EI.Option,{label:e,value:t},e))})})]}),(0,m.jsx)(n.xu,{paddingY:2,children:(0,m.jsx)(f,{path:e,rootName:"Dropbox",onChangeDirectory:s})}),(0,m.jsx)(n.xu,{marginStart:-2,marginEnd:-2,width:0,children:(0,m.jsx)(C,{items:g,selected:i,onClick:l})}),h&&(0,m.jsx)(n.mh,{children:(0,m.jsx)(n.xu,{position:"absolute",top:!0,dangerouslySetInlineStyle:z,children:(0,m.jsx)(n.J2,{anchor:this._ref,onDismiss:this.handleFlyoutDismiss,idealDirection:"down",positionRelativeToAnchor:!1,children:(0,m.jsx)(n.xu,{width:"100%",padding:4,children:(0,m.jsxs)(n.xu,{width:"100%",display:"flex",direction:"column",justifyContent:"center",marginTop:-2,marginBottom:-2,children:[(0,m.jsxs)(n.xu,{display:"flex",paddingY:2,alignItems:"center",children:[(0,m.jsx)(p.qE,{size:"sm",name:r,src:o}),(0,m.jsx)(n.xu,{paddingX:2,children:(0,m.jsx)(n.xv,{children:r})})]}),(0,m.jsx)(n.iz,{}),(0,m.jsxs)(n.xu,{paddingY:2,children:[(0,m.jsx)(n.xu,{paddingY:2,children:(0,m.jsx)(n.rU,{href:"https://www.dropbox.com",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,m.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,m.jsx)(n.xv,{weight:"bold",children:this.props.i18n.bt("Go to Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)}),(0,m.jsx)(n.JO,{icon:"visit",color:"default",accessibilityLabel:this.props.i18n.bt("Go to Dropbox", "Go to Dropbox", "Link to redirect to Dropbox index page", undefined, true)})]})})}),(0,m.jsx)(n.xu,{paddingY:2,children:(0,m.jsx)(n.rU,{href:"#",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{e.preventDefault(),t(),a()},children:(0,m.jsx)(n.xv,{weight:"bold",children:this.props.i18n.bt("Sign out", "Sign out", "Button to unlink user from their Dropbox account", undefined, true)})})})]})]})})})})})]})}}function k(e){let t=(0,d.ZP)();return(0,m.jsx)(R,{...e,i18n:t})}T(R,"defaultProps",{items:[],selected:[],initialView:"grid",path:"",name:"Dropbox User",avatarUrl:""});var L=i(870479);function N({onClick:e}){return(0,m.jsx)(n.xu,{height:"100%",children:(0,m.jsxs)(n.xu,{height:"100%",alignItems:"center",direction:"column",display:"flex",justifyContent:"center",padding:3,children:[L.Z,(0,m.jsx)(n.xu,{paddingY:5,children:(0,m.jsx)(n.xv,{weight:"bold",children:"Connect to your Dropbox account"})}),(0,m.jsx)(n.zx,{text:"Sign in",color:"gray",onClick:e})]})})}var B=i(205992);function Z(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M extends r.Component{constructor(...e){super(...e),Z(this,"state",{path:"",userName:"",userAvatarURL:"",items:[],isLoading:!1}),Z(this,"_isMounted",!1),Z(this,"startDropboxAuthorization",()=>{let{socialManager:e,updateSocialNetwork:t,setError:i}=this.props;e.handleConnect("dropbox",!0,{success:()=>{this._isMounted&&(t("dropbox",!0),this.setState({isLoading:!0},this.getUserAccountInfo))},error:()=>{this._isMounted&&i(this.props.i18n.bt("Your Dropbox sign-in didn't work. Give it another try.", "Hmm... your Dropbox sign in didn't work. Give it another try.", "Error message to indicate that there was error happened while signing into Dropbox", undefined, true))}},this.props.i18n)}),Z(this,"listPathContent",()=>{let{setError:e}=this.props,{path:t}=this.state;(0,a.Z)({url:"/v3/dropbox/folder/",data:{path:t}}).then(e=>{let{entries:t}=e.resource_response.data,i=t.map(e=>e.id),r=t.reduce((e,t)=>("file"===t[".tag"]?e[t.id]={id:t.id,type:"dropboxFile",name:t.name,size:function(e,t){let i=t?1e3:1024;if(Math.abs(e)<i)return e+" B";let r=["KB","MB","GB","TB","PB","EB","ZB","YB"],n=-1;do e/=i,n+=1;while(Math.abs(e)>=i&&n<r.length-1)let o=e.toFixed(1);return o.endsWith(".0")&&(o=o.substring(0,o.length-2)),o+" "+r[n]}(t.size,!1),lastModified:new Date(t.client_modified),isDownloadable:t.is_downloadable}:e[t.id]={id:t.id,type:"dropboxFolder",name:t.name},e),{});(0,a.Z)({url:"/v3/dropbox/files/",data:{paths:i,add_fields:["dropboxfile.thumbnail"]}}).then(e=>{let t=e.resource_response.data;t.forEach(e=>{"success"===e.thumbnail[".tag"]&&(r[e.id]={...r[e.id],thumbnail:e.thumbnail.thumbnail})});let i=Object.values(r),n=i.filter(e=>"dropboxFolder"===e.type).map(e=>(0,a.Z)({url:"/v3/dropbox/folder/",data:{path:e.id}}));return Promise.all(n)}).then(e=>{e.forEach(e=>{let{data:t}=e.resource_response;r[t.path].items=t.size})}).then(()=>{if(this._isMounted){let e=Object.values(r);this.setState({items:e},()=>this.setState({isLoading:!1}))}})}).catch(t=>{this._isMounted&&this.setState({isLoading:!1},()=>e(this.props.i18n.bt("Your files from Dropbox didn't upload. Try again.", "Hmm... your files from Dropbox didn't upload. Try again.", "Error message to indicate that there was error happened while retrieving files in user’s Dropbox", undefined, true)))})}),Z(this,"handleClick",e=>{let{onSelect:t}=this.props,{path:i}=this.state;"dropboxFolder"===e.type?this.handleChangeDirectory(`${i}/${e.name}`):t(e)}),Z(this,"handleChangeDirectory",e=>{this.setState({path:e,isLoading:!0},this.listPathContent)}),Z(this,"getUserAccountInfo",()=>{(0,a.Z)({url:"/v3/dropbox/users/me/"}).then(e=>{if(this._isMounted){let{data:t}=e.resource_response;this.setState({userName:t.name.display_name,userAvatarURL:t.profile_photo_url},this.listPathContent)}}).catch(e=>{let{setError:t}=this.props;t("Hmm... We didn't get your Dropbox account information. Try again.")})}),Z(this,"handleLogout",()=>{let{updateSocialNetwork:e}=this.props;e("dropbox",!1),(0,a.Z)({url:"/v3/connect/dropbox/",method:"DELETE"})})}componentDidMount(){let{viewer:e}=this.props;this._isMounted=!0,e.isAuth&&e.socialNetwork.dropbox.connected&&this.setState({isLoading:!0},this.getUserAccountInfo)}componentWillUnmount(){this._isMounted=!1}render(){let{viewer:e,visible:t,selectedAssets:i,onFlyoutChange:r}=this.props,{items:o,path:s,userName:l,userAvatarURL:a,isLoading:d}=this.state,c=e.isAuth&&e.socialNetwork.dropbox.connected;return(0,m.jsxs)(n.xu,{column:12,display:t?"block":"none",height:"100%",padding:3,children:[(0,m.jsx)(n.xu,{height:"100%",paddingX:3,paddingY:1,children:c?(0,m.jsx)(k,{avatarUrl:a,initialView:"grid",items:o,name:l,onChangeDirectory:this.handleChangeDirectory,onFileClick:this.handleClick,onFlyoutChange:r,onLogout:this.handleLogout,path:s,selected:i}):(0,m.jsx)(N,{onClick:this.startDropboxAuthorization})}),d&&(0,m.jsx)(n.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,m.jsx)(n.$j,{accessibilityLabel:this.props.i18n.bt("Dropbox loading spinner", "Dropbox Loading Spinner", "description for loading spinner inside AssetPicker Dropbox tab", undefined, true),show:!0})})]})}}function F(e){let t=(0,l.useDispatch)(),i=(0,d.ZP)(),r=(0,c.k)();return(0,m.jsx)(M,{...e,i18n:i,requestContext:(0,u.B)(),socialManager:r,updateSocialNetwork:(e,i)=>t((0,B.V6)(e,i)),viewer:(0,h.Z)()})}var U=i(784590),H=i(717615),V=i(596505),G=i(81226),W=i(299295),$=i(665866),X=i(925797),Y=i(454074),q=i(281139);function K({addAssets:e}){let t=(0,d.ZP)(),i=(0,r.useCallback)(t=>e?e(t):()=>{},[e]);return(0,m.jsx)(n.xu,{height:160,marginBottom:4,rounding:2,width:160,children:(0,m.jsx)(q.Z,{accept:[...y.xl,...y.ss].join(","),allowMultipleFiles:!0,id:"asset-empty-view-upload",onChange:e=>{let t=Array.from(e.target.files);i(t)},onDrop:e=>{let t=(0,Y.Z)(e.dataTransfer);i(t)},children:()=>(0,m.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,m.jsx)(n.JO,{accessibilityLabel:t.bt("Add assets", "Add assets", "Accessibility label for adding images and videos", undefined, true),icon:"add-circle",size:32})})})})}var J=i(382415);function Q({height:e,image:t,width:i}){let{height:r,src:o,width:s}=t;return(0,m.jsxs)(n.zd,{rounding:2,height:"100%",width:"100%",children:[(0,m.jsx)(n.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,m.jsx)(J.Z,{color:"rgba(0, 0, 0, 0.12)"})}),(0,m.jsx)(n.Ee,{alt:t.name||"",fit:e||i?"cover":void 0,naturalHeight:e||r||1,src:o,naturalWidth:i||s||1})]})}function ee({height:e,width:t,title:i,description:r,image236x:o,image474x:s}){let{height:l,width:a,url:d}=s||o||{};return(0,m.jsx)(n.zd,{rounding:2,height:e||"100%",width:t||"100%",children:(0,m.jsx)(n.Ee,{alt:i||r||"",fit:e||t?"cover":void 0,naturalHeight:null!=l?l:1,naturalWidth:null!=a?a:1,src:null!=d?d:""})})}function et({height:e,width:t,video:i}){let{customCoverImg:r}=i;return(0,m.jsx)(n.zd,{height:e,rounding:2,width:t,children:(0,m.jsx)(n.Ee,{alt:r&&r.name||"",fit:e||t?"cover":void 0,naturalHeight:e||r&&r.height||0,src:r&&r.src||"",naturalWidth:t||r&&r.width||0})})}function ei({asset:e,height:t,width:i}){if("localImage"===e.type||"webImage"===e.type)return(0,m.jsx)(Q,{image:e,height:t,width:i});if("pin"===e.type){var r,n;return(0,m.jsx)(ee,{title:e.title,description:e.description,image236x:null!==(r=e.images)&&void 0!==r&&r["236x"]?{height:e.images["236x"].height,url:e.images["236x"].url,width:e.images["236x"].width}:void 0,image474x:null!==(n=e.images)&&void 0!==n&&n["474x"]?{height:e.images["474x"].height,url:e.images["474x"].url,width:e.images["474x"].width}:void 0,height:t,width:i})}return"localVideo"===e.type?(0,m.jsx)(et,{height:t,width:i,video:e}):"dropboxFile"===e.type||"dropboxFolder"===e.type?(0,m.jsx)(A,{item:e}):null}var er=i(984268);function en({addAssets:e,asset:t,onSelect:i,selected:o,selectedIndex:s}){let l=(0,r.useCallback)(()=>i(t),[t]);if("blank"===t.type)return(0,m.jsx)(K,{addAssets:e});let a="localVideo"===t.type?1e3*t.duration:void 0,{video_list:d}="pin"===t.type&&t.videos?t.videos:{},{duration:c}=d&&d.V_720P||{},u=(0,x.Z)(t),h=a||c?(0,G.Z)(a||c||0):void 0;return(0,m.jsxs)(n.xu,{"data-group-id":"asset-picker-view-grid-group-item",column:12,children:[(0,m.jsxs)(S.Z,{onClick:l,rounded:!0,selected:o,children:[(0,m.jsxs)(n.xu,{position:"relative","data-test-id":"asset-picker-view-item",children:[(0,m.jsx)(ei,{asset:t}),!!u&&(0,m.jsx)(n.xu,{bottom:!0,left:!0,margin:1,position:"absolute",children:(0,m.jsx)(w,{color:"transparentDarkGray",duration:h,type:u})})]}),s>=0&&(0,m.jsx)(E,{number:s+1})]}),$.Z.enabled("shop_the_pin")&&"pin"===t.type&&(0,m.jsxs)(n.xu,{children:[(0,m.jsx)(er.dV,{input:{type:"deprecated",data:t},children:e=>!!e&&(0,m.jsx)(n.xu,{children:(0,m.jsx)(n.xu,{paddingY:1,display:"flex",children:(0,m.jsx)(X.Z,{text:e,icon:"tag"})})})}),(0,m.jsx)(er.v2,{input:{type:"deprecated",data:t},children:e=>!!e&&(0,m.jsx)(n.xu,{width:W.MN,children:(0,m.jsx)(n.xv,{overflow:"breakWord",size:"200",weight:"bold",children:e})})})]}),!!t.name&&(0,m.jsx)(n.xu,{paddingY:1,title:t.name,children:(0,m.jsx)(n.xv,{size:"200",children:P(String(t.name),20)})})]})}function eo(e){let{assets:t,loadItems:i,scrollContainer:r}=e;return(0,m.jsx)(n.Rk,{renderItem:({data:t,itemIdx:i})=>{let{addAssets:r,onSelect:n,selectedAssets:o,showAddAssetButton:s=!0}=e,l=s&&0===i;return(0,m.jsx)(en,{addAssets:r,asset:l?{id:"pinbuilder_asset_picker_blank",type:"blank"}:t,onSelect:l?()=>{}:n,selected:!l&&(()=>{let e=o.includes(t);return!!e||!!o.find(e=>t.id===e.id)})(),selectedIndex:l?-1:(()=>{let e=o.indexOf(t);return e>-1?e:o.findIndex(e=>e.id===t.id)})()})},columnWidth:158,gutterWidth:16,items:t,loadItems:i,scrollContainer:r,minCols:5})}function es({onSelect:e,pins:t,selectedAssets:i,shouldShowProductsOnly:o,searchFilterText:s,addAssets:l}){let a=(0,d.ZP)(),[c,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>u(t&&!t.isLoaded));let h=o?er.VX:er.Bc,p=t&&t.data&&t.data.reduce((e,t)=>(t&&"pin"===t.type&&h(t)&&(0,er.ir)(t,s)&&e.push(t),e),[])||[];return(0,m.jsxs)(n.xu,{alignItems:"center",display:"flex","data-test-id":"asset-picker-pins-pane",height:c?"100%":void 0,justifyContent:"center",children:[(0,m.jsx)(n.$j,{accessibilityLabel:a.bt("Loading...", "Loading...", "Loading", undefined, true),show:c}),t&&t.data&&t.data.length>0&&(0,m.jsx)(eo,{addAssets:l,assets:p,onSelect:e,loadItems:t.fetchMore,scrollContainer:()=>window,selectedAssets:i,showAddAssetButton:!1})]})}function el({addAssets:e,onSelect:t,searchFilterText:i,selectedAssets:r,shouldShowProductsOnly:n,username:o}){let s=(0,U.Z)({name:"UserPinsResource",options:{field_set_key:"detailed",username:o,prepend:!1,include_protected_pins:!0,limit:1e3,page_size:150}});return(0,m.jsx)(es,{addAssets:e,onSelect:t,pins:s,searchFilterText:i,selectedAssets:r,shouldShowProductsOnly:n})}function ea(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ed={PRODUCTS:"PRODUCTS",ALL_PINS:"ALL_PINS"},ec=e=>new Map([[ed.PRODUCTS,e.bt("Product Pins", "Product Pins", "Dropdown filter to show products only", undefined, true)],[ed.ALL_PINS,e.bt("All Pins", "All Pins", "Dropdown filter to show all pins", undefined, true)]]);class eu extends r.PureComponent{constructor(...e){super(...e),ea(this,"state",{shouldShowProductsOnly:!0,searchText:"",showDropdownFlyout:!1,currentSelection:ed.PRODUCTS}),ea(this,"setContainerRef",e=>{this.containerRef=e}),ea(this,"handleHideDropdownFlyout",e=>{e.target instanceof HTMLElement&&this.setState(t=>({showDropdownFlyout:!!(this.containerRef&&e.target instanceof HTMLElement&&this.containerRef.contains(e.target))&&!t.showDropdownFlyout}))}),ea(this,"dropdownOnChange",e=>{e&&this.setState({shouldShowProductsOnly:e.value===ed.PRODUCTS,showDropdownFlyout:!1,currentSelection:e.value})}),ea(this,"handleSearchQueryUpdates",e=>{this.setState({searchText:e.value})}),ea(this,"handleAssetSelect",e=>{let{onSelect:t}=this.props;t(e)})}componentDidMount(){document.addEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideDropdownFlyout,{capture:!0})}render(){let{selectedAssets:e,visible:t,viewer:i,user:{data:r}}=this.props,{shouldShowProductsOnly:o,searchText:s,showDropdownFlyout:l,currentSelection:a}=this.state,d=ec(this.props.i18n),c=(r?r.username:i&&i.isAuth&&i.username)||"";return this.props.orbacActingAs&&this.props.orbacActingAs.user&&this.props.orbacActingAs.user.username&&(c=this.props.orbacActingAs.user.username),(0,m.jsxs)(n.xu,{column:12,"data-test-id":"asset-picker-tagging-pane",display:t?"block":"none",height:"100%",padding:3,children:[(0,m.jsx)(n.xu,{marginStart:4,children:(0,m.jsx)(n.X6,{size:"500",children:this.props.i18n.bt("Use your Pins", "Use your Pins", "Select products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,m.jsx)(n.xu,{marginStart:4,marginTop:3,children:(0,m.jsx)(n.xv,{children:this.props.i18n.bt("Keep it simple – use your existing Pins to add products to your image. Add products in the order you want people to see them.", "Keep it simple—use your existing Pins to add products to your image. Add products in the order you want people to see them.", "Description of the functionalities in the pins picker tab", undefined, true)})}),(0,m.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",margin:4,children:[(0,m.jsx)(n.xu,{column:10,rounding:2,children:(0,m.jsx)(n.nv,{id:"search",onChange:this.handleSearchQueryUpdates,placeholder:this.props.i18n.bt("Search Pin title or description", "Search Pin title or description", "Placeholder search bar text to search the pins", undefined, true),size:"lg",type:"text",value:s})}),(0,m.jsx)(n.xu,{ref:this.setContainerRef,children:(0,m.jsx)(n.xu,{column:3,"data-test-id":"pins-filter-dropdown",marginStart:4,rounding:2,children:(0,m.jsx)(V.Z,{isOpen:l,onChange:this.dropdownOnChange,onClose:this.dropdownOnChange,onOpen:this.dropdownOnChange,options:Object.keys(ed).map(e=>ed[e]).map(e=>({label:d.get(e),value:e})),value:{label:d.get(a),value:{currentSelection:a}}})})})]}),(0,m.jsx)(n.xu,{children:t&&(0,m.jsx)(el,{addAssets:void 0,onSelect:this.handleAssetSelect,searchFilterText:s,selectedAssets:e,shouldShowProductsOnly:o,username:c})})]})}}function eh(e){let t=(0,l.useSelector)(({advertiser:e})=>e),i=(0,d.ZP)(),r=(0,h.Z)(),n=(0,H.Z)(),o=(0,U.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!t&&t.owner_user_id||r.isAuth&&r.id||""}});return(0,m.jsx)(eu,{...e,advertiser:t,i18n:i,orbacActingAs:n,user:o,viewer:r})}var ep=i(66699),e_=i(966113),eg=i(77891),em=i(916655),ef=i(407043);function ex(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eb={__style:{zIndex:W.v9}};class ey extends r.Component{constructor(...e){super(...e),ex(this,"state",{sort:"newest",query:""}),ex(this,"handleSearch",({value:e})=>{this.props.logContextEvent({event_type:7472,component:13392,element:11270}),this.setState({query:e})}),ex(this,"getSort",e=>{switch(e){case"oldest":return()=>-1;case"a-z":return(e,t)=>{let i=e.name.toLocaleLowerCase(),r=t.name.toLocaleLowerCase();return i<r?-1:i>r?1:0};case"z-a":return(e,t)=>{let i=e.name.toLocaleLowerCase(),r=t.name.toLocaleLowerCase();return i>r?-1:i<r?1:0};default:return()=>0}}),ex(this,"handleSort",({value:e})=>{this.props.logContextEvent({event_type:3828,component:13392,element:11273}),this.setState({sort:e})}),ex(this,"options",[{label:this.props.i18n.bt("Newest", "Newest", "Dropdown option to sort by newest", undefined, true),value:"newest"},{label:this.props.i18n.bt("Oldest", "Oldest", "Dropdown option to sort by oldest", undefined, true),value:"oldest"},{label:this.props.i18n.bt("A to Z", "A to Z", "Dropdown option to sort by descending alphabetical order", undefined, true),value:"a-z"},{label:this.props.i18n.bt("Z to A", "Z to A", "Dropdown option to sort by ascending alphabetical order", undefined, true),value:"z-a"}]),ex(this,"handleDrop",e=>{let{addAssets:t,logContextEvent:i}=this.props,r=(0,Y.Z)(e.dataTransfer);i({event_type:3502,component:13392,element:11275}),t(r)}),ex(this,"handleSearchFieldFocus",()=>{this.props.logContextEvent({event_type:101,component:13392,element:11270})})}render(){let{addAssets:e,assets:t,onSelect:i,selectedAssets:r}=this.props,{sort:o,query:s}=this.state,l=[...t].sort(this.getSort(o)),a=s.length>0?l.filter(e=>e.name.toLocaleLowerCase().includes(s.toLocaleLowerCase())):l;return(0,m.jsxs)(n.xu,{"data-test-id":"asset-picker-uploaded-pane",direction:"column",display:"flex",height:"100%",children:[(0,m.jsxs)(n.xu,{"data-test-id":"uploaded-pane-filter-box",display:"flex",padding:2,children:[(0,m.jsx)(n.xu,{flex:"grow",paddingX:1,children:(0,m.jsx)(n.Um,{accessibilityLabel:this.props.i18n.bt("Search", "Search", "Accessibility label for the searching through uploaded images and videos", undefined, true),id:"asset-search-field",onChange:this.handleSearch,onFocus:this.handleSearchFieldFocus,placeholder:this.props.i18n.bt("Search", "Search", "Placeholder for search field", undefined, true),size:"lg",value:s})}),(0,m.jsx)(n.xu,{paddingX:1,width:168,children:(0,m.jsx)(n.EI,{id:"asset-picker-sort-select-list",onChange:this.handleSort,value:o,children:this.options.map(({label:e,value:t})=>(0,m.jsx)(n.EI.Option,{label:e,value:t},e))})})]}),(0,m.jsx)(n.xu,{height:"100%",position:"relative",width:"100%",children:(0,m.jsx)(q.Z,{accept:[...y.xl,...y.ss].join(","),allowMultipleFiles:!0,color:"white",id:"asset-picker-upload-pane",onDrop:this.handleDrop,children:t=>(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:t?void 0:eb,paddingY:2,position:"relative",children:(0,m.jsx)(eo,{addAssets:e,assets:[{id:"pinbuilder_asset_picker_blank",type:"blank"},...a],onSelect:i,selectedAssets:r})})})})]})}}function ev(e){let{logContextEvent:t}=(0,ef.v)(),i=(0,d.ZP)();return(0,m.jsx)(ey,{...e,i18n:i,logContextEvent:t})}var eP=i(172045),eS=i(69183),eA=i(623320),ew=i(474394);function eE({onSelect:e,setLoading:t,setError:i,selectedAssets:o,visible:a}){let c=(0,d.ZP)(),u=(0,s.Z)(),[h,p]=(0,r.useState)(""),_=(0,l.useDispatch)(),g=e=>_((0,ew.addPinBuilderAsset)(e)),f=(0,l.useSelector)(({pinbuilder:e})=>e.assets),x=t=>(i(""),p(""),(0,eg.Z)({i18n:c,ideaPinRenamingEnabled:u,files:t,options:{allowVideo:!0}}).then(t=>{let r=t.reduce((e,t)=>"localVideo"===t.type?[...e,(0,eS.v)(t,0).then(e=>({...t,customCoverImg:{id:(0,eP.Z)(),fileSrc:t.fileSrc,name:t.name,size:(0,eA.Mi)(e).size,src:e,width:t.width,height:t.height,type:"localImage"}}))]:"localImage"===t.type||"error"===t.type?[...e,Promise.resolve(t)]:e,[]);return Promise.all(r).then(t=>{let r=t.reduce((e,t)=>"error"===t.type?[...e,t]:e,[]),o=t.reduce((e,t)=>"error"!==t.type?[...e,t]:e,[]);r.length>0&&((f.length>0||o.length>0)&&i((0,ep.Z)(c.nbt(["Sorry, {{numOfErrors}} file could not be uploaded.", "Sorry, {{numOfErrors}} files could not be uploaded."], r.length, "Error message saying how many files could not be uploaded", true),{numOfErrors:r.length}),null,(0,m.jsx)(n.rU,{href:e_.CmU,onClick:({dangerouslyDisableOnNavigation:e})=>e(),target:"blank",children:(0,m.jsx)(n.zx,{color:"transparent",text:c.bt("Learn more", "Learn more", "Learn more about error", undefined, true)})})),p(r[0].message)),o.forEach(t=>{g(t),e(t)})})}));return(0,m.jsx)(n.xu,{column:12,display:a?"block":"none",height:"100%",children:f.length>0?(0,m.jsx)(n.xu,{height:"100%",paddingX:3,paddingY:1,children:(0,m.jsx)(ev,{addAssets:x,assets:f,onSelect:e,selectedAssets:o})}):(0,m.jsx)(n.xu,{height:"100%",padding:3,children:(0,m.jsx)(em.Z,{addAssets:x,errorMessage:h})})})}var eI=i(121151),ej=i(123463),eC=i(566101),eT=i(231947);function eD(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eO={border:"none",bottom:0,borderRadius:"0px 16px 16px 0px",height:"100%",width:"40px"};class ez extends r.Component{constructor(...e){super(...e),eD(this,"state",{value:this.props.initialValue||""}),eD(this,"handleOnChange",({value:e})=>{this.setState({value:e})}),eD(this,"handleOnSubmit",e=>{let{onSubmit:t}=this.props,{value:i}=this.state;e.preventDefault(),t({event:e,value:i})})}render(){let{id:e,placeholder:t,type:i}=this.props,{value:r}=this.state;return(0,m.jsx)(n.xu,{color:"secondary",rounding:4,children:(0,m.jsx)("form",{onSubmit:this.handleOnSubmit,noValidate:!0,children:(0,m.jsxs)(n.xu,{marginStart:-1,marginEnd:-1,display:"flex",children:[(0,m.jsx)(n.xu,{position:"relative",width:"100%",paddingX:1,flex:"grow",children:(0,m.jsx)(n.nv,{id:e,onChange:this.handleOnChange,placeholder:t,size:"lg",type:i,value:r})}),(0,m.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,m.jsx)("button",{style:eO,type:"submit",right:"",children:(0,m.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Submit", "Submit", "Icon Button for submitting a text field value", undefined, true),icon:"arrow-forward",inline:!0})})})]})})})}}function eR(e){let t=(0,d.ZP)();return(0,m.jsx)(ez,{...e,i18n:t})}function ek({itemId:e,onSelect:t,onSubmit:i,selectedAssets:r}){let o=(0,d.ZP)(),s=(0,u.B)(),l=(0,H.Z)(),a=(0,h.Z)(),c=(0,eT.lJ)(a,l)||a.isAuth&&a.id,{data:p,isLoaded:_}=(0,U.Z)({name:"ProductGroupItemIdPinResource",options:{merchantId:(0,eT._P)(s,a,l),...c!==a.id?{orbacSubjectId:c}:{},itemId:e,filters:{1:[e]}}});if(!_)return(0,m.jsx)(n.$j,{accessibilityLabel:o.bt("Loading...", "Loading...", "Loading", undefined, true),show:!0});let g=(null!=p?p:[]).reduce((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){let e=t.rich_metadata.url||t.rich_metadata.id;(0,eC.Z)({url:e||""})&&(t.link=e)}e.push(t)}return e},[]);return(0,m.jsxs)(n.xu,{children:[(0,m.jsx)(n.xu,{paddingX:3,marginBottom:4,children:(0,m.jsx)(eR,{id:"asset-picker-itemid",initialValue:e,onSubmit:i,placeholder:o.bt("Enter product item ID", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),g.length>0?(0,m.jsx)(eo,{assets:g,onSelect:t,selectedAssets:r,showAddAssetButton:!1}):(0,m.jsx)(n.xu,{padding:5,maxWidth:468,children:(0,m.jsx)(n.xv,{align:"center",color:"error",size:"200",children:o.bt("Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "Error message when no pins are returned after searching via catalogs item ID", undefined, true)})})]})}function eL(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eN extends r.Component{constructor(...e){super(...e),eL(this,"state",{itemId:"",validationError:null}),eL(this,"handleOnSubmit",({value:e})=>{let t=e.trim().toLowerCase();t?(this.props.logContextEvent({event_type:7472,component:13392,element:11451}),this.setState({itemId:t,validationError:""})):this.setState({validationError:this.props.i18n.bt("There’s no Pin for that. Correct any item ID formatting errors and try again.", "Hmm, there’s no Pin for that. Correct any item ID formatting errors and try again.", "AssetPickerCatalogTab.NoPinError", undefined, true)})})}render(){let{onSelect:e,selectedAssets:t,visible:i}=this.props,{itemId:r,validationError:o}=this.state;return(0,m.jsx)(n.xu,{column:12,height:"100%",display:i?"block":"none",padding:3,children:r.length>0?(0,m.jsx)(ek,{itemId:r,onSubmit:this.handleOnSubmit,onSelect:e,selectedAssets:t}):(0,m.jsxs)(n.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,m.jsxs)(n.xu,{marginBottom:3,children:[(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:this.props.i18n.bt("Add a product with its item ID", "Add a product with its item ID", "Prompt for adding a product from a catalog using an item ID", undefined, true)}),(0,m.jsx)(n.xv,{align:"center",children:this.props.i18n.bt("Product item IDs can be found in your data source", "Product item IDs can be found in your data source", "Helper text for where to find a product's item ID in a catalog", undefined, true)})]}),(0,m.jsx)(n.xu,{width:486,children:(0,m.jsx)(eR,{id:"asset-picker-itemid",onSubmit:this.handleOnSubmit,placeholder:this.props.i18n.bt("Enter product item ID", "Enter product item ID", "Placeholder for entering an item ID for a product from a catalog", undefined, true)})}),o&&(0,m.jsx)(n.xu,{padding:5,maxWidth:468,children:(0,m.jsx)(n.xv,{align:"center",color:"error",size:"200",children:o})})]})})}}function eB(e){let{logContextEvent:t}=(0,ef.v)(),i=(0,d.ZP)();return(0,m.jsx)(eN,{...e,i18n:i,logContextEvent:t})}var eZ=i(134906);function eM({onSubmit:e,title:t,description:i,validationError:r}){let o=(0,d.ZP)();return(0,m.jsxs)(n.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",padding:4,children:[(0,m.jsxs)(n.xu,{marginBottom:3,children:[(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:t||o.bt("Upload an image from your website", "Upload an image from your website", "Prompt for scraping media from site", undefined, true)}),i&&(0,m.jsx)(n.xv,{children:i})]}),(0,m.jsx)(n.xu,{width:486,children:(0,m.jsx)(eR,{id:"asset-picker-url",onSubmit:e,placeholder:o.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),r&&(0,m.jsx)(n.xu,{padding:5,maxWidth:468,children:(0,m.jsx)(n.xv,{align:"center",color:"error",size:"200",children:r})})]})}var eF=i(122097),eU=i(954931),eH=i(131555);function eV({allowPinFetch:e,onSelect:t,onSubmit:i,selectedAssets:r,url:o,validationError:s}){let l=(0,d.ZP)(),a=(0,eU.Z)(o)?/\/pin\/([\w-]+)\/?$/.exec(o):null;return(0,m.jsx)(n.xu,{height:"100%","data-test-id":"asset-picker-scraping-pane",children:a&&e?(0,m.jsx)(eH.Z,{pinId:a[1],fieldSetKey:"images_only_item",children:({pin:e,error:s,loading:a})=>a&&!s?(0,m.jsxs)(n.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,m.jsx)(n.$j,{accessibilityLabel:l.bt("Loading", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,m.jsx)(n.xu,{padding:2,children:(0,m.jsx)(n.xv,{children:l.bt("Loading image", "Loading image", "Loading message for image loading", undefined, true)})})]}):(0,m.jsxs)(n.xu,{children:[(0,m.jsx)(n.xu,{paddingX:3,marginBottom:4,children:(0,m.jsx)(eR,{id:"asset-picker-url",initialValue:o,onSubmit:i,placeholder:l.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),s?(0,m.jsx)(n.xu,{padding:5,maxWidth:468,children:(0,m.jsx)(n.xv,{align:"center",color:"error",size:"200",children:l.bt("That link didn’t work. Try entering it again or use a different link.", "Hmm, that link didn’t work. Try entering it again or use a different link.", "Error message when scraping a link does not work.", undefined, true)})}):(0,m.jsx)(eo,{assets:e?[e]:[],onSelect:t,selectedAssets:r,showAddAssetButton:!1})]})}):(0,m.jsx)(eF.Z,{source:"product_tags",url:o,children:({images:e,loading:a,error:d})=>!a||s||d?(e.forEach(e=>Object.assign(e,{id:e.url,src:e.url,type:"webImage",sourceURL:o})),(0,m.jsxs)(n.xu,{children:[(0,m.jsx)(n.xu,{paddingX:3,marginBottom:4,children:(0,m.jsx)(eR,{id:"asset-picker-url",initialValue:o,onSubmit:i,placeholder:l.bt("Enter your website URL", "Enter your website URL", "Placeholder for entering website URL", undefined, true),type:"url"})}),s||d?(0,m.jsx)(n.xu,{padding:5,maxWidth:468,"data-test-id":"scrape-validation-error",children:(0,m.jsx)(n.xv,{align:"center",color:"error",size:"200",children:s||d})}):(0,m.jsx)(eo,{assets:e,onSelect:t,selectedAssets:r,showAddAssetButton:!1})]})):(0,m.jsxs)(n.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",children:[(0,m.jsx)(n.$j,{accessibilityLabel:l.bt("Loading", "Loading", "Accessibility label for spinner loading", undefined, true),show:!0}),(0,m.jsx)(n.xu,{padding:2,children:(0,m.jsx)(n.xv,{children:l.bt("Loading images", "Loading images", "Loading message for image loading", undefined, true)})})]})})})}function eG(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eW extends r.Component{constructor(...e){super(...e),eG(this,"state",{url:"",validationError:null}),eG(this,"validateUrl",e=>{let{usedUrls:t}=this.props;return this.validateWebsiteUrl(e)||(t.includes(e)?this.props.i18n.bt("You can't tag from the same page twice.", "You can't tag from the same page twice.", "AssetPickerScrapeTab.repeatedURL", undefined, true):null)}),eG(this,"validateWebsiteUrl",e=>{let t=this.props.i18n.bt("Please enter a valid URL", "Please enter a valid URL", "AssetPickerScrapeTab.invalidURL", undefined, true);if(!e)return t;let i=(0,eZ.Jx)({message:t});return(0,eZ.a3)(e,[i])}),eG(this,"handleOnSubmit",({value:e})=>{this.props.logContextEvent({event_type:7472,component:13392,element:11267,aux_data:{url:e}});let t=e.trim(),i=this.validateUrl(t);this.setState({url:t,validationError:i})}),eG(this,"handleOnSelect",e=>{let{resetOnSelect:t=!1,onSelect:i}=this.props;t&&this.setState({url:""}),i(e)})}render(){let{selectedAssets:e,visible:t,title:i,description:r}=this.props,{url:o,validationError:s}=this.state;return(0,m.jsx)(n.xu,{column:12,height:"100%",display:t?"block":"none",padding:3,children:o.length>0?(0,m.jsx)(eV,{onSelect:this.handleOnSelect,allowPinFetch:!0,onSubmit:this.handleOnSubmit,selectedAssets:e,url:o,validationError:s}):(0,m.jsx)(eM,{onSubmit:this.handleOnSubmit,title:i,description:r,validationError:s})})}}function e$(e){let{logContextEvent:t}=(0,ef.v)(),i=(0,d.ZP)();return(0,m.jsx)(eW,{...e,i18n:i,logContextEvent:t})}var eX=i(725108),eY=i(265696);function eq(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eK=({condition:e,children:t})=>e?(0,m.jsx)(n.xu,{position:"absolute",zIndex:eI.b7,children:t}):t;class eJ extends r.Component{constructor(e){super(e),eq(this,"state",{activeTabIndex:this.props.initialTab&&this.props.shownTabs?this.props.shownTabs.indexOf(this.props.initialTab):0,assets:this.props.selectedPins||[],isLoading:!1,isDropboxFlyoutOpen:!1,error:null,usedUrls:[]}),eq(this,"downloadDropboxAssets",()=>{let{assets:e}=this.state,{i18n:t,ideaPinRenamingEnabled:i}=this.props;return Promise.all(e.map(e=>"dropboxFile"===e.type?(0,a.Z)({url:"/v3/dropbox/files/",data:{paths:[e.id],add_fields:["dropboxfile.file_base64"]}}).then(r=>{let n=function(e,t="",i=512){let r=atob(e),n=[];for(let e=0;e<r.length;e+=i){let t=r.slice(e,e+i),o=Array(t.length);for(let e=0;e<t.length;e+=1)o[e]=t.charCodeAt(e);let s=new Uint8Array(o);n.push(s)}let o=new Blob(n,{type:t});return o}(r.resource_response.data[0].file_base64);return(0,ej.Z)({i18n:t,ideaPinRenamingEnabled:i,file:new File([n],e.name,{type:function(e){switch(e){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"bmp":return"image/bmp";case"tiff":return"image/tiff";case"webp":return"image/webp";case"mp4":return"video/mp4";case"m4v":return"video/x-m4v";case"mov":return"video/quicktime";default:return""}}(b(e.name)),lastModified:e.lastModified.getTime()}),options:{allowVideo:!0}})}).catch(()=>null):e))}),eq(this,"handleChangeTab",({activeTabIndex:e,event:t,dangerouslyDisableOnNavigation:i})=>{i(),t.preventDefault(),this.setState({activeTabIndex:e})}),eq(this,"handleAssetSelect",e=>{this.props.logContextEvent({event_type:101,component:13392,element:11272});let{maxAssetsToSelect:t}=this.props,{assets:i,usedUrls:r}=this.state;if(e.id){if(i.some(t=>t.id===e.id))this.setState({assets:i.filter(t=>t.id!==e.id),usedUrls:r.filter(t=>{let i=this.getUrl(e);return t!==i})});else if(t<=0||i.length<t){let t=this.getUrl(e);this.setState({assets:[...i,e],usedUrls:t?[...r,t]:r})}}}),eq(this,"getUrl",e=>{switch(e.type){case"pin":return e.link;case"webImage":return e.sourceURL;default:return null}}),eq(this,"handleSecondaryAction",()=>{let{onSecondaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:r}=this.state;e&&(i({event_type:101,component:13392,element:11271,aux_data:{pin_builder_data:JSON.stringify({media_types:r.map(e=>e.type)})}}),this.setState({isLoading:!0},()=>{this.downloadDropboxAssets().then(i=>{if(i){let t=i.filter(e=>!!e&&"error"!==e.type);t.length>0&&e(t)}t()})}))}),eq(this,"handlePrimaryAction",()=>{let{onPrimaryAction:e,onDismiss:t,logContextEvent:i}=this.props,{assets:r}=this.state;i({event_type:101,component:13392,element:11269,aux_data:{pin_builder_data:JSON.stringify({media_types:r.map(e=>e.type)})}}),this.setState({isLoading:!0},()=>{this.downloadDropboxAssets().then(i=>{if(i){let t=i.filter(e=>!!e&&"error"!==e.type);t.length>0&&e(t)}t()})})}),eq(this,"handleRemoveAsset",e=>{if(this.props.logContextEvent({event_type:101,component:13392,element:11274}),e.id){let t=this.getUrl(e),i=t?[...this.state.usedUrls,t]:this.state.usedUrls;this.setState(r=>({assets:r.assets.some(t=>t.id===e.id)?r.assets.filter(t=>t.id!==e.id):[...r.assets,e],usedUrls:r.usedUrls.some(e=>e===t)?r.usedUrls.filter(e=>e!==t):i}))}}),eq(this,"removeError",()=>{this.props.logContextEvent({event_type:101,component:13392,element:11264}),this.setState({error:null})}),eq(this,"handleSetLoading",(e,t)=>{t?this.setState({isLoading:e},t):this.setState({isLoading:e})}),eq(this,"handleSetError",(e,t,i)=>{if(e||t||i){let r=(0,m.jsx)(n.zx,{color:"white",onClick:this.removeError,text:this.props.i18n.bt("Got it", "Got it", "Button text to indicate a user understands action", undefined, true)});this.setState({error:(0,m.jsx)(eX.Z,{errorMessage:e,primaryAction:t||r,secondaryAction:i})})}else this.setState({error:null})}),eq(this,"handleDismiss",()=>{let{onDismiss:e}=this.props,{isDropboxFlyoutOpen:t}=this.state;t||e()}),eq(this,"handleDropboxFlyoutChange",e=>this.setState({isDropboxFlyoutOpen:e})),eq(this,"defaultPrimaryText",e=>(0,ep.Z)(this.props.i18n.nbt(["Create {{ numPins }} Pin", "Create {{ numPins }} Pins"], e, "Button to create Pins out of selected assets", true),{numPins:e})),(0,eY.Z)()}componentDidMount(){let e=this.props.selectedPins?this.props.selectedPins.map(e=>this.getUrl(e)||"").filter(e=>e.length>0):[];this.setState({usedUrls:e})}render(){let{closeOnOutsideClick:e,isSecondaryButtonDisabled:t,onSecondaryAction:i,primaryButtonText:s=this.defaultPrimaryText,pinItemId:l,resetScrapeOnSelect:a,scrapeDescription:d,scrapeTitle:c,secondaryButtonText:u,useModalWithNoLayer:h=!1}=this.props,p=this.props.shownTabs?this.props.shownTabs:["upload","scrape"],{activeTabIndex:_,assets:g,usedUrls:f,isLoading:b,error:y}=this.state,v="string"==typeof s?s:s(g.length),P=u||this.props.i18n.bt("Create carousel Pin", "Create carousel Pin", "Button to create carousel Pin out of selected assets", undefined, true),S=[];p.includes("product_pins")&&S.push({text:this.props.i18n.bt("Your Pins", "Your Pins", "Tab on asset picker to select from user's product pins.", undefined, true),href:"#"}),p.includes("upload")&&S.push({text:this.props.i18n.bt("Assets", "Assets", "Tab on asset picker to select from uploaded assets", undefined, true),href:"#"}),p.includes("scrape")&&S.push({text:this.props.i18n.bt("URL", "URL", "Tab on asset picker to select from scraped URL", undefined, true),href:"#"}),p.includes("dropbox")&&S.push({text:this.props.i18n.bt("Dropbox", "Dropbox", "Tab on asset picker to select from Dropbox", undefined, true),href:"#"}),p.includes("catalog")&&S.push({text:this.props.i18n.bt("Catalogue", "Catalog", "Tab on asset picker to upload pin from product catalog", undefined, true),href:"#"});let A=h?n.u_:eI.ZP;return(0,m.jsx)(eK,{condition:!!h,children:(0,m.jsx)(A,{accessibilityModalLabel:this.props.i18n.bt("Select assets", "Select assets", "Label to describe the asset picker", undefined, true),closeOnOutsideClick:e,footer:(0,m.jsxs)(n.xu,{display:"flex",marginBottom:-4,children:[(0,m.jsx)(n.xu,{display:"flex",flex:"grow",height:"100%",marginEnd:8,children:(0,m.jsx)(n.xu,{marginTop:-4,width:"100%",children:(0,m.jsx)(o.Z,{showArrowsOnlyOnHover:!1,children:(0,m.jsx)(n.xu,{"data-group-id":"asset-picker-thumbnails-carousel-group",display:"flex",height:48,paddingY:1,children:g.map((e,t)=>{let i=(0,x.Z)(e);return(0,m.jsxs)(n.xu,{"data-test-id":"asset-picker-thumbnail",display:"flex",flex:"none",height:44,padding:1,position:"relative",width:44,children:[(0,m.jsx)(ei,{asset:e,height:40,width:40}),(0,m.jsx)(n.xu,{color:"tertiary",height:16,marginEnd:-1,marginTop:-1,padding:1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,m.jsx)(n.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>this.handleRemoveAsset(e),children:(0,m.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Remove asset", "Remove Asset", "Icon button to remove selected media file", undefined, true),color:"inverse",icon:"cancel",size:8})})}),!!i&&(0,m.jsx)(n.xu,{bottom:!0,left:!0,position:"absolute",children:(0,m.jsx)(w,{type:i})})]},`asset-picker-thumbnail-${t}`)})})})})}),(0,m.jsxs)(n.xu,{display:"flex",flex:"none",margin:-3,marginTop:1,children:[!!i&&(0,m.jsx)(n.xu,{"data-test-id":"asset-picker-secondary-action-button",paddingX:1,children:(0,m.jsx)(n.zx,{color:"gray",disabled:!!t&&(g.length<2||g.length>W.dS||g.some(e=>"localImage"!==e.type)),onClick:this.handleSecondaryAction,text:P})}),(0,m.jsx)(n.xu,{"data-test-id":"asset-picker-primary-action-button",paddingX:1,children:(0,m.jsx)(n.zx,{color:"red",disabled:0===g.length,onClick:this.handlePrimaryAction,text:v})})]})]}),heading:(0,m.jsx)(n.xu,{alignItems:"center","data-test-id":"tabs-header-list",display:"flex",justifyContent:"center",padding:4,children:(0,m.jsx)(n.mQ,{activeTabIndex:_,onChange:this.handleChangeTab,tabs:S})}),onDismiss:this.handleDismiss,size:912,children:(0,m.jsxs)(r.Fragment,{children:[(0,m.jsxs)(n.xu,{height:460,overflow:"auto",children:[!!y&&y,p.includes("upload")&&(0,m.jsx)(eE,{onSelect:this.handleAssetSelect,selectedAssets:g,setError:this.handleSetError,setLoading:this.handleSetLoading,visible:_===p.indexOf("upload")}),p.includes("scrape")&&(0,m.jsx)(e$,{description:d,onSelect:this.handleAssetSelect,resetOnSelect:a,selectedAssets:g,title:c,usedUrls:f,visible:_===p.indexOf("scrape")}),p.includes("dropbox")&&(0,m.jsx)(F,{onFlyoutChange:this.handleDropboxFlyoutChange,onSelect:this.handleAssetSelect,selectedAssets:g,setError:this.handleSetError,visible:_===p.indexOf("dropbox")}),p.includes("product_pins")&&(0,m.jsx)(eh,{onSelect:this.handleAssetSelect,pinItemId:l,selectedAssets:g,visible:_===p.indexOf("product_pins")}),p.includes("catalog")&&(0,m.jsx)(eB,{onSelect:this.handleAssetSelect,selectedAssets:g,visible:_===p.indexOf("catalog")})]}),b&&(0,m.jsx)(n.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,m.jsx)(n.$j,{accessibilityLabel:"Dropbox Loading Spinner",show:!0})})]})})})}}function eQ(e){let t=(0,d.ZP)(),i=(0,s.Z)(),{logContextEvent:r}=(0,ef.v)();return(0,m.jsx)(eJ,{...e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:r})}eq(eJ,"defaultProps",{shownTabs:["upload","scrape"],maxAssetsToSelect:0})},519325:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(702664),n=i(883119),o=i(510476),s=i(898781),l=i(349700),a=i(785893);function d(){return[...Array(8)].map((e,t)=>(0,a.jsx)(n.xu,{borderStyle:"sm",height:105,marginEnd:3===t||7===t?0:2,marginTop:t>=4?4:0,rounding:3,width:105},t))}var c=i(490072);function u(e){let t=(0,s.ZP)(),{pinTagId:i,taggedObjects:u}=e,h=(0,r.useSelector)(t=>(0,c.Xe)(t,e)),p=u.length>0,_=(0,l.nk)(t.bt("{{ count }}/8", "{{ count }}/8", "pinbuilder.taggedProducts.count", undefined, true),{count:u.length}).join(""),g="collectionsTag"===h;return(0,a.jsxs)(n.xu,{column:12,"data-test-id":"stl-tagged-items-grid",children:[(!i||i&&0===u.length)&&g&&(0,a.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:(0,a.jsx)(d,{})}),!g&&(0,a.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,a.jsx)(n.xv,{size:"100",children:t.bt("Tag up to 8 products in the scene", "Tag up to 8 products in the scene", "pinbuilder.taggedProducts.limit", undefined, true)}),(0,a.jsx)(n.xv,{size:"100",children:_})]}),(0,a.jsx)(n.xu,{display:"flex",marginBottom:p?10:void 0,marginTop:p?10:0,width:445,wrap:!0,children:!!i&&p&&u.map((e,t)=>(0,a.jsx)(n.xu,{children:(0,a.jsx)(o.Z,{index:t,pinTagId:e.pinTagId,size:"md",status:e.status,taggedObjectId:e.taggedObjectId})},e.taggedObjectId))})]})}},146173:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PinBuilderEditor:()=>eD,default:()=>eO});var r=i(667294),n=i(702664),o=i(883119),s=i(237056),l=i(214494),a=i(28956),d=i(407043),c=i(898781),u=i(299295),h=i(966113),p=i(531245),_=i(281139),g=i(77891),m=i(785893);function f(e){var t,i,r,n;let{isSelected:s,disabled:l,onClick:a,ratio:d,width:c=84}=e,u={width:c,backgroundColor:s?"#fff":"#efefef",border:s?"2px solid #e50c29":"2px solid #efefef",borderRadius:8,boxSizing:"border-box",cursor:l?"default":"pointer",height:c*(null!==(t=d.h)&&void 0!==t?t:1)/(null!==(i=d.w)&&void 0!==i?i:1),outline:"none",opacity:l?.5:void 0,padding:0};return(0,m.jsx)("button",{onClick:a,disabled:l,style:u,children:(0,m.jsx)(o.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,m.jsx)(o.xv,{color:"default",size:"200",weight:"bold",children:`${null!==(r=d.w)&&void 0!==r?r:1}:${null!==(n=d.h)&&void 0!==n?n:1}`})})})}function x(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class b extends r.Component{constructor(e){super(e),x(this,"onClickAspectRatio",e=>{let{aspectRatioIndex:t,aspectRatios:i,canDeselectAspectRatio:r,onSelectAspectRatioIndex:n,numImages:o,pinCanvas:s,logContextEvent:l}=this.props;if(s){var a,d;let c=i[e],u=e===t&&r&&1===o;u?(s.setAspectRatio(null),n(null)):(s.setAspectRatio(c),n(e));let h=c?`${null!==(a=c.w)&&void 0!==a?a:1}:${null!==(d=c.h)&&void 0!==d?d:1}`:null;l({event_type:101,component:13780,element:12137,aux_data:{aspect_ratio:h,selected:!u}})}}),x(this,"onClickRotateImage",()=>{let{pinCanvas:e,logContextEvent:t}=this.props;e&&e.rotateImage("clockwise"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"rotate"}})}),x(this,"onClickFlipImageHorizontal",()=>{let{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("horizontal"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"horizontal_flip"}})}),x(this,"onClickFlipImageVertical",()=>{let{pinCanvas:e,logContextEvent:t}=this.props;e&&e.flipImage("vertical"),t({event_type:101,component:13780,element:12138,aux_data:{editor_option:"vertical_flip"}})}),x(this,"onClickScaleImage",()=>{let{isScalingMode:e,pinCanvas:t,logContextEvent:i}=this.props;t&&(e?t.exitScalingMode():t.enterScalingMode()),i({event_type:101,component:13780,element:12138,aux_data:{editor_option:`scale_mode_${e?"exit":"enter"}`}})}),x(this,"onClickAddImage",()=>{let{numImages:e,logContextEvent:t}=this.props;this.setState({isAssetPickerOpen:!0,isReplace:!1,maxAssetsToSelect:u.Xy-e}),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})}),x(this,"onClickReplaceImage",()=>{this.setState({isAssetPickerOpen:!0,isReplace:!0}),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})}),x(this,"onClickDeleteImage",()=>{let{pinCanvas:e,logContextEvent:t}=this.props;e&&e.removeImage(),t({event_type:101,component:13780,element:12139,aux_data:{editor_option:"delete_image"}})}),x(this,"onAddImageInputChange",e=>{let{i18n:t,ideaPinRenamingEnabled:i}=this.props,r=Array.from(e.target.files);(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:r,options:{allowVideo:!1}}).then(e=>{let t=e.reduce((e,t)=>"error"!==t.type?[...e,t]:e,[]);this.handleAddImage(t)}),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"add_image"}})}),x(this,"onReplaceImageInputChange",e=>{let{i18n:t,ideaPinRenamingEnabled:i}=this.props,r=Array.from(e.target.files);(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:r,options:{allowVideo:!1}}).then(e=>{let t=e.reduce((e,t)=>"error"!==t.type?[...e,t]:e,[]);this.handleReplaceImage(t)}),this.props.logContextEvent({event_type:101,component:13780,element:12139,aux_data:{editor_option:"replace_image"}})}),x(this,"handleAddImage",e=>{let{pinCanvas:t}=this.props,i=e.reduce((e,t)=>t.src?[...e,t.src]:e,[]);t&&i.length>0&&i.forEach(e=>{t.addImage(e)})}),x(this,"handleReplaceImage",e=>{let{pinCanvas:t}=this.props,i=e.reduce((e,t)=>t.src?[...e,t.src]:e,[]);t&&i.length>0&&t.replaceImage(i[0])}),x(this,"handleDismiss",()=>{this.setState({isAssetPickerOpen:!1})}),x(this,"onClickReset",()=>{let{aspectRatios:e,canDeselectAspectRatio:t,pinCanvas:i,onReset:r,logContextEvent:n}=this.props;i&&(i.resetCrop(),i.setAspectRatio(t?null:e[0]),r()),n({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"crop"}})}),this.state={isAssetPickerOpen:!1,isReplace:!1,maxAssetsToSelect:0}}render(){let{aspectRatioIndex:e,aspectRatios:t,isImageSelected:i,isScalingMode:r,numImages:n,mediaType:s,videoStartText:l,videoEndText:d,validateStartTime:c,validateEndTime:g,handleEndTimeChange:x,handleStartTimeChange:b}=this.props,{isAssetPickerOpen:y,isReplace:v,maxAssetsToSelect:P}=this.state,S=!i,A=n>1&&r,w=this.props.i18n.bt("Rotate 90°", "Rotate 90°", "Rotate the angle of the image by 90 degrees", undefined, true),E=this.props.i18n.bt("Flip image horizontally", "Flip image horizontally", "Flip the image on the horizontal axis", undefined, true),I=this.props.i18n.bt("Flip image vertically", "Flip image vertically", "Flip the image on the vertical axis", undefined, true),j=this.props.i18n.bt("Resize image", "Resize image", "Resize an image in the collage Pin", undefined, true),C=this.props.i18n.bt("Add image", "Add image", "Add image to the collage Pin", undefined, true),T=this.props.i18n.bt("Replace image", "Replace image", "Replace image in the collage Pin", undefined, true),D=this.props.i18n.bt("Delete image", "Delete image", "Delete image from the collage Pin", undefined, true);return(0,m.jsxs)(o.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsxs)(o.xu,{flex:"grow",overflow:"auto",padding:8,position:"relative",children:[(0,m.jsx)(o.xu,{marginBottom:3,children:(0,m.jsx)(o.X6,{size:"500",children:"video"===s?this.props.i18n.bt("Trim & crop", "Trim & Crop", "cropPane.heading", undefined, true):this.props.i18n.bt("Crop", "Crop", "cropPane.heading", undefined, true)})}),(0,m.jsx)(o.xu,{marginBottom:8,children:(0,m.jsx)(o.xv,{children:this.props.i18n.bt("Crop and adjust your image to focus on the most interesting part", "Crop and adjust your image to focus on the most interesting part", "Describing what this tool is about.", undefined, true)})}),(0,m.jsxs)(o.xu,{children:[(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Aspect ratio", "Aspect ratio", "Adjust the aspect ratio of the cropping.", undefined, true)}),(0,m.jsx)(o.xu,{paddingY:1,children:(0,m.jsx)(o.xv,{color:"subtle",size:"200",children:this.props.i18n.bt("We recommend a 2:3 aspect ratio for most Pins on Pinterest", "We recommend a 2:3 aspect ratio for most Pins on Pinterest", "Recommendation for the best aspect ratio for an image on Pinterest", undefined, true)})}),(0,m.jsx)(o.xu,{display:"flex",marginEnd:-2,marginStart:-2,marginTop:2,children:t.map((t,i)=>(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-aspect-ratio-crop-button",flex:"none",paddingX:2,children:(0,m.jsx)(f,{disabled:A,isSelected:i===e,onClick:()=>this.onClickAspectRatio(i),ratio:t})},i))})]}),(0,m.jsxs)(o.xu,{marginTop:8,children:[(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Adjust", "Adjust", "Adjust the rotation of the image", undefined, true)}),(0,m.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-rotate-right-button",paddingX:1,children:(0,m.jsx)(o.u,{text:w,children:(0,m.jsx)(o.hU,{accessibilityLabel:w,bgColor:"lightGray",disabled:S,icon:"rotate",iconColor:"darkGray",onClick:this.onClickRotateImage,size:"md"})})}),"video"!==s&&(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-flip-button-horizontal",paddingX:1,children:(0,m.jsx)(o.u,{text:E,children:(0,m.jsx)(o.hU,{accessibilityLabel:E,bgColor:"lightGray",disabled:S,icon:"flipHorizontal",iconColor:"darkGray",onClick:this.onClickFlipImageHorizontal,size:"md"})})}),"video"!==s&&(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-flip-button-vertical",paddingX:1,children:(0,m.jsx)(o.u,{text:I,children:(0,m.jsx)(o.hU,{accessibilityLabel:I,bgColor:"lightGray",disabled:S,icon:"flipVertical",iconColor:"darkGray",onClick:this.onClickFlipImageVertical,size:"md"})})}),"video"!==s&&(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-move-button",paddingX:1,children:(0,m.jsx)(o.u,{text:j,children:(0,m.jsx)(o.hU,{accessibilityLabel:j,bgColor:r?"transparentDarkGray":"lightGray",disabled:1===n||!i,icon:"scale",iconColor:r?"white":"darkGray",onClick:this.onClickScaleImage,size:"md"})})})]})]}),"video"!==s&&(0,m.jsxs)(o.xu,{marginTop:8,children:[(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Change an image", "Change an image", "Heading for buttons that add, replace and remove an image", undefined, true)}),(0,m.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-add-image-button",paddingX:1,children:(0,m.jsx)(o.u,{text:C,children:n<u.Xy?(0,m.jsx)(_.Z,{accept:[...p.xl].join(","),allowMultipleFiles:!0,color:"white",id:"layouts-add-image-input",onChange:this.onAddImageInputChange,children:()=>(0,m.jsx)(o.hU,{accessibilityLabel:C,bgColor:"lightGray",disabled:n>=u.Xy,icon:"add-layout",iconColor:"darkGray",size:"md"})}):(0,m.jsx)(o.hU,{accessibilityLabel:C,bgColor:"lightGray",disabled:n>=u.Xy,icon:"add-layout",iconColor:"darkGray",onClick:this.onClickAddImage,size:"md"})})}),(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-replace-image-button",paddingX:1,children:(0,m.jsx)(o.u,{text:T,children:S?(0,m.jsx)(o.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:S,icon:"replace",iconColor:"darkGray",onClick:this.onClickReplaceImage,size:"md"}):(0,m.jsx)(_.Z,{accept:[...p.xl].join(","),allowMultipleFiles:!1,color:"white",id:"layouts-replace-image-input",onChange:this.onReplaceImageInputChange,children:()=>(0,m.jsx)(o.hU,{accessibilityLabel:T,bgColor:"lightGray",disabled:S,icon:"replace",iconColor:"darkGray",size:"md"})})})}),(0,m.jsx)(o.xu,{"data-test-id":"pinbuilder-editor-delete-image-button",paddingX:1,children:(0,m.jsx)(o.u,{text:D,children:(0,m.jsx)(o.hU,{accessibilityLabel:D,bgColor:"lightGray",disabled:S||1===n,icon:"trash-can",iconColor:"darkGray",onClick:this.onClickDeleteImage,size:"md"})})})]})]}),"video"===s&&(0,m.jsxs)(o.xu,{marginTop:8,children:[(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Trim", "Trim", "Adjust the start and end time of the video", undefined, true)}),(0,m.jsx)(o.xu,{paddingY:1,children:(0,m.jsxs)(o.xv,{color:"subtle",size:"200",children:[this.props.i18n.bt("Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ", "Video Pins 1 to 2 minutes long work best. Video ads 6 to 15 seconds long work best. ", "Recommendation for the best video length for video on Pinterest", undefined, true),(0,m.jsx)(o.rU,{display:"inlineBlock",href:h.Moe,onClick:({dangerouslyDisableOnNavigation:e})=>e(),target:"blank",underline:"hover",children:this.props.i18n.bt("Learn more.", "Learn More.", "Link to Pinterest help center about creative best practices", undefined, true)})]})}),(0,m.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,marginTop:4,children:[(0,m.jsxs)(o.xu,{paddingX:2,children:[(0,m.jsx)(o.xu,{children:(0,m.jsx)(o.__,{htmlFor:"videoStartText",children:(0,m.jsx)(o.xv,{size:"100",children:"Start"})})}),(0,m.jsx)(o.nv,{errorMessage:l?c(l):"",id:"videoStartText",onChange:b,size:"lg",type:"text",value:l})]}),(0,m.jsxs)(o.xu,{children:[(0,m.jsx)(o.xu,{children:(0,m.jsx)(o.__,{htmlFor:"videoEndText",children:(0,m.jsx)(o.xv,{size:"100",children:"End"})})}),(0,m.jsx)(o.nv,{errorMessage:d?g(d):"",id:"videoEndText",onChange:x,size:"lg",type:"text",value:d})]})]})]})]}),(0,m.jsxs)(o.xu,{column:12,direction:"column",display:"flex",children:[(0,m.jsx)(o.iz,{}),(0,m.jsx)(o.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingX:8,paddingY:2,children:(0,m.jsx)(o.zx,{accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",fullWidth:!0,onClick:this.onClickReset,text:"video"===s?this.props.i18n.bt("Clear crop", "Clear crop", "Resets cropping changes", undefined, true):this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true)})})]}),y&&(0,m.jsx)(a.Z,{maxAssetsToSelect:P,onDismiss:this.handleDismiss,onPrimaryAction:v?this.handleReplaceImage:this.handleAddImage,primaryButtonText:v?this.props.i18n.bt("Use image", "Use image", "Button text for use another image to replace the selected image in the collage Pin.", undefined, true):this.props.i18n.bt("Add image", "Add image", "Button text for adding some other images to the collage Pin", undefined, true)})]})}}function y(e){let{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)(),r=(0,s.Z)(),o=(0,n.useSelector)(({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].type);return(0,m.jsx)(b,{...e,i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,type:o})}var v=i(66743),P=i(665866),S=i(309256),A=i(984244),w=i(780280),E=i(414327),I=i(784590),j=i(415480),C=i(815542);function T({marginIndex:e,onSelectMargin:t}){let i=(0,c.ZP)(),r=i.bt("Apply narrow margins", "Apply narrow margins", "Adjust the margin to small.", undefined, true),n=i.bt("Apply medium margins", "Apply medium margins", "Adjust the margin to medium.", undefined, true),s=i.bt("Apply wide margins", "Apply wide margins", "Adjust the margin to large.", undefined, true),l=[(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-small-button",children:(0,m.jsx)(o.u,{text:r,children:(0,m.jsx)(o.JO,{accessibilityLabel:r,icon:"margins-small",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-medium-button",children:(0,m.jsx)(o.u,{text:n,children:(0,m.jsx)(o.JO,{accessibilityLabel:n,icon:"margins-medium",color:1===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-margins-size-button","data-test-id":"pinbuilder-editor-margins-large-button",children:(0,m.jsx)(o.u,{text:s,children:(0,m.jsx)(o.JO,{accessibilityLabel:s,icon:"margins-large",color:2===e?"default":"subtle",size:18})})})];return(0,m.jsx)(o.sY,{selectedItemIndex:e,onChange:t,items:l})}var D=i(594736),O=i(454074);function z(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let R={__style:{tabindex:0,margin:2}};class k extends r.Component{constructor(...e){super(...e),z(this,"handleLoadFiles",e=>{let{i18n:t,ideaPinRenamingEnabled:i,onLoadLogos:r}=this.props,n={minHeight:u.P0,minWidth:u.zr};(0,g.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:n}).then(e=>{let t=e.reduce((e,t)=>"localImage"===t.type?[...e,t]:e,[]);r(t)})}),z(this,"handleDrop",e=>{let t=(0,O.Z)(e.dataTransfer);this.handleLoadFiles(t)}),z(this,"handleChange",e=>{let t=Array.from(e.target.files);this.handleLoadFiles(t)})}render(){let{width:e,height:t}=this.props;return(0,m.jsx)(o.xu,{height:t,rounding:2,width:e,dangerouslySetInlineStyle:R,children:(0,m.jsx)(_.Z,{accept:p.xl.join(","),allowMultipleFiles:!0,id:"add-button-placeholder",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,m.jsx)(o.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",rounding:2,children:(0,m.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Import local images", "Import local images", "Add local images to Pin builder", undefined, true),icon:"add-circle",size:24})})})})}}function L(e){let t=(0,c.ZP)(),i=(0,s.Z)();return(0,m.jsx)(k,{...e,i18n:t,ideaPinRenamingEnabled:i})}z(k,"defaultProps",{height:147,width:147});var N=i(938999);function B(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Z={__style:{padding:"2px"}};class M extends r.Component{constructor(...e){super(...e),B(this,"state",{isHovering:!1}),B(this,"handleMouseEnter",()=>{this.setState({isHovering:!0})}),B(this,"handleMouseLeave",()=>{this.setState({isHovering:!1})})}render(){let{imgSrc:e,imgWidth:t,imgHeight:i,fit:r,title:n,selected:s,onClick:l,onDelete:a}=this.props,{isHovering:d}=this.state;return(0,m.jsxs)(o.xu,{"data-test-id":"pinbuilder-asset-preview",position:"relative",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,dangerouslySetInlineStyle:Z,children:[(0,m.jsx)(N.Z,{selected:s,onClick:l,children:(0,m.jsxs)(o.xu,{rounding:2,color:"secondary",position:"relative",width:t,height:i,overflow:"hidden",children:[(0,m.jsx)(o.Ee,{alt:n||"",src:e,fit:r,naturalWidth:1,naturalHeight:1}),n&&(0,m.jsx)(o.xu,{marginTop:2,marginBottom:1,children:(0,m.jsx)(o.xv,{lineClamp:1,size:"100",children:n})})]})}),d&&(0,m.jsx)(o.xu,{color:"tertiary","data-test-id":"remove-asset-icon-button",height:16,padding:1,marginEnd:-1,marginTop:-1,position:"absolute",right:!0,rounding:"circle",top:!0,width:16,children:(0,m.jsx)(o.iP,{fullHeight:!0,fullWidth:!0,onTap:a,children:(0,m.jsx)(o.JO,{color:"inverse",icon:"cancel",size:8,accessibilityLabel:this.props.i18n.bt("Remove asset", "Remove Asset", "Icon button to remove selected media file", undefined, true)})})})]})}}function F(e){let t=(0,c.ZP)();return(0,m.jsx)(M,{...e,i18n:t})}function U(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class H extends r.Component{constructor(...e){super(...e),U(this,"state",{selectedIndex:void 0}),U(this,"onSelectLogo",e=>{let{onSelectLogo:t}=this.props;t(e),this.setState(t=>({selectedIndex:t.selectedIndex===e?null:e}))})}shouldComponentUpdate(e,t){return!(0,D.ZP)(this.props.logos,e.logos)||!(0,D.ZP)(this.props.logoIndex,e.logoIndex)||!(0,D.ZP)(this.state.selectedIndex,t.selectedIndex)}render(){let{logos:e}=this.props;return(0,m.jsx)(o.xu,{column:12,minHeight:70,maxHeight:165,paddingY:1,overflow:"scroll",children:(0,m.jsx)(o.Rk,{renderItem:({data:e,itemIdx:t})=>{let{logoIndex:i,onAddNewLogos:r,onDeleteLogo:n}=this.props,o=i!==this.state.selectedIndex?i:this.state.selectedIndex;return"placeholder"===e.type?(0,m.jsx)(L,{onLoadLogos:r,width:58,height:58}):(0,m.jsx)(F,{imgSrc:e.src,imgWidth:58,imgHeight:58,fit:"contain",onClick:()=>this.onSelectLogo(t-1),onDelete:()=>n(t-1),selected:o===t-1})},items:[{type:"placeholder"},...e],columnWidth:62,gutterWidth:9})})}}function V({logoPositionIndex:e,onSelectLogoPosition:t}){let i=(0,c.ZP)(),r=i.bt("Position top left", "Position top left", "Adjust the location of the logo to top left.", undefined, true),n=i.bt("Position top centre", "Position top center", "Adjust the location of the logo to top center.", undefined, true),s=i.bt("Position top right", "Position top right", "Adjust the location of the logo to top right.", undefined, true),l=i.bt("Position bottom left", "Position bottom left", "Adjust the location of the logo to bottom left.", undefined, true),a=i.bt("Position bottom centre", "Position bottom center", "Adjust the location of the logo to bottom center.", undefined, true),d=i.bt("Position bottom right", "Position bottom right", "Adjust the location of the logo to bottom right.", undefined, true),u=[(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-left-button",children:(0,m.jsx)(o.u,{text:r,children:(0,m.jsx)(o.JO,{accessibilityLabel:r,icon:"align-top-left",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-center-button",children:(0,m.jsx)(o.u,{text:n,children:(0,m.jsx)(o.JO,{accessibilityLabel:n,icon:"align-top-center",color:1===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-top-right-button",children:(0,m.jsx)(o.u,{text:s,children:(0,m.jsx)(o.JO,{accessibilityLabel:s,icon:"align-top-right",color:2===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-left-button",children:(0,m.jsx)(o.u,{text:l,children:(0,m.jsx)(o.JO,{accessibilityLabel:l,icon:"align-bottom-left",color:3===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-center-button",children:(0,m.jsx)(o.u,{text:a,children:(0,m.jsx)(o.JO,{accessibilityLabel:a,icon:"align-bottom-center",color:4===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-logo-position-picker-button","data-test-id":"pinbuilder-editor-logo-position-bottom-right-button",children:(0,m.jsx)(o.u,{text:d,children:(0,m.jsx)(o.JO,{accessibilityLabel:d,icon:"align-bottom-right",color:5===e?"default":"subtle",size:18})})})];return(0,m.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:i.bt("Position", "Position", "Adjust the position of the logo", undefined, true)})}),(0,m.jsx)(o.sY,{selectedItemIndex:e,onChange:t,items:u,responsive:!0})]})}function G(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class W extends r.Component{constructor(...e){super(...e),G(this,"onReset",()=>{let{pinCanvas:e,onReset:t,logContextEvent:i}=this.props;t(),e&&e.removeLogo(),i({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"logo"}})}),G(this,"onDeleteLogo",e=>{let{pinCanvas:t,onDeleteLogo:i,logo:r,logContextEvent:n}=this.props;i(e),r.logoIndex===e&&t&&t.removeLogo(),n({event_type:101,component:13780,element:12142})}),G(this,"setLogo",e=>{let{pinCanvas:t,logo:i,logoImages:r}=this.props;t&&(null!=e?t.setLogo({assetId:r[e].assetId,src:r[e].src,size:i.logoSize,margin:u.mt[i.logoMarginIndex],position:u.n_[i.logoPositionIndex],backgroundColor:i.logoBackgroundColor,backgroundOpacity:u.AQ[i.logoTransparencyIndex]}):t.removeLogo())}),G(this,"onSelectLogo",e=>{let{pinCanvas:t,onSelectLogo:i,logo:r,logContextEvent:n}=this.props;i(e),r.logoIndex===e?t&&t.removeLogo():t&&this.setLogo(e),n({event_type:101,component:13780,element:12141})}),G(this,"onChangeLogoSize",e=>{let{pinCanvas:t,onChangeLogoSize:i,logContextEvent:r}=this.props;i(e),t&&t.setLogoSize(e),r({event_type:3828,component:13780,element:12147,aux_data:{value:e}})}),G(this,"onSelectLogoMargin",({activeIndex:e})=>{let{pinCanvas:t,onSelectLogoMargin:i,logContextEvent:r}=this.props,n=u.mt[e];i(e),t&&t.setLogoMargin(n),r({event_type:101,component:13780,element:12148,aux_data:{value:n}})}),G(this,"onSelectLogoPosition",({activeIndex:e})=>{let{pinCanvas:t,onSelectLogoPosition:i,logContextEvent:r}=this.props,n=u.n_[e];i(e),t&&t.setLogoPosition(n),r({event_type:101,component:13780,element:12149,aux_data:{value:n}})}),G(this,"onSelectLogoBackgroundColor",({value:e})=>{let{pinCanvas:t,onSelectLogoBackgroundColor:i,logContextEvent:r}=this.props,n=e.startsWith("#")||""===e?e.toLowerCase():`#${e}`.toLowerCase();i(n),t&&t.setLogoBackgroundColor(n),r({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"color",value:n}})}),G(this,"onSelectLogoTransparency",({activeIndex:e})=>{let{pinCanvas:t,onSelectLogoTransparency:i,logContextEvent:r}=this.props,n=u.AQ[e];i(e),t&&t.setLogoBackgroundOpacity(n),r({event_type:8721,component:13780,element:12150,aux_data:{editor_option:"transparency",value:n}})})}componentDidUpdate(e){let{logo:t,logoImages:i}=e,{logo:r,logoImages:n}=this.props;(t.logoIndex!==r.logoIndex||i.length!==n.length)&&this.setLogo(r.logoIndex)}render(){let{logo:e,logoImages:t,onUploadLogos:i,pinCanvas:r}=this.props,{logoIndex:n,logoSize:s,logoMarginIndex:l,logoPositionIndex:a,logoBackgroundColor:d,logoTransparencyIndex:c}=e;return(0,m.jsxs)(o.xu,{column:12,display:"flex",direction:"column",children:[(0,m.jsxs)(o.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,m.jsx)(o.xu,{paddingX:8,children:(0,m.jsx)(o.X6,{size:"500",children:this.props.i18n.bt("Logo", "Logo", "Add a logo to the image selected in Pin Builder.", undefined, true)})}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:3,children:(0,m.jsx)(o.xv,{children:this.props.i18n.bt("Add your logo to make this Pin look official", "Add your logo to make this Pin feel official", " - ", undefined, true)})}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:6,children:(0,m.jsx)(H,{logos:t,logoIndex:n,onAddNewLogos:i,onDeleteLogo:this.onDeleteLogo,onSelectLogo:this.onSelectLogo})}),(0,m.jsxs)(o.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:84,children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Size", "Size", "Adjust the size of the logo", undefined, true)})}),(0,m.jsx)(j.Z,{id:"pinbuilder-editor-logo-size-text-field",minValue:20,maxValue:80,step:10,iconName:"logo-large",value:s,onChange:this.onChangeLogoSize})]}),(0,m.jsxs)(o.xu,{children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margins", "Margins", "Adjust the position of the text overlay", undefined, true)})}),(0,m.jsx)(T,{marginIndex:l,onSelectMargin:this.onSelectLogoMargin})]})]}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:10,position:"relative",children:(0,m.jsx)(V,{logoPositionIndex:a,onSelectLogoPosition:this.onSelectLogoPosition})}),(0,m.jsxs)(o.xu,{paddingX:8,marginTop:10,children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Colour fill", "Color fill", "Pick the background color", undefined, true)})}),(0,m.jsx)(C.ZP,{id:"pinbuilder-editor-logo-background-color-picker",imagePalette:r&&r.getColorPalette(),width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:d,onSelectColor:this.onSelectLogoBackgroundColor,transparencyIndex:c,onSelectTransparency:this.onSelectLogoTransparency})]})]}),(0,m.jsxs)(o.xu,{display:"flex",direction:"column",column:12,children:[(0,m.jsx)(o.iz,{}),(0,m.jsx)(o.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,m.jsx)(o.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function $(e){let{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)();return(0,m.jsx)(W,{...e,i18n:i,logContextEvent:t})}function X(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Y={flyoutStyle:{__style:{maxHeight:"516px"}}};class q extends r.Component{constructor(...e){super(...e),X(this,"state",{hoveredOption:null,showFlyout:!1}),X(this,"setFlyoutAnchor",e=>{this.anchor=e}),X(this,"handleTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),X(this,"handleFlyoutClose",()=>{this.setState({showFlyout:!1})}),X(this,"handleSelectOption",e=>{let{onSelect:t}=this.props;t(e),this.handleFlyoutClose()}),X(this,"handleMouseEnter",e=>{this.setState({hoveredOption:e})}),X(this,"handleMouseLeave",()=>{this.setState({hoveredOption:null})})}getFlyoutHeight(){if(window&&this.anchor){let e=Math.min(516,window.innerHeight-this.anchor.getBoundingClientRect().top-100);return`${e}px`}return"516px"}render(){let{placeholder:e,selectedOption:t,optionGroups:i}=this.props,{hoveredOption:n,showFlyout:s}=this.state,l=t?i.find(e=>e.groupName===t.groupName):null,a=l&&t?l.options.find(e=>e.optionName===t.optionName):null;return(0,m.jsxs)(o.xu,{column:12,"data-test-id":"styled-dropdown-list",children:[(0,m.jsx)(o.iP,{onTap:this.handleTouch,rounding:2,children:(0,m.jsxs)(o.xu,{rounding:2,overflow:"hidden",width:"100%",height:40,display:"flex",alignItems:"center",justifyContent:"between",color:"secondary",paddingX:3,ref:this.setFlyoutAnchor,children:[(0,m.jsx)(o.xu,{marginEnd:2,minWidth:0,overflow:"hidden",flex:"grow",children:(0,m.jsx)(o.xv,{children:a?(0,m.jsx)("div",{style:a.style,children:a.optionLabel}):e||this.props.i18n.bt("Select", "Select", "Select an option from the dropdown list", undefined, true)})}),(0,m.jsx)(o.xu,{flex:"none",children:(0,m.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Open drop-down list", "Open dropdown list", "Instructions to open the dropdown list", undefined, true),color:"default",icon:"arrow-down",size:12})})]})}),s&&(0,m.jsx)(o.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleFlyoutClose,size:"md",children:(0,m.jsx)(o.xu,{width:"100%",paddingY:4,dangerouslySetInlineStyle:{__style:{...Y.flyoutStyle.__style,maxHeight:this.getFlyoutHeight()}},children:i.map((e,t)=>(0,m.jsxs)(r.Fragment,{children:[i.length>1&&t>0&&(0,m.jsx)(o.xu,{paddingY:2,paddingX:4,children:(0,m.jsx)(o.iz,{})}),i.length>1&&(0,m.jsx)(o.xu,{paddingY:1,paddingX:4,children:(0,m.jsx)(o.xv,{size:"100",color:"subtle",children:e.groupLabel})}),e.options.map(t=>(0,m.jsx)(o.xu,{padding:1,color:a===t||n===t?"secondary":"default",children:(0,m.jsx)(o.iP,{onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave,onTap:()=>this.handleSelectOption({groupName:e.groupName,optionName:t.optionName}),children:(0,m.jsx)(o.xu,{width:"100%",paddingX:3,paddingY:1,children:(0,m.jsx)(o.xv,{children:(0,m.jsx)("div",{style:t.style,children:t.optionLabel})})})})},`${e.groupName}_${t.optionName}`)),e.groupFooter&&(0,m.jsx)(o.xu,{paddingX:4,paddingY:1,children:e.groupFooter()})]},e.groupName))})})]})}}function K(e){let t=(0,c.ZP)();return(0,m.jsx)(q,{...e,i18n:t})}function J({selectedIndex:e,onSelect:t}){let i=(0,c.ZP)(),r=i.bt("Left align", "Left align", "Adjust the text to left alignment.", undefined, true),n=i.bt("Centre align", "Center align", "Adjust the text to center alignment.", undefined, true),s=[(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-left-button",children:(0,m.jsx)(o.u,{text:r,children:(0,m.jsx)(o.JO,{accessibilityLabel:r,icon:"text-align-left",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-align-button","data-test-id":"pinbuilder-editor-text-align-center-button",children:(0,m.jsx)(o.u,{text:n,children:(0,m.jsx)(o.JO,{accessibilityLabel:n,icon:"text-align-center",color:1===e?"default":"subtle",size:18})})})];return(0,m.jsx)(o.sY,{selectedItemIndex:e,onChange:t,items:s})}function Q({selectedIndex:e,onSelect:t}){let i=(0,c.ZP)(),r=i.bt("Position text on top", "Position text on top", "Adjust the location of the text to top.", undefined, true),n=i.bt("Position text in middle", "Position text in middle", "Adjust the location of the text to middle.", undefined, true),s=i.bt("Position text on bottom", "Position text on bottom", "Adjust the location of the text to bottom.", undefined, true),l=[(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-top-button",children:(0,m.jsx)(o.u,{text:r,children:(0,m.jsx)(o.JO,{accessibilityLabel:r,icon:"align-top",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-middle-button",children:(0,m.jsx)(o.u,{text:n,children:(0,m.jsx)(o.JO,{accessibilityLabel:n,icon:"align-middle",color:1===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-position-button","data-test-id":"pinbuilder-editor-text-position-bottom-button",children:(0,m.jsx)(o.u,{text:s,children:(0,m.jsx)(o.JO,{accessibilityLabel:s,icon:"align-bottom",color:2===e?"default":"subtle",size:18})})})];return(0,m.jsx)(o.sY,{selectedItemIndex:e,onChange:t,items:l})}function ee({selectedIndex:e,onSelect:t}){let i=(0,c.ZP)(),r=i.bt("Sentence case", "Sentence case", "Transform the text to sentence case.", undefined, true),n=i.bt("Uppercase", "Uppercase", "Transform the text to all uppercase.", undefined, true),s=[(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-sentence-case-button",children:(0,m.jsx)(o.u,{text:r,children:(0,m.jsx)(o.JO,{accessibilityLabel:r,icon:"text-sentence-case",color:0===e?"default":"subtle",size:18})})}),(0,m.jsx)(o.xu,{"data-group-id":"pinbuilder-editor-text-transform-button","data-test-id":"pinbuilder-editor-text-all-caps-button",children:(0,m.jsx)(o.u,{text:n,children:(0,m.jsx)(o.JO,{accessibilityLabel:n,icon:"text-all-caps",color:1===e?"default":"subtle",size:18})})})];return(0,m.jsx)(o.sY,{selectedItemIndex:e,onChange:t,items:s})}function et(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ei={fontColor:{__style:{zIndex:u.v9}},fontFamily:{__style:{zIndex:u.v9+1}}};class er extends r.Component{constructor(...e){super(...e),et(this,"_getTextConfigs",e=>{let{fontFamilyName:t,fontStyleName:i,fontWeight:r,fontSize:n,textColor:o,lineHeight:s,letterSpacing:l,transformIndex:a,alignmentIndex:d,marginIndex:c,backgroundColor:h,backgroundTransparencyIndex:p,positionIndex:_}=e,{fontGroups:g}=this.props,m=(0,S.$D)(g,t),{fontStyle:f}=m&&m.styles.find(e=>e.name===i)||{};return{fontFamily:t,fontStyle:f,fontSize:n,fontWeight:r,textColor:o,lineHeight:s,backgroundColor:h,characterSpacing:l,transform:u.np[a],alignment:u.aj[d],margin:u.mt[c],backgroundOpacity:u.AQ[p],position:u.yb[_]}}),et(this,"onReset",()=>{let{getDefaultTextState:e,pinCanvas:t,onReset:i,logContextEvent:r}=this.props;if(i(),t){t.removeTextLayer();let i=this._getTextConfigs(e());t.addTextLayer(i)}r({event_type:101,component:13780,element:12135,aux_data:{editor_mode:"text"}})}),et(this,"onSelectFontFamily",e=>{let{fontGroups:t,pinCanvas:i,onSelectFontFamily:r,logContextEvent:n}=this.props;if(i){let r=(0,S.$D)(t,e.optionName);if(r){let{fontFamily:e,fontOverrides:t,defaultStyle:n,styles:o}=r,{fontStyle:s,fontWeight:l}=o[n];if(t){let e=t.textTransform?1:0;this.onSelectTransform({activeIndex:e}),t.lineHeight&&this.onChangeLineHeight(t.lineHeight),t.letterSpacing&&this.onChangeLetterSpacing(t.letterSpacing)}i.setFontFamily(null!=e?e:""),i.setFontStyle(s),i.setFontWeight(l)}}r(e),n({event_type:3828,component:13780,element:12151,aux_data:{value:`${e.groupName}: ${e.optionName}`}})}),et(this,"onSelectTextColor",({value:e})=>{let{pinCanvas:t,onSelectTextColor:i,logContextEvent:r}=this.props;t&&t.setTextColor(e),i(e),r({event_type:8721,component:13780,element:12153,aux_data:{value:e}})}),et(this,"onChangeFontSize",e=>{let{pinCanvas:t,onChangeFontSize:i,logContextEvent:r}=this.props;t&&t.setFontSize(e),i(e),r({event_type:3828,component:13780,element:12152,aux_data:{value:e}})}),et(this,"onChangeLineHeight",e=>{let{pinCanvas:t,onChangeLineHeight:i,logContextEvent:r}=this.props;t&&t.setTextLineHeight(e),i(e),r({event_type:3828,component:13780,element:12161,aux_data:{value:e}})}),et(this,"onChangeLetterSpacing",e=>{let{pinCanvas:t,onChangeLetterSpacing:i,logContextEvent:r}=this.props;t&&t.setTextCharacterSpacing(10*e),i(e),r({event_type:3828,component:13780,element:12162,aux_data:{value:e}})}),et(this,"onSelectTransform",({activeIndex:e})=>{let{pinCanvas:t,onSelectTransform:i,logContextEvent:r}=this.props,n=u.np[e];t&&t.setTextTransform(n),i(e),r({event_type:3828,component:13780,element:12163,aux_data:{value:n}})}),et(this,"onSelectAlignment",({activeIndex:e})=>{let{pinCanvas:t,onSelectAlignment:i,logContextEvent:r}=this.props,n=u.aj[e];t&&t.setTextAlignment(n),i(e),r({event_type:101,component:13780,element:12154,aux_data:{value:n}})}),et(this,"onSelectMargin",({activeIndex:e})=>{let{pinCanvas:t,onSelectMargin:i,logContextEvent:r}=this.props,n=u.mt[e];t&&t.setTextMargin(n),i(e),r({event_type:101,component:13780,element:12155,aux_data:{value:n}})}),et(this,"onSelectBackgroundColor",({value:e})=>{let{pinCanvas:t,onSelectBackgroundColor:i,logContextEvent:r}=this.props;t&&t.setTextBackgroundColor(e),i(e),r({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"color",value:e}})}),et(this,"onSelectBackgroundTransparency",({activeIndex:e})=>{let{pinCanvas:t,onSelectBackgroundTransparency:i,logContextEvent:r}=this.props,n=u.AQ[e];t&&t.setTextBackgroundOpacity(n),i(e),r({event_type:8721,component:13780,element:12156,aux_data:{editor_option:"transparency",value:n}})}),et(this,"onSelectPosition",({activeIndex:e})=>{let{pinCanvas:t,onSelectPosition:i,logContextEvent:r}=this.props,n=u.yb[e];t&&t.setTextPosition(n),i(e),r({event_type:101,component:13780,element:12157,aux_data:{value:n}})}),et(this,"getFontFamilyOptions",()=>{let{fontGroups:e}=this.props;return e.map(e=>({groupLabel:e.groupLabel,groupName:e.groupName,groupFooter:e.groupFooter,options:e.fonts.map(e=>{var t,i;return{optionName:null!==(t=e.fontFamily)&&void 0!==t?t:"",optionLabel:null!==(i=e.fontFamily)&&void 0!==i?i:"",style:{fontFamily:e.fontFamily,fontStyle:e.styles[e.defaultStyle].fontStyle,fontWeight:e.styles[e.defaultStyle].fontWeight}}})}))})}componentDidMount(){let{pinCanvas:e,text:t}=this.props;if(e){let i=this._getTextConfigs(t);e.addTextLayer(i)}}render(){let{text:e,onToggleShowMoreOptions:t,pinCanvas:i}=this.props,{fontGroupName:r,fontFamilyName:n,fontSize:s,textColor:l,marginIndex:a,alignmentIndex:d,positionIndex:c,backgroundColor:u,backgroundTransparencyIndex:h,lineHeight:p,letterSpacing:_,transformIndex:g,showMoreOptions:f}=e,x=this.getFontFamilyOptions(),b=r===v.f9,y=i?i.getColorPalette():null;return(0,m.jsxs)(o.xu,{column:12,display:"flex",direction:"column",children:[(0,m.jsxs)(o.xu,{paddingY:8,flex:"grow",overflow:"auto",children:[(0,m.jsx)(o.xu,{paddingX:8,children:(0,m.jsx)(o.X6,{size:"500",children:this.props.i18n.bt("Text overlay", "Text Overlay", "Add text to the image selected in Pin Builder.", undefined, true)})}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:4,children:(0,m.jsx)(o.xv,{children:this.props.i18n.bt("Add text directly to your Pin", "Add text directly onto your Pin", " - ", undefined, true)})}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:6,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Style", "Style", "Text font style", undefined, true)})}),(0,m.jsx)(o.xu,{paddingX:8,marginTop:4,position:"relative",dangerouslySetInlineStyle:ei.fontFamily,children:(0,m.jsx)(K,{placeholder:this.props.i18n.bt("Select font family", "Select font family", " - ", undefined, true),optionGroups:x,selectedOption:{groupName:r,optionName:n},onSelect:this.onSelectFontFamily})}),(0,m.jsxs)(o.xu,{paddingX:8,marginTop:4,display:"flex",children:[(0,m.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(j.Z,{id:"pinbuilder-editor-font-size-text-field",minValue:18,maxValue:64,iconName:"text-size",value:s,onChange:this.onChangeFontSize}),(0,m.jsx)(o.xu,{marginTop:2,children:(0,m.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Size", "Size", "Text font size", undefined, true)})})]}),(0,m.jsxs)(o.xu,{marginStart:4,display:"flex",direction:"column",alignItems:"center",width:84,position:"relative",dangerouslySetInlineStyle:ei.fontColor,children:[(0,m.jsx)(C.ZP,{colorSelected:l,id:"pinbuilder-editor-text-color-picker",imagePalette:y,onSelectColor:this.onSelectTextColor}),(0,m.jsx)(o.xu,{marginTop:2,children:(0,m.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Colour", "Color", "Text color", undefined, true)})})]})]}),b&&(0,m.jsxs)(o.xu,{paddingX:8,marginTop:4,position:"relative",children:[(0,m.jsx)(o.iz,{}),(0,m.jsxs)(o.xu,{paddingY:4,children:[(0,m.jsx)(o.iP,{onTap:t,children:(0,m.jsx)(o.xv,{color:"subtle",size:"100",weight:"bold",children:f?"- "+(this.props.i18n.bt("Hide options", "Hide options", "Hide text adjustment options.", undefined, true)):"+ "+(this.props.i18n.bt("Show more options", "Show more options", "Show more text adjustment options.", undefined, true))})}),f&&(0,m.jsxs)(o.xu,{marginTop:4,display:"flex",children:[(0,m.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:84,children:[(0,m.jsx)(j.Z,{iconName:"text-line-height",id:"pinbuilder-editor-text-line-height",minValue:.5,maxValue:2.5,step:.1,value:p,onChange:this.onChangeLineHeight}),(0,m.jsx)(o.xu,{marginTop:2,children:(0,m.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Line", "Line", "Line height of the text", undefined, true)})})]}),(0,m.jsxs)(o.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,m.jsx)(j.Z,{id:"pinbuilder-editor-text-spacing-text-field",iconName:"text-spacing",minValue:-10,maxValue:50,step:1,value:_,onChange:this.onChangeLetterSpacing}),(0,m.jsx)(o.xu,{marginTop:2,children:(0,m.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Letter", "Letter", "Letter spaceing of the text", undefined, true)})})]}),(0,m.jsxs)(o.xu,{marginStart:3,display:"flex",direction:"column",alignItems:"center",width:84,children:[(0,m.jsx)(ee,{selectedIndex:g,onSelect:this.onSelectTransform}),(0,m.jsx)(o.xu,{marginTop:2,children:(0,m.jsx)(o.xv,{size:"100",children:this.props.i18n.bt("Transform", "Transform", "Text transform between normal and all uppercase", undefined, true)})})]})]})]}),(0,m.jsx)(o.iz,{})]}),(0,m.jsxs)(o.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(o.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Alignment", "Alignment", "Adjust text alignment", undefined, true)})}),(0,m.jsx)(J,{selectedIndex:d,onSelect:this.onSelectAlignment})]}),(0,m.jsxs)(o.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Margins", "Margins", "Adjust the margin.", undefined, true)})}),(0,m.jsx)(T,{marginIndex:a,onSelectMargin:this.onSelectMargin})]})]}),(0,m.jsxs)(o.xu,{paddingX:8,marginTop:10,display:"flex",justifyContent:"between",children:[(0,m.jsxs)(o.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Background", "Background", "Adjust the background of the text overlay", undefined, true)})}),(0,m.jsx)(C.ZP,{id:"pinbuilder-editor-text-background-color-picker",imagePalette:y,width:96,showNoFillControl:!0,showTransparencyControl:!0,colorSelected:u,onSelectColor:this.onSelectBackgroundColor,transparencyIndex:h,onSelectTransparency:this.onSelectBackgroundTransparency})]}),(0,m.jsxs)(o.kC,{direction:"column",justifyContent:"start",children:[(0,m.jsx)(o.xu,{marginBottom:2,children:(0,m.jsx)(o.xv,{size:"200",weight:"bold",children:this.props.i18n.bt("Position", "Position", "Adjust the position of the text overlay", undefined, true)})}),(0,m.jsx)(Q,{selectedIndex:c,onSelect:this.onSelectPosition})]})]})]}),(0,m.jsxs)(o.xu,{display:"flex",direction:"column",column:12,children:[(0,m.jsx)(o.iz,{}),(0,m.jsx)(o.xu,{"data-tutorial-id":"pin-builder-editor-reset-button",paddingY:2,paddingX:8,children:(0,m.jsx)(o.zx,{fullWidth:!0,accessibilityLabel:this.props.i18n.bt("Reset", "Reset", " - ", undefined, true),color:"white",text:this.props.i18n.bt("Reset", "Reset", "Resets all the changes.", undefined, true),onClick:this.onReset})})]})]})}}function en(e){let{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)();return(0,m.jsx)(er,{...e,i18n:i,logContextEvent:t})}var eo=i(623320);function es(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let el="#efefef";class ea extends r.Component{constructor(e){super(e),es(this,"_getInitialAspectRatioIndex",()=>{let{canDeselectAspectRatio:e,canvasJson:t,type:i}=this.props;if(!t)return e?null:0;{let e=(0,A.Z)(i),r=e.findIndex(({w:e,h:i})=>t.aspectRatio&&e===t.aspectRatio.w&&i===t.aspectRatio.h);return -1===r?null:r}}),es(this,"_getToolPanes",e=>{let{mediaType:t}=this.props,i=[{icon:"crop",label:this.props.i18n.bt("Crop & rotate", "Crop & rotate", "Button to enter cropping tool", undefined, true),name:"crop"}];return"video"!==t&&(i.push({icon:"star",label:this.props.i18n.bt("Logo", "Logo", "Button to enter logo tool", undefined, true),name:"logo"}),e.length>0&&i.push({icon:"overlay-text",label:this.props.i18n.bt("Text overlay", "Text overlay", "Button to enter text overlay tool", undefined, true),name:"text"})),i}),es(this,"_getBrandFontDefaultTextState",(e,t)=>{let i=t.find(e=>e.groupName===v.f9);if(i){var r;let t=i.fonts[0];return{...e,fontFamilyName:null!==(r=t.fontFamily)&&void 0!==r?r:"",fontGroupName:t.fontGroup,fontStyleName:t.styles[0].name}}return e}),es(this,"getTextState",(e,t)=>{let{canvasJson:i}=this.props;if(i&&i.text){let{fontFamily:n,fontStyle:o,fontWeight:s}=i.text,l=(0,S.$D)(t,n);if(l){var r;return{...e,fontFamilyName:null!==(r=l.fontFamily)&&void 0!==r?r:"",fontGroupName:l.fontGroup,fontStyleName:(0,S.CP)(l,o,s)}}}return this._getBrandFontDefaultTextState(e,t)}),es(this,"getDefaultTextState",()=>{let{locale:e}=this.props.requestContext;return this._getBrandFontDefaultTextState((0,S.bs)(e),this.state.fontGroups)}),es(this,"onIconClick",e=>{let{currentToolPane:t}=this.state,{pinCanvas:i,logContextEvent:r}=this.props;e!==t&&i&&("text"===t&&i.removeTextLayer(!0),["crop","logo","text"].includes(e))&&(i.setEditingMode(e),r({event_type:101,component:13780,element:{crop:12132,logo:12133,text:12134}[e]})),this.setState({currentToolPane:e})}),es(this,"onSelectAspectRatioIndex",e=>{let{onAspectRatioChange:t,type:i}=this.props;this.setState({aspectRatioIndex:e}),void 0!==e&&t(null!==e?(0,A.Z)(i)[e]:null)}),es(this,"onCropReset",()=>{this.setState({aspectRatioIndex:this._getInitialAspectRatioIndex()})}),es(this,"onDeleteLogo",e=>{let{invalidateStickerResource:t}=this.props,{logo:i,logoImages:r}=this.state,{assetId:n}=r[e];if(n){l.Z.create("StickerAssetResource",{assetId:n}).callDelete().then(t);let r=(i||{}).logoIndex,o=r===e||null==r?null:r>e?r-1:r;this.setState(t=>({logo:{...t.logo,logoIndex:o},logoImages:t.logoImages.filter((t,i)=>i!==e)}))}}),es(this,"onUploadLogos",e=>{let{invalidateStickerResource:t,logContextEvent:i}=this.props,r=e.map(e=>(0,eo.zp)(e.src).then(e=>l.Z.create("StickerAssetResource",{binary_data:e}).callCreate()));Promise.all(r).then(i=>{if(i){let r=i.map(({resource_response:t},i)=>{let r=t.data,n=e[i];return{id:r.assetId,height:n.height,width:n.width,src:n.src,type:"assetImage",assetId:r.assetId}});this.setState(e=>({logoImages:[...r,...e.logoImages],logo:{...e.logo,logoIndex:0}})),t()}}),i({event_type:101,component:13780,element:12140})}),es(this,"onLogoReset",()=>{this.setState({logo:{logoIndex:null,logoSize:50,logoMarginIndex:1,logoPositionIndex:0,logoBackgroundColor:"",logoTransparencyIndex:0}})}),es(this,"onSelectLogo",e=>{this.setState(t=>({logo:{...t.logo,logoIndex:t.logo.logoIndex===e?null:e}}))}),es(this,"onChangeLogoSize",e=>{this.setState(t=>({logo:{...t.logo,logoSize:e}}))}),es(this,"onSelectLogoMargin",e=>{this.setState(t=>({logo:{...t.logo,logoMarginIndex:e}}))}),es(this,"onSelectLogoPosition",e=>{this.setState(t=>({logo:{...t.logo,logoPositionIndex:e}}))}),es(this,"onSelectLogoBackgroundColor",e=>{this.setState(t=>({logo:{...t.logo,logoBackgroundColor:e}}))}),es(this,"onSelectLogoTransparency",e=>{this.setState(t=>({logo:{...t.logo,logoTransparencyIndex:e}}))}),es(this,"onSelectFontFamily",e=>{let{fontGroups:t}=this.state,i=(0,S.$D)(t,e.optionName);if(i){let{name:t}=i.styles[i.defaultStyle],{fontOverrides:r}=i,n=r&&r.textTransform?1:0,o=r&&r.lineHeight||1.2,s=r&&r.letterSpacing||0;this.setState(i=>({text:{...i.text,fontGroupName:e.groupName,fontFamilyName:e.optionName,fontStyleName:t,letterSpacing:s,lineHeight:o,transformIndex:n}}))}}),es(this,"onSelectTextColor",e=>{this.setState(t=>({text:{...t.text,textColor:e}}))}),es(this,"onChangeFontSize",e=>{this.setState(t=>({text:{...t.text,fontSize:e}}))}),es(this,"onChangeLineHeight",e=>{this.setState(t=>({text:{...t.text,lineHeight:e}}))}),es(this,"onChangeLetterSpacing",e=>{this.setState(t=>({text:{...t.text,letterSpacing:e}}))}),es(this,"onSelectTransform",e=>{this.setState(t=>({text:{...t.text,transformIndex:e}}))}),es(this,"onSelectAlignment",e=>{this.setState(t=>({text:{...t.text,alignmentIndex:e}}))}),es(this,"onSelectMargin",e=>{this.setState(t=>({text:{...t.text,marginIndex:e}}))}),es(this,"onSelectBackgroundColor",e=>{this.setState(t=>({text:{...t.text,backgroundColor:e}}))}),es(this,"onSelectBackgroundTransparency",e=>{this.setState(t=>({text:{...t.text,backgroundTransparencyIndex:e}}))}),es(this,"onSelectPosition",e=>{this.setState(t=>({text:{...t.text,positionIndex:e}}))}),es(this,"onToggleShowMoreOptions",()=>{let{logContextEvent:e}=this.props;this.setState(t=>{let i=!t.text.showMoreOptions;return e({event_type:101,component:13780,element:12158,aux_data:{value:i}}),{text:{...t.text,showMoreOptions:i}}})}),es(this,"onTextReset",()=>{this.setState({text:this.getDefaultTextState()})});let{canDeselectAspectRatio:t,canvasJson:i}=e,{locale:r}=e.requestContext;if(this.state={aspectRatioIndex:t?null:0,brandFontsLoaded:!1,currentToolPane:"crop",fontGroups:[],isImageSelected:!1,isScalingMode:!1,logoImagesLoaded:!1,logo:{logoBackgroundColor:"",logoIndex:null,logoMarginIndex:1,logoPositionIndex:0,logoSize:50,logoTransparencyIndex:0},logoImages:[],numImages:0,text:(0,S.bs)(r)},i){if(this.state={...this.state,aspectRatioIndex:this._getInitialAspectRatioIndex()},i.logo){let{size:e,margin:t,position:r,backgroundColor:n,backgroundOpacity:o}=i.logo;this.state={...this.state,logo:{...this.state.logo,logoBackgroundColor:n,logoMarginIndex:u.mt.indexOf(t),logoPositionIndex:u.n_.indexOf(r),logoSize:e,logoTransparencyIndex:u.AQ.indexOf(o)}}}if(i.text){let{alignment:e,backgroundColor:t,backgroundOpacity:r,characterSpacing:n,fontSize:o,fontWeight:s,lineHeight:l,margin:a,position:d,textColor:c,transform:h}=i.text;this.state={...this.state,text:{...this.state.text,backgroundColor:t,fontSize:o,fontWeight:s,textColor:c,alignmentIndex:u.aj.indexOf(e),backgroundTransparencyIndex:u.AQ.indexOf(r),letterSpacing:n||this.state.text.letterSpacing,lineHeight:l||this.state.text.lineHeight,marginIndex:u.mt.indexOf(a),positionIndex:u.yb.indexOf(d),showMoreOptions:!1,transformIndex:u.np.indexOf(h)}}}}}componentDidMount(){if(P.Z.enabled("systemFonts")){let{locale:e}=this.props.requestContext;(0,S.vK)().then(()=>this.setState(t=>{let i=(0,S.j1)(),r=[...t.fontGroups.filter(e=>e.groupName===v.f9),{groupName:v.gu,groupLabel:this.props.i18n.bt("Suggested", "Suggested", "Suggested fonts we expose to the user", undefined, true),fonts:i.filter(t=>t.fontGroup===v.gu&&!t.localeFilter||t.localeFilter===e)},{groupName:v.Rc,groupLabel:this.props.i18n.bt("Additional", "Additional", "Additional fonts we expose to the user", undefined, true),groupFooter:()=>(0,m.jsx)(o.xv,{color:"subtle",size:"100",children:(0,m.jsx)(o.rU,{href:"https://www.pinterest.com/_/_/help/business/article/build-a-pin",onClick:({dangerouslyDisableOnNavigation:e})=>e(),target:"blank",children:this.props.i18n.bt("Licence info", "Licence info", "Link to legal information about system fonts", undefined, true)})}),fonts:i.filter(e=>e.fontGroup===v.Rc)}];return{fontGroups:r,text:this.getTextState(t.text,r)}}))}}componentDidUpdate(e){let{canvasJson:t,pinCanvas:i,fontAssetResource:{data:r,isLoaded:n},stickerAssetResource:{data:o}}=this.props,{brandFontsLoaded:s,logoImagesLoaded:l}=this.state;if(i&&!e.pinCanvas&&i.on("after:render",this.onCanvasUpdate.bind(this)),n&&r&&r.length>0&&!s&&(0,S.KV)(r).then(()=>this.setState(e=>{let t=[{fonts:r,groupName:v.f9,groupLabel:this.props.i18n.bt("Uploaded fonts", "Uploaded Fonts", "fonts uploaded by the user", undefined, true)},...e.fontGroups.filter(e=>e.groupName!==v.f9)];return{fontGroups:t,brandFontsLoaded:!0,text:this.getTextState(e.text,t)}})),o&&o.length>0&&!l){let e=o.map(e=>({id:e.assetId,type:"assetImage",src:e.source,width:e.width,height:e.height,assetId:e.assetId})),{logo:i}=t||{},r=i?e.findIndex(e=>e.assetId===i.assetId):null;this.setState(t=>({logoImages:e,logoImagesLoaded:!0,logo:{...t.logo,logoIndex:r}}))}}componentWillUnmount(){let{pinCanvas:e}=this.props;e&&e.off("after:render")}onCanvasUpdate(){let{pinCanvas:e}=this.props;e&&this.setState({numImages:e.getNumOfImages(),isImageSelected:e.isImageSelected(),isScalingMode:e.isScalingMode()})}render(){let{aspectRatioIndex:e,currentToolPane:t,fontGroups:i,isImageSelected:r,isScalingMode:n,logo:s,logoImages:l,numImages:a,text:d}=this.state,{canDeselectAspectRatio:c,pinCanvas:h,pinDraftId:p,type:_,mediaType:g,videoDuration:f,videoStartText:x,videoEndText:b,validateStartTime:v,validateEndTime:P,handleStartTimeChange:S,handleEndTimeChange:w}=this.props,E=(0,A.Z)(_),I=this._getToolPanes(i);return(0,m.jsxs)(o.xu,{color:"default",direction:"row",display:"flex",flex:"none",height:"100%",minWidth:u.wj,width:u.wj,children:[(0,m.jsx)(o.xu,{color:"default",dangerouslySetInlineStyle:{__style:{borderRight:`1px solid ${el}`}},direction:"column",display:"flex",height:"100%",width:56,children:I.map((e,i)=>(0,m.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{borderRight:t===e.name?"1px solid #fff":void 0,borderTop:0!==i&&t===e.name?`1px solid ${el}`:"1px solid transparent",borderBottom:t===e.name?`1px solid ${el}`:"1px solid transparent"}},"data-test-id":`pinbuilder-editor-${e.name}-pane-button`,"data-tutorial-id":`pinbuilder-editor-${e.name}-pane-button`,padding:2,width:56,children:(0,m.jsx)(o.u,{text:e.label,children:(0,m.jsx)(o.hU,{accessibilityLabel:e.label,icon:e.icon,iconColor:t===e.name?"darkGray":"gray",onClick:()=>this.onIconClick(e.name),size:"md"})})},e.name))}),"crop"===t&&(0,m.jsx)(y,{aspectRatioIndex:e,aspectRatios:E,canDeselectAspectRatio:c,handleEndTimeChange:w,handleStartTimeChange:S,isImageSelected:r,isScalingMode:n,mediaType:g,numImages:a,onReset:this.onCropReset,onSelectAspectRatioIndex:this.onSelectAspectRatioIndex,pinCanvas:h,pinDraftId:p,validateEndTime:P,validateStartTime:v,videoDuration:f,videoEndText:b,videoStartText:x}),"logo"===t&&(0,m.jsx)($,{logo:s,logoImages:l,onChangeLogoSize:this.onChangeLogoSize,onDeleteLogo:this.onDeleteLogo,onReset:this.onLogoReset,onSelectLogo:this.onSelectLogo,onSelectLogoBackgroundColor:this.onSelectLogoBackgroundColor,onSelectLogoMargin:this.onSelectLogoMargin,onSelectLogoPosition:this.onSelectLogoPosition,onSelectLogoTransparency:this.onSelectLogoTransparency,onUploadLogos:this.onUploadLogos,pinCanvas:h}),"text"===t&&(0,m.jsx)(en,{fontGroups:i,getDefaultTextState:this.getDefaultTextState,onChangeFontSize:this.onChangeFontSize,onChangeLetterSpacing:this.onChangeLetterSpacing,onChangeLineHeight:this.onChangeLineHeight,onReset:this.onTextReset,onSelectAlignment:this.onSelectAlignment,onSelectBackgroundColor:this.onSelectBackgroundColor,onSelectBackgroundTransparency:this.onSelectBackgroundTransparency,onSelectFontFamily:this.onSelectFontFamily,onSelectMargin:this.onSelectMargin,onSelectPosition:this.onSelectPosition,onSelectTextColor:this.onSelectTextColor,onSelectTransform:this.onSelectTransform,onToggleShowMoreOptions:this.onToggleShowMoreOptions,pinCanvas:h,text:d})]})}}function ed(e){let{logContextEvent:t}=(0,d.v)(),i=(0,c.ZP)(),r=(0,n.useDispatch)(),{pinDraftId:o,type:s}=e,{pinItemIndex:l}=(0,n.useSelector)(({pinbuilder:e})=>e.pinDrafts[o]),a=(0,I.Z)({name:"FontAssetResource"}),u=(0,I.Z)({name:"StickerAssetResource"});return(0,m.jsx)(ea,{...e,canDeselectAspectRatio:"carousel"!==s&&!("story"===s&&0===l),fontAssetResource:a,i18n:i,invalidateStickerResource:()=>r((0,E.jB)("StickerAssetResource")),logContextEvent:t,requestContext:(0,w.B)(),stickerAssetResource:u})}var ec=i(724565),eu=i(734765),eh=i(223815),ep=i(829407),e_=i(19121),eg=i(939853),em=i(634449),ef=i(111284),ex=i(833991),eb=i(977558),ey=i(333312);let ev=9/16,eP=function({height:e,onClick:t,selected:i,src:n,width:s}){let l=(0,c.ZP)(),a=(0,r.useRef)(null);return e||n||s?(0,m.jsxs)(o.xu,{"data-test-id":"pinbuilder-editor-thumbnail",flex:"grow",height:"100%",marginStart:1,marginEnd:1,maxWidth:(null!=s?s:1)/(null!=e?e:1)>ev?40:20,minHeight:40,children:[i&&(0,m.jsx)(ey.default,{anchor:a.current,experienceIds:[501067],idealDirection:"up",placementId:1000135}),(0,m.jsx)(o.xu,{ref:a,children:(0,m.jsx)(N.Z,{onClick:t,rounded:!0,selected:i,children:(0,m.jsx)(o.zd,{rounding:2,children:(0,m.jsx)(o.Ee,{alt:l.bt("Carousel thumbnail", "Carousel thumbnail", "Description text for carousel image thumbnail when editing", undefined, true),naturalHeight:null!=e?e:1,naturalWidth:null!=s?s:1,src:n})})})})]},`carousel-thumbnail-${n}`):null};var eS=i(456463),eA=i(699109),ew=i(955625),eE=i(382964),eI=i(305782);function ej(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eC={__style:{zIndex:eb.fe+1e3}},eT=RegExp("\\d\\d:\\d\\d:\\d\\d");class eD extends r.Component{constructor(e){var t;super(e),t=this,ej(this,"updateCachedItems",e=>{let{selectedId:t,cachedItems:i}=this.state,{media:r}=i[t],n=this.pinCanvas?{...r,...this.pinCanvas.getCanvasOutput()}:r,o=this.pinCanvas?this.pinCanvas.toJSON():null;o&&"localImage"===n.type&&this.setState({selectedId:e,cachedItems:{...i,[t]:{...i[t],media:n,canvasJson:o}}})}),ej(this,"setCarouselItem",e=>{let{pinItemIds:t}=this.props,{selectedId:i,cachedItems:r}=this.state,n=t[e],{canvasJson:o,media:s}=r[n];n!==i&&r&&(this.updateCachedItems(n),this.pinCanvas&&o?this.pinCanvas.loadFromJSON(o):this.pinCanvas&&s&&s.src&&this.pinCanvas.setImage(s.src))}),ej(this,"onResize",()=>{if(this._canvasContainer){let{width:e,height:t}=this._canvasContainer.getBoundingClientRect();this.pinCanvas&&this.pinCanvas.resize(e,t)}}),ej(this,"isVideo",e=>!!e&&("localVideo"===e.type||"webVideo"===e.type)),ej(this,"onSaveChanges",()=>{let{onDismiss:e,pinDraftId:t,updatePinItemImages:i,logContextEvent:r}=this.props,{selectedId:n,cachedItems:o,isVideoPlaying:s,videoStartText:l,videoEndText:a}=this.state,{media:d}=o[n]||{},c=null;if(this.pinCanvas){var u;this.pinCanvas.removeTextLayer(!0),null!==(u=this.pinCanvas)&&void 0!==u&&u.isScalingMode&&(this.pinCanvas.exitScalingMode(),c={aux_data:{editor_option:"scale_mode_exit"}})}let h=this.pinCanvas?{...d,...this.pinCanvas.getCanvasOutput({width:d&&d.width||ew.IU,maxImageSize:89478485}),signature:this.isVideo(d)&&d&&d.signature?d.signature:null}:d,p=this.isVideo(d)&&d?{...h,src:d.src,trimmedStartTime:(0,ec.SD)(l),trimmedEndTime:(0,ec.SD)(a)}:h,_=this.pinCanvas?this.pinCanvas.toJSON():null;i(t,n,o,p,_);let{pinCanvas:g}=this;g&&this.isVideo(d)&&s&&g.playOrPauseVideo(),e(),r({event_type:101,component:13780,element:12130,...c})}),ej(this,"onCancelChanges",()=>{let{onDismiss:e,logContextEvent:t}=this.props,{selectedId:i,cachedItems:r,isVideoPlaying:n}=this.state,{media:o}=r[i]||{},{pinCanvas:s}=this;s&&this.isVideo(o)&&n&&s.playOrPauseVideo(),e(),t({event_type:101,component:13780,element:12131})}),ej(this,"onAspectRatioChange",e=>{let{pinItemIds:t,type:i}=this.props;"carousel"===i&&e&&(0,eA.Z)(t,this.state.cachedItems,e).then(e=>{let i=t.reduce((t,i,r)=>({...t,[i]:e[r]}),{});this.setState({cachedItems:i})})}),ej(this,"timeFormatError",()=>this.props.i18n.bt("Time must be in the format 00:00:00", "Time must be in the format 00:00:00", "Error message for incorrect time format", undefined, true)),ej(this,"timeRangeError",()=>this.props.i18n.bt("Video must be at least 4 seconds long.", "Video must be at least 4 seconds long.", "Error message indicating that video is too short", undefined, true)),ej(this,"validateEndTime",e=>{if(!eT.test(e))return this.timeFormatError();let{videoStartText:t}=this.state;return eT.test(t)&&(0,ec.SD)(e)-(0,ec.SD)(t)<4?this.timeRangeError():""}),ej(this,"validateStartTime",e=>{if(!eT.test(e))return this.timeFormatError();let{videoEndText:t}=this.state;return eT.test(t)&&(0,ec.SD)(t)-(0,ec.SD)(e)<4?this.timeRangeError():""}),ej(this,"handleEndTimeChange",({value:e})=>{if(this.setState({videoEndText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12144,aux_data:{value:e}}),!eT.test(e))return;let{videoDuration:t}=this.state,i=(0,ec.SD)(e),r=!!t&&i>t;r&&this.setState({videoEndText:t?(0,ec.to)(t):""}),this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoEndTime:r?t:i})}),ej(this,"handleStartTimeChange",({value:e})=>{this.setState({videoStartText:e}),this.props.logContextEvent({event_type:97,component:13780,element:12143,aux_data:{value:e}}),eT.test(e)&&this.pinCanvas&&this.pinCanvas.setVideoTrimmerTimeRange({videoStartTime:(0,ec.SD)(e)})}),ej(this,"onVideoTrimmerUpdate",()=>{if(this.pinCanvas){let{videoStartTime:e,videoEndTime:t}=this.pinCanvas.getVideoTrimmerTimeRange(),i=(0,ec.to)(e),r=(0,ec.to)(t);this.setState({videoStartText:i,videoEndText:r}),this.props.logContextEvent({event_type:104,component:13780,element:12146,aux_data:{value:`start=${i},end=${r}`}})}}),ej(this,"onTogglePlayState",()=>{this.pinCanvas&&this.pinCanvas.playOrPauseVideo(),this.props.logContextEvent({event_type:101,component:13780,element:12145})}),ej(this,"setCanvasContainerRef",e=>{this._canvasContainer=e,this.onResize()}),ej(this,"handleKeyupEvents",e=>{27===e.keyCode&&this.onCancelChanges()}),ej(this,"onPinCanvasLoaderLoaded",async function(e){if(e){let{selectedId:i,cachedItems:r}=t.state,{canvasJson:n,media:o}=r[i]||{},{src:s}=o||{},l=t.isVideo(o)?"video":"image";t.pinCanvas=e,e.on("trimmer:dragged",t.onVideoTrimmerUpdate),e.on("video:play",()=>t.setState({isVideoPlaying:!0})),e.on("video:pause",()=>t.setState({isVideoPlaying:!1})),n?await e.loadFromJSON(n):P.Z.enabled("videoEditing")?await e.setMedia(s,l):await e.setImage(s),t.forceUpdate(),t.onResize()}});let{pinItemId:i,pinItems:r}=e,{media:n}=r[i],o=n&&n.duration?n.duration:0;this.state={selectedId:i,cachedItems:r,videoDuration:o,videoStartText:(0,ec.to)(0),videoEndText:o?(0,ec.to)(o):(0,ec.to)(0),isVideoPlaying:!0}}componentDidMount(){let{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:r}=e;document.addEventListener("keyup",this.handleKeyupEvents,!1),window.addEventListener("resize",this.onResize),t(u.jh),i(400),r(1e3)}componentWillUnmount(){let{footerContext:e}=this.props,{setEducationId:t,setPaddingRight:i,setZIndex:r}=e;document.removeEventListener("keyup",this.handleKeyupEvents,!1),window.removeEventListener("resize",this.onResize),t(null),i(null),r(null)}render(){let{pinDraftId:e,pinItemIds:t,type:i,isRTL:r}=this.props,{selectedId:n,cachedItems:s,videoDuration:l,videoStartText:a,videoEndText:d,isVideoPlaying:c}=this.state,{canvasJson:h,media:p}=s[n]||{},_=this.isVideo(p)?"video":"image";return(0,m.jsx)(o.mh,{children:(0,m.jsxs)(eh.Z,{allowClickAndDrag:!0,children:[(0,m.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:eC,left:!0,position:"fixed",right:!0,top:!0,children:(0,m.jsxs)(o.xu,{color:"secondary",direction:"row",display:"flex",height:"100%",children:[(0,m.jsxs)(o.xu,{ref:this.setCanvasContainerRef,alignItems:"center",display:"flex",flex:"grow",height:"100%",justifyContent:"center",overflow:"hidden",position:"relative",children:[(0,m.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{zIndex:u.v9}},left:r,marginEnd:4,marginStart:4,marginTop:3,position:"absolute",right:!r,top:!0,children:[(0,m.jsx)(o.xu,{"data-test-id":"cancel-edit-button",display:"inlineBlock",marginEnd:2,marginStart:2,children:(0,m.jsx)(o.zx,{name:"cancel",onClick:this.onCancelChanges,size:"md",text:this.props.i18n.bt("Cancel", "Cancel", "Cancel pin edit", undefined, true)})}),(0,m.jsx)(o.xu,{"data-test-id":"save-edit-button","data-tutorial-id":"pin-builder-editor-save-edit-button",display:"inlineBlock",marginEnd:2,marginStart:2,children:(0,m.jsx)(o.zx,{color:"red",disabled:this.isVideo(p)&&(this.validateStartTime(a).length>0||this.validateEndTime(d).length>0),name:"saveChanges",onClick:this.onSaveChanges,size:"md",text:this.props.i18n.bt("Update changes", "Update changes", "Update changes in pin edit", undefined, true)})})]}),(0,m.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,m.jsx)(eE.Z,{onLoaded:this.onPinCanvasLoaderLoaded}),"carousel"===i&&(0,m.jsx)(o.xu,{bottom:!0,display:"flex",flex:"grow",justifyContent:"center",marginBottom:10,position:"absolute",width:196,children:t.map((e,t)=>{let{media:i}=s&&s[e]||{},{height:r,src:o,width:l}=i||{};return(0,m.jsx)(eP,{height:r,onClick:()=>this.setCarouselItem(t),selected:n===e,src:o,width:l},`carousel-thumbnail-${e}`)})}),"video"===_&&(0,m.jsx)(o.xu,{bottom:!0,flex:"none",left:!0,marginBottom:6,marginStart:6,position:"absolute",rounding:"circle",children:(0,m.jsx)(o.hU,{accessibilityLabel:c?this.props.i18n.bt("Play", "Play", "Play video", undefined, true):this.props.i18n.bt("Pause", "Pause", "Pause video", undefined, true),bgColor:"white",icon:c?"pause":"play",iconColor:"darkGray",onClick:this.onTogglePlayState,size:"sm"})})]})]}),(0,m.jsx)(ed,{canvasJson:h,handleEndTimeChange:this.handleEndTimeChange,handleStartTimeChange:this.handleStartTimeChange,mediaType:_,onAspectRatioChange:this.onAspectRatioChange,pinCanvas:this.pinCanvas,pinDraftId:e,type:i,validateEndTime:this.validateEndTime,validateStartTime:this.validateStartTime,videoDuration:l,videoEndText:d,videoStartText:a})]})}),(0,m.jsx)(em.Z,{children:([e,t])=>{var i;return e===u.jh&&(0,m.jsx)(ef.Z,{onComplete:()=>t(eg.I),onDismiss:()=>t(eg.I),steps:(0,eS.Z)((i=this.props.i18n,[{selector:'[data-tutorial-id="pinbuilder-editor-crop-pane-button"]',id:"guide-pin-builder-aspect",description:i.bt("Crop your image – a 2:3 aspect ratio works best.", "Crop your image - a 2:3 aspect ratio works best!", "EditingTourConfig.AspectRatioGuide", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-logo-pane-button"]',id:"guide-pin-builder-logo",description:i.bt("Add a logo to showcase your brand. Try a transparent .png file.", "Add a logo to showcase your brand. Try a transparent .png file.", "EditingTourConfig.Logo", undefined, true),padding:0},{selector:'[data-tutorial-id="pinbuilder-editor-text-pane-button"]',id:"guide-pin-builder-text",description:i.bt("Tell a story with a text overlay. Keep it snappy, and try a background colour if it's hard to read.", "Tell a story with a text overlay. Keep it snappy, and try a background color if it's hard to read.", "EditingTourConfig.TextOverlay", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-reset-button"]',id:"guide-pin-builder-edit-reset",description:i.bt("Want a refresh? Clear any changes you've made to start again.", "Want a refresh? Clear any changes you've made to start over.", "EditingTourConfig.ClearChanges", undefined, true),padding:0},{selector:'[data-tutorial-id="pin-builder-editor-save-edit-button"]',id:"guide-pin-builder-edit-done",description:i.bt("Finished? Tap 'Update changes' to apply your changes.", "Finished? Tap Update Changes to apply your changes.", "EditingTourConfig.UpdateChanges", undefined, true),padding:0}]))})}})]})})}}function eO(e){let{logContextEvent:t}=(0,d.v)(),i=(0,eu.Z)(),r=(0,c.ZP)(),{isRTL:o}=(0,w.B)(),l=(0,s.Z)(),a=(0,n.useDispatch)(),u=(0,e_.Z)(),h=u.isAuth?u.id:"",p=u.isAuth?u.country:"",{pinDraftId:_}=e,g=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[_].type),f=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[_].pinItemIds),x=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[_].pinItemIndex),b=f[x],y=(0,n.useSelector)(({pinbuilder:e})=>"story"===g?e.storyPinItems:e.pinItems),{canvasJson:v,media:P}=y[b];return(0,ep.Z)(()=>{t({event_type:120,component:13780})}),(0,m.jsx)(eD,{...e,canvasJson:v,footerContext:(0,ex.YW)(),i18n:r,isRTL:o,logContextEvent:t,media:P,pinItemId:b,pinItemIds:f,pinItems:y,type:g,updatePinItemImages:(e,n,o,s,d)=>a((0,eI.KF)({pinDraftId:e,selectedId:n,cachedItems:o,editedMedia:s,canvasJson:d,userId:h,country:p,i18n:r,logContextEvent:t,siteType:i,ideaPinRenamingEnabled:l}))})}},892831:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(784590);function n(e){let{data:t}=(0,r.Z)({name:"ApiResource",options:{url:`/v3/users/${e}`,data:{fields:["user.eligible_for_ad_only_pins"]}}});return!!t&&t.eligible_for_ad_only_pins}},248060:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(667294),n=i(702664),o=i(883119),s=i(407043),l=i(898781),a=i(305782),d=i(785893);class c extends r.Component{constructor(...e){var t,i,r;super(...e),t="handleChange",i=({checked:e})=>{let{setShareable:t,logContextEvent:i}=this.props;t(e),i({event_type:101,component:13308,element:12125,aux_data:{is_checked:e}})},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{checked:e}=this.props,t="pin-draft-carousel-control";return(0,d.jsxs)(o.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,d.jsx)(o.XZ,{checked:e,id:t,onChange:this.handleChange,size:"sm"}),(0,d.jsx)(o.__,{htmlFor:t,children:(0,d.jsx)(o.xu,{paddingX:2,children:(0,d.jsx)(o.xv,{size:"200",children:this.props.i18n.bt("Use the same text and URL for each image", "Use the same text and URL for each image", "Option to select if user wants to copy text and link to all carousel items", undefined, true)})})})]})}}function u(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,n.useDispatch)(),o=(0,n.useSelector)(({pinbuilder:t})=>t.pinDrafts[e.pinDraftId].pinItemShareable);return(0,d.jsx)(c,{...e,checked:o,i18n:i,logContextEvent:t,setShareable:t=>r((0,a.u9)(e.pinDraftId,t))})}},912820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(702664),n=i(883119),o=i(785893);function s({taggedObjectId:e}){var t,i,s;let l=(0,r.useSelector)(({pinbuilder:t})=>t.taggedObjects[e].media);return l?(0,o.jsx)(n.xu,{display:"inlineBlock",paddingX:1,position:"relative",children:(0,o.jsx)(n.zd,{height:90,rounding:2,wash:!0,width:90,children:(0,o.jsx)(n.Ee,{alt:"",fit:"cover",naturalHeight:null!==(t=l.height)&&void 0!==t?t:1,naturalWidth:null!==(i=l.width)&&void 0!==i?i:1,src:null!==(s=l.url)&&void 0!==s?s:""})})}):null}},84769:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var r=i(667294),n=i(702664),o=i(883119),s=i(630767),l=i(969759),a=i(176326),d=i(898781),c=i(299295),u=i(829407),h=i(305782),p=i(785893);function _(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends r.Component{constructor(...e){super(...e),_(this,"handleScheduledDateChange",e=>{let{scheduledTime:t,setScheduledDate:i,setScheduledDateError:r,setScheduledTime:n,setScheduledTimeError:o}=this.props,{value:s}=e||{};i(s),r(null);let l=()=>{n(null),o(null)},a=new Date;if(t&&s&&s.toDateString()===a.toDateString()){if(t.getHours()>a.getHours())l(),n(t);else{let e=a.getHours()+1,r=new Date(t.setHours(e));e>23&&i(r),l(),n(r)}}}),_(this,"handleScheduledTimeChange",e=>{let{setScheduledTime:t,setScheduledTimeError:i}=this.props;t(e.value),i(null)}),_(this,"handleSwitchScheduleOption",e=>()=>{let{setDefaultDateTimeToTomorrow:t,setScheduledDate:i,setScheduledDateError:r,setPublishOption:n,setScheduledTime:o,setScheduledTimeError:s}=this.props;n(e),"publish-immediately"===e?(i(null),r(null),o(null),s(null)):t()})}render(){let{displaySwitchUi:e,inStlToolingExp:t,pinDraftId:i,publishOption:r,scheduledDate:n,scheduledDateError:d,scheduledTime:u,scheduledTimeError:h}=this.props,_=new Date,g=(0,l.Z)(_,c.TZ);_.getMinutes()>=30?_.setHours(_.getHours()+1,0,0,0):_.setHours(_.getHours(),30,0,0);let m=n&&n.toDateString()===_.toDateString()?_:void 0,f=`pin-draft-schedule-publish-immediately-${i}`,x=`pin-draft-schedule-publish-later-${i}`;return(0,p.jsxs)(o.xu,{children:[e?(0,p.jsxs)(o.xu,{"data-test-id":"pin-draft-switch-group",display:"flex",paddingY:6,children:[(0,p.jsx)(o.rs,{id:"pin-draft-switch-group",onChange:this.handleSwitchScheduleOption("publish-later"===r?"publish-immediately":"publish-later"),switched:"publish-later"===r}),(0,p.jsx)(o.xu,{marginStart:2,children:(0,p.jsx)(o.__,{htmlFor:"pin-draft-switch-group",children:(0,p.jsx)(o.xv,{children:this.props.i18n.bt("Publish at a later date", "Publish at a later date", "pinbuilder.switchButton.pinDraft", undefined, true)})})})]}):(0,p.jsx)(o.FX,{direction:"row",id:"pin-draft-radio-group",legend:this.props.i18n.bt("Pin draft", "Pin draft", "pinbuilder.radioButton.pin_draft", undefined, true),legendDisplay:"hidden",children:(0,p.jsxs)(o.xu,{display:"flex",justifyContent:t?"between":void 0,paddingY:4,children:[(0,p.jsxs)(o.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(o.FX.RadioButton,{checked:"publish-immediately"===r,id:f,onChange:this.handleSwitchScheduleOption("publish-immediately"),size:"sm",value:"publish-immediately"}),(0,p.jsx)(o.xu,{children:(0,p.jsx)(o.__,{htmlFor:f,children:(0,p.jsx)(o.xu,{paddingX:2,children:(0,p.jsx)(o.xv,{size:"200",children:t?this.props.i18n.bt("Publish now", "Publish now", "pinbuilder.radioButton.publishNow", undefined, true):this.props.i18n.bt("Publish immediately", "Publish immediately", "Radio button label for publishing the pin immediately", undefined, true)})})})})]}),(0,p.jsxs)(o.xu,{display:"flex",paddingX:1,children:[(0,p.jsx)(o.FX.RadioButton,{checked:"publish-later"===r,id:x,onChange:this.handleSwitchScheduleOption("publish-later"),size:"sm",value:"publish-later"}),(0,p.jsx)(o.xu,{children:(0,p.jsx)(o.__,{htmlFor:x,children:(0,p.jsx)(o.xu,{paddingX:2,children:(0,p.jsx)(o.xv,{size:"200",children:t?this.props.i18n.bt("Publish later", "Publish later", "pinbuilder.radioButton.publishLater", undefined, true):this.props.i18n.bt("Publish at a later date", "Publish at a later date", "Radio button label by clicking which user will schedule a date and time to publish the pin later", undefined, true)})})})})]})]})}),"publish-later"===r&&(0,p.jsxs)(o.xu,{display:"flex",justifyContent:"between",marginEnd:-1,marginStart:-1,children:[(0,p.jsx)(o.xu,{column:6,paddingX:1,children:(0,p.jsx)(a.Mt,{errorMessage:d&&"string"==typeof d?d:void 0,id:`pin-draft-schedule-date-field-${i}`,idealDirection:"up",maxDate:g,minDate:_,onChange:this.handleScheduledDateChange,value:n||void 0})}),(0,p.jsx)(o.xu,{column:6,paddingX:1,children:(0,p.jsx)(s.Z,{error:h,id:`pin-draft-schedule-time-field-${i}`,idealDirection:"up",maxHeight:"30vh",minTime:m,onChange:this.handleScheduledTimeChange,placeholder:this.props.i18n.bt("Time", "Time", "Placeholder for time field", undefined, true),value:u})})]})]})}}function m(e){let t=(0,d.ZP)(),{pinDraftId:i}=e,r=(0,n.useDispatch)(),o=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[i].publishOption),s=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDate),a=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[i].scheduledDateError),c=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTime),_=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[i].scheduledTimeError),m=e=>{r((0,h.WT)(i)),r((0,h.$K)(i,e))},f=e=>{r((0,h.WT)(i)),r((0,h.I0)(i,e))},x=()=>{let e=(0,l.Z)(new Date,1);f(e);let t=new Date(e);t.setHours(12,0,0,0),m(t)};return(0,u.Z)(()=>{let e=new Date().getTime();s&&s.getTime()<e&&x()}),(0,p.jsx)(g,{...e,i18n:t,publishOption:o,scheduledDate:s,scheduledDateError:a,scheduledTime:c,scheduledTimeError:_,setDefaultDateTimeToTomorrow:x,setPublishOption:e=>r((0,h.RR)(i,e)),setScheduledDate:f,setScheduledDateError:e=>r((0,h.Yr)(i,e)),setScheduledTime:m,setScheduledTimeError:e=>r((0,h.Ve)(i,e))})}},898246:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>D});var r,n,o,s=i(667294),l=i(702664),a=i(883119),d=i(214494),c=i(407043),u=i(766935),h=i(333312),p=i(898781),_=i(349700),g=i(755742),m=i(693967),f=i.n(m),x=i(858472),b=i(785893);class y extends s.PureComponent{render(){let{value:e,onDelete:t,readOnly:i}=this.props;return(0,b.jsxs)(a.xu,{rounding:2,color:"secondary",display:"flex",justifyContent:"center",alignItems:"center",padding:2,dangerouslySetInlineStyle:{__style:{userSelect:"none"}},children:[(0,b.jsx)(a.xv,{size:"200",weight:"bold",children:e}),!i&&(0,b.jsx)(a.xu,{marginStart:2,children:(0,b.jsx)(a.iP,{fullHeight:!1,fullWidth:!1,onTap:t,rounding:"circle",children:(0,b.jsx)(a.xu,{display:"flex",justifyContent:"center",alignItems:"center",color:"default",padding:1,rounding:"circle",children:(0,b.jsx)(a.JO,{accessibilityLabel:this.props.i18n.bt("Delete tag", "Delete Tag", "delete this tag", undefined, true),icon:"cancel",color:"default",size:8,inline:!0})})})})]})}}function v(e){let t=(0,p.ZP)();return(0,b.jsx)(y,{...e,i18n:t})}function P(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}o={readOnly:!1},(n="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n="defaultProps","string"))?r:String(r))in y?Object.defineProperty(y,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):y[n]=o;class S extends s.Component{constructor(...e){super(...e),P(this,"handleChange",e=>{let{onChange:t}=this.props;t({value:e.target.value})}),P(this,"handleDeleteTag",e=>()=>{let{onRemoveTag:t}=this.props;t(e)}),P(this,"getColor",()=>{let{errorMessage:e,focused:t,showOnBlur:i,value:r}=this.props;return e?x.x7:t?"#0074e8":r&&!i?"transparent":"rgba(142, 142, 142, 0.5)"})}get textField(){return this._textField}componentDidUpdate(){this._textField&&this.props.focused&&this._textField.focus()}render(){let{disabled:e,errorMessage:t,id:i,onKeyDown:r,placeholder:n,size:o,showOnBlur:l,value:d="",tags:c,focused:u}=this.props,h={__style:{boxShadow:`0 ${u||t?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}};return(0,b.jsxs)(a.xu,{column:12,display:"flex",direction:"column",children:[(0,b.jsxs)(a.xu,{display:"flex",alignItems:"end",marginStart:-2,marginTop:-2,wrap:!0,children:[c&&c.map((e,t)=>{let{id:i,value:r}=e;return(0,b.jsx)(a.xu,{marginStart:2,marginTop:2,marginBottom:-1,children:(0,b.jsx)(v,{value:r,onDelete:this.handleDeleteTag(i)})},t)}),!e&&(0,b.jsx)(a.xu,{flex:"grow",marginTop:2,marginStart:2,children:(0,b.jsx)("input",{ref:e=>this._textField=e,type:"text",className:f()("TextArea__textArea",{TextArea__dark:!0,TextArea__disabled:e,TextArea__enabled:!e,TextArea__large:"lg"===o,TextArea__medium:"md"===o,TextArea__wrap:!1,TextArea__nowrap:!0}),id:i,onChange:this.handleChange,onKeyDown:r,placeholder:n,value:d,maxLength:30,style:{height:"21px"}})})]}),(u||l||t||!d)&&(0,b.jsxs)(s.Fragment,{children:[(0,b.jsx)(a.xu,{column:12,dangerouslySetInlineStyle:h}),(0,b.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:(u||l||t)&&(0,b.jsx)(a.xu,{column:12,display:"flex",justifyContent:"between",children:(0,b.jsx)(a.xu,{flex:"grow",children:(0,b.jsx)(a.xv,{size:"100",color:"error",children:t})})})})]})]})}}function A(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}P(S,"defaultProps",{disabled:!1,size:"md",tags:[],focused:!1});let w={component:{display:"flex",position:"relative"},flyout:{backgroundColor:"#fff",border:"1px solid #efefef",borderRadius:"8px",boxShadow:"0px 4px 8px 0px rgba(0, 0, 0, 0.1)",boxSizing:"border-box",display:"flex",flexDirection:"column",maxHeight:220,overflow:"scroll",position:"absolute",padding:"16px 0",width:"100%"}};class E extends s.Component{constructor(...e){super(...e),A(this,"state",{value:"",hoveredValue:"",flyoutHeight:0,hoveredSuggestionIndex:null,focused:!1}),A(this,"handleKeyDown",e=>{let{value:t}=this.state,{tags:i}=this.props;if(e.keyCode===g.Z.BACKSPACE&&""===t&&i.length>0){let{id:e}=i[i.length-1];this.handleRemoveTag(e)}}),A(this,"handleChange",({value:e})=>{let{onChange:t}=this.props;this.setState({value:e,hoveredValue:""}),t(e)}),A(this,"handleSuggestionMouseEnter",e=>{let{suggestions:t}=this.props,i=t[e];this.setState({hoveredSuggestionIndex:e,hoveredValue:i.tagValue||i.value})}),A(this,"handleSuggestionMouseLeave",()=>{this.setState({hoveredSuggestionIndex:null,hoveredValue:""})}),A(this,"handleAddTag",e=>{let{onAddTag:t}=this.props;t(e),this.setState({value:"",hoveredValue:""}),this._textFieldRef&&this._textFieldRef.textField&&this._textFieldRef.textField.focus()}),A(this,"handleRemoveTag",e=>{let{onRemoveTag:t}=this.props;t(e)}),A(this,"handleClick",e=>{if(this._componentRef&&e){let{onChange:t}=this.props,i=e.target instanceof Node&&this._componentRef.contains(e.target);i?this.setState({focused:i}):(this.setState({focused:i,value:"",hoveredValue:"",hoveredSuggestionIndex:null}),t(""))}}),A(this,"setTextFieldRef",e=>{this._textFieldRef=e}),A(this,"renderFlyout",e=>{let{flyoutHeight:t,hoveredSuggestionIndex:i}=this.state;return(0,b.jsxs)("div",{ref:e=>{this._flyoutRef=e},style:{...w.flyout,top:-1*t-10},children:[(0,b.jsx)(a.xu,{paddingX:4,marginBottom:2,children:(0,b.jsx)(a.xv,{size:"200",color:"subtle",children:(0,_.nk)(this.props.i18n.nbt(["Pick relevant tags ({{ count }} result)", "Pick relevant tags ({{ count }} results)"], e.length, "Number of matching tags to the query.", true),{count:e.length})})}),e.map((e,t)=>{let r=t===i;return(0,b.jsx)(a.iP,{onMouseEnter:()=>this.handleSuggestionMouseEnter(t),onMouseLeave:this.handleSuggestionMouseLeave,onTap:()=>this.handleAddTag(e),children:(0,b.jsx)(a.xu,{paddingX:4,paddingY:2,color:r?"secondary":"transparent","data-test-id":`TaggableFieldFlyout-${t}`,children:(0,b.jsx)(a.xv,{size:"200",weight:"bold",children:e.value})})},t)})]})})}componentDidMount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentWillUnmount(){"undefined"!=typeof window&&window.document.addEventListener("mousedown",this.handleClick.bind(this))}componentDidUpdate(e,t){if(this._flyoutRef){let{height:e}=this._flyoutRef.getBoundingClientRect();t.flyoutHeight!==e&&this.setState({flyoutHeight:e})}}render(){let{disabled:e,errorMessage:t,pinDraftId:i,placeholder:r,suggestions:n,tags:o}=this.props,{focused:s,hoveredValue:l,value:a}=this.state,d=o.map(e=>({value:e.tagValue?e.tagValue:e.value,id:e.id})),c=e||!s&&o.length>0;return(0,b.jsxs)("div",{ref:e=>{this._componentRef=e},style:w.component,children:[a&&!e&&s&&n.length>0&&this.renderFlyout(n),(0,b.jsx)(S,{ref:this.setTextFieldRef,disabled:c,focused:s,id:`${i}-TaggableTextField`,errorMessage:t,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onRemoveTag:this.handleRemoveTag,placeholder:r,value:l||a,tags:d,showOnBlur:!0})]})}}A(E,"defaultProps",{suggestions:[]});let I=function(e){let t=(0,p.ZP)();return(0,b.jsx)(E,{...e,i18n:t})};var j=i(305782);function C(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends s.Component{constructor(...e){super(...e),C(this,"state",{suggestions:[],noSuggestionsFromQuery:!1,containerRef:null}),C(this,"_hasStartTypingContextLogFired",!1),C(this,"saveRef",e=>{this.setState({containerRef:e})}),C(this,"onAddTag",e=>{let{addInterestTag:t}=this.props;t(e),this.setState({suggestions:[],noSuggestionsFromQuery:!1})}),C(this,"onRemoveTag",e=>{let{removeInterestTag:t}=this.props;t(e)}),C(this,"onChange",(0,u.Z)(e=>{if(e){let{pinDraftId:t,logContextEvent:i}=this.props;d.Z.create("InterestTaggingResource",{query:e,minLevel:1}).callGet().then(e=>{let{data:{suggestions:t}}=e.resource_response,i=t.map(e=>({id:e.id,value:e.name,tagValue:e.interest_name})),r=this._getUnselectedSuggestions(i);this.setState({suggestions:i,noSuggestionsFromQuery:0===r.length})}),this._hasStartTypingContextLogFired||(this._hasStartTypingContextLogFired=!0,i({event_type:7383,component:13209,element:11449,aux_data:{pin_draft_id:t}}))}else this.setState({suggestions:[],noSuggestionsFromQuery:!1})},250)),C(this,"_getUnselectedSuggestions",e=>{let{interestTags:t}=this.props,i=t.map(e=>e.id);return e.reduce((e,t)=>i.includes(t.id)?e:[...e,t],[])}),C(this,"getErrorMessage",()=>{let{interestTags:e}=this.props,{noSuggestionsFromQuery:t}=this.state;return 10===e.length?this.props.i18n.bt("You have reached the maximum number of tags allowed.", "You have reached the maximum number of tags allowed.", "The maximum number of tags user can add to a pin is reached.", undefined, true):t?this.props.i18n.bt("There are no tags that match your query.", "There are no tags that match your query.", "No suggested results found based on the user query.", undefined, true):""})}render(){let{interestTags:e,pinDraftId:t}=this.props,{containerRef:i,suggestions:r}=this.state,n=this._getUnselectedSuggestions(r),o=this.getErrorMessage(),s=e.length>0?"":this.props.i18n.bt("Add tags", "Add tags", "text area placeholder to prompt user to tags to the pin.", undefined, true);return(0,b.jsxs)(a.xu,{ref:this.saveRef,children:[(0,b.jsx)(I,{disabled:10===e.length,errorMessage:o,onAddTag:this.onAddTag,onChange:this.onChange,onRemoveTag:this.onRemoveTag,pinDraftId:t,placeholder:s,suggestions:n,tags:e}),(0,b.jsx)(h.default,{anchor:i,experienceIds:[501388],flyoutSize:"lg",idealDirection:"up",placementId:1000135,textOverflow:"normal"})]})}}function D(e){let{logContextEvent:t}=(0,c.v)(),i=(0,p.ZP)(),r=(0,l.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].interestTags),n=(0,l.useDispatch)();return(0,b.jsx)(T,{...e,addInterestTag:t=>n((0,j.YN)(e.pinDraftId,t)),i18n:i,interestTags:r,logContextEvent:t,removeInterestTag:t=>n((0,j.Ug)(e.pinDraftId,t))})}},347700:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>il});var r=i(667294),n=i(702664),o=i(616550),s=i(883119),l=i(237271),a=i(237056),d=i(469823),c=i(313580),u=i(898781),h=i(299295),p=i(785893);function _({coverImageHeight:e,pinDraftId:t}){let i=(0,u.ZP)();return(0,p.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:"100%",children:[(0,p.jsx)(s.xu,{paddingY:4,children:(0,p.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:i.bt("Select more images", "Select more images", "pinBuilder.pinDraftBodyExternalView.multiselect.subheader.text", undefined, true)})}),(0,p.jsx)(s.xu,{height:h.sD-(null!=e?e:0)-48,children:(0,p.jsx)(c.Z,{pinDraftId:t})})]})}var g=i(945212),m=i(407043),f=i(720224),x=i(349700),b=i(373695),y=i(54574),v=i(665866),P=i(616672),S=i(773285),A=i(780280),w=i(734765),E=i(19121),I=i(333206),j=i(456416),C=i(505132),T=i(305782),D=i(838548),O=i(350118),z=i(67347);let R={__style:{paddingTop:h.XB}};function k({pinDraftId:e,pinItemId:t}){var i;let l=(0,u.ZP)(),c=(0,a.Z)(),{logContextEvent:k}=(0,m.v)(),L=(0,n.useDispatch)(),N=(0,A.B)(),B=(0,o.k6)(),Z=(0,E.Z)(),M=Z.isAuth?Z.id:"",F=Z.isAuth?Z.country:"",U=Z.isAuth&&Z.isPartner,[H,V]=(0,r.useState)(!1),[G,W]=(0,r.useState)(null),[$,X]=(0,r.useState)(""),Y=(0,w.Z)(),{checkExperiment:q}=(0,S.F)(),K=()=>L((0,D.Z)({pinDraftId:e,userId:M,orbacSubjectId:void 0,country:F,isPartner:U,i18n:l,logContextEvent:k,ideaPinRenamingEnabled:c})),J=()=>L((0,T.m_)({pinDraftId:e,userId:M,country:F,isPartner:U,i18n:l,logContextEvent:k,orbacSubjectId:void 0,checkExperiment:q,siteType:Y,ideaPinRenamingEnabled:c})),Q=t=>L((0,T.Nv)(e,t)),ee=()=>L((0,j.DR)(Z)),et=(0,n.useSelector)(({pinbuilder:{pinDrafts:t,pinItems:i}})=>{let{pinItemIds:r}=t[e],{media:n}=i[r[0]];return n?(0,P.Z)(n):h.sD}),ei=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>t[e].pinId),er=(0,O.S6)()(null!=ei?ei:""),en=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>ei&&"create"===t[e].mode?er:null),eo=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>t[e].websiteDefaultImageUrl||""),es=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink),el=(0,y.Z)({url:es}),ea=!!v.Z.enabled("offsite_pin_creation_multi_select")&&((null===(i=el.data)||void 0===i?void 0:i.items.length)||0)>0;(0,r.useEffect)(()=>{(0,z.nP)("offsite_pin_creation.view",{sampleRate:1,tags:{type:v.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"}})},[]),(0,r.useEffect)(()=>{if(en){let e=setTimeout(window.close,1e4);return()=>{e&&clearTimeout(e)}}},[en]);let ed=e=>{Q(e),v.Z.enabled("offsite_pin_creation_multi_select")?J():K(),(0,z.nP)("offsite_pin_creation.create_pin",{sampleRate:1,tags:{type:v.Z.enabled("offsite_pin_creation_multi_select")?"multi_pin":"single_pin"}})},ec=()=>{W(null),V(!1)},eu=h.LM,eh=e=>"number"!=typeof e.height||"number"!=typeof e.width?{width:e.width,height:e.height}:e.height>=e.width?{width:227/e.height*e.width,height:227}:{width:eu,height:eu/e.width*e.height};return(0,p.jsxs)(s.xu,{"data-test-id":"pindraft-external-body",direction:"row",display:"flex",marginTop:v.Z.enabled("offsite_pin_creation_multi_select")?8:0,children:[(0,p.jsx)(s.xu,{alignItems:v.Z.enabled("offsite_pin_creation_multi_select")?"end":"center",direction:"column",display:"flex",justifyContent:"center",paddingX:5,children:v.Z.enabled("offsite_pin_creation_multi_select")?(0,p.jsx)(s.xu,{width:h.LM,children:(0,p.jsx)(b.Z,{url:eo,children:({image:t})=>{var i;return(0,p.jsx)(r.Fragment,{children:t&&t.length>0&&(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(s.xu,{width:h.LM,children:[(0,p.jsx)(s.xu,{"data-test-id":"media-image-view",height:eh(t[0]).height,marginEnd:"auto",marginStart:"auto",overflow:"hidden",rounding:2,width:eh(t[0]).width,children:(0,p.jsx)(s.Ee,{alt:l.bt("Uploaded image", "Uploaded image", "pinbuilder.PinDraftBodyExternalView.image", undefined, true),fit:"cover",naturalHeight:t[0].height||1,naturalWidth:t[0].width||1,src:null!==(i=t[0].url)&&void 0!==i?i:""})}),ea&&(0,p.jsx)(_,{coverImageHeight:eh(t[0]).height,pinDraftId:e})]})})})}},eo)}):(0,p.jsx)(d.Z,{height:et,pinDraftId:e,pinItemId:t})}),(0,p.jsx)(s.xu,{color:"secondary",marginTop:-5,width:2}),N.isAuthenticated?en?(()=>{var e;let t=en?null===(e=en.board)||void 0===e?void 0:e.name:"";return(0,p.jsxs)(s.kC,{alignItems:"center",direction:"column",height:530,justifyContent:"center",width:"100%",children:[(0,p.jsx)(s.xu,{padding:6,children:(0,p.jsx)(s.xv,{lineClamp:1,weight:"bold",children:(0,x.nk)(l.bt("Saved 1 idea to {{ boardName }}! ", "Saved 1 idea to {{ boardName }}! ", "Tell user number of pins that he/she saved in a board", undefined, true),{boardName:t})})}),(0,p.jsx)(s.xu,{padding:2,width:300,children:(0,p.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>ei?B.push(`/pin/${ei}/`):B.push("/pins/"),size:"lg",text:l.bt("See it now", "See it now", "Button label for navigating to the scheduled pins", undefined, true)})}),(0,p.jsx)(s.xu,{padding:2,width:300,children:(0,p.jsx)(s.zx,{color:"gray",fullWidth:!0,onClick:()=>ei?B.push(`/pin/${ei}/?share=true`):B.push("/pins/"),size:"lg",text:l.bt("Share this Pin", "Share this pin", "Button label for sharing this pin", undefined, true)})})]})})():(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(s.xu,{dangerouslySetInlineStyle:R,flex:"grow",minHeight:Math.max(et,h.sD),paddingX:5,width:"100%",children:(0,p.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,p.jsx)(s.xu,{paddingY:1,children:(0,p.jsx)(s.xv,{lineClamp:1,weight:"bold",children:l.bt("Choose a board", "Choose a board", "pinbuilder.PinDraftBodyExternalView.renderBoardPicker", undefined, true)})}),(0,p.jsx)(j.uC,{displayShortlistMostRecentBoard:!0,onBoardCreate:({title:e})=>{X(e),V(!0)},onItemChosen:ed,paneWidth:430,setBoardWithSection:e=>{W(e)},useLegoLayout:!1})]})}),H&&!G&&(0,p.jsx)(I.Z,{onBoardCreate:e=>{ee(),ed({boardId:e.id,url:e.url,title:e.name||""}),ec()},onClose:ec,suggestedBoardName:$}),H&&!!G&&(0,p.jsx)(C.Z,{onClose:ec,onSectionCreate:e=>{G&&ed({boardId:G.id,title:e.title||"",sectionId:e.id}),ec()},selectedBoard:G})]}):(0,p.jsx)(s.xu,{"data-test-id":"unauth-offsite-pin-creation-signup",children:(0,p.jsx)(f.default,{container:"pinBookmarklet",nextUrlParam:"undefined"!=typeof window?(()=>{let e=`${g.r}=${g.O}`,t=`${window.location.href}&${e}`;return encodeURIComponent(t)})():"",signupFlow:{type:"login"},signupSource:"pinBookmarklet"})})]})}var L=i(245569),N=i(323201),B=i(854156),Z=i(519325),M=i(248060),F=i(693967),U=i.n(F),H=i(858472),V=i(717615),G=i(231947),W=i(857752);function $(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class X extends r.Component{constructor(...e){super(...e),$(this,"state",{focused:!1}),$(this,"handleBlur",e=>{this.setState({focused:!1});let{onBlur:t}=this.props;t&&t(e)}),$(this,"handleFocus",()=>{this.setState({focused:!0});let{onFocus:e}=this.props;e&&e()}),$(this,"getColor",()=>{let{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:r,value:n}=this.props,{focused:o}=this.state;return e?H.x7:o||r&&t?"#0074e8":n&&!i?"transparent":"rgba(142, 142, 142, 0.5)"}),$(this,"handleTextChange",({text:e,mentions:t})=>{this.props.onChange({value:e,userMentionTags:t})})}render(){let{bold:e,disabled:t,errorMessage:i,warningMessage:r,height:n,helperMessage:o,id:l,instanceId:a,maxLength:d,placeholder:c,requestContext:u,size:h,showOnBlur:_,showWarningOnBlur:g,value:m="",viewer:f,wrap:x,logContextEvent:b,orbacActingAs:y}=this.props,{focused:P}=this.state,S={__style:{boxShadow:`0 ${P||i||g&&r?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},A=(0,G.nl)(f,y)&&"ad_creation"!==v.Z.scenario()&&u.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,p.jsxs)(s.xu,{column:12,direction:"column",display:"flex",children:[(0,p.jsx)(s.xu,{column:12,position:"relative",children:(0,p.jsx)("div",{className:U()(`TextArea__${A?"experimentalTextArea":"textArea"}`,"TextArea__dark",{TextArea__bold:e,TextArea__large:"lg"===h,TextArea__medium:"md"===h,TextArea__wrap:x,TextArea__nowrap:!x,TextArea__smHeight:"sm"===n,TextArea__mdHeight:"md"===n}),id:l,children:(0,p.jsx)(W.Z,{initialMentions:[],initialText:m,instanceId:a,onAddMention:()=>{b({event_type:8905,element:116,aux_data:{tag_type:1}})},onBlur:this.handleBlur,onChange:this.handleTextChange,onFocus:this.handleFocus,onSearchMentionCancel:()=>{b({event_type:8908,element:116,aux_data:{tag_type:1}})},onSuggestionsPopoverOpen:()=>{b({event_type:8907,element:116,aux_data:{tag_type:1}})},placeholder:c,readOnly:t})})}),(0,p.jsxs)("div",{className:P||_||i||g&&r||!m?"":"TextArea__hidden",children:[!A&&(0,p.jsx)(s.xu,{column:12,dangerouslySetInlineStyle:S}),(0,p.jsx)(s.xu,{column:12,marginTop:A?0:1,minHeight:15,children:(P||_||!!i||g&&!!r)&&(0,p.jsxs)(s.xu,{column:12,display:"flex",justifyContent:"between",children:[!!i&&(0,p.jsx)(s.xu,{"data-test-id":"text-area-error",flex:"grow",children:(0,p.jsx)(s.xv,{color:"error",size:"100",children:i})}),(g||P)&&!i&&!!r&&(0,p.jsx)(s.xu,{"data-test-id":"text-area-warning",flex:"grow",children:(0,p.jsx)(s.xv,{color:"subtle",size:"100",children:r})}),(_||P)&&!i&&!r&&(0,p.jsx)(s.xu,{"data-test-id":"text-area-helper",flex:"grow",children:(0,p.jsx)(s.xv,{color:"subtle",size:"100",children:o})}),P&&null!=d&&(0,p.jsx)(s.xu,{flex:"none",children:(0,p.jsx)(s.xv,{color:i?"error":"default",size:"100",children:d-m.length})})]})})]})]})}}function Y(e){let{logContextEvent:t}=(0,m.v)();return(0,p.jsx)(X,{...e,logContextEvent:t,orbacActingAs:(0,V.Z)(),requestContext:(0,A.B)(),viewer:(0,E.Z)()})}$(X,"defaultProps",{bold:!1,disabled:!1,size:"md",wrap:!0,value:"",orbacActingAs:{}});var q=i(66699),K=i(841064),J=i(451105),Q=i(827628),ee=i(472278);function et(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ei extends r.Component{constructor(...e){super(...e),et(this,"defaultHelperMessage",this.props.i18n.bt("People will usually see the first 50 characters when they click on your Pin", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.input.pinDraftDescription.helper", undefined, true)),et(this,"defaultPlaceholder",this.props.i18n.bt("Tell everyone what your Pin is about", "Tell everyone what your Pin is about", "pinbuilder.input.pinDraftDescription.placeholder", undefined, true)),et(this,"handleChange",({value:e,userMentionTags:t=[]})=>{let{i18n:i,ideaPinRenamingEnabled:r,logContextEvent:n,setDescriptionData:o,setStoryPinDescription:s,setStoryPinDescriptionError:l,setUserMentionTags:a,type:d}=this.props;t.length<this.props.userMentionTags.length&&n({event_type:8906,element:116,aux_data:{tag_type:1}});let c=null;e.length>h.JO?c=(0,J.ZP)({errorId:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",i18n:i,ideaPinRenamingEnabled:r}).message:t&&t.length>h.iR&&(c=(0,J.ZP)({errorId:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",i18n:i,ideaPinRenamingEnabled:r}).message),"story"===d?(s(e),l(c)):(o({description:e,descriptionError:c}),t&&a({userMentionTags:t}))})}render(){let{helperMessage:e=this.defaultHelperMessage,description:t,descriptionError:i,disabled:r,editorInstanceId:n,pinDraftId:o,placeholder:s=this.defaultPlaceholder,pinType:l,requestContext:a,validateDescription:d,viewer:c,orbacActingAs:u}=this.props,_=(0,G.nl)(c,u)&&"ad_creation"!==v.Z.scenario()&&a.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,g=v.Z.enabled("pinQuality");return"carousel"!==l?(0,p.jsx)(Y,{disabled:r,errorMessage:i,height:_?"md":void 0,helperMessage:e||this.defaultHelperMessage,id:`pin-draft-description-${o}`,instanceId:n,maxLength:h.JO,onBlur:d,onChange:this.handleChange,placeholder:s||this.defaultPlaceholder,value:t,warningMessage:g&&t.length<h.G9?(0,q.Z)(this.props.i18n.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], h.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:h.G9}):null}):(0,p.jsx)(K.Z,{disabled:r,errorMessage:i,height:_?"md":void 0,helperMessage:e||this.defaultHelperMessage,id:`pin-draft-description-${o}`,maxLength:h.JO,onBlur:d,onChange:this.handleChange,placeholder:s||this.defaultPlaceholder,value:t,viewer:c,warningMessage:g&&t.length<h.G9?(0,q.Z)(this.props.i18n.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], h.G9, "pinbuilder.input.pinDraftDescription.warning", true),{length:h.G9}):null})}}function er(e){let{logContextEvent:t}=(0,m.v)(),i=(0,u.ZP)(),r=(0,a.Z)(),{pinDraftId:o,pinItemId:s}=e,l=(0,n.useDispatch)(),{pinDrafts:d,pinItems:c,storyPinItems:h}=(0,n.useSelector)(({pinbuilder:e})=>e),{type:_,mode:g}=d[o],f="story"===_,x=f?h[s]:c[s],{description:b,descriptionError:y}=x,v=[],P="";return f||(v=c[s].userMentionTags,P=c[s].editorInstanceId),(0,p.jsx)(ei,{...e,description:b,descriptionError:y,disabled:"create"!==g,editorInstanceId:P,i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,orbacActingAs:(0,V.Z)(),pinType:_,requestContext:(0,A.B)(),setDescriptionData:e=>l((0,T.to)(o,e)),setStoryPinDescription:e=>l((0,ee.kh)(s,e)),setStoryPinDescriptionError:e=>l((0,ee.j8)(s,e)),setUserMentionTags:e=>l((0,T.to)(o,e)),userMentionTags:v,validateDescription:()=>l((0,Q.Z)({pinDraftId:o,validationKey:"signal",i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,options:{fieldToCheck:"description"}})).catch(()=>{}),viewer:(0,E.Z)()})}var en=i(261130),eo=i(766935),es=i(186656),el=i(502890);function ea(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ed extends r.Component{constructor(...e){super(...e),ea(this,"_debouncedCheckLinkIsTaggable",(0,eo.Z)(e=>{let{advertiser:t,orbacActingAs:i,viewer:r}=this.props,n=(0,G.lJ)(r,i);(0,es.Z)({url:"/v3/visual_links/can_tag/",data:{url:e,is_native:!e,for_advertiser_id:t&&t.owner_user_id,...n?{orbac_subject_id:n}:Object.freeze({})}}).then(e=>{let{setTaggable:t}=this.props,{data:i}=e.resource_response;t(i)})},300)),ea(this,"handleChange",({value:e})=>{let{setLink:t,setLinkError:i}=this.props;t(e),i(null),e&&e.match(en.Z)&&this._debouncedCheckLinkIsTaggable(e)}),ea(this,"handleFocus",()=>{this.props.logContextEvent({event_type:101,component:13308,element:11616})})}render(){let{disabled:e,link:t,linkError:i,media:r,pinDraftId:n,requestContext:o,validateLink:s,viewer:l,orbacActingAs:a}=this.props,d=(0,G.nl)(l,a)&&"ad_creation"!==v.Z.scenario()&&o.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled,c={disabled:e,id:`pin-draft-link-${n}`,errorMessage:i,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:s,placeholder:d?this.props.i18n.bt("www.website.com", "www.website.com", "pinbuilder.destinationLink.label", undefined, true):this.props.i18n.bt("Add a destination link", "Add a destination link", "Placeholder text for link on Pin creation", undefined, true),spellCheck:!1,value:t,wrap:!1},u=v.Z.enabled("pinQuality");return(0,p.jsx)(K.Z,{...c,height:d?"sm":void 0,hideScrollbars:!0,showOnBlur:!0,viewer:l,warningMessage:u&&r&&!t?this.props.i18n.bt("We recommend a destination link", "We recommend a destination link", "pinbuilder.input.pinDraftLink.warning", undefined, true):null})}}function ec(e){let{logContextEvent:t}=(0,m.v)(),i=(0,u.ZP)(),r=(0,a.Z)(),{pinDraftId:o,pinItemId:s}=e,l=(0,n.useDispatch)(),d=(0,n.useSelector)(({advertiser:e})=>e),{pinDrafts:c,pinItems:h}=(0,n.useSelector)(({pinbuilder:e})=>e),{mode:_}=c[o],{link:g,linkError:f,media:x}=h[s],{anyEnabled:b}=(0,S.F)().checkExperiment("web_m10n_business_access_orbac_www"),y=(0,V.Z)();return(0,p.jsx)(ed,{...e,advertiser:d,disabled:"create"!==_||!!x&&"webImage"===x.type,i18n:i,link:g,linkError:f,logContextEvent:t,media:x,orbacActingAs:b?y:{},requestContext:(0,A.B)(),setLink:e=>l((0,T.to)(o,{link:e})),setLinkError:e=>l((0,el.lZ)(s,e)),setTaggable:e=>l((0,el.kf)(s,e)),validateLink:()=>l((0,Q.Z)({pinDraftId:o,validationKey:"link",i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t})).catch(()=>{}),viewer:(0,E.Z)()})}var eu=i(480542),eh=i(912820),ep=i(562501),e_=i(957025);function eg({taggedObjectIds:e}){let t=(0,u.ZP)();return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(s.xu,{marginBottom:3,children:(0,p.jsx)(s.xv,{color:"default",lineClamp:1,weight:"bold",children:(0,x.nk)(t.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], e.length, "Heading for carousel of products you’ve tagged with count", true),{numProducts:e.length})})}),(0,p.jsx)(s.xu,{marginEnd:-1,marginStart:-1,children:(0,p.jsx)(eu.Z,{children:(0,p.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",children:e.map(e=>(0,p.jsx)(eh.Z,{taggedObjectId:e},e))})})})]})}function em(e){let t=(0,ep.jk)(),i=(0,e_.A$)(),r=(0,n.useSelector)(t=>(0,ep.M)(t,e)),o=(0,n.useSelector)(n=>r?i(n,{pinTagId:r}):t(n,e));return(0,p.jsx)(eg,{...e,taggedObjectIds:o})}var ef=i(84769);function ex({setTitleData:e,setStoryPinTitle:t,setStoryPinTitleError:i,type:r,disabled:n,helperMessage:o,pinDraftId:l,placeholder:d,title:c,titleError:_,validateTitle:g}){let m=(0,u.ZP)(),f=(0,a.Z)(),x=(0,E.Z)(),{checkExperiment:b}=(0,S.F)(),y=(0,V.Z)(),P=(0,G.nl)(x,y)&&"ad_creation"!==v.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,A=m.bt("The first 40 characters are what usually show up in feeds", "Your first 40 characters are what usually show up in feeds", "pinbuilder.input.pinDraftTitle.helper", undefined, true),w=m.bt("Add your title", "Add your title", "pinbuilder.input.pinDraftTitle.placeholder", undefined, true),I=m.bt("Pin title", "Pin title", "pinbuilder.input.title.placeholder", undefined, true),j=v.Z.enabled("pinQuality");return(0,p.jsx)(s.xu,{"data-test-id":"pin-draft-title-text-area-container",children:(0,p.jsx)(K.Z,{bold:!P||void 0,disabled:n,errorMessage:_,height:P?"sm":void 0,helperMessage:o||A,id:`pin-draft-title-${l}`,maxLength:h.Ke,onBlur:g,onChange:({value:n})=>{let o=n.replace(/\n/g," "),s=o.length>h.Ke?(0,J.ZP)({errorId:"TITLE_OVER_MAX_CHARACTER_LIMIT",i18n:m,ideaPinRenamingEnabled:f}).message:null;"story"===r?(t(o),i(s)):e({title:o,titleError:s})},placeholder:d||(P?I:w),size:P?"md":"lg",value:c,viewer:x,warningMessage:j&&c.length<h.bA?(0,q.Z)(m.nbt(["We recommend at least {{ length }} character", "We recommend at least {{ length }} characters"], h.bA, "pinbuilder.input.pinDraftTitle.warning", true),{length:h.bA}):null})})}function eb(e){let t=(0,u.ZP)(),i=(0,a.Z)(),{logContextEvent:r}=(0,m.v)(),{mode:o,type:s}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),{title:l,titleError:d}=(0,n.useSelector)(t=>"story"===s?t.pinbuilder.storyPinItems[e.pinItemId]:t.pinbuilder.pinItems[e.pinItemId]),c=(0,n.useDispatch)();return(0,p.jsx)(ex,{...e,disabled:"create"!==o,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:r,setStoryPinTitle:t=>c((0,ee.Dt)(e.pinItemId,t)),setStoryPinTitleError:t=>c((0,ee.h4)(e.pinItemId,t)),setTitleData:t=>c((0,T.to)(e.pinDraftId,t)),title:l,titleError:d,validateTitle:()=>c((0,Q.Z)({pinDraftId:e.pinDraftId,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:i,logContextEvent:r,options:{fieldToCheck:"title"}})).catch(()=>{})})}var ey=i(784590),ev=i(312918);function eP(){let e=(0,V.Z)(),t=(0,n.useSelector)(({advertiser:e})=>e),i=(0,E.Z)(),{data:r}=(0,ey.Z)({name:"UserResource",options:{field_set_key:"grid_item",user_id:!!e.id&&e.id||!!t&&t.owner_user_id||i.isAuth&&i.id||""}}),{full_name:o,image_medium_url:l,follower_count:a,verified_identity:d}=r||{},c=o||(t?t.name:i.isAuth&&i.fullName)||"",u=l||(t?"":i.isAuth&&i.imageMediumUrl)||"",h=d&&d.verified;return(0,p.jsx)(s.xu,{"data-test-id":"pin-draft-user",children:(0,p.jsx)(ev.Z,{followerCount:a||0,fullName:c,imageUrl:u,verified:h})})}var eS=i(898246),eA=i(424624),ew=i(596284);function eE({pinDraftId:e,pinItemId:t,pinTagId:i,pinTags:r,pinTagIds:n,showCarouselControl:o,showProductCarousel:l,showScheduleControl:a,showVideoTagging:d,unfilteredTaggedObjects:c}){let h=(0,u.ZP)(),_=(0,E.Z)(),g=(0,V.Z)(),{checkExperiment:m}=(0,S.F)(),f=(0,G.nl)(_,g)&&"ad_creation"!==v.Z.scenario()&&m("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,x=h.bt("Destination link", "Destination link", "pinbuilder.destination.link.label", undefined, true),b=(0,eA.Z)({pinTagIds:n,pinTags:r,taggedObjects:c});return(0,p.jsx)(s.Zf,{overflow:"visible",children:(0,p.jsxs)(s.xu,{column:12,direction:"column",display:"flex",height:"100%",overflow:"visible",children:[(0,p.jsxs)(s.xu,{"data-tutorial-id":"pin-builder-title-and-description",height:f?void 0:"100%",width:"100%",children:[(0,p.jsxs)(s.xu,{column:12,marginTop:8,children:[f&&(0,p.jsx)(s.xu,{marginBottom:1,marginStart:1,children:(0,p.jsx)(s.xv,{color:"default",size:"100",children:h.bt("Title", "Title", "pinbuilder.title.input.label", undefined, true)})}),(0,p.jsx)(eb,{pinDraftId:e,pinItemId:t})]}),!f&&(0,p.jsx)(s.xu,{column:12,marginTop:4,children:(0,p.jsx)(eP,{})}),f&&(0,p.jsx)(s.xu,{marginBottom:1,marginStart:1,marginTop:6,children:(0,p.jsx)(s.xv,{color:"default",size:"100",children:h.bt("Description", "Description", "pinbuilder.descriptoin.input.label", undefined, true)})}),(0,p.jsx)(s.xu,{column:12,display:"flex",flex:"grow",marginTop:f?0:6,children:(0,p.jsx)(er,{pinDraftId:e,pinItemId:t})}),(0,p.jsx)(ew.Z,{pinDraftId:e})]}),l&&!f&&(0,p.jsx)(s.xu,{column:12,marginTop:6,children:(0,p.jsx)(em,{pinItemId:t})}),l&&f&&(0,p.jsx)(Z.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:b}),d&&(0,p.jsx)(s.xu,{column:12,marginTop:4,children:(0,p.jsx)(eS.ZP,{pinDraftId:e})}),(0,p.jsxs)(s.xu,{column:12,"data-test-id":"pin-draft-link","data-tutorial-id":"pin-builder-destination-link",marginTop:f?"auto":4,children:[f&&(0,p.jsx)(s.xu,{marginBottom:1,marginStart:1,children:(0,p.jsx)(s.xv,{color:"default",size:"100",children:x})}),(0,p.jsx)(ec,{pinDraftId:e,pinItemId:t})]}),o&&(0,p.jsx)(s.xu,{column:12,marginTop:6,children:(0,p.jsx)(M.Z,{pinDraftId:e})}),a&&(0,p.jsx)(s.xu,{column:12,marginTop:4,children:(0,p.jsx)(ef.Z,{inStlToolingExp:f,pinDraftId:e})})]})})}function eI(e){let t=(0,ep.jk)(),i=(0,ep.vd)(),r=(0,n.useSelector)(t=>(0,ep.Bg)(t,e)),o=(0,n.useSelector)(t=>i(t,e)),s=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].type),l=v.Z.enabled("scheduling"),a=(0,n.useSelector)(e=>e.pinbuilder.taggedObjects),d=(0,n.useSelector)(e=>e.pinbuilder.pinTags),c=(null==r?void 0:r.type)==="localVideo"&&v.Z.enabled("videoTagging"),u="single"===s&&l&&(!r||0===o.length&&("localImage"===r.type||"localVideo"===r.type)),h=(0,n.useSelector)(t=>t.pinbuilder.pinItems[e.pinItemId].selectedPinTagId||o.length>0?o[0]:null),_=(0,n.useSelector)(i=>t(i,e).length>0);return(0,p.jsx)(eE,{...e,pinTagId:h,pinTagIds:o,pinTags:d,showCarouselControl:"carousel"===s,showProductCarousel:_,showScheduleControl:u,showVideoTagging:c,unfilteredTaggedObjects:a})}var ej=i(47615);function eC({height:e,pinDraftId:t,pinItemId:i}){return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:h.uR}},display:"flex",children:[(0,p.jsx)(s.xu,{paddingX:5,children:(0,p.jsx)(d.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,p.jsx)(s.xu,{flex:"grow",minHeight:Math.max(e,h.sD),paddingX:5,width:"100%",children:(0,p.jsx)(eI,{pinDraftId:t,pinItemId:i})})]})})}function eT(e){let{pinItemIds:t}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),{media:i}=(0,n.useSelector)(e=>e.pinbuilder.pinItems[t[0]]),r=i?(0,P.Z)(i,h.LM,(0,ej.Sl)(i)&&(0,ej.PG)(i)?0:3):h.sD;return(0,p.jsx)(eC,{...e,height:r})}var eD=i(444445),eO=i(343341),ez=i(76696),eR=i(970576),ek=i(798477),eL=i(850760);let eN={__style:{paddingTop:h.XB}};function eB({pinDraftId:e}){let{logContextEvent:t}=(0,m.v)(),i=(0,u.ZP)(),o=(0,a.Z)(),l=(0,n.useDispatch)(),d=(0,E.Z)(),c=(0,ez.Z)(),_=(0,G.lJ)(d,c),g=(0,w.Z)(),{checkExperiment:f}=(0,S.F)(),x=d.isAuth?d.id:"",b=d.isAuth?d.country:"",y=d.isAuth&&d.isPartner,[v,A]=(0,r.useState)(!1),[O,z]=(0,r.useState)(null),[R,k]=(0,r.useState)(""),L=()=>l((0,D.Z)({pinDraftId:e,userId:x,orbacSubjectId:_,country:b,isPartner:y,i18n:i,logContextEvent:t,ideaPinRenamingEnabled:o})),N=()=>l((0,T.m_)({pinDraftId:e,userId:x,country:b,isPartner:y,i18n:i,logContextEvent:t,orbacSubjectId:_,checkExperiment:f,siteType:g,ideaPinRenamingEnabled:o})),B=t=>l((0,T.Nv)(e,t)),Z=()=>l((0,j.DR)(d,c)),M=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>{let{websiteMedia:i}=t[e];return i.length>0?i:[]}),F=(0,n.useSelector)(({pinbuilder:{pinDrafts:t,pinItems:i}})=>{let{pinItemIds:r}=t[e],{media:n}=i[r[0]];return n?(0,P.Z)(n):h.sD}),U=e=>{B(e),M.length>1?N():L()},H=()=>{z(null),A(!1)};return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(s.xu,{dangerouslySetInlineStyle:eN,flex:"grow",minHeight:Math.max(F,h.sD),paddingX:5,width:"100%",children:(0,p.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,p.jsx)(s.xu,{paddingY:1,children:(0,p.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:i.bt("Choose a board", "Choose a board", "pinbuilder.PinDraftBoardView.boardPickerTitle", undefined, true)})}),(0,p.jsx)(j.sR,{displayShortlistMostRecentBoard:!0,onBoardCreate:e=>{k(null==e?void 0:e.title),A(!0)},onItemChosen:U,paneWidth:430,setBoardWithSection:e=>{z(e)},useLegoLayout:!1})]})}),v&&!O&&(0,p.jsx)(I.Z,{onBoardCreate:e=>{var t,i,r;Z(),U({boardId:null!==(t=null==e?void 0:e.id)&&void 0!==t?t:"",url:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",title:null!==(r=null==e?void 0:e.name)&&void 0!==r?r:""}),H()},onClose:H,suggestedBoardName:R}),v&&!!O&&(0,p.jsx)(C.Z,{onClose:H,onSectionCreate:e=>{O&&U({boardId:O.id,title:e.title||"",sectionId:e.id}),H()},selectedBoard:O})]})}function eZ({data:e}){let t=(0,u.ZP)();return(0,p.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px"}},"data-test-id":"media-image-view",children:(0,p.jsx)(s.zd,{rounding:4,wash:!0,children:(0,p.jsx)(s.Ee,{alt:t.bt("Image saved from site", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})}function eM({pinDraftId:e}){var t;let i=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>t[e].websiteLink),{data:o,isLoaded:l}=(0,ey.Z)({name:"DomainResource",options:{domain:i,field_set_key:"owner"}}),{data:a,refresh:d}=(0,ey.Z)(l?{name:"UserResource",options:{user_id:(null==o?void 0:null===(t=o.official_user)||void 0===t?void 0:t.id)||""}}:null);return((0,r.useEffect)(()=>{d()},[l,d]),a)?(0,p.jsxs)(s.xu,{padding:2,children:[(0,p.jsx)(eL.Z,{user:a}),";"]}):null}function eF({pinDraftId:e}){let t=(0,u.ZP)(),i=(0,n.useDispatch)(),o=(0,r.useRef)(null),l=i((0,T.By)(e)),a=h.LM,d=(e,t)=>e>=t?{width:350/e*t,height:350}:{width:a,height:a/t*e};return 1===l.length?(0,p.jsx)(s.xu,{"data-test-id":"media-image-view",height:d(l[0].height,l[0].width).height,marginEnd:"auto",marginStart:"auto",overflow:"hidden",rounding:4,width:d(l[0].height,l[0].width).width,children:(0,p.jsx)(s.Ee,{alt:t.bt("Image saved from site", "Image saved from site", "pinbuilder.PinDraftBoardView.savedImage", undefined, true),fit:"contain",naturalHeight:l[0].height,naturalWidth:l[0].width,src:l[0].src})}):(0,p.jsx)(s.xu,{ref:o,height:420,marginTop:2,overflow:"auto",children:o&&(0,p.jsx)(s.Rk,{columnWidth:h.eZ,gutterWidth:eD.lX,items:l,layout:"flexible",minCols:2,renderItem:({data:e})=>(0,p.jsx)(eZ,{data:e}),scrollContainer:()=>o.current||window,virtualize:!0})})}function eU({pinDraftId:e,pinItemId:t}){let i=(0,n.useDispatch)(),l=(0,o.k6)(),a=(0,eO.F9)(),d=()=>i((0,ek.Z)(e)),c=i((0,T.By)(e)),u=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>t[e].pinId),_=(0,O.S6)()(null!=u?u:""),g=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>u&&"create"===t[e].mode?_:null),m=.1*h.sD;(0,r.useEffect)(()=>{if(g){let e=setTimeout(window.close,1e4);return()=>{e&&clearTimeout(e)}}},[g]);let f=()=>{if(1===c.length)u?l.push(`/pin/${u}/`):l.push("/");else if(g){let e=g.board?g.board.url:"";l.push(`${e||""}`)}else l.push("/")};return g&&(()=>{if(g&&g.board){let e=g.board.name,t=g.board.url,i=g.images?g.images["236x"]:null,r=i?i.url:"";d(),a.showOneToast(({hideToast:i})=>(0,p.jsx)(eR.Z,{boardName:e,boardUrl:t,isFromPinBuilder:!0,onHide:i,onVisitButtonClick:f,pinImageUrl:r||""})),l.push("/")}})(),(0,p.jsxs)(s.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:[(0,p.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:5,children:[(0,p.jsx)(s.xu,{height:m,children:(0,p.jsx)(eM,{pinDraftId:e,pinItemId:t})}),(0,p.jsx)(s.xu,{height:450,marginTop:4,width:344,children:(0,p.jsx)(eF,{pinDraftId:e,pinItemId:t})})]}),(0,p.jsx)(s.xu,{color:"secondary",marginTop:-5,width:2}),!g&&(0,p.jsx)(eB,{pinDraftId:e,pinItemId:t})]})}var eH=i(134906);function eV({pinDraftId:e}){let t=(0,u.ZP)(),i=(0,n.useDispatch)(),[o,l]=(0,r.useState)(""),[a,d]=(0,r.useState)(""),c=(t,r)=>i((0,T.f9)(e,t,r)),_=()=>i((0,T.c8)(e,"scrape")),g=(0,n.useSelector)(({pinbuilder:t})=>t.pinDrafts[e].view),m=(0,n.useSelector)(({pinbuilder:t})=>t.pinDrafts[e].websiteLink),f=t.bt("Enter a website link", "Enter a website link", "pinbuilder.searchView.placeholdertext", undefined, true);return(0,p.jsxs)(s.xu,{height:"scrape"===g?h.i2:h.UU,paddingY:2,children:[(0,p.jsx)(s.xu,{position:"relative",children:(0,p.jsx)(s.Um,{accessibilityClearButtonLabel:t.bt("Clear search field", "Clear search field", "[m10n] pinbuilder.searchView.clearButton.accessibilityLabel", undefined, true),accessibilityLabel:m?t.bt("Enter a website link", "Enter a website link", "[m10n] pinbuilder.searchView.searchField.accessibilityLabel", undefined, true):"",errorMessage:""!==a?t.bt("No images found. Please check your URL and try again.", "No images found. Please check your URL and try again.", "pinbuilder.searchView.errorMessage", undefined, true):"",id:"save-from-site",onChange:({value:e})=>{l(e)},onKeyDown:e=>{let{event:i}=e;"Enter"===i.key&&(d(""===o||(0,eH.CB)(o)?"":(0,J.q0)(t)),c(o,a),""!==o&&""===a&&_())},placeholder:m||f,size:"lg",value:o})}),"search"===g&&(0,p.jsx)(s.xu,{padding:2,children:(0,p.jsx)(s.xv,{color:"subtle",size:"100",children:t.bt("Example: http://www.websitename.com", "Example: http://www.websitename.com", "pinbuilder.PinDraftSearchView.searchFieldExample", undefined, true)})})]})}var eG=i(490072);function eW({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,p.jsx)(eT,{pinDraftId:e,pinItemId:t});case"search":return(0,p.jsx)(eV,{pinDraftId:e});case"scrape":return(0,p.jsx)(N.Z,{pinDraftId:e});case"board":return(0,p.jsx)(eU,{pinDraftId:e,pinItemId:t});case"tag":case"selectTag":return(0,p.jsx)(B.Z,{pinDraftId:e,pinItemId:t,view:i});case"collectionsTag":return(0,p.jsx)(l.Z,{pinDraftId:e,pinItemId:t});case"reorder":return(0,p.jsx)(L.C,{pinDraftId:e});case"external":return(0,p.jsx)(k,{pinDraftId:e,pinItemId:t});default:return null}}function e$(e){let t=(0,eG.nL)(),i=(0,n.useSelector)(t=>(0,eG.Xe)(t,e)),r=(0,n.useSelector)(i=>t(i,e));return(0,p.jsx)(eW,{...e,pinItemId:r,view:i})}function eX({pinDraftId:e,websiteLink:t,setWebsiteLink:i}){let n;let{logContextEvent:o}=(0,m.v)(),l=(0,u.ZP)(),[a,d]=(0,r.useState)(!1),[c,h]=(0,r.useState)(t),[_,g]=(0,r.useState)(""),f=()=>{if(a){let e=c&&!(0,eH.CB)(c)?(0,J.q0)(l):"";g(e),c&&!e&&(i(c,e),d(!1),n&&(n.style.background="#EFEFEF"),o({event_type:101,component:13308,element:10969,aux_data:{url:c}}))}else h(""),n&&n.focus()};return(0,p.jsxs)(s.xu,{position:"relative",children:[(0,p.jsx)(s.nv,{ref:e=>{(n=e)&&(n.style.height="44px",n.style.borderRadius="24px",n.style.paddingRight="48px",n.style.background=a?"":"#EFEFEF")},errorMessage:_,id:"scrape-view-website-link",onChange:({value:e})=>{h(e)},onFocus:()=>{d(!0),n&&(n.style.background="")},onKeyDown:({event:{key:e}})=>{"Enter"===e&&f()},placeholder:l.bt("Enter website", "Enter website", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.placeholder.text", undefined, true),size:"lg",type:"url",value:c}),(0,p.jsx)(s.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,p.jsx)(s.hU,{accessibilityLabel:l.bt("Submit", "Submit", "pinBuilder.pinDraftHeaderScrapeView.pinDraftWebsiteLinkButton.submit.text", undefined, true),bgColor:"lightGray",icon:a?"arrow-forward":"cancel",iconColor:"darkGray",onClick:f,size:"sm"})})]})}function eY(e){let t=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink),i=(0,n.useDispatch)();return(0,p.jsx)(eX,{...e,setWebsiteLink:(t,r)=>i((0,T.f9)(e.pinDraftId,t,r)),websiteLink:t})}var eq=i(558068),eK=i(323716),eJ=i(388619);function eQ({pinDraftId:e}){let{logContextEvent:t}=(0,m.v)(),i=(0,u.ZP)(),r=(0,a.Z)(),l=(0,A.B)(),d=(0,n.useDispatch)(),c=(0,o.k6)(),{previous:_}=(0,eq.Hv)(),g=()=>{let{tab:t}=(0,eJ.Z)({url:(0,eK.Z)()});d((0,T.q0)(e,"upload",t===h.ro?"IDEA_PIN":"PIN"))},f=()=>{let{tab:t}=(0,eJ.Z)({url:(0,eK.Z)()});if(t===h.ro){let e=0===_.length;e?c.push(r?"/pin-creation-tool":"/idea-pin-builder"):c.goBack()}else d((0,T.hb)(e)),d((0,T.f9)(e,"")),d((0,T.c8)(e,"upload"))},x=0===(0,n.useSelector)(({pinbuilder:t})=>t.pinDrafts[e].websiteMedia).length,b=!!l.isRTL,y=v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")||v.Z.enabled("offsite_pin_creation_multi_select");return y?(0,p.jsxs)(s.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:2,children:[(0,p.jsx)(s.xu,{"data-test-id":"scrape-view-cancel-button",left:!b,marginStart:8,marginTop:8,position:"absolute",right:b,top:!0,children:(0,p.jsx)(s.hU,{accessibilityLabel:i.bt("Cancel", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true),icon:"directional-arrow-left",iconColor:"gray",onClick:f,size:"lg"})}),(0,p.jsx)(s.X6,{size:"400",children:i.bt("Save ideas from website", "Save ideas from website", "pinBuilder.pinDraftHeaderScrapeView.multiselect.header.text", undefined, true)}),(0,p.jsx)(s.xu,{marginTop:1,children:(0,p.jsx)(s.xv,{size:"200",children:i.bt("Select up to 10 images", "Select up to ten images", "pinBuilder.pinDraftHeaderScrapeView.multiselect.subheader.text", undefined, true)})}),(0,p.jsx)(s.xu,{marginTop:6,paddingX:8,width:"90%",children:(0,p.jsx)(eY,{pinDraftId:e})})]}):(0,p.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(s.X6,{size:"400",children:i.bt("Upload from the web", "Upload from the web", "pinBuilder.pinDraftHeaderScrapeView.header.text", undefined, true)}),(0,p.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,p.jsx)(s.xu,{"data-test-id":"scrape-view-cancel-button",paddingX:5,children:(0,p.jsx)(s.zx,{onClick:f,text:i.bt("Cancel", "Cancel", "pinBuilder.pinDraftHeaderScrapeView.cancel.text", undefined, true)})}),(0,p.jsx)(s.xu,{"data-test-id":"scrape-view-add-button",children:(0,p.jsx)(s.zx,{color:"red",disabled:x,onClick:()=>{t({event_type:101,component:13308,element:10970}),g()},text:i.bt("Add to Pin", "Add to Pin", "pinBuilder.pinDraftHeaderScrapeView.addToPin.text", undefined, true)})})]})]})}var e0=i(344948),e1=i(214494),e2=i(915206),e8=i(892831),e3=i(573545),e4=i(680241),e6=i(940765);function e5(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class e7 extends r.PureComponent{constructor(...e){super(...e),e5(this,"handleSaveClick",()=>{let{logContextEvent:e,orbacActingAs:t,savePinDraft:i,viewerId:r}=this.props;e({event_type:101,component:13308,element:10973});let n=t.id&&t.id!==r?t.id:void 0;i(n)}),e5(this,"handleItemChosen",e=>{let{selectItem:t,isPartner:i,logContextEvent:r}=this.props;r({event_type:101,component:13308,element:10965}),(0,z.nP)("pin_builder.board_picker.board_selected",{sampleRate:1,tags:{source:(0,e3.Z)(i)}}),t(e)}),e5(this,"handleAdOnlyPinSwitch",({value:e})=>{let{updateIsAdOnlyPin:t,selectItem:i,logContextEvent:r}=this.props;r({event_type:101,component:13308,element:13834,aux_data:{is_ads_only_pin:e}}),i(null),t(e)})}render(){let{altTextError:e,boardError:t,hasErrors:i,isPartner:r,pinDraftId:n,selectedItem:o,pinIsAdsOnly:l,isAdsOnlyPinCreationEnabled:a}=this.props,d=e=>(0,p.jsx)(e2.Z,{accessibilityLabelText:r?this.props.i18n.bt("Publish", "Publish", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.partner", undefined, true):this.props.i18n.bt("Save", "Save", "pinbuilder.pindraft.upload.dropdown.button.accessibilityLabel.pinner", undefined, true),buttonText:r?this.props.i18n.bt("Publish", "Publish", "pinbuilder.pindraft.upload.dropdown.button.partner", undefined, true):this.props.i18n.bt("Save", "Save", "pinbuilder.pindraft.upload.dropdown.button.pinner", undefined, true),disabled:e,disabledBoardPicker:l,hasError:!!t,onItemChosen:this.handleItemChosen,onSaveClick:this.handleSaveClick,placeholder:l?this.props.i18n.bt("Ad-only board", "Ad-only board", "pinbuilder.pindraft.upload.dropdown.placeholder.adOnlyPinsBoard", undefined, true):this.props.i18n.bt("Select", "Select", "pinbuilder.pindraft.upload.dropdown.placeholder", undefined, true),selectedItem:l?null:o}),c=v.Z.enabled("pinQuality");return(0,p.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(s.kC,{alignItems:"center",justifyContent:"start",minWidth:311,children:(v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")||v.Z.enabled("offsite_pin_creation_multi_select"))&&(0,p.jsx)(e6.Z,{pinDraftId:n})}),(0,p.jsxs)(s.xu,{alignItems:"center","data-tutorial-id":"pin-builder-publish-to-board",display:"flex",flex:"grow",justifyContent:a?"between":"end",minHeight:40,paddingX:5,children:[a&&(0,p.jsx)(e4.Z,{onChange:this.handleAdOnlyPinSwitch,pinDraftId:n,pinIsAdsOnly:l}),(0,p.jsxs)(s.xu,{position:"relative",width:236,children:[c&&i||e?(0,p.jsx)(s.u,{text:this.props.i18n.bt("You need to fix the highlighted issues before publishing the Pin.", "You must fix the highlighted issues before publishing the pin.", "pinbuilder.pindraft.upload.dropdown.tooltip", undefined, true),children:d(!0)}):d(!1),!!t&&(0,p.jsx)(s.xu,{left:!0,marginTop:1,position:"absolute",right:!0,children:(0,p.jsx)(s.xv,{color:"error",size:"100",children:t})})]})]})]})}}function e9(e){let{logContextEvent:t}=(0,m.v)(),i=(0,u.ZP)(),o=(0,a.Z)(),{pinDraftId:s,pinItemId:l}=e,d=(0,E.Z)(),c=d.isAuth?d.id:"",h=d.isAuth?d.country:"",_=d.isAuth&&d.isPartner,g=(0,n.useDispatch)(),f=(0,V.Z)(),x=f.user?f.user.username:void 0,{checkExperiment:b}=(0,S.F)(),y=(0,w.Z)(),v=f.id&&f.id!==c?f.id:c,P=(0,e8.Z)(v),A=(0,r.useCallback)(e=>g((0,T.Nv)(s,e)),[g,s]),I=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[s].altTextError),j=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[s].boardError),C=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[s].showcaseBannerError),O=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[s].selectedItem),z=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[s].pinIsAdsOnly),R=null==O?void 0:O.ownerUsername,k=(0,n.useSelector)(({pinbuilder:{pinDrafts:e,pinItems:t}})=>{let{mediaError:i,scheduledDateError:r,scheduledTimeError:n}=e[s],{titleError:o,descriptionError:a,linkError:d}=t[l];return[i,r,n,o,a,d].some(e=>!!e)});return(0,r.useEffect)(()=>{x&&R&&x!==R&&e1.Z.create("BoardPickerBoardsResource",{field_set_key:"board_picker",sort:"last_pinned_to",onlyFetchBoards:!0,username:x}).callGet({showError:!1}).then(e=>{var t,i;let r=null===(t=e.resource_response.data)||void 0===t?void 0:t.all_boards;r&&r.length>0&&A({boardId:r[0].id,url:r[0].url,title:r[0].name||"",imageCoverUrl:r[0].image_cover_url,ownerUsername:null===(i=r[0].owner)||void 0===i?void 0:i.username})})},[A,x,R]),(0,p.jsx)(e7,{...e,altTextError:I,boardError:j,hasErrors:k,i18n:i,isAdsOnlyPinCreationEnabled:P,isPartner:d.isAuth&&d.isPartner,logContextEvent:t,orbacActingAs:f,pinIsAdsOnly:z,savePinDraft:e=>g((0,D.Z)({pinDraftId:s,userId:c,orbacSubjectId:e,country:h,isPartner:_,i18n:i,logContextEvent:t,checkExperiment:b,siteType:y,ideaPinRenamingEnabled:o})),selectedItem:O,selectItem:A,showcaseBannerError:C,updateIsAdOnlyPin:e=>g((0,T.rS)(s,e)),viewerId:d.isAuth?d.id:""})}function te({pinDraftId:e,pinItemId:t,view:i}){switch(i){case"upload":return(0,p.jsx)(s.xu,{marginBottom:5,children:(0,p.jsx)(e9,{pinDraftId:e,pinItemId:t})});case"scrape":return(0,p.jsx)(s.xu,{marginBottom:5,children:(0,p.jsx)(eQ,{pinDraftId:e})});case"tag":case"selectTag":case"collectionsTag":return(0,p.jsx)(s.xu,{marginBottom:5,children:(0,p.jsx)(e0.Z,{pinDraftId:e,pinItemId:t})});default:return null}}function tt(e){let t=(0,eG.nL)(),i=(0,n.useSelector)(t=>(0,eG.Xe)(t,e)),r=(0,n.useSelector)(i=>t(i,e));return(0,p.jsx)(te,{...e,pinItemId:r,view:i})}var ti=i(510476),tr=i(956069),tn=i(327096);function to({children:e,showTooltip:t}){let i=(0,u.ZP)();return t?(0,p.jsx)(s.u,{inline:!0,text:i.bt("Collection product limit reached. To add another item, remove one or more products.", "Collection product limit reached. To add another item, remove one or more products.", "PinDraftFooter.AddRelatedProductsButton.tooltipText", undefined, true),children:e}):e}function ts(e){var t,i,o;let l=(0,u.ZP)(),{pinDraftId:a}=e,{setCurrentPinDraftId:d}=(0,tn.f)(),c=(0,ep.vd)(),h=(0,n.useSelector)(t=>c(t,e))||[],_=null!==(t=(0,n.useSelector)(e=>e.pinbuilder))&&void 0!==t?t:{},g=null!==(i=_.pinTags)&&void 0!==i?i:{},m=null!==(o=_.taggedObjects)&&void 0!==o?o:{},f=(0,eA.n)({pinTagIds:h,pinTags:g,taggedObjects:m}),x=f.length,b=x>6,y=x>0,v=x>=tr.tN;return(0,p.jsx)(r.Fragment,{children:(0,p.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",maxWidth:606,width:606,children:[(0,p.jsx)(s.xu,{"data-test-id":"collections-button",marginBottom:5,marginEnd:"auto",marginStart:"auto",marginTop:5,children:(0,p.jsx)(to,{showTooltip:v,children:(0,p.jsx)(s.zx,{disabled:v,onClick:()=>d(a),text:l.bt("Make a collection", "Make a collection", "PinDraftInputView.addCollection", undefined, true)})})}),(0,p.jsxs)(s.xu,{display:"flex",justifyContent:"center",marginBottom:5,paddingX:6,width:"100%",children:[(0,p.jsx)(s.xu,{marginStart:y?"auto":0,children:(0,p.jsx)(s.xv,{size:"100",children:l.bt("Add up to 24 products to be displayed below your image", "Add up to 24 products to be displayed below your image", "pinbuilder.relatedproducts.max.tagProducts", undefined, true)})}),y&&(0,p.jsx)(s.xu,{marginStart:"auto",children:(0,p.jsx)(s.xv,{size:"100",children:`${x}/24`})})]}),y&&(0,p.jsx)(eu.Z,{alwaysShowArrows:b,showArrowsOnlyOnHover:!1,variant:"wide",children:(0,p.jsx)(s.xu,{direction:"row",display:"flex",justifyContent:b?void 0:"center",marginBottom:5,width:"100%",children:f.map(({pinTagId:e,status:t,taggedObjectId:i},r)=>(0,p.jsx)(s.xu,{children:(0,p.jsx)(ti.Z,{index:r,isRelatedProducts:!0,pinTagId:e,size:"sm",status:t,taggedObjectId:i},i)},i))})})]})})}var tl=i(172045),ta=i(892819);function td({image:e,link:t,onClick:i,productDetails:n,selected:o}){let l=(0,ta.Z)(),{locale:a}=(0,A.B)(),{height:d,width:c,url:u}=e,{name:h,offers:_}=n||{},{price_value:g,price_currency:m}=(_||[])[0]||{};return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(s.iP,{fullWidth:!1,onTap:()=>i(function({image:e,link:t}){var i,r,n;return{...e,id:null!==(i=e.url)&&void 0!==i?i:"",link:t,sourceURL:null!==(r=e.url)&&void 0!==r?r:"",src:null!==(n=e.url)&&void 0!==n?n:"",type:"webImage"}}({image:e,link:t})),rounding:tr.i9,children:(0,p.jsx)(s.zd,{rounding:tr.i9,wash:!0,children:(0,p.jsx)(s.Ee,{alt:null!=u?u:"",naturalHeight:null!=d?d:1,naturalWidth:null!=c?c:1,src:null!=u?u:"",children:(0,p.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:o?{border:"solid red",borderRadius:4*tr.i9}:{}},"data-test-id":"stl-scraped-item",height:"100%",width:"100%"})})})}),g||h?(0,p.jsxs)(s.xu,{marginTop:2,children:[!!g&&g>0&&(0,p.jsx)(s.xu,{display:"flex",marginBottom:h?1:void 0,children:(0,p.jsx)(s.xv,{size:"200",weight:"bold",children:l(a,g,{currency:m,maximumFractionDigits:0,style:"currency"})})}),h&&(0,p.jsx)(s.xu,{width:"100%",children:(0,p.jsx)(s.xv,{overflow:"breakWord",size:"200",weight:"bold",children:h})})]}):null]})}function tc({images:e,link:t,onItemClick:i,productDetails:r,selectedAssetIds:n}){return(0,p.jsx)(s.xu,{marginTop:4,children:(0,p.jsx)(s.Rk,{columnWidth:tr.Py,gutterWidth:tr.op,items:e,renderItem:({data:e})=>(0,p.jsx)(td,{image:e,link:t,onClick:i,productDetails:r,selected:n.includes(e.url)})})})}var tu=i(984268);let th=({children:e,item:t})=>"pin"===t.type?(0,p.jsx)(tu.v2,{input:{type:"deprecated",data:t},children:i=>e(null!=i?i:t.description)}):e(t.url);function tp({item:e,onRemoveClick:t}){let i,r,n;let o=(0,u.ZP)();if("pin"===e.type){var l,a,d,c;let t=null!==(l=null!==(a=null===(d=e.images)||void 0===d?void 0:d["474x"])&&void 0!==a?a:null===(c=e.images)||void 0===c?void 0:c["236x"])&&void 0!==l?l:{};i=t.height,r=t.width,n=t.url}else i=e.height,r=e.width,n=e.url;return(0,p.jsxs)(s.xu,{position:"relative",children:[(0,p.jsx)(s.zd,{rounding:2,wash:!0,children:(0,p.jsx)(th,{item:e,children:e=>{var t,o,l;return(0,p.jsx)(s.xu,{height:48,id:e,width:48,children:(0,p.jsx)(s.Ee,{alt:null!=e?e:"",naturalHeight:null!==(t=i)&&void 0!==t?t:1,naturalWidth:null!==(o=r)&&void 0!==o?o:1,src:null!==(l=n)&&void 0!==l?l:"",fit:"cover"})})}})}),(0,p.jsx)(s.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,children:(0,p.jsx)(s.hU,{accessibilityLabel:o.bt("Remove", "Remove", "StlTaggingCarouselRep.removeButton.accessibilityLabel", undefined, true),bgColor:"gray",icon:"cancel",onClick:()=>t(e),size:"xs"})})]})}function t_({onDismissStart:e,onRemove:t,onSubmit:i,selectedResults:r}){let n=(0,u.ZP)(),o=r.length;return(0,p.jsxs)(s.xu,{direction:"column",display:"flex",marginTop:-8,children:[o>0&&(0,p.jsx)(eu.Z,{children:(0,p.jsx)(s.xu,{alignItems:"end",display:"flex",paddingY:4,children:r.map((e,i)=>(0,p.jsx)(s.xu,{marginStart:0===i?void 0:2,children:(0,p.jsx)(tp,{item:e,onRemoveClick:t})},e.id))})}),(0,p.jsxs)(s.xu,{display:"flex",justifyContent:"end",marginTop:8,children:[(0,p.jsx)(s.zx,{onClick:e,text:n.bt("Cancel", "Cancel", "StlTaggingSheetFooter.cancel", undefined, true)}),(0,p.jsx)(s.xu,{"data-test-id":"add-products-button",marginStart:2,children:(0,p.jsx)(s.zx,{color:"red",disabled:0===o,onClick:()=>{i(),e()},text:0===o?n.bt("Add products", "Add products", "StlTaggingSheetFooter.addProducts", undefined, true):(0,x.nk)(n.nbt(["Add {{ tagQuantity }} product", "Add {{ tagQuantity }} products"], o, "Button text to add product tags to a Pin", true),{tagQuantity:o}).join("")})})]})]})}var tg=i(320415),tm=i(869636),tf=i(437730),tx=i(566101),tb=i(977558);function ty(){let e=(0,u.ZP)();return(0,p.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:12,width:"100%",children:(0,p.jsx)(s.$j,{accessibilityLabel:e.bt("Search results are loading", "Search results are loading", "StlTaggingSheet.searchLoadingSpinner.accessibilityLabel", undefined, true),show:!0})})}function tv({onClear:e,onLinkClick:t,onSubmit:i,showCatalogLink:n,type:o}){let{logContextEvent:l}=(0,m.v)(),a=(0,u.ZP)(),[d,c]=(0,r.useState)(""),h={titleUrl:{target:"catalogId",text:a.bt("Find a product by catalogue ID instead", "Find a product by catalog ID instead", "StlTaggingSearchField.link.titleUrl", undefined, true)},catalogId:{target:"titleUrl",text:a.bt("Find a product by Pin title or URL instead", "Find a product by Pin title or URL instead", "StlTaggingSearchField.link.catalogId", undefined, true)}},_={titleUrl:a.bt("Search by product title or enter URL", "Search by product title or enter URL", "StlTaggingSearchField.placeholder.titleUrl", undefined, true),catalogId:a.bt("Enter catalogue ID", "Enter catalog ID", "StlTaggingSearchField.placeholder.catalogId", undefined, true)};return(0,p.jsxs)(s.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingBottom:"16px"}},direction:"column",display:"flex",children:[(0,p.jsx)("form",{onSubmit:e=>{e.preventDefault(),i(d)},role:"search",children:(0,p.jsx)(s.Um,{accessibilityLabel:_[o],autoComplete:"off",id:"STLTaggingSearchField",onChange:({value:t})=>{c(t),""===t&&e()},onFocus:()=>{l({event_type:101,component:13762,element:227,view_type:212})},placeholder:_[o],size:"lg",value:d})}),n&&(0,p.jsx)(s.xu,{display:"flex",justifyContent:"center",marginTop:2,children:(0,p.jsx)(s.iP,{fullWidth:!1,onTap:()=>t(h[o].target),children:(0,p.jsx)(s.xv,{align:"center",color:"shopping",inline:!0,size:"200",children:(0,p.jsx)("span",{style:{textDecoration:"underline"},children:h[o].text})})})})]})}function tP({onClick:e,pin:t,selected:i}){var r;let n=(0,tu.jy)({type:"deprecated",data:t}),o=(0,tu.LG)({type:"deprecated",data:t}),{description:l,images:a}=t,{height:d,width:c,url:u}=(null==a?void 0:a["474x"])||(null==a?void 0:a["236x"])||{};return(0,p.jsxs)(s.xu,{direction:"column",display:"flex","data-test-id":"stl-tagging-pin-rep",children:[(0,p.jsx)(s.iP,{fullWidth:!1,onTap:()=>e(t),rounding:tr.i9,children:(0,p.jsx)(s.zd,{rounding:tr.i9,wash:!0,children:(0,p.jsx)(s.Ee,{alt:null!==(r=null!=n?n:l)&&void 0!==r?r:"",naturalHeight:null!=d?d:1,naturalWidth:null!=c?c:1,src:null!=u?u:"",children:(0,p.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:i?{border:"solid red",borderRadius:4*tr.i9}:{}},height:"100%",width:"100%"})})})}),o||n?(0,p.jsxs)(s.xu,{marginTop:2,children:[o&&(0,p.jsx)(s.xu,{display:"flex",marginBottom:n?1:void 0,children:(0,p.jsx)(s.xv,{size:"200",weight:"bold",children:o})}),n&&(0,p.jsx)(s.xu,{width:"100%",children:(0,p.jsx)(s.xv,{overflow:"breakWord",size:"200",weight:"bold",children:n})})]}):null]})}function tS({onItemClick:e,results:t,selectedAssetIds:i}){return(0,p.jsx)(s.xu,{marginTop:2,children:(0,p.jsx)(s.Rk,{columnWidth:tr.Py,renderItem:({data:t})=>(0,p.jsx)(tP,{onClick:e,pin:t,selected:i.includes(t.id)}),gutterWidth:tr.op,items:t})})}function tA({hasResults:e,query:t,searchFieldType:i}){let{logContextEvent:n}=(0,m.v)(),o=(0,u.ZP)();if((0,r.useEffect)(()=>{e&&n({event_type:60,component:13762,view_type:212,aux_data:{has_search_results:!!e}})},[n,e]),!t)return(0,p.jsx)(s.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:o.bt("Choose image to create a new Pin", "Choose image to create a new Pin", "StlTaggingSearchResults", undefined, true)});let l=e?o.bt("Results for {{ searchQuery }}", "Results for {{ searchQuery }}", "StlTaggingSearchResults.query.results", undefined, true):o.bt("No results found for {{ searchQuery }}", "No results found for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true);return"catalogId"===i&&(l=e?o.bt("Catalogue match for {{ searchQuery }}", "Catalog match for {{ searchQuery }}", "StlTaggingSearchResults.query.catalogId.results", undefined, true):o.bt("No catalogue matches for {{ searchQuery }}", "No catalog matches for {{ searchQuery }}", "StlTaggingSearchResults.query.noResults", undefined, true)),(0,p.jsx)(s.xv,{color:"subtle",inline:!0,weight:"bold",size:"400",children:(0,x.nk)(l,{searchQuery:(0,p.jsx)(s.xv,{inline:!0,weight:"bold",size:"400",children:`"${t}"`},t)})})}var tw=i(277348);let tE=new s.Ry(tb.fe),tI=function(e){var t,i;let{logContextEvent:o}=(0,m.v)(),l=(0,u.ZP)(),{setCurrentPinDraftId:a,setStlTaggedCoord:d,setMostRecentTaggedObjectId:c,shopTheLook:h}=(0,tn.f)();(0,tm.Z)(1000335);let{pinItemId:_}=e,[g,f]=(0,r.useState)("titleUrl"),[x,y]=(0,r.useState)([]),[v,P]=(0,r.useState)(null),[S,w]=(0,r.useState)(!1),[I,j]=(0,r.useState)(null),[C,T]=(0,r.useState)(null),[D,O]=(0,r.useState)(),z=(0,V.Z)(),[R,k]=(0,r.useState)(null),L=(0,n.useDispatch)(),N=(0,A.B)(),B=(0,E.Z)(),Z=(0,G.lJ)(B,z)||B.isAuth&&B.id,M=(0,G._P)(N,B,z),F=x.map(({id:e})=>e),{stlTaggedCoords:U}=h,H=!U,W=(0,ep.vd)(),$=null!==(t=(0,n.useSelector)(t=>W(t,e)))&&void 0!==t?t:[],{closeupImageSignature:X,pinTags:Y,taggedObjects:q}=null!==(i=(0,n.useSelector)(e=>e.pinbuilder))&&void 0!==i?i:{},K=(0,eA.n)({pinTagIds:$,pinTags:Y,taggedObjects:q}),J=tr.tN-K.length,Q=F.length>=J,ee=()=>{j(null),P(null),T(null)},et=()=>{a(null),d(null)};(0,r.useEffect)(()=>{o({event_type:13,component:13762,view_type:212,aux_data:{...X?{image_signature:X}:{}}})},[]),(0,r.useEffect)(()=>()=>{et()},[]);let ei=({query:e,searchType:t})=>{o({event_type:60,component:13762,element:227,view_type:212,aux_data:{search_query:e,search_type:t}})},er=e=>{k(null),ei({query:e,searchType:"url"});let t=(0,tf.Z)({url:e});(0,es.Z)({url:"/v3/products/find/",data:{fields:["productmetadata.name","productmetadata.offers"],url:t,source:H?"collection":"merchant",...Z!==B.id?{orbac_subject_id:Z}:{}}}).then(({resource_response:e})=>{let{data:i}=e||{};T(t),O(i)}).catch(e=>{k({title:e.message_detail||e.message})})},en=async e=>{if(w(!0),j(e),ei({query:e,searchType:"title"}),Z){let t=e1.Z.create("BaseSearchResource",{user:Z,query:e,commerce_only:!0}),{resource_response:{data:i}}=await t.callGet(),r=i.results.filter(({type:e})=>"pin"===e);P(r)}w(!1)},eo=async e=>{ei({query:e,searchType:"id"}),w(!0),j(e);let t=e1.Z.create("ProductGroupItemIdPinResource",{merchantId:M,filters:{1:[e]},itemId:e,...Z!==B.id?{orbacSubjectId:Z}:{}}),{resource_response:{data:i}}=await t.callGet(),r=i.reduce((e,t)=>{if(t){if(t.type="pin",t.rich_metadata){var i;let e=null!==(i=t.rich_metadata.url)&&void 0!==i?i:t.rich_metadata.id;(0,tx.Z)({url:e})&&(t.link=e)}return[...e,t]}return e},[]);P(r),w(!1)},ea=e=>{ee();let t=e.trim();if("catalogId"===g)eo(t);else{let e=(0,tx.Z)({url:t});e?er(t):en(t)}},ed=e=>{if(k(null),F.includes(e.id)){let t=x.filter(({id:t})=>t!==e.id);y(t)}else{if(Q){k({title:l.bt("Related product limit reached", "Related product limit reached", "StlTaggingSheet.relatedProducts.limitErrorTitle", undefined, true),message:l.bt("To add another item, remove one or more related products", "To add another item, remove one or more related products", "StlTaggingSheet.relatedProducts.limitErrorMessage", undefined, true)});return}y(t=>[...t,e])}},ec=e=>L((0,el.oe)(_,e)),eu=(e,t,i)=>{t&&i&&L((0,tw.uM)(e,t,i))},eh=(e,t)=>{let i=null==U?void 0:U.xPercent,r=null==U?void 0:U.yPercent;if("webImage"===t.type){L((0,tw.mz)(e,t.link||t.sourceURL,null)),eu(e,i,r);let n={height:t.height,width:t.width,url:t.src};L((0,tw.Dn)(e,t.id,{media:n,type:t.type,pin:t}))}else if("pin"===t.type){var n,o;L((0,tw.mz)(e,null!==(n=t.link)&&void 0!==n?n:"",null)),eu(e,i,r),c(t.id),L((0,tw.Dn)(e,t.id,{media:null===(o=t.images)||void 0===o?void 0:o["474x"],type:t.type,pin:t}))}L((0,el.C_)(_,e))},e_=()=>{let e=(0,tl.Z)();return ec(e),e},eg=(e,t)=>{let i=e_();eh(i,e),t()},em=()=>{let e=e_();x.forEach(t=>eh(e,t))},ef=(0,r.useMemo)(()=>new s.H3([tE]),[tE]),ex=(0,r.useMemo)(()=>new s.H3([ef]),[ef]),eb=(0,r.useRef)(null),ey=C&&!!D&&D.images.length>0&&D.images.find(e=>!e.toLowerCase().includes("svg"));return(0,p.jsx)(s.mh,{zIndex:ef,children:(0,p.jsx)(s.To,{accessibilityDismissButtonLabel:l.bt("Cancel tagging products", "Cancel tagging products", "StlTaggingSheet.Sheet.accessibilityDismissButtonLabel", undefined, true),accessibilityLabel:l.bt("Tag products for this Pin", "Tag products for this Pin", "StlTaggingSheet.Sheet.accessibilitySheetLabel", undefined, true),closeOnOutsideClick:!1,footer:({onDismissStart:e})=>H?(0,p.jsx)(t_,{onDismissStart:e,onRemove:ed,onSubmit:em,selectedResults:x}):null,heading:H?l.bt("Make a collection", "Make a collection", "StlTaggingSheet.sheet.header.relatedProducts", undefined, true):l.bt("Tag this product", "Tag this product", "StlTaggingSheet.sheet.header.coordinates", undefined, true),onDismiss:et,size:"sm",subHeading:(0,p.jsx)(s.xu,{paddingX:8,children:(0,p.jsx)(tv,{onClear:ee,onLinkClick:e=>{f(e),ee()},onSubmit:e=>{ea(e)},showCatalogLink:!!M,type:g},g)}),children:({onDismissStart:e})=>{var t;return(0,p.jsxs)(s.xu,{ref:eb,children:[(0,p.jsx)(tg.Z,{eligibleIds:[502964],placementId:1000335,children:({complete:e})=>(0,p.jsx)(s.Li,{anchor:eb.current,idealDirection:"down",message:l.bt("Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items to display under your image", "Collections make it easier for people to find products and bring their inspiration to life. Add up to 24 more items for display under your image", "pinbuilder.shopTheLook.collections", undefined, true),onDismiss:e,primaryAction:{href:"https://pinterest.com/_/_/help/business/article/shop-the-look-product-tagging",target:"blank",text:l.bt("Learn more", "Learn more", "pinbuilder.shopTheLook.learnMoreButton", undefined, true),role:"link"},zIndex:ex})}),R&&(0,p.jsx)(s.xu,{marginTop:-4,children:(0,p.jsx)(s.ci,{dismissButton:{accessibilityLabel:l.bt("Dismiss", "Dismiss", "StlTaggingSheet.Callout.dismissButton.accessibilityLabel", undefined, true),onDismiss:()=>k(null)},iconAccessibilityLabel:l.bt("Error", "Error", "StlTaggingSheet.Callout.iconAccessibilityLabel", undefined, true),message:null!==(t=R.message)&&void 0!==t?t:"",title:R.title,type:"error"})}),I&&!S||C?(0,p.jsx)(s.xu,{marginTop:R?4:-4,children:(0,p.jsx)(tA,{hasResults:v?v.length>0:void 0,query:I,searchFieldType:g})}):null,I&&(0,p.jsxs)(r.Fragment,{children:[S&&(0,p.jsx)(ty,{}),(0,p.jsx)(tS,{onItemClick:H?ed:t=>eg(t,e),results:null!=v?v:[],selectedAssetIds:F})]}),C&&!!D&&D.images.length>0&&ey&&(0,p.jsx)(b.Z,{url:ey,children:({image:t})=>{var i;return(0,p.jsx)(r.Fragment,{children:t&&(0,p.jsx)(tc,{images:t,link:C,onItemClick:H?ed:t=>eg(t,e),productDetails:null==D?void 0:null===(i=D.products)||void 0===i?void 0:i[0],selectedAssetIds:F})})}},ey)]})}})})};var tj=i(82596);function tC({pinDraftId:e}){return(0,p.jsx)(s.xu,{height:64,rounding:2,width:64,children:(0,p.jsx)(tj.Z,{pinDraftId:e,type:"square"})})}var tT=i(298361),tD=i(170168),tO=i(438112),tz=i(580189);class tR extends r.Component{constructor(...e){var t,i,r;super(...e),t="handleActionClick",i=e=>t=>{let{elementType:i,onClick:r}=e;i&&this.props.logContextEvent({event_type:101,component:13308,element:i}),r&&r(t)},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){var e,t;let{primary:i,secondary:r}=this.props,n=null!==(e=i.linkUrl)&&void 0!==e?e:null,o=null!==(t=null==r?void 0:r.linkUrl)&&void 0!==t?t:null;return(0,p.jsxs)(s.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[!!r&&(0,p.jsx)(s.xu,{paddingX:1,children:o?(0,p.jsx)(s.ZP,{color:"white",text:r.text,onClick:this.handleActionClick(r),href:o,target:"blank"}):(0,p.jsx)(s.zx,{color:"white",text:r.text,onClick:this.handleActionClick(r)})}),(0,p.jsx)(s.xu,{paddingX:1,children:n?(0,p.jsx)(s.ZP,{text:i.text,onClick:this.handleActionClick(i),href:n,target:"blank"}):(0,p.jsx)(s.zx,{text:i.text,onClick:this.handleActionClick(i)})})]})}}function tk(e){let{logContextEvent:t}=(0,m.v)();return(0,p.jsx)(tR,{...e,logContextEvent:t})}function tL({onClear:e}){let t=(0,u.ZP)(),i=t.bt("Clear", "Clear", "Tooltip shown explaining button to clear published Pin", undefined, true);return(0,p.jsx)(s.u,{text:i,children:(0,p.jsx)(s.iP,{fullWidth:!1,onTap:e,rounding:"circle",children:(0,p.jsx)(s.JO,{accessibilityLabel:i,color:"default",icon:"clear",size:20})})})}let tN={__style:{borderRadius:2}};function tB({subtitle:e,title:t}){let i=(0,u.ZP)();return(0,p.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,p.jsx)(s.X6,{color:t?"default":"subtle",size:"400",children:t||i.bt("No title", "No title", "Fallback title shown if none is provided on Pin create", undefined, true)}),!!e&&(0,p.jsx)(s.xu,{marginTop:1,children:"progress"===e.type?(0,p.jsx)(s.xu,{color:"secondary",dangerouslySetInlineStyle:tN,height:6,overflow:"hidden",position:"relative",width:316,children:(0,p.jsx)(s.xu,{bottom:!0,left:!0,top:!0,color:"primary",dangerouslySetInlineStyle:tN,position:"absolute",width:`${e.progress}%`})}):(0,p.jsx)(s.xv,{size:"100",children:e.text})})]})}function tZ({color:e,text:t}){return(0,p.jsx)(s.xv,{color:e,italic:!0,children:t})}function tM({status:e}){let t=(0,u.ZP)();if("default"===e)return(0,p.jsx)(s.xu,{width:20,height:20,color:"tertiary",rounding:"circle"});{let i={error:{accessibilityLabel:t.bt("Error", "Error", "Screen reader label for failed Pin create", undefined, true),color:"error",icon:"alert"},warning:{accessibilityLabel:t.bt("Alert", "Alert", "Screen reader label for Pin create with message", undefined, true),color:"warning",icon:"check-circle"},success:{accessibilityLabel:t.bt("Success", "Success", "Screen reader label for success Pin create", undefined, true),color:"success",icon:"check-circle"}},{accessibilityLabel:r,color:n,icon:o}=i[e];return(0,p.jsx)(s.JO,{accessibilityLabel:r,color:n,icon:o,size:20})}}var tF=i(923490);function tU(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tH extends r.Component{constructor(e){super(e),tU(this,"_timeSuccessUpdated",new Date),tU(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),tU(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),tU(this,"getSubtitleText",()=>{let{videoErrorMsg:e,pin:t,scheduledPin:i}=this.props;if(i)return(0,x.nk)(this.props.i18n.bt("Scheduled {{ elapsedTime }}", "Scheduled {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was schedule", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(i.created_at,!0)}).join("");if(t){let e=this.props.getHumanizedTimeSince(t.created_at,!0);return 3===t.video_status?(0,x.nk)(this.props.i18n.bt("Uploaded {{ elapsedTime }}", "Uploaded {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin was uploaded", undefined, true),{elapsedTime:e}).join(""):(0,x.nk)(this.props.i18n.bt("Published {{ elapsedTime }}", "Published {{ elapsedTime }}", "Text shown notifying user how long ago a Pin was created", undefined, true),{elapsedTime:e}).join("")}if(e)return(0,x.nk)(this.props.i18n.bt("Attempted {{ elapsedTime }}", "Attempted {{ elapsedTime }}", "Text shown notifying user how long ago a video Pin upload was attempted", undefined, true),{elapsedTime:this.props.getHumanizedTimeSince(this._timeSuccessUpdated.toString(),!0)}).join("")}),tU(this,"getSubtitle",()=>{let{videoUploadProgress:e}=this.props,{subtitleText:t}=this.state;return null!=e?{progress:e,type:"progress"}:t?{text:t,type:"text"}:void 0}),tU(this,"getText",()=>{let{pin:e,requestContext:t,scheduledPin:i,videoUploadProgress:r}=this.props;return null!=r?this.props.i18n.bt("Uploading", "Uploading", "Text shown notifying user video is still uploading", undefined, true):e&&3===e.video_status?this.props.i18n.bt("In review", "In review", "Text shown notifying user video is uploaded but not live", undefined, true):i?(0,q.Z)(this.props.i18n.bt("This Pin will be published on {{ scheduledDate }}", "This Pin will publish on {{ scheduledDate }}", "Text shown notifying user when Pin is scheduled to create", undefined, true),{scheduledDate:new Date(1e3*i.scheduled_ts).toLocaleDateString(t.locale,{weekday:"long",month:"numeric",day:"numeric"})}):void 0}),tU(this,"getActions",()=>{var e;let{experimentsClient:t,pin:i,retryUpload:r,requestContext:n,siteType:o,videoErrorMsg:s}=this.props,l={elementType:11334,text:this.props.i18n.bt("See it", "See it", "Button to see created Pin", undefined, true),linkUrl:(0,tz.Z)({currentSiteType:o,destinationSiteType:0,inputPath:i?`/pin/${i.id}`:""})},{advertiser:a}=n,{checkExperiment:d}=t,c=(0,tO.aI)(t)&&(null==a?void 0:null===(e=a.segment_metadata)||void 0===e?void 0:e.sales_channel)!=="ENTERPRISE"&&(null==a?void 0:a.has_valid_billing_profile),u=a&&c&&d("adv_growth_pinbuilder_acf_entrypoint").anyEnabled,h=i&&i.is_quick_promotable?{elementType:11335,text:this.props.i18n.bt("Promote", "Promote", "Button to quick promote created Pin", undefined, true),linkUrl:u?`${tD.vI}/automated/ads/create?pinId=${i.id}`:(0,tz.Z)({currentSiteType:o,destinationSiteType:0,inputPath:`/pin/${i.id}/promote`})}:void 0,p=s?{elementType:11333,text:this.props.i18n.bt("Try again?", "Try again?", "Button to try video upload again", undefined, true),onClick:r}:null;return{primary:p||h||l,secondary:!p&&h?l:void 0}}),tU(this,"getStatus",()=>{let{pin:e,scheduledPin:t,videoErrorMsg:i,videoUploadProgress:r}=this.props;return null!=r?"default":t||e&&3===e.video_status?"warning":i?"error":"success"}),this.state={hovered:!1,subtitleText:this.getSubtitleText()}}componentDidMount(){this.interval=setInterval(()=>this.setState({subtitleText:this.getSubtitleText()}),6e4)}componentDidUpdate(e){(e.pin!==this.props.pin||e.videoErrorMsg!==this.props.videoErrorMsg)&&(this._timeSuccessUpdated=new Date,this.setState({subtitleText:this.getSubtitleText()}))}componentWillUnmount(){clearInterval(this.interval)}render(){let{clearPinDraft:e,pinDraftId:t,title:i,videoErrorMsg:r,videoUploadProgress:n}=this.props,{hovered:o}=this.state,l=this.getText(),a=r||l;return(0,p.jsxs)(s.xu,{alignItems:"center","data-test-id":"pin-draft-success",display:"flex",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,paddingX:2,paddingY:5,children:[(0,p.jsx)(s.xu,{flex:"none",paddingX:3,children:(0,p.jsx)(tC,{pinDraftId:t})}),(0,p.jsx)(s.xu,{flex:"grow",paddingX:3,children:(0,p.jsx)(tB,{subtitle:this.getSubtitle(),title:i})}),(0,p.jsxs)(s.xu,{alignItems:"center",display:"flex",flex:"none",marginEnd:-3,marginStart:-3,paddingX:2,children:[!!a&&(0,p.jsx)(s.xu,{paddingX:3,children:(0,p.jsx)(tZ,{color:r?"error":"subtle",text:a})}),!l&&(0,p.jsx)(s.xu,{paddingX:3,children:(0,p.jsx)(tk,{...this.getActions()})})]}),(0,p.jsx)(s.xu,{flex:"none",paddingX:3,children:o&&null==n?(0,p.jsx)(tL,{onClear:e}):(0,p.jsx)(tM,{status:this.getStatus()})})]})}}function tV(e){let{pinDraftId:t,pinItemId:i}=e,{logContextEvent:r}=(0,m.v)(),o=(0,u.ZP)(),s=(0,a.Z)(),l=(0,tT.Z)(),d=(0,n.useDispatch)(),c=(0,E.Z)(),h=c.isAuth?c.id:"",_=c.isAuth?c.country:"",g=(0,w.Z)(),f=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[t].scheduledPin),x=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[t].mediaError),b=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[t].status),y=(0,n.useSelector)(({pinbuilder:{pinDrafts:e,pinItems:i}})=>{let r=e[t].pinItemIds[e[t].pinItemIndex];return i[r].title}),v=(0,n.useSelector)(({pinbuilder:{pinDrafts:e,pinItems:i}})=>{let r=e[t].pinItemIds[e[t].pinItemIndex];return i[r].media}),P=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[t].pinId),{checkExperiment:I}=(0,S.F)(),j=(0,O.S6)(),C=P?j(P):null,T=v&&"localVideo"===v.type?x:null,D=v&&"localVideo"===v.type&&"uploading"===b?v.uploadProgress||0:null;return(0,p.jsx)(tH,{...e,clearPinDraft:()=>d((0,ek.Z)(t)),experimentsClient:(0,S.F)(),getHumanizedTimeSince:l,i18n:o,pin:C,requestContext:(0,A.B)(),retryUpload:()=>d((0,tF.d)({pinDraftId:t,pinItemId:i,userId:h,country:_,i18n:o,logContextEvent:r,checkExperiment:I,ideaPinRenamingEnabled:s})),scheduledPin:f,siteType:g,title:y,videoErrorMsg:T,videoUploadProgress:D})}var tG=i(302667),tW=i(460985),t$=i(639410),tX=i(121151),tY=i(65057);function tq(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tK extends r.Component{constructor(...e){super(...e),tq(this,"state",{showModal:!0}),tq(this,"handlePromoteButtonClick",()=>{let{inPinBuilderAcfEntrypointExp:e,onComplete:t,logContextEvent:i}=this.props;(0,tG.vF)(i,tY.NH.CLICK,tY.Xc.PIN_CREATE_SUCCESS,101,207),e||t()}),tq(this,"handleDismiss",()=>{let{onDismiss:e}=this.props;this.setState({showModal:!1}),e()}),tq(this,"renderDoneButton",()=>{let{promoteUrl:e}=this.props;return(0,p.jsx)(s.xu,{paddingX:1,children:(0,p.jsx)(s.ZP,{color:"red",href:e,onClick:this.handlePromoteButtonClick,text:this.props.i18n.bt("Promote", "Promote Pin", "[m10n] button text for promote link in promote modal", undefined, true)})})})}componentDidMount(){(0,tG.vF)(this.props.logContextEvent,tY.NH.RENDER,tY.Xc.PIN_CREATE_SUCCESS,120,207),(0,z.nP)("web.pin_create.success.promote.upsell")}renderModalContent(){let{pin:e,video:t}=this.props,{pinner:i}=e;return(0,p.jsxs)(s.xu,{color:"default",display:"flex",maxHeight:"calc(100vh - 32px)",maxWidth:804,overflow:"hidden",position:"relative",rounding:2,children:[(0,p.jsx)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #EFEFEF"}},display:"flex",justifyContent:"center",children:(0,p.jsx)(s.xu,{display:"flex",maxHeight:"700px",paddingX:8,paddingY:10,children:(0,p.jsx)(tW.ZP,{maxDescriptionLength:60,pin:e,promoted:{businessName:i.full_name,avatarImageSmallUrl:i.image_small_url},video:t})})}),(0,p.jsx)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:(0,p.jsxs)(s.xu,{paddingY:10,children:[(0,p.jsx)(s.xu,{display:"flex",marginStart:10,children:(0,p.jsx)(s.X6,{children:this.props.i18n.bt("You created a Pin!", "You created a Pin!", "pin create success message for modal title", undefined, true)})}),(0,p.jsx)(s.xu,{marginStart:10,marginTop:6,children:(0,p.jsx)(s.xv,{weight:"bold",children:this.props.i18n.bt("Promote your Pin to reach more people", "Promote your Pin to reach more people", "[m10n] header for promote pin upsell", undefined, true)})}),(0,p.jsx)(s.xu,{marginBottom:8,marginStart:10,marginTop:3,children:(0,p.jsx)(s.xv,{children:(0,x.nk)(this.props.i18n.bt("{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.", "{{ mauText }} people come to Pinterest every month to find new things to buy, make and do. Promote your Pin to find your audience.", "[m10n] body copy for promote pin upsell. MAU_TEXT is a string of xxx million", undefined, true),{mauText:(0,p.jsx)(t$.Z,{})})})}),this.renderButtons()]})}),(0,p.jsx)(s.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(s.hU,{accessibilityLabel:"dismiss",bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleDismiss,size:"md"})})]})}renderButtons(){let{onDismiss:e,pinUrl:t}=this.props;return(0,p.jsxs)(s.xu,{display:"flex",marginStart:9,children:[(0,p.jsx)(s.xu,{"data-test-id":"seeItNow",paddingX:1,children:(0,p.jsx)(s.ZP,{href:t,onClick:e,text:this.props.i18n.bt("See your Pin", "See your Pin", "[m10n] button text for pin link button in promote modal", undefined, true)})}),this.renderDoneButton()]})}render(){let{showModal:e}=this.state;return e?(0,p.jsx)(s.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box"}},display:"flex",height:"100%",justifyContent:"center",left:!0,position:"fixed",top:!0,width:"100%",children:(0,p.jsx)(tX.ZP,{accessibilityModalLabel:this.props.i18n.bt("Your saved Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),onDismiss:this.handleDismiss,size:"md",children:this.renderModalContent()})}):null}}function tJ(e){var t;let{pin:i}=e,r=(0,u.ZP)(),{logContextEvent:n}=(0,m.v)(),o=(0,S.F)(),s=(0,A.B)(),{advertiser:l}=s,{checkExperiment:a}=o,d=(0,tO.aI)(o)&&(null==l?void 0:null===(t=l.segment_metadata)||void 0===t?void 0:t.sales_channel)!=="ENTERPRISE"&&(null==l?void 0:l.has_valid_billing_profile),c=d&&a("adv_growth_pinbuilder_acf_entrypoint").anyEnabled,h="";return l&&c&&(h=`${tD.vI}/advertiser/${l.id}/automated/ads/create/?pinId=${i.id}`),(0,p.jsx)(tK,{...e,i18n:r,inPinBuilderAcfEntrypointExp:c,logContextEvent:n,promoteUrl:c?h:e.promoteUrl})}var tQ=i(248740),t0=i(709773),t1=i(21353),t2=i(497529),t8=i(784450);let t3=(0,t8.Z)(14,({pinId:e})=>({pin_id:e}))(function({boardName:e,color:t,description:i,eligibleForExtensionUpsell:r,experience:n,imageUrl:o,isFromPinBuilder:l,link:a,onClose:d,openNewTab:c,pin:h,pinId:_,sectionName:g,siteType:m,video:f,websiteMedia:b}){let y;let v=(0,u.ZP)(),P=(0,E.Z)(),A=(0,t2.Z)(),{checkExperiment:w}=(0,S.F)(),I=(0,t1.Z)(),j=()=>n&&[501001].includes(n.experience_id),C=(0,tz.Z)({currentSiteType:m,destinationSiteType:0,inputPath:`/pin/${_}`}),{anyEnabled:T}=w("advertiser_growth_quick_promote_direct_redirect");if(3===m)y=`${I("quick_promote")}?pinId=${h.id}`;else{let e=T?`/advertiser/quick-promote/?pinId=${_}`:`/pin/${_}/promote`;y=(0,tz.Z)({currentSiteType:m,destinationSiteType:0,inputPath:e})}if(P.isPartner&&h&&h.is_quick_promotable)return(0,p.jsx)(tJ,{onComplete:()=>{j()&&A.completeExperience(n.placement_id,n.experience_id),d()},onDismiss:()=>{j()&&A.dismissExperience(n.placement_id,n.experience_id),d()},pin:h,pinUrl:C,promoteUrl:y,siteType:m,video:f});let D=h&&e?h.board.url:"",O=g?`${D}${h.section.slug}/`:"";if(l&&r){let e=(null==h?void 0:h.id)||"";return(0,p.jsx)(s.xu,{"data-test-id":`browser-extension-upsell-modal_${e}`,children:(0,p.jsx)(tX.ZP,{accessibilityModalLabel:v.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "label.extensionUpsellModal.addPinDropdown", undefined, true),onDismiss:d,size:"sm",children:(0,p.jsx)(tQ.Z,{isExtensionInstalled:!1,isFromPinBuilder:!0,onHide:d,onInstall:d})})})}return(0,p.jsx)(tX.ZP,{accessibilityModalLabel:v.bt("Your saved Pin.", "Your saved Pin.", "Label for a modal showing the pin the user just created.", undefined, true),heading:(0,p.jsx)(s.xu,{padding:8,children:(0,p.jsx)(s.X6,{align:"center",size:"500",children:g?(0,x.nk)(v.bt("Saved to {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", "pinCreateSuccess.Option2Modal.savedToSection", undefined, true),{boardName:(0,p.jsx)(s.rU,{display:"inlineBlock",href:O,underline:"hover",children:g},"sectionLink"),sectionName:(0,p.jsx)(s.rU,{display:"inlineBlock",href:D,underline:"hover",children:e},"boardLink")}):(0,x.nk)(v.bt("Saved to {{ boardName }}", "Saved to {{ boardName }}", "pinCreateSuccessModal.Option2Modal.savedToBoard", undefined, true),{boardName:(0,p.jsx)(s.rU,{display:"inlineBlock",href:D,underline:"hover",children:e},"boardLink")})})}),onDismiss:d,size:"md",children:(0,p.jsx)(t0.Z,{boardName:e,color:t,description:i,hideHeader:!0,imageUrl:o,link:a,onClose:d,openNewTab:c,pin:h,pinId:_,sectionName:g,siteType:m,video:f,websiteMedia:b})})});var t4=i(299487),t6=i(844974),t5=i(339363),t7=i(704115),t9=i(782534);function ie({image:e,localMedia:t,title:i,videos:r}){return e&&t?r?(0,p.jsx)(s.nk,{aspectRatio:e.width/e.height,autoplay:!0,captions:i,loop:!0,onPlay:()=>{},onPlayError:()=>{},src:t}):(0,p.jsx)(s.Ee,{alt:i||"",color:"lightGray",naturalHeight:e.height,naturalWidth:e.width,src:t}):null}function it({onDismiss:e,scheduledPin:t}){let i=(0,u.ZP)(),r=(0,E.Z)(),n=(0,A.B)(),o=(0,V.Z)(),l=(0,G.Ms)(r,o),{image:a,localMedia:d,scheduled_ts:c,title:h,videos:_}=t,g=new Date(1e3*c),m=a&&a["236x"];return(0,p.jsx)(tX.ZP,{accessibilityModalLabel:i.bt("Your scheduled Pin.", "Your scheduled pin.", "Label for a modal showing the pin the user just scheduled.", undefined, true),onDismiss:e,heading:i.bt("Pin Scheduled", "Pin Scheduled", "Header of modal for scheduling a pin successfully", undefined, true),size:"md",footer:(0,p.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:(0,p.jsx)(s.xu,{paddingX:1,"data-test-id":"see-scheduled-pin-button",children:(0,p.jsx)(s.ZP,{color:"red",href:`${tD.C0}/${l}/scheduled-pins/`,text:i.bt("See scheduled Pins", "See Scheduled Pins", "pinBuilder.seeScheduledPin.buttonTitle", undefined, true)})})}),children:(0,p.jsxs)(s.xu,{padding:8,children:[(0,p.jsx)(s.xv,{children:(0,x.nk)(i.bt("Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.", "Scheduled to publish on {{ scheduledDate }} at {{ scheduledTime }}.", " - ", undefined, true),{scheduledDate:(0,p.jsx)(s.xv,{inline:!0,weight:"bold",children:(0,p.jsx)(t9.Z,{value:g,dateFormatType:t9.k.SHORT_WEEKDAY_DATE,useUTC:!1})},"scheduledPinDate"),scheduledTime:(0,p.jsx)(s.xv,{inline:!0,weight:"bold",children:g.toLocaleTimeString(n.locale,{hour:"2-digit",minute:"2-digit"})},"scheduledPinTime")})}),(0,p.jsx)(s.xu,{paddingX:12,paddingY:4,children:(0,p.jsx)(ie,{image:m,localMedia:d,title:h,videos:_})})]})})}let ii=["succeeded","attempted","uploading"],ir=["succeeded","uploading"],io=(e,t,i,r)=>!e&&t&&!i&&!r;function is({currentPinItemId:e,media:t,onComplete:i,pin:n,pinDraftId:l,removePinDraft:a,scheduledPin:d,showSuccess:c,type:u,view:_,websiteMedia:g}){let m=(0,E.Z)(),{shopTheLook:{currentPinDraftId:f}}=(0,tn.f)(),{checkExperiment:x}=(0,S.F)(),b=(0,V.Z)(),y=(0,G.nl)(m,b)&&"ad_creation"!==v.Z.scenario()&&x("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,P=(0,o.k6)(),[I,j]=(0,r.useState)(!1),C=(0,o.TH)(),T=(0,w.Z)(),D=(0,t1.Z)(),{group:O}=x("web_offsite_pin_creation_multi_select",{dangerouslySkipActivation:!0}),z=O.startsWith("enabled_redirect_to_hf"),R=v.Z.enabled("suppressSuccessModal")||z,k=(0,eO.F9)(),L=()=>{a()},{userAgent:{browserName:N}}=(0,A.B)();(0,r.useEffect)(()=>{(n||d)&&R&&L()},[n,d,R]),(0,r.useEffect)(()=>{if(n&&z){var e;P.push({pathname:"/",state:{from:C.pathname,boardName:n.board.name,imageUrl:(null===(e=n.images["236x"])||void 0===e?void 0:e.url)||""}})}},[n]),(0,r.useEffect)(()=>{let e=!!(document.body&&document.body.hasAttribute("data-pinterest-extension-installed")),t=t4.Z.isBrowserExtensionSupported(N),i=!!(0,t5.qn)("seenUpsellFromAddPinDropdown"),r=!!(0,t6.qn)("seenUpsellFromPinbuilder");n&&io(e,t,i,r)&&j(!0)},[N,n]),(0,r.useEffect)(()=>{if(n&&I){var e,t,i,r,o,s;let l=null!==(e=null===(t=n.board)||void 0===t?void 0:t.name)&&void 0!==e?e:"",a=null!==(i=null===(r=n.board)||void 0===r?void 0:r.url)&&void 0!==i?i:"",d=null!==(o=null===(s=n.images["236x"])||void 0===s?void 0:s.url)&&void 0!==o?o:"";k.showOneToast(({hideToast:e})=>(0,p.jsx)(eR.Z,{boardName:l,boardUrl:a,onHide:e,pinImageUrl:d})),(0,t6.Nh)("seenUpsellFromPinbuilder",!0)}},[n,I]),(0,r.useEffect)(()=>{i&&c&&n&&i(n)},[i,n,c]);let B=()=>{if(n){let e=D("quick_promote_on_www");P.push(`${e}?pinId=${n.id}`)}L()},Z=()=>{if(!n||!t||v.Z.enabled("suppressSuccessModal"))return null;let{section:e,id:i,board:{name:r}}=n,o={...t,url:t.src};return Object.assign(n.images,{"236x":o,"474x":o,"564x":o,orig:o}),(0,p.jsx)(s.xu,{"data-test-id":"pin-draft-create-success-modal",children:(0,p.jsx)(t3,{boardName:r,eligibleForExtensionUpsell:I,imageUrl:t.src,isFromPinBuilder:!0,onClose:L,pin:n,pinId:i,sectionName:e?e.title:null,siteType:T,video:"localVideo"===t.type?t:void 0,websiteMedia:g})})},M=c&&(v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")),F=v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")?h.sG:h.XB,U=v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")?h.GX:h.bo;M&&(U=0);let H="carousel"===u&&v.Z.enabled("carousel");return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(s.xu,{color:"default",dangerouslySetInlineStyle:{__style:{paddingTop:M||v.Z.enabled("offsite_pin_creation_multi_select")?void 0:F}},"data-test-id":"pin-builder-draft",direction:"column",display:"flex",paddingX:U,rounding:y?8:4,width:h.of,children:M?(0,p.jsx)(tV,{pinDraftId:l,pinItemId:e}):(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(tt,{pinDraftId:l}),(0,p.jsx)(s.xu,{position:y?"relative":"static",children:(0,p.jsx)(e$,{pinDraftId:l})}),y&&t&&!H&&(0,p.jsxs)(s.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,p.jsx)(s.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{marginLeft:`-${4*U}px`}},height:2,width:h.of+8*U}),(0,p.jsx)(ts,{pinDraftId:l,pinItemId:e})]})]})}),(()=>{let e=c&&(v.Z.enabled("multi_pin")||v.Z.enabled("multi_pin_pinner")),t=(0,t7.Z)(),i="true"===t.quick_promote_pinrep;if(n&&n.is_quick_promotable&&!e&&i)B();else if(n&&!e&&"board"!==_)return Z();return null})(),!!d&&!M&&(0,p.jsx)(s.xu,{"data-test-id":"scheduled-pin-create-success-modal",children:(0,p.jsx)(it,{onDismiss:L,scheduledPin:d})}),y&&l===f&&(0,p.jsx)(tI,{pinItemId:e})]})}function il(e){let t=(0,eG.nL)(),{mode:i,pinId:r,pinItemIds:o,scheduledPin:s,status:l,type:a,view:d,websiteMedia:c}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),u=(0,n.useSelector)(i=>t(i,e)),h=o[0],_=(0,n.useSelector)(e=>{var t;return null===(t=e.pinbuilder.pinItems[u])||void 0===t?void 0:t.media}),g=(0,n.useSelector)(e=>{var t;return null===(t=e.pinbuilder.pinItems[h])||void 0===t?void 0:t.media}),m="carousel"===a?g:_,f=(0,n.useSelector)(e=>r&&"create"===i?e.pins[r]:null),x=(0,n.useSelector)(e=>e.pinbuilder.pinDraftIds.length>1&&(ir.includes(l)||!!_&&"localVideo"===_.type&&ii.includes(l))),b=(0,n.useDispatch)();return(0,p.jsx)(is,{...e,currentPinItemId:u,media:m,pin:f,removePinDraft:()=>b((0,ek.Z)(e.pinDraftId)),scheduledPin:s&&"create"===i?s:null,showSuccess:x,type:a,view:d,websiteMedia:c})}},510476:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(702664),n=i(883119),o=i(453451),s=i(898781),l=i(883561),a=i(277348),d=i(327096),c=i(785893);let u={sm:{imageRepSize:147,imageSize:93},md:{imageRepSize:159,imageSize:99}};function h({index:e,isRelatedProducts:t,pinTagId:i,size:h,taggedObjectId:p}){var _,g,m,f,x;let b=(0,r.useDispatch)(),y=(0,s.ZP)(),{setStlHoveredTaggedObjectId:v}=(0,d.f)(),P=null!==(_=(0,r.useSelector)(({pinbuilder:e})=>e.taggedObjects))&&void 0!==_?_:{},S=null!==(g=P[p])&&void 0!==g?g:{},{media:A,pin:w}=S,E=(0,r.useSelector)(({pinbuilder:e})=>e.pinTags),{x:I,y:j}=E[i],{height:C,width:T,url:D}=null!=A?A:{},{grid_title:O,rich_summary:z}=null!=w?w:{},R=null!==(m=(null!==(f=(null!==(x=(null!=z?z:{}).products)&&void 0!==x?x:[])[0])&&void 0!==f?f:{}).offer_summary)&&void 0!==m?m:{},{price:k,max_price:L}=R,N=e=>{v(e)},{imageSize:B}=u[h];return(0,c.jsxs)(n.xu,{"data-test-id":"stl-product-item",direction:"column",display:"flex",marginEnd:!t&&[3,7].includes(e)?0:2,marginTop:!t&&e>=4?4:0,onMouseEnter:()=>N(p),onMouseLeave:()=>N(null),overflow:"auto",position:"relative",width:B,children:[(0,c.jsx)(n.xu,{maxHeight:B,minHeight:B,minWidth:B,overflow:"hidden",rounding:5,width:B,children:(0,c.jsx)(n.zd,{height:B,wash:!0,width:B,children:(0,c.jsx)(n.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:C||1,naturalWidth:T||1,src:D||""})})}),!!(k||L)&&(0,c.jsx)(n.xu,{marginTop:2,children:(0,c.jsx)(o.Z,{productDetails:R,showSalesPrice:!0,type:"text"})}),O&&(0,c.jsx)(n.xu,{marginTop:1,children:(0,c.jsx)(n.xv,{size:"100",children:(0,l.ZP)(O,30)})}),(0,c.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,c.jsx)(n.hU,{accessibilityLabel:y.bt("Remove tagged product", "Remove tagged product", "shopTheLook.remove.taggedPin", undefined, true),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:()=>{I&&j?b((0,a.Cf)(i,"deleted")):(b((0,a.Go)(i,p)),b((0,a.Cf)(i,"edited")))},size:"sm"})})]})}},237271:(e,t,i)=>{"use strict";i.d(t,{Z:()=>N});var r=i(702664),n=i(883119),o=i(667294),s=i(172045),l=i(28956),a=i(519325),d=i(258821),c=i(898781),u=i(299295),h=i(785893);let p={width:u.MN,backgroundColor:"#efefef",borderRadius:8,borderStyle:"none",boxSizing:"border-box",height:u.MN,outline:"none",padding:0};function _(){let e=(0,c.ZP)();return(0,h.jsx)("button",{style:p,children:(0,h.jsx)(n.xu,{rounding:2,display:"flex",justifyContent:"center",alignItems:"center",children:(0,h.jsx)(n.JO,{accessibilityLabel:e.bt("Add product tag", "Add product tag", "Accessibility label for the product tag icon", undefined, true),icon:"add-circle",color:"subtle",size:24,inline:!0})})})}var g=i(562501);function m(e){let{handleClick:t,pinTagId:i,taggedObjectIds:r}=e;return(0,h.jsx)(n.xu,{column:12,"data-test-id":"tagged-items-grid",children:(0,h.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:[(0,h.jsx)(n.xu,{marginEnd:-1,marginStart:-1,padding:1,children:(0,h.jsx)(n.iP,{mouseCursor:"grab",onTap:t,rounding:2,children:(0,h.jsx)(n.xu,{"data-test-id":"add-tags-button",children:(0,h.jsx)(_,{})})})}),!!i&&r.map((e,t)=>(0,h.jsx)(n.xu,{padding:1,children:(0,h.jsx)(d.Z,{disabled:!1,pinTagId:i,taggedObjectId:e})},e))]})})}function f(e){let t=(0,g.jk)(),i=(0,r.useSelector)(i=>e.pinTagId&&i.pinbuilder.pinTags&&Object.keys(i.pinbuilder.pinTags).length>0?t(i,e):[]);return(0,h.jsx)(m,{...e,taggedObjectIds:i})}var x=i(874412),b=i(424624),y=i(407043),v=i(349700),P=i(780280),S=i(19121),A=i(717615),w=i(231947);function E(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class I extends o.Component{constructor(...e){super(...e),E(this,"state",{isAssetPickerOpen:!1,taggedPins:[]}),E(this,"handleClick",()=>{this.setState({isAssetPickerOpen:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12126})}),E(this,"handleDismiss",()=>{this.setState({isAssetPickerOpen:!1})}),E(this,"handleAddTaggedPinsToPinDraft",e=>{let{saveTaggedObject:t,removeTaggedObject:i,createPinTag:r,pinTagId:n}=this.props,{taggedPins:o}=this.state,l=n||(0,s.Z)();l!==n&&r(l),e.forEach((e,i)=>{i<u.Pn&&!o.includes(e)&&("pin"===e.type||"webImage"===e.type)&&t(e.id,l,e)}),o.filter(t=>!e.includes(t)).forEach(e=>{i(e.id,l)}),this.setState({taggedPins:e}),this.handleDismiss()}),E(this,"primaryButtonText",e=>this.props.i18n.nbt(["Save product", "Save products"], e, "Button text for adding/saving products to a Collections pin", true))}componentDidMount(){let e=this.props.taggedObjects.map(e=>{var t,r,n;return i.g.isNaN(e.id)?{type:"webImage",id:e.id||"",height:(null===(t=e.media)||void 0===t?void 0:t.height)||1,width:(null===(r=e.media)||void 0===r?void 0:r.width)||1,src:(null===(n=e.media)||void 0===n?void 0:n.url)||"",sourceURL:e.link}:{type:"pin",id:e.id||"",images:{"474x":e.media},description:"",title:"",videos:null,link:e.link}});this.setState({taggedPins:e})}componentDidUpdate(e){if(e.taggedObjectIds!==this.props.taggedObjectIds){let{taggedPins:e}=this.state,t=e.filter(e=>this.props.taggedObjectIds.includes(e.id));t&&this.setState({taggedPins:t})}}render(){let{pinDraftId:e,pinItemId:t,pinTagId:i,pinTagIds:r,pinTags:o,requestContext:s,unfilteredTaggedObjects:d,useModalWithNoLayer:c,taggedObjectIds:p,inStlToolingExp:_,orbacActingAs:g,viewer:m}=this.props,{isAssetPickerOpen:x,taggedPins:y}=this.state,P=["product_pins","scrape"],S=(0,w._P)(s,m,g);S&&P.push("catalog");let A=(0,b.Z)({pinTagIds:r,pinTags:o,taggedObjects:d}),E=A.length,I=p.length;return(0,h.jsxs)(n.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,h.jsxs)(n.xu,{flex:"none",marginBottom:6,children:[(0,h.jsx)(n.xu,{marginBottom:_?2:1,children:_?(0,h.jsx)(n.X6,{size:"400",children:this.props.i18n.bt("Update products", "Update products", "pinbuilder.editProducts.header", undefined, true)}):(0,h.jsx)(n.X6,{size:"400",children:this.props.i18n.bt("Add products", "Add products", "Add products to the collection/STL selected in Pin Builder.", undefined, true)})}),(0,h.jsx)(n.xu,{marginBottom:_?2:1,children:_?(0,h.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,h.jsx)(n.xv,{children:this.props.i18n.bt("Tag up to 8 products in the scene", "Tag up to 8 products in the scene", "pinbuilder.editProducts.description", undefined, true)}),(0,h.jsx)(n.xv,{size:"200",weight:"bold",children:(0,v.nk)(this.props.i18n.bt("{{ numXyTaggedProducts }}/8", "{{ numXyTaggedProducts }}/8", "pinbuilder.editProducts.taggedProducts.count", undefined, true),{numXyTaggedProducts:E})})]}):(0,h.jsx)(n.xv,{children:this.props.i18n.bt("Add products to your image to build a Pin people can shop for", "Add products to your image to build a Pin people can shop", "Description of adding pins to a collection", undefined, true)})}),!_&&(0,h.jsx)(n.xu,{"data-test-id":"num-product-count",display:"flex",children:(0,h.jsx)(n.xv,{size:"200",weight:"bold",children:(0,v.nk)(this.props.i18n.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], I, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:I})})})]}),(0,h.jsx)(n.kC,{alignItems:"stretch",direction:"column",flex:"grow",overflow:"auto",width:_?445:void 0,children:(0,h.jsxs)(n.xu,{marginBottom:5,children:[_?(0,h.jsx)(a.Z,{pinDraftId:e,pinItemId:t,pinTagId:i,taggedObjects:A}):(0,h.jsx)(f,{handleClick:this.handleClick,pinItemId:t,pinTagId:i}),x&&(0,h.jsx)(l.Z,{closeOnOutsideClick:!1,isSecondaryButtonDisabled:!1,maxAssetsToSelect:u.Pn,onDismiss:this.handleDismiss,onPrimaryAction:this.handleAddTaggedPinsToPinDraft,onSecondaryAction:this.handleDismiss,pinItemId:t,primaryButtonText:this.primaryButtonText,resetScrapeOnSelect:!0,scrapeDescription:this.props.i18n.bt("Pick one item from a product link – it’ll create a product Pin for the item and add it to your image", "Pick one item from a product link—it’ll create a product Pin for the item, and add it to your image", "Detail about how to pick a product from scraping a URL for a Collections pin", undefined, true),scrapeTitle:this.props.i18n.bt("Use a link", "Use a link", "Prompt for scraping an image from site", undefined, true),secondaryButtonText:this.props.i18n.bt("Cancel", "Cancel", "PinBuilder.Modal.PinDraftInputCollectionTagView.buttonText", undefined, true),selectedPins:y,shownTabs:P,useModalWithNoLayer:c})]})})]})}}function j(e){let{pinItemId:t,stlTaggedCoords:i}=e,r=(0,c.ZP)(),{logContextEvent:n}=(0,y.v)(),o=(0,P.B)(),s=(0,S.Z)(),l=(0,A.Z)(),{createPinTag:a,inStlToolingExp:d,pinTagId:u,pinTagIds:p,pinTags:_,removeTaggedObject:g,saveTaggedObject:m,taggedObjectIds:f,taggedObjects:b,unfilteredTaggedObjects:v}=(0,x.Z)({pinItemId:t,stlTaggedCoords:i});return(0,h.jsx)(I,{...e,createPinTag:a,i18n:r,inStlToolingExp:d,logContextEvent:n,orbacActingAs:l,pinTagId:u,pinTagIds:p,pinTags:_,removeTaggedObject:g,requestContext:o,saveTaggedObject:m,taggedObjectIds:f,taggedObjects:b,unfilteredTaggedObjects:v,viewer:s})}var C=i(469823),T=i(665866),D=i(616672),O=i(773285),z=i(490072),R=i(327096);let k={__style:{paddingBottom:u.uR}};function L({height:e,pinDraftId:t,pinItemId:i,paddingX:r=5,useModalWithNoLayer:o}){let s=(0,c.ZP)(),l=(0,S.Z)(),{shopTheLook:{stlTaggedCoords:a}}=(0,R.f)(),{checkExperiment:d}=(0,O.F)(),p=(0,A.Z)(),_=(0,w.nl)(l,p)&&"ad_creation"!==T.Z.scenario()&&d("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled;return(0,h.jsxs)(n.xu,{dangerouslySetInlineStyle:k,direction:"row",display:"flex",children:[(0,h.jsxs)(n.xu,{paddingX:_?0:r,children:[(0,h.jsx)(C.Z,{height:e,pinDraftId:t,pinItemId:i,view:"collectionsTag"}),!_&&(0,h.jsx)(n.xu,{width:260,children:(0,h.jsx)(n.xv,{align:"center",size:"200",weight:"bold",children:s.bt("Hint: make sure the products you add match items in your image! You can add up to 24.", "Hint: make sure products you add match items in your image! You can add up to 24.", "Hint explaining the maximum number of products that can be added to a Collections Pin", undefined, true)})})]}),(0,h.jsx)(n.xu,{flex:"grow",height:e,marginStart:_?5:0,minHeight:u.sD,paddingX:_?0:5,width:"100%",children:(0,h.jsx)(j,{inStlToolingExp:_,pinDraftId:t,pinItemId:i,stlTaggedCoords:a,useModalWithNoLayer:o})})]})}function N(e){let t=(0,r.useSelector)(t=>(0,z.OK)(t,e.pinDraftId)),i=(0,r.useSelector)(e=>e.pinbuilder.pinItems[t.pinItemIds[0]].media),n=i?(0,D.Z)(i,271):418;return(0,h.jsx)(L,{...e,height:n})}},874412:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var r=i(702664),n=i(616550),o=i(53987),s=i(665866),l=i(773285),a=i(19121),d=i(717615),c=i(231947),u=i(502890),h=i(277348),p=i(472278),_=i(562501),g=i(122668);function m({pinItemId:e,stlTaggedCoords:t}){let i={pinItemId:e},m=(0,n.TH)(),f=(0,a.Z)(),x=(0,d.Z)(),b=(0,r.useDispatch)(),{checkExperiment:y}=(0,l.F)(),v=(0,c.nl)(f,x)&&"ad_creation"!==s.Z.scenario()&&y("web_stl_tooling").anyEnabled,P=(0,o.mY)(m),S=P?(0,g.i3)():(0,_.jk)(),A=P?(0,g.iD)():(0,_.CQ)(),w=(0,r.useSelector)(({pinbuilder:{pinItems:e,storyPinItems:t}})=>(P?t:e)[i.pinItemId]),E=(0,r.useSelector)(e=>e.pinbuilder.pinTags),I=(0,r.useSelector)(e=>e.pinbuilder.taggedObjects),j=w.selectedPinTagId||w.pinTagIds.length>0?w.pinTagIds[0]:null,C=(0,r.useSelector)(e=>S(e,i)),T=(0,r.useSelector)(e=>A(e,i));return{createPinTag:e=>b((P?p.EH:u.oe)(i.pinItemId,e)),inStlToolingExp:v,pinTagId:j,pinTagIds:w.pinTagIds,pinTags:E,removeTaggedObject:(e,t)=>{b((0,h.Go)(t,e)),b((0,h.Cf)(t,"edited"))},saveTaggedObject:(e,r,n)=>{let o=n.type||"",{x:s,y:l}=t||{};if("webImage"===n.type&&n.sourceURL){b((0,h.mz)(r,n.sourceURL,null)),v&&b((0,h.uM)(r,s||0,l||0));let t={height:n.height,width:n.width,url:n.src};b((0,h.Dn)(r,e,{media:t,type:o,pin:n}))}else{var a,d;b((0,h.mz)(r,null!==(a=n.link)&&void 0!==a?a:"",null)),v&&b((0,h.uM)(r,s||0,l||0)),b((0,h.Dn)(r,e,{media:null===(d=n.images)||void 0===d?void 0:d["474x"],type:o,pin:n}))}b((P?p.Gm:u.C_)(i.pinItemId,r))},taggedObjectIds:C,taggedObjects:T,unfilteredTaggedObjects:I}}},469823:(e,t,i)=>{"use strict";i.d(t,{Z:()=>tW});var r=i(667294),n=i(702664),o=i(883119),s=i(407043),l=i(898781),a=i(305782),d=i(785893);function c(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u={__style:{padding:6}};class h extends r.Component{constructor(...e){super(...e),c(this,"handleEllipsisClick",(e,t)=>()=>{let{setCarouselItem:i,logContextEvent:r}=this.props;t&&r({event_type:101,component:13308,element:11126}),i(e)}),c(this,"handleBackClick",()=>{let{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12170}),t(e-1)}),c(this,"handleForwardClick",()=>{let{pinItemIndex:e,setCarouselItem:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:12169}),t(e+1)})}render(){let{pinItemIds:e,pinItemIndex:t,showAdd:i}=this.props,r=e.length-1,n=this.props.i18n.bt("Back", "Back", "Button to advance to previous carousel image", undefined, true),s=this.props.i18n.bt("Forwards", "Forward", "Button to advance to next carousel image", undefined, true);return(0,d.jsxs)(o.kC,{alignItems:"center",justifyContent:"between",children:[(0,d.jsx)(o.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,children:e.map((e,n)=>(0,d.jsx)(o.xu,{children:n===r&&i?(0,d.jsx)(o.xu,{"data-test-id":"add-item-to-carousel-button",children:(0,d.jsx)(o.hU,{accessibilityLabel:this.props.i18n.bt("Add", "Add", "Button to add image to carousel", undefined, true),bgColor:"transparent",icon:"add",iconColor:n===t?"darkGray":"gray",onClick:this.handleEllipsisClick(n,!0),size:"xs"})}):(0,d.jsx)(o.xu,{"data-test-id":"carousel-control-button",paddingX:1,children:(0,d.jsx)(o.iP,{onTap:this.handleEllipsisClick(n),rounding:"circle",children:(0,d.jsx)(o.xu,{color:n===t?"dark":"tertiary",height:12,rounding:"circle",width:12})})})},e))}),(0,d.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[t>0?(0,d.jsx)(o.hU,{accessibilityLabel:n,bgColor:"transparent",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBackClick,size:"xs"}):(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(o.JO,{accessibilityLabel:n,color:"subtle",icon:"arrow-back",size:12})}),t<r?(0,d.jsx)(o.hU,{accessibilityLabel:s,bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",onClick:this.handleForwardClick,size:"xs"}):(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:u,children:(0,d.jsx)(o.JO,{accessibilityLabel:s,color:"subtle",icon:"arrow-forward",size:12})})]})]})}}function p(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),{pinItemIds:r,pinItemIndex:o}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),c=r[r.length-1],u=(0,n.useSelector)(e=>!e.pinbuilder.pinItems[c].media),p=(0,n.useDispatch)();return(0,d.jsx)(h,{...e,i18n:i,logContextEvent:t,pinItemIds:r,pinItemIndex:o,setCarouselItem:t=>p((0,a.Cj)(e.pinDraftId,t)),showAdd:u})}var _=i(237056),g=i(28956),m=i(333312),f=i(497529),x=i(665866),b=i(773285),y=i(19121),v=i(134906),P=i(43898),S=i(451105),A=i(172045),w=i(299295),E=i(388628),I=i(699109),j=i(174807),C=i(448994),T=i(502890),D=i(20064);function O({assets:e,i18n:t,isEmployee:i,pinDraftId:r}){return(n,o)=>{let s=o(),l=r||(0,A.Z)(),a=s.pinbuilder.pinDrafts[l]&&s.pinbuilder.pinDrafts[l].pinItemIds||[],d=a.length,{media:c}=s.pinbuilder.pinItems[a[0]]||{},u=s.pinbuilder.pinItems[a[d-1]],{width:h,height:p}=e.length>0&&"localImage"===e[0].type?e[0]:{},_=a[d-1],g=e.reduce(e=>(e.push((0,A.Z)()),e),u?[_]:[]),m=(0,E.Z)(c&&c.width||h,c&&c.height||p),f=0===d?d:d-1,x=e.slice(0,w.dS-f).reduce((e,t)=>({...e,[(0,A.Z)()]:{...D.E,media:"localImage"===t.type?t:null}}),{});(0,I.Z)(Object.keys(x),x,m).then(e=>{let o=e.map((e,t)=>{let i=g[t]||(0,A.Z)();return i===_?n((0,T.nh)(i,e)):n((0,j.Z)(l,i,e)),i});if(e.length+f<w.dS){let e=(0,A.Z)();n((0,j.Z)(l,e,null,{saveIndex:!0})),o.push(e)}r||n((0,C.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:o},pinDraftId:l,storyPinPublishStopwatch:void 0}))})}}var z=i(537929),R=i(474394);function k(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class L extends r.Component{constructor(...e){super(...e),k(this,"state",{hasFocus:!1,isAssetPickerOpen:!1,websiteLinkButtonRef:null}),k(this,"setWebsiteLinkButtonRef",e=>{this.setState({websiteLinkButtonRef:e})}),k(this,"setTextFieldInput",e=>{this.textFieldInput=e}),k(this,"handleBlur",()=>{let{setWebsiteLink:e,websiteLink:t,i18n:i}=this.props;t?e(t,(0,v.CB)(t)?"":(0,S.q0)(i)):this.setState({hasFocus:!1})}),k(this,"handleTouch",()=>{let{logContextEvent:e,setWebsiteLink:t,submitWebsiteLink:i,websiteLink:r,i18n:n}=this.props;if(!r){t(r,null);return}let o=(0,v.CB)(r)?"":(0,S.q0)(n);t(r,o),o||(i(),e({event_type:101,component:13308,element:10969,aux_data:{url:r}}))}),k(this,"handleChange",({value:e})=>{this.props.setWebsiteLink(e)}),k(this,"handleKeyDown",({event:{key:e}})=>{"Enter"===e&&this.handleTouch()}),k(this,"handleClick",()=>{let{disabledPinCreation:e,experience:t,experienceClient:i,logContextEvent:r,setShowDisabledPinCreationBanner:n}=this.props;if(e){n();return}r({event_type:101,component:13308,element:10968}),t&&501924===t.experience_id&&i.completeExperience(1000135,501924),this.setState({hasFocus:!0})}),k(this,"handleDismiss",()=>{this.setState({isAssetPickerOpen:!1})})}componentDidUpdate(e,t){this.textFieldInput&&!t.hasFocus&&this.textFieldInput.focus()}render(){let{createCarouselPinDraft:e,createPinDrafts:t,websiteLink:i,websiteLinkError:n}=this.props,{hasFocus:s,isAssetPickerOpen:l}=this.state,a="pin-draft-website-link";return s?(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(o.xu,{rounding:2,children:(0,d.jsx)(o.xu,{color:"secondary",padding:1,rounding:2,children:(0,d.jsxs)(o.xu,{display:"flex",marginEnd:-1,marginStart:-1,children:[(0,d.jsx)(o.xu,{flex:"grow",paddingX:1,children:(0,d.jsx)(o.nv,{ref:this.setTextFieldInput,hasError:!!n,id:a,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n.bt("Enter website", "Enter website", "Placeholder text to enter website url", undefined, true),size:"lg",type:"text",value:i})}),(0,d.jsx)(o.xu,{children:(0,d.jsx)(o.iP,{fullHeight:!0,onTap:this.handleTouch,children:(0,d.jsx)(o.xu,{height:"100%",paddingX:1,children:(0,d.jsx)(o.xu,{alignItems:"center","data-test-id":"website-link-submit-button",display:"flex",height:"100%",justifyContent:"center",paddingX:2,children:(0,d.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Submit", "Submit", "Submit website button to scrape images", undefined, true),icon:"arrow-forward",size:20})})})})})]})})}),!!n&&(0,d.jsx)(P.Z,{errorMessage:n,htmlFor:a})]}):(0,d.jsxs)(o.xu,{"data-test-id":"save-from-site-button",children:[(0,d.jsxs)(o.xu,{ref:this.setWebsiteLinkButtonRef,children:[(0,d.jsx)(o.zx,{fullWidth:!0,onClick:this.handleClick,size:"lg",text:this.props.i18n.bt("Save from site", "Save from site", "Save from site button", undefined, true)}),l&&(0,d.jsx)(g.Z,{initialTab:"scrape",onDismiss:this.handleDismiss,onPrimaryAction:t,onSecondaryAction:x.Z.enabled("carousel")?e:void 0})]}),(0,d.jsx)(m.default,{anchor:this.state.websiteLinkButtonRef,experienceIds:[501924],flyoutSize:"md",idealDirection:"up",placementId:1000135})]})}}function N(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,_.Z)(),{pinDraftId:o}=e,c=(0,n.useDispatch)(),u=(0,y.Z)(),h=u.isAuth&&u.isEmployee,p=u.isAuth?u.id:"",g=u.isAuth?u.country:"",m=(0,f.Z)(),{checkExperiment:v}=(0,b.F)(),P=x.Z.enabled("disabledPinCreation");return(0,d.jsx)(L,{...e,createCarouselPinDraft:e=>c(O({assets:e,pinDraftId:void 0,isEmployee:h,i18n:i})),createPinDrafts:e=>c((0,z.Z)({assets:e,checkExperiment:v,country:g,i18n:i,ideaPinRenamingEnabled:r,inCoverImageQualityExp:!1,isEmployee:h,logContextEvent:t,userId:p})),disabledPinCreation:P,experienceClient:m,i18n:i,logContextEvent:t,setShowDisabledPinCreationBanner:()=>c((0,R.setShowDisabledPinCreationBanner)(!0)),setWebsiteLink:(e,t)=>c((0,a.f9)(o,e,t)),submitWebsiteLink:()=>c((0,a.c8)(o,"scrape")),websiteLink:(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[o].websiteLink),websiteLinkError:(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[o].websiteLinkError)})}var B=i(616550),Z=i(349700);function M({currentIndex:e,numPinItems:t}){let i=(0,l.ZP)();return(0,d.jsx)(o.xu,{margin:3,position:"absolute",right:!0,top:!0,children:(0,d.jsx)(o.xu,{color:"transparentDarkGray",paddingX:3,paddingY:2,rounding:"pill",children:(0,d.jsx)(o.xv,{color:"inverse",size:"200",weight:"bold",children:(0,Z.nk)(i.bt("{{ current }}/{{ total }}", "{{ current }}/{{ total }}", "Text denoting the current item number a user is viewing in a carousel", undefined, true),{current:e,total:t})})})})}function F(e){let{pinItemIds:t,pinItemIndex:i}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),r=(0,n.useSelector)(e=>t.filter(t=>!!e.pinbuilder.pinItems[t].media).length);return(0,d.jsx)(M,{currentIndex:i+1,numPinItems:r})}var U=i(858472),H=i(121151),V=i(265696),G=i(955625);function W(e,t=G.IU){return(0,V.Z)().then(i=>{let r=new i(document.createElement("div")),n=e.filter(e=>"localImage"===e.type).map(e=>e.src);return r.setImages(n).then(()=>({media:r.getCanvasOutput({width:t}),canvasJson:r.toJSON()}))})}class $ extends r.Component{constructor(...e){var t,i,r;super(...e),i={media:null},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t="state","string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){let{assets:e}=this.props,t=e.reduce((e,t)=>"localImage"===t.type?[...e,t]:e,[]).slice(0,5);W(t).then(({media:e})=>{this.setState({media:e})})}render(){let{media:e}=this.state,t=e?w.Uw/(e.width>e.height?e.width:e.height):0;return(0,d.jsxs)(o.xu,{display:"flex",direction:"column",alignItems:"center",padding:2,justifyContent:"center",height:"100%",children:[(0,d.jsx)(o.xu,{marginBottom:6,width:w.Uw,children:(0,d.jsx)(o.xv,{align:"center",children:this.props.i18n.bt("Create a collage", "Create a collage", "Instructing the user that all the images selected will be combined into 1 image", undefined, true)})}),(0,d.jsx)(o.xu,{height:"100%",children:e&&(0,d.jsx)(o.xu,{"data-test-id":"layout-picker-collage-preview",width:e.width*t,height:e.height*t,rounding:2,overflow:"hidden",children:(0,d.jsx)(o.Ee,{alt:this.props.i18n.bt("A collage image combined from selected images", "A collage image combined from selected images", "Preview of how the collage would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src})})})]})}}function X(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Y=[{component:function({assets:e}){let t=(0,l.ZP)(),i=e.reduce((e,t)=>"localImage"===t.type?[...e,t]:e,[]).slice(0,5);if(i.length>0){let e=i[0],r=w.Uw/(e.width>e.height?e.width:e.height);return(0,d.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",padding:2,children:[(0,d.jsx)(o.xu,{marginBottom:6,width:w.Uw,children:(0,d.jsx)(o.xv,{align:"center",children:t.bt("Create a carousel", "Create a carousel", "Instructing the user that all the images selected will be combined into a carousel", undefined, true)})}),(0,d.jsxs)(o.xu,{"data-test-id":"layout-picker-carousel-preview",direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,d.jsx)(o.xu,{height:e.height*r,overflow:"hidden",rounding:2,width:e.width*r,children:(0,d.jsx)(o.Ee,{alt:t.bt("A carousel image.", "A carousel image.", "Preview of how the carousel would look.", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,children:(0,d.jsx)(M,{currentIndex:1,numPinItems:i.length})})}),(0,d.jsx)(o.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,marginTop:2,children:i.map((e,t)=>(0,d.jsx)(o.xu,{paddingX:1,children:(0,d.jsx)(o.xu,{color:0===t?"dark":"tertiary",height:10,rounding:"circle",width:10})},e.src))})]})]})}return null},name:"carousel"},{component:function(e){let t=(0,l.ZP)();return(0,d.jsx)($,{...e,i18n:t})},name:"layout"}];class q extends r.Component{constructor(...e){super(...e),X(this,"state",{selectedLayout:null,hoveredLayout:null}),X(this,"handleSelect",e=>()=>{this.setState({selectedLayout:e})}),X(this,"handleOnMouseEnter",e=>()=>{this.setState({hoveredLayout:e})}),X(this,"handleOnMouseLeave",()=>()=>{this.setState({hoveredLayout:null})})}render(){let{assets:e,onDismiss:t,onPrimaryAction:i,primaryButtonText:r}=this.props,{selectedLayout:n,hoveredLayout:s}=this.state,l=r||this.props.i18n.bt("Create Pin", "Create Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true);return(0,d.jsx)(H.ZP,{accessibilityModalLabel:this.props.i18n.bt("Pick a Pin", "Pick a Pin", "Label to describe the Pin format picker", undefined, true),footer:(0,d.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,children:[(0,d.jsx)(o.xu,{width:"50%",children:(0,d.jsx)(o.xv,{color:"subtle",overflow:"normal",size:"200",children:this.props.i18n.bt("Psst...you can edit and reorder your images later", "Psst...you can edit and reorder your images later", "Information for the Pin format picker model, choosing between carousel and collage.", undefined, true)})}),(0,d.jsx)(o.xu,{"data-test-id":"layout-picker-action-button",display:"flex",flex:"none",marginEnd:-1,marginStart:-1,marginTop:1,children:(0,d.jsx)(o.zx,{color:"red",disabled:!n,onClick:()=>i(this.state.selectedLayout),text:l})})]}),heading:(0,d.jsx)(o.xu,{display:"flex",justifyContent:"center",paddingY:4,children:(0,d.jsx)(o.X6,{size:"500",children:this.props.i18n.bt("Pick a Pin", "Pick a Pin", "Label to of the Pin format picker.", undefined, true)})}),onDismiss:t,size:912,children:(0,d.jsx)(o.xu,{display:"flex",height:460,justifyContent:"center",paddingX:4,paddingY:8,children:Y.map((t,i)=>{let{component:r,name:l}=t;return(0,d.jsx)(o.xu,{color:s===l?"secondary":"default",dangerouslySetInlineStyle:{__style:{border:"2px solid",borderColor:n===l?U.x7:"#efefef"}},height:380,marginEnd:1===i?3:0,marginStart:1===i?3:0,onMouseEnter:this.handleOnMouseEnter(l),onMouseLeave:this.handleOnMouseLeave(),rounding:2,width:350,children:(0,d.jsx)(o.iP,{fullHeight:!0,onTap:this.handleSelect(l),rounding:2,children:(0,d.jsx)(o.xu,{height:"100%",paddingY:4,children:r&&(0,d.jsx)(r,{assets:e})})})},i)})})})}}function K(e){let t=(0,l.ZP)();return(0,d.jsx)(q,{...e,i18n:t})}var J=i(464232),Q=i(385740),ee=i(454074),et=i(780280),ei=i(784590),er=i(957161),en=i(966113),eo=i(531245),es=i(281139),el=i(77891),ea=i(151416),ed=i(66699),ec=i(977558);let eu=(e,t)=>(0,ed.Z)(t.nbt(["{{ length }} px", "{{ length }} px"], 200, "PinBuilder.PinQualityDrawer.pixel", true),{length:e}),eh=(e,t,i)=>(0,ed.Z)(i.nbt(["{{ min }}-{{ max }} chars", "{{ min }}-{{ max }} chars"], 100, "PinBuilder.PinQualityDrawer.charsLengthRange", true),{min:e,max:t}),ep=(e,t)=>(0,ed.Z)(t.nbt(["{{ min }}+ chars", "{{ min }}+ chars"], 100, "PinBuilder.PinQualityDrawer.lengthAtLeastChars", true),{min:100}),e_=(0,r.memo)(function({onDismiss:e}){let t=(0,l.ZP)(),i=t.bt("None", "None", "PinBuilder.PinQualityDrawer.none", undefined, true);return(0,d.jsx)(o.mh,{zIndex:{index:()=>ec.fe+1},children:(0,d.jsx)(o.To,{accessibilityLabel:t.bt("Pin creation quality recommentations", "Pin creation quality recommentations", "PinBuilder.PinQualityDrawer.SheetLabel", undefined, true),accessibilityDismissButtonLabel:t.bt("Dismiss", "Dismiss", "PinBuilder.PinQualityDrawer.Dismiss", undefined, true),onDismiss:e,size:"lg",heading:t.bt("Maximise engagement with high-quality Pins.", "Maximize engagement with high quality pins.", "PinBuilder.PinQualityDrawer.title", undefined, true),subHeading:(0,d.jsx)(o.xu,{marginStart:8,children:(0,d.jsx)(o.xv,{children:t.bt("Follow these recommendations to achieve the highest quality Pins.", "Follow these recommendations to achieve the highest quality pins.", "PinBuilder.PinQualityDrawer.description", undefined, true)})}),footer:(0,d.jsx)(o.xu,{display:"flex",justifyContent:"end",alignItems:"end",color:"default",children:(0,d.jsx)(o.zx,{text:t.bt("OK", "Got it", "PinBuilder.PinQualityDrawer.close", undefined, true),color:"red",accessibilityLabel:t.bt("Close", "Close", "PinBuilder.PinQualityDrawer.close", undefined, true),onClick:e})}),children:(0,d.jsxs)(o.xu,{children:[(0,d.jsxs)(o.xu,{marginBottom:8,children:[(0,d.jsx)(o.xu,{marginBottom:3,children:(0,d.jsx)(o.X6,{size:"500",children:t.bt("Photo quality", "Photo quality", "PinBuilder.PinQualityDrawer.title.photo", undefined, true)})}),(0,d.jsxs)(o.iA,{accessibilityLabel:t.bt("List of image qualities", "List of image qualities", "PinQualityDrawer.image.accessibilityLabel", undefined, true),children:[(0,d.jsx)(o.iA.Header,{children:(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Content attribute", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Minimum requirement", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Recommendation", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(o.iA.Body,{children:[(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Resolution", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ width }} wide x {{ height }} tall", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:eu(200,t),height:eu(300,t)})})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ width }} wide x {{ height }} tall (or larger)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:eu(1e3,t),height:eu(1500,t)})})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Aspect ratio", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide and taller)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Title length", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:eh(w.bA,w.Ke,t)})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Description length", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:ep(100,t)})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Destination link", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Have a destination link", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]}),(0,d.jsxs)(o.xu,{children:[(0,d.jsx)(o.xu,{marginBottom:3,children:(0,d.jsx)(o.X6,{size:"500",children:t.bt("Video quality", "Video quality", "PinBuilder.PinQualityDrawer.title", undefined, true)})}),(0,d.jsxs)(o.iA,{accessibilityLabel:t.bt("List of video qualities", "List of video qualities", "PinQualityDrawer.video.accessibilityLabel", undefined, true),children:[(0,d.jsx)(o.iA.Header,{children:(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Content attribute", "Content Attribute", "PinBuilder.PinQualityDrawer.table.headerCell.contentAttribute", undefined, true)})}),(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Minimum requirement", "Minimum Requirement", "PinBuilder.PinQualityDrawer.table.headerCell.minimumRequirement", undefined, true)})}),(0,d.jsx)(o.iA.HeaderCell,{children:(0,d.jsx)(o.xv,{size:"100",weight:"bold",children:t.bt("Recommendation", "Recommendation", "PinBuilder.PinQualityDrawer.table.headerCell.Recommendation", undefined, true)})})]})}),(0,d.jsxs)(o.iA.Body,{children:[(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Resolution", "Resolution", "PinBuilder.PinQualityDrawer.title.resolution", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ width }} wide x {{ height }} tall", "{{ width }} wide x {{ height }} tall", "PinBuilder.PinQualityDrawer.resolution", undefined, true),{width:eu(200,t),height:eu(300,t)})})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ width }} wide x {{ height }} tall (or larger)", "{{ width }} wide x {{ height }} tall (or larger)", "PinBuilder.PinQualityDrawer.resolution.orLarger", undefined, true),{width:eu(540,t),height:eu(960,t)})})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Duration", "Duration", "PinBuilder.PinQualityDrawer.title.duration", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.nbt(["{{ duration }} second", "{{ duration }} seconds"], 4, "PinBuilder.PinQualityDrawer.duration", true),{duration:4})})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.nbt(["At least {{ duration }} second", "At least {{ duration }} seconds"], 4, "PinBuilder.PinQualityDrawer.duration.atLeast", true),{duration:4})})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Aspect ratio", "Aspect Ratio", "PinBuilder.PinQualityDrawer.title.ratio", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or more wide, less tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:3,heightRatio:2})})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:(0,ed.Z)(t.bt("{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide and taller)", "{{ widthRatio }} wide : {{ heightRatio }} tall (or less wide, more tall)", "PinBuilder.PinQualityDrawer.ratio", undefined, true),{widthRatio:2,heightRatio:3})})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Title length", "Title Length", "PinBuilder.PinQualityDrawer.title.titleLength", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:eh(w.bA,w.Ke,t)})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Description length", "Description Length", "PinBuilder.PinQualityDrawer.title.descriptionLength", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:ep(100,t)})})]}),(0,d.jsxs)(o.iA.Row,{children:[(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Destination link", "Destination Link", "PinBuilder.PinQualityDrawer.title.link", undefined, true)})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:i})}),(0,d.jsx)(o.iA.Cell,{children:(0,d.jsx)(o.xv,{size:"100",children:t.bt("Have a destination link", "Have a destination link", "PinBuilder.PinQualityDrawer.link.recommendation", undefined, true)})})]})]})]})]})]})})})});var eg=i(798477);function em(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ef={__style:{zIndex:w.v9}},ex={__style:{border:"dashed 2px #dadada",borderRadius:6}},eb={__style:{border:"dashed 2px #CC0000"}},ey={color:"#6c6c6c"},ev=16/9;function eP(e,t,i){i({event_type:101,component:13308,element:12171,view_type:e,view_parameter:t})}class eS extends r.Component{constructor(e){super(e),em(this,"state",{isAssetPickerOpen:!1,isLayoutPickerOpen:!1,assets:[],isDrawerOpen:!1}),em(this,"handleAddMediaToPinDraft",e=>{let{addMediaToPinDraft:t,pinDraftId:i,type:r}=this.props;t(e,"carousel"===r?i:void 0)}),em(this,"handleOpenLayoutPicker",e=>{this.setState({isLayoutPickerOpen:!0,assets:e})}),em(this,"handleChange",e=>{let{processFiles:t,type:i,logContextEvent:r}=this.props,n=Array.from(e.target.files);x.Z.enabled("carousel")&&x.Z.enabled("layouts")&&"carousel"!==i&&n.length>1?this.openLayoutPickerForFiles(n):t(n),r({event_type:101,component:13308,element:10967,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map(e=>e.type)})}}),e.target.value=""}),em(this,"handleClick",()=>{this.props.logContextEvent({event_type:101,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter})}),em(this,"handleDismiss",()=>{let{isAssetPickerOpen:e,isLayoutPickerOpen:t}=this.state;e?(this.setState({isAssetPickerOpen:!1}),this.props.logContextEvent({event_type:123,component:13392,view_type:this.props.viewType,view_parameter:this.props.viewParameter})):t&&this.setState({isLayoutPickerOpen:!1})}),em(this,"handleDrawerDismiss",()=>{this.setState({isDrawerOpen:!1})}),em(this,"handleDrop",e=>{let{processFiles:t,logContextEvent:i}=this.props,r=(0,ee.Z)(e.dataTransfer);i({event_type:3502,component:13308,element:10966,view_type:this.props.viewType,view_parameter:this.props.viewParameter,aux_data:{pin_builder_data:JSON.stringify({media_types:r.map(e=>e.type)})}}),x.Z.enabled("carousel")&&r.length>1?this.openLayoutPickerForFiles(r):t(x.Z.enabled("carousel")?r:r.slice(0,1))}),em(this,"handleLayoutSelected",e=>{if("layout"===e){let{createLayoutPinDraft:e}=this.props;e(this.state.assets),this.setState({isLayoutPickerOpen:!1})}else if("carousel"===e){let{addMediaToPinDraft:e,pinDraftId:t}=this.props;e(this.state.assets,t)}}),em(this,"getPrimaryAction",()=>{let{createPinDrafts:e,type:t}=this.props;return"carousel"===t?this.handleAddMediaToPinDraft:e}),em(this,"getSecondaryAction",()=>{let{type:e}=this.props,{isAssetPickerOpen:t}=this.state;if(t&&"single"===e)return this.handleOpenLayoutPicker}),em(this,"getText",()=>{var e;let{type:t,mediaError:i,userResource:r}=this.props,n=null===(e=r.data)||void 0===e?void 0:e.video_upload_allowed,o="carousel"===t,s=x.Z.enabled("carousel"),l=!o&&n;return i?i:o?this.props.i18n.bt("Upload another image to create a carousel", "Upload another image to create a carousel", "pinbuilder.pindraft.media.mediaEmptyView.carouselText", undefined, true):s&&l?this.props.i18n.bt("Drag and drop or click to upload images or a video", "Drag and drop or click to upload images or a video", "Label on drag and drop area for uploading a Pin.", undefined, true):s?this.props.i18n.bt("Drag and drop or click to upload your images", "Drag and drop or click to upload your images", "Label on drag and drop area for uploading a Pin.", undefined, true):l?this.props.i18n.bt("Drag and drop or click to upload your image or video", "Drag and drop or click to upload your image or video", "Label on drag/drop area for uploading a pin", undefined, true):this.props.i18n.bt("Drag and drop or click to upload", "Drag and drop or click to upload", "Label on drag/drop area for uploading a pin", undefined, true)}),x.Z.enabled("layouts")&&(0,V.Z)()}openLayoutPickerForFiles(e){let{i18n:t,ideaPinRenamingEnabled:i,processFiles:r,pinDraftId:n,setPinDraftAssetError:o}=this.props;(0,el.Z)({i18n:t,ideaPinRenamingEnabled:i,files:e,options:{allowVideo:!1}}).then(t=>{let i=t.reduce((e,t)=>"error"!==t.type?[...e,t]:e,[]);i.length>1&&i.length<=5?this.setState({isLayoutPickerOpen:!0,assets:i}):i.length>5?o(n,this.props.i18n.bt("Your files could not be uploaded. Please select up to 5 files.", "Uh oh, your files could not be uploaded. Please make sure to select five files or less.", "pinbuilder.pindraft.media.mediaEmptyView.validateFiles.error", undefined, true)):r(e)})}render(){var e;let{aspectRatio:t,isPartner:i,mediaError:r,type:n,pinDraftId:s,logContextEvent:l,checkExperiment:a,userResource:c}=this.props,{assets:u,isDrawerOpen:h,isAssetPickerOpen:p,isLayoutPickerOpen:_}=this.state,m=null===(e=c.data)||void 0===e?void 0:e.video_upload_allowed,f=x.Z.enabled("carousel"),y="carousel"!==n&&(m||["story","storyFARLandscape","storyFARPortrait"].includes(n)),v=[...eo.xl,...y?eo.ss:[]].join(","),P=["upload","scrape"],S=a&&a("aid_exp_pin_builder_a11y_image_recommendation").anyEnabled,A=(0,Z.nk)(this.props.i18n.bt("We recommend using high-quality .jpg files under {{max_image_size_mb}} MB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB", "Pinbuilder.HelpText.Image", undefined, true),{max_image_size_mb:20}),w=(0,Z.nk)(this.props.i18n.bt("We recommend using high-quality .jpg files under {{max_image_size_mb}} MB or .mp4 files under {{max_video_size_gb}} GB", "We recommend using high quality .jpg files less than {{max_image_size_mb}}MB or .mp4 files less than {{max_video_size_gb}}GB", "Pinbuilder.HelpText.Media", undefined, true),{max_image_size_mb:20,max_video_size_gb:2}),E=()=>t>=ev?0:S?4:-12,I=x.Z.enabled("pinQuality");return(0,d.jsx)(ea.lE,{children:({openHelpTextInNewWindow:e})=>(0,d.jsx)(o.xu,{height:"100%",width:"100%",children:(0,d.jsx)(es.Z,{accept:v,accessibilityLabel:this.props.i18n.bt("File upload", "File upload", "[m10n] pinbuilder.mediaEmptyView.fileUpload.accessibilityLabel", undefined, true),allowMultipleFiles:f,experimentsClient:(0,b.F)(),hasError:!!r,id:"media-upload-input-"+s,isAriaHidden:!1,onChange:this.handleChange,onClick:this.handleClick,onDrop:this.handleDrop,children:()=>(0,d.jsxs)(o.xu,{alignItems:"center",column:12,"data-test-id":"media-empty-view",display:"flex",height:"100%",justifyContent:"center",overflow:"hidden",padding:4,position:"relative",rounding:3,children:[(0,d.jsxs)(o.xu,{alignItems:"center",column:12,dangerouslySetInlineStyle:r?eb:ex,direction:"column",display:"flex",height:"100%",justifyContent:S?"start":"center",margin:1,rounding:3,width:241,children:[(0,d.jsx)(o.xu,{"data-test-id":"media-empty-view-upload-error",marginTop:E(),padding:2,children:(0,d.jsx)(o.JO,{accessibilityLabel:r?this.props.i18n.bt("Upload error", "Upload error", "Error alert icon shown when file upload fails", undefined, true):this.props.i18n.bt("Add an image or video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),color:r?"error":"subtle",icon:r?"workflow-status-problem":"arrow-circle-up",size:24})}),t<=1&&(0,d.jsx)(o.xu,{column:12,marginTop:4,paddingX:S?10:12,width:270,children:(0,d.jsx)(o.xv,{align:"center",color:"default",overflow:"normal",size:S?"400":"200",weight:"bold",children:this.getText()})})]}),t<=ev&&(0,d.jsxs)(o.xu,{bottom:!0,left:!0,margin:8,overflow:"hidden",paddingY:S?7:0,position:"absolute",right:!0,children:[(0,d.jsx)(o.xv,{align:"center",overflow:"normal",size:S?"300":"100",children:y?w:A}),i&&(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:ef,"data-test-id":"pin-help-link",marginBottom:S?-3:0,marginTop:S?6:2,overflow:"hidden",position:"relative",children:(0,d.jsx)(o.xv,{align:"center",color:r?"error":"default",overflow:"normal",size:"200",weight:"bold",children:I?(0,d.jsx)(o.rU,{href:en.Moe,onClick:({event:t,dangerouslyDisableOnNavigation:i})=>{i(),eP(this.props.viewType,this.props.viewParameter,l),e||(t.preventDefault(),this.setState({isDrawerOpen:!0}))},target:"blank",children:(0,d.jsx)(o.xv,{align:"center",inline:!0,lineClamp:2,size:S?"300":"100",underline:!0,children:this.props.i18n.bt("Review Pin best practices", "Review Pin best practices", "PinBuilder.link.showGuidelineDrawer.full", undefined, true)})}):(0,d.jsx)(o.rU,{href:en.Moe,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),eP(this.props.viewType,this.props.viewParameter,l)},target:"blank",children:(0,d.jsx)("span",{style:ey,children:y?this.props.i18n.bt("View image and video specs", "View image and video specs", "Link text to Pinterest product specs", undefined, true):this.props.i18n.bt("View image specs", "View image specs", "Link text to Pinterest product specs", undefined, true)})})})})]}),I&&h&&(0,d.jsx)(e_,{onDismiss:this.handleDrawerDismiss}),p&&(0,d.jsx)(g.Z,{onDismiss:this.handleDismiss,onPrimaryAction:this.getPrimaryAction(),onSecondaryAction:this.getSecondaryAction(),primaryButtonText:"carousel"===n?this.props.i18n.bt("Add to Pin", "Add to Pin", "Button text for adding media to Pin like adding another image to a carousel Pin", undefined, true):void 0,secondaryButtonText:this.props.i18n.bt("Combine into one Pin", "Combine into 1 Pin", "Button to create either a carousel Pin or Pin with multiple images", undefined, true),shownTabs:P}),_&&(0,d.jsx)(K,{assets:u,onDismiss:this.handleDismiss,onPrimaryAction:this.handleLayoutSelected,primaryButtonText:this.props.i18n.bt("Create Pin", "Create Pin", "Button text for create a carousel Pin or single Pin with layout image.", undefined, true)})]})})})})}}function eA(e){let{logContextEvent:t}=(0,s.v)(),[i,o]=(0,r.useState)(!1),c=(0,l.ZP)(),u=(0,_.Z)(),{pinDraftId:h}=e,p=(0,n.useDispatch)(),g=(0,y.Z)(),{checkExperiment:m}=(0,b.F)(),f=g.isAuth&&g.isEmployee,x=g.isAuth&&g.isPartner,v=g.isAuth?g.id:"",P=g.isAuth?g.country:"",S=(0,ei.Z)({name:"UserResource",options:{username:g.isAuth&&g.username,field_set_key:"profile"}}),w=(0,n.useSelector)(({pinbuilder:{pinDrafts:e,pinItems:t}})=>{let{pinItemIds:i}=e[h],r=i[0],{media:n}=t[r];return n?n.width/n.height:0}),E=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[h].pinItemIds),I=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[h].mediaError),D=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[h].type),{viewType:k,viewParameter:L}=(0,Q.SU)();return(0,r.useEffect)(()=>{(async()=>{let t=er.Z.getItem(J.iR);if(t&&!i){o(!0),er.Z.removeItem(J.iR);let i=JSON.parse(t);if(i.pin){var r,n,s;p((0,T.nh)(E[0],{description:i.pin.description,title:i.pin.title,link:i.pin.link})),p((0,a.DL)(h,i.pin.alt_text)),p((0,a.Nv)(h,{boardId:null===(r=i.pin.board)||void 0===r?void 0:r.id,title:null===(n=i.pin.board)||void 0===n?void 0:n.name,privacy:null===(s=i.pin.board)||void 0===s?void 0:s.privacy})),p((0,a.$k)(h,{promptId:i.promptId,parentPinId:i.pin.id,parentPinLink:i.pin.link,imageSignature:i.imageSignature,isParentPinProductPin:!!i.pin.product_metadata}))}let l=await fetch(i.image),d=await l.blob(),c=new File([d],"image.png",{type:"image/png"});e.processFiles([c])}})()},[p,i,h,E,e]),(0,d.jsx)(eS,{...e,addMediaToPinDraft:(e,t)=>p(O({assets:e,pinDraftId:t,isEmployee:f,i18n:c})),aspectRatio:w,checkExperiment:m,createLayoutPinDraft:e=>p(function({assets:e,i18n:t,isEmployee:i}){return(r,n)=>{let o=n(),{pinDraftIds:s}=o.pinbuilder;W(e).then(({media:e,canvasJson:n})=>{let o=(0,A.Z)(),s=(0,A.Z)();r((0,j.Z)(o,s,{media:{...e,id:(0,A.Z)(),name:"",type:"localImage",isLayout:!0},canvasJson:n})),r((0,C.Z)({i18n:t,isEmployee:i,pinDraft:{pinItemIds:[s]},pinDraftId:o,storyPinPublishStopwatch:void 0}))}).then(()=>{let e=s.findIndex(e=>!(0,R._isPristine)(o,e));s.slice(0,e>=0?e:void 0).forEach(e=>r((0,eg.Z)(e)))})}}({assets:e,isEmployee:f,i18n:c})),createPinDrafts:e=>p((0,z.Z)({assets:e,checkExperiment:m,country:P,i18n:c,ideaPinRenamingEnabled:u,inCoverImageQualityExp:!1,isEmployee:f,logContextEvent:t,userId:v})),i18n:c,ideaPinRenamingEnabled:u,isPartner:x,logContextEvent:t,mediaError:I,requestContext:(0,et.B)(),setPinDraftAssetError:(e,t)=>p((0,a._B)(e,t)),type:D,userResource:S,viewParameter:L,viewType:k})}var ew=i(146173),eE=i(424624),eI=i(209064),ej=i(320415),eC=i(485142),eT=i(795067),eD=i(829407),eO=i(717615),ez=i(231947),eR=i(277348),ek=i(647117),eL=i(562501);function eN({addCarouselItem:e,isDeletable:t,isEditable:i,isEditingEnabled:a,isReorderable:c,isTaggable:u,mediaType:h,onClickDelete:p,onClickDeleteInterestTags:_,onClickReorder:g,onClickTag:f,onClickCollectionsTag:v,pinDraftId:P,pinItemId:S,showCarouselCreateButton:A,type:w,pinTagIds:E,pinTags:I,unfilteredTaggedObjects:j,deletePinTagTaggedObject:C,setPinTagStatus:T,setTaggedObjectStatus:D,deleteText:O,editText:z,reorderText:k,tagText:L}){let{logContextEvent:N}=(0,s.v)(),B=(0,l.ZP)(),Z=(0,y.Z)(),{checkExperiment:M}=(0,b.F)(),F=(0,eO.Z)(),U=(0,ez.nl)(Z,F)&&"ad_creation"!==x.Z.scenario()&&M("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,H=(0,r.useRef)(null),V=(0,n.useDispatch)(),[G,W]=(0,r.useState)(!1),[$,X]=(0,r.useState)(!1),{shouldRenderPinEditorStandalone:Y,campaignObjectiveType:q,conversionTagEvent:K}=(0,ea.V3)(),J=i&&x.Z.enabled("editing"),[Q,ee]=(0,r.useState)(!1);(0,eD.Z)(()=>ee(!0)),O=void 0!==O?O:B.bt("Delete media", "Delete media", "Button to delete the media from the Pin", undefined, true),z=void 0!==z?z:B.bt("Edit Pin", "Edit Pin", "Button for editing the Pin image", undefined, true),k=void 0!==k?k:B.bt("Reorder images", "Reorder images", "Button for reordering the images in a carousel", undefined, true),L=void 0!==L?L:B.bt("Tag products", "Tag products", "Button for tagging products in a Pin", undefined, true);let et=B.bt("Create carousel", "Create carousel", "pinbuilder.create.carousel", undefined, true),ei=B.bt("Create carousel (this removes tagged products)", "Create carousel (this removes tagged products)", "pinbuilder.carousel.warning", undefined, true),er=(0,r.useCallback)(()=>{W(!1)},[]),en=(0,r.useCallback)(()=>{Y?V((0,R.setPinEditorPinDraft)(P)):W(!0)},[]),eo=(0,r.useCallback)(()=>{N({event_type:101,component:13308,element:11244}),en()},[]),es=(0,r.useCallback)(()=>{switch(h){case"gif":return B.bt("GIFs can't be edited", "GIFs can't be edited", "Button indicating gif images cannot be edited", undefined, true);case"webImage":return B.bt("Upload images to make edits", "Upload images to make edits", "Button indicating scraped images cannot be edited", undefined, true);case"localVideo":if(x.Z.enabled("videoEditing"))return B.bt("Videos can be edited after upload finishes", "Videos can be edited after upload finishes", "Button indicating videos can be edited after uploading finishes", undefined, true);return B.bt("Videos can't be edited", "Videos can't be edited", "Button indicating videos cannot be edited", undefined, true);default:return B.bt("Cannot edit", "Cannot edit", "Button indicating media cant be edited", undefined, true)}},[]),el=(0,eE.Z)({pinTagIds:E,pinTags:I,taggedObjects:j}).concat((0,eE.n)({pinTagIds:E,pinTags:I,taggedObjects:j})),ed=(e,t)=>{let i=I[e],{x:r,y:n}=i;"deleted"!==i.status&&(r&&n?T(e,"deleted"):(C(e,t),T(e,"edited")))},ec=a?z:es(),eu=el&&$?ei:et;return(0,d.jsx)(o.xu,{alignItems:"center",bottom:!0,display:"flex",left:!0,position:"absolute",right:!0,top:!0,children:(0,d.jsxs)(o.xu,{color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 20px rgba(0, 0, 0, 0.1)",marginLeft:U?-60:0}},direction:"column",display:"flex",marginStart:-6,padding:1,rounding:"pill",children:[J&&(0,d.jsxs)(o.xu,{"data-test-id":"edit-button",children:[(0,d.jsx)(o.u,{idealDirection:U?"left":"down",text:ec,children:(0,d.jsx)(o.hU,{accessibilityLabel:ec,disabled:!a,icon:"edit",iconColor:"darkGray",onClick:eo,size:"md"})}),G&&(0,d.jsx)(ew.default,{onDismiss:er,pinDraftId:P})]}),u&&x.Z.enabled("tagging")&&!U&&(0,d.jsxs)(o.xu,{"data-test-id":"tag-button",children:[(0,d.jsx)(o.xu,{children:(0,d.jsx)(o.u,{idealDirection:U?"left":"down",text:L,children:(0,d.jsx)(o.hU,{ref:H,accessibilityLabel:L,icon:"tag",iconColor:"darkGray",onClick:()=>{N({event_type:101,component:13308,element:10908});let e=x.Z.enabled("shop_the_pin");e?v():f()},size:"md"})})}),q===eI.Ob.WEB_CONVERSION&&"CHECKOUT"===K&&M("adv_growth_product_tagging_guidance").anyEnabled&&(0,d.jsx)(ej.Z,{eligibleIds:[505392],placementId:1000451,children:({complete:e,experience:{display_data:t}})=>Q&&(0,d.jsx)(o.mh,{children:(0,d.jsx)(o.Li,{anchor:H.current,idealDirection:"down",message:t.message,onDismiss:()=>{},primaryAction:{onClick:()=>{ee(!1),e()},text:t.primaryActionText}})})}),(0,d.jsx)(m.default,{anchor:H.current,experienceIds:[500912],idealDirection:"down",placementId:1000135})]}),A&&U&&"image"===w&&(0,d.jsx)(o.xu,{"data-test-id":"create-carousel-button",onMouseEnter:()=>X(!0),onMouseLeave:()=>X(!1),children:(0,d.jsx)(o.xu,{ref:H,children:(0,d.jsx)(o.u,{idealDirection:U?"left":"down",text:eu,children:(0,d.jsx)(o.hU,{accessibilityLabel:eu,dangerouslySetSvgPath:{__path:eC.Z},iconColor:"darkGray",onClick:()=>{N({event_type:101,component:13308,element:11123}),el.length&&el.forEach(e=>{ed(e.pinTagId,e.taggedObjectId),D(e.pinTagId)}),e()},size:"md"})})})}),c&&(0,d.jsx)(o.xu,{"data-test-id":"reorder-button",children:(0,d.jsx)(o.u,{idealDirection:U?"left":"down",text:k,children:(0,d.jsx)(o.hU,{accessibilityLabel:k,icon:"reorder-images",iconColor:"darkGray",onClick:()=>{N({event_type:101,component:13308,element:11124}),g()},size:"md"})})}),t&&(0,d.jsx)(o.xu,{"data-test-id":"trash-button",children:(0,d.jsx)(o.u,{idealDirection:U?"left":"down",text:O,children:(0,d.jsx)(o.hU,{accessibilityLabel:O,icon:"trash-can",iconColor:"darkGray",onClick:()=>{N({event_type:101,component:13308,element:11125}),"localVideo"===h&&x.Z.enabled("videoTagging")&&_(),p()},size:"md"})})})]})})}let eB=(e,t)=>"localImage"===e||"localVideo"===e&&!!t&&!!t.signature&&x.Z.enabled("videoEditing");function eZ(e){let t=(0,eL.vd)(),{mode:i,publishOption:r,type:o,isFirstPinCreate:s,view:l}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),{media:c}=(0,n.useSelector)(t=>t.pinbuilder.pinItems[e.pinItemId]),u=c?(0,eT.Z)(c)||c.type:null,{pinTagIds:h}=(0,n.useSelector)(t=>t.pinbuilder.pinItems[e.pinItemId]),{pinTags:p}=(0,n.useSelector)(e=>e.pinbuilder),_=(0,n.useSelector)(e=>e.pinbuilder.taggedObjects),g=(0,n.useSelector)(i=>"single"===o&&!s&&((0,eL.wc)(i,e)||t(i,e).length>0)&&!!c&&("localImage"===c.type||"localVideo"===c.type)&&"publish-immediately"===r),m=!s,f=eB(u,c),b="carousel"===o&&x.Z.enabled("carousel"),y=(0,n.useDispatch)();return(0,d.jsx)(eN,{...e,addCarouselItem:()=>y((0,j.Z)(e.pinDraftId,(0,A.Z)())),deletePinTagTaggedObject:(e,t)=>y((0,eR.Go)(e,t)),isDeletable:"create"===i&&"external"!==l,isEditable:m,isEditingEnabled:f,isReorderable:b,isTaggable:g,mediaType:u,onClickCollectionsTag:()=>y((0,a.c8)(e.pinDraftId,"collectionsTag")),onClickDelete:()=>y((0,a.kp)(e.pinDraftId,e.pinItemId)),onClickDeleteInterestTags:()=>y((0,a.c_)(e.pinDraftId)),onClickReorder:()=>y((0,a.c8)(e.pinDraftId,"reorder")),onClickTag:()=>y((0,a.c8)(e.pinDraftId,"tag")),pinTagIds:h,pinTags:p,setPinTagStatus:(e,t)=>y((0,eR.Cf)(e,t)),setTaggedObjectStatus:e=>y((0,ek.k)(e,"deleted")),unfilteredTaggedObjects:_})}var eM=i(957025);function eF(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class eU extends r.Component{constructor(...e){super(...e),eF(this,"setTextFieldInput",e=>{this.textfieldInput=e}),eF(this,"getLinkError",()=>{let{link:e,linksUsed:t,i18n:i}=this.props;return e?t.includes(e)?i.bt("You can't tag from the same page twice.", "You can't tag from the same page twice.", "Error message for using the same product link twice on a Pin tag", undefined, true):(0,v.CB)(e)?null:(0,S.q0)(i):null}),eF(this,"handleBlur",({value:e})=>{let{setLink:t}=this.props;t(e,this.getLinkError())}),eF(this,"handleChange",({value:e})=>{let{setLink:t}=this.props;t(e)}),eF(this,"handleClick",()=>{let{link:e,mode:t,openSelectTagView:i,setLink:r}=this.props,n=this.getLinkError();r(e,n),n&&this.props.logContextEvent({event_type:7503,component:13308,element:10909,aux_data:{method:t}}),e&&!n&&(i(),this.props.logContextEvent({event_type:3811,component:13308,element:10909,aux_data:{method:t}}))}),eF(this,"handleSubmit",e=>{e.preventDefault(),this.handleClick()})}componentDidMount(){window.setTimeout(()=>{this.textfieldInput&&this.textfieldInput.focus()},0)}render(){let{link:e,linkError:t}=this.props,i="pin-draft-affiliate-link";return(0,d.jsxs)(o.xu,{column:12,paddingX:2,paddingY:3,children:[(0,d.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:this.handleSubmit,children:(0,d.jsxs)(o.xu,{column:12,display:"flex",children:[(0,d.jsx)(o.xu,{flex:"grow",paddingX:1,children:(0,d.jsx)(o.nv,{ref:this.setTextFieldInput,hasError:!!t,id:i,onBlur:this.handleBlur,onChange:this.handleChange,placeholder:this.props.i18n.bt("Enter product or affiliate link", "Enter product or affiliate link", "Input field for a website link to a product", undefined, true),size:"lg",type:"url",value:e})}),(0,d.jsx)(o.xu,{flex:"none",paddingX:1,children:(0,d.jsx)(o.zx,{color:"red",name:"pin-draft-affiliate-link-button",onClick:this.handleClick,text:this.props.i18n.bt("Next", "Next", "Button to submit affiliate link to find products", undefined, true)})})]})}),!!t&&(0,d.jsx)(o.xu,{column:12,paddingX:1,children:(0,d.jsx)(P.Z,{errorMessage:t,htmlFor:i})})]})}}function eH(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,eM.A$)(),o=(0,n.useSelector)(t=>t.pinbuilder.pinTags[e.pinTagId].link),c=(0,n.useSelector)(t=>t.pinbuilder.pinTags[e.pinTagId].linkError),u=(0,n.useSelector)(t=>r(t,e).map(e=>t.pinbuilder.taggedObjects[e].link)),h=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode),p=(0,n.useDispatch)();return(0,d.jsx)(eU,{...e,i18n:i,link:o,linkError:c,linksUsed:u,logContextEvent:t,mode:h,openSelectTagView:()=>p((0,a.c8)(e.pinDraftId,"selectTag")),setLink:(t,i)=>p((0,eR.mz)(e.pinTagId,t,i))})}var eV=i(403368),eG=i(616672),eW=i(223815);function e$(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eX={cursor:"grab",transition:"opacity 0.15s ease"},eY={...eX,cursor:"grabbing",opacity:.5},eq={...eX,cursor:"pointer"};class eK extends r.Component{constructor(...e){super(...e),e$(this,"state",{pinTagDotRef:null}),e$(this,"setPinTagDotRef",e=>{this.setState({pinTagDotRef:e})}),e$(this,"handleMouseDown",()=>{let{editable:e,isAtTaggedObjectLimit:t,startMoving:i,selectPinTag:r,setTagError:n}=this.props;if(r(),e){i();let e=t?this.props.i18n.bt("You've reached the maximum number of products for a tag.", "You've reached the maximum number of products for a tag.", "Error message when user attempts to add more than 8 products to a tag", undefined, true):null;n(e)}}),e$(this,"handleMouseUp",e=>{let{editable:t,stopMoving:i}=this.props;e.stopPropagation(),t&&i()})}render(){let{editable:e,isAtTaggedObjectLimit:t,isGrabbing:i,isSelected:n,isSelectingTag:s,pinDraftId:l,pinTagId:a,pinTagKey:c,x:u,y:h}=this.props,{pinTagDotRef:p}=this.state;return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(eV.Z,{ref:this.setPinTagDotRef,backdropDiameter:40,dotDiameter:w.yI,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,selected:n,style:e?i?eY:eX:eq,text:e?c:void 0,x:u,y:h}),n&&!t&&!i&&!s&&e&&!!p&&(0,d.jsx)(o.mh,{children:(0,d.jsx)(eW.Z,{children:(0,d.jsx)(o.J2,{anchor:p,idealDirection:"down",onDismiss:()=>{},positionRelativeToAnchor:!1,shouldFocus:!1,size:"xl",children:(0,d.jsx)(eH,{pinDraftId:l,pinTagId:a})})})})]})}}function eJ(e){let t=(0,l.ZP)(),i=(0,eM.A$)(),{pinDrafts:r,pinItems:o,pinTags:s}=(0,n.useSelector)(e=>e.pinbuilder),a=o[e.pinItemId],{x:c,y:u}=s[e.pinTagId],h=(0,n.useSelector)(t=>i(t,e)),p=(0,n.useDispatch)();return(0,d.jsx)(eK,{...e,i18n:t,isAtTaggedObjectLimit:h.length===w.qY,isSelected:a.selectedPinTagId===e.pinTagId,isSelectingTag:"selectTag"===r[e.pinDraftId].view,selectPinTag:()=>p((0,T.C_)(e.pinItemId,e.pinTagId)),setTagError:t=>p((0,T.OD)(e.pinItemId,t)),x:c*w.LM,y:a.media?u*(0,eG.Z)(a.media):-1})}function eQ(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class e0 extends r.Component{constructor(...e){super(...e),eQ(this,"state",{isMovingPinTag:!1}),eQ(this,"getAnchorCoordinates",e=>{let{pageX:t,pageY:i}=e,{height:r,top:n,left:o,width:s}=e.currentTarget.getBoundingClientRect();return{x:(t-o)/s,y:(i-n)/r}}),eQ(this,"isIntersecting",(e,t)=>{let{height:i,unselectedPinTags:r}=this.props;return r.some(r=>{let n=(e-r.x)*w.LM,o=(t-r.y)*i;return n**2+o**2<w.$4})}),eQ(this,"handleMouseMove",e=>{let{editable:t,movePinTag:i,selectedPinTagId:r}=this.props;if(!t)return;let{isMovingPinTag:n}=this.state;if(n&&r){let{x:t,y:n}=this.getAnchorCoordinates(e);this.isIntersecting(t,n)||i(r,t,n)}}),eQ(this,"handleMouseUp",e=>{let{closeTagGrid:t,createPinTag:i,deselectPinTag:r,editable:n,mode:o,pinTagIds:s,selectedPinTagId:l,setTagError:a,logContextEvent:d}=this.props;if(l||!n)n&&t(),r();else{let t=s.length;if(t<w.YM){0===t&&d({event_type:7501,component:13308,element:10910,aux_data:{method:o}}),d({event_type:101,component:13308,element:10910,aux_data:{method:o}});let{x:r,y:n}=this.getAnchorCoordinates(e);i(r,n)}let r=t>=w.YM?this.props.i18n.bt("You've reached the maximum number of tags.", "You've reached the maximum number of tags.", "Error message when user attempts to add more than 8 tags to a Pin", undefined, true):null;a(r)}}),eQ(this,"startMovingPinTag",()=>this.setState({isMovingPinTag:!0})),eQ(this,"stopMovingPinTag",()=>this.setState({isMovingPinTag:!1}))}render(){let{editable:e,forwardRef:t,pinDraftId:i,pinItemId:r,pinTagIds:n,selectedPinTagId:s}=this.props,{isMovingPinTag:l}=this.state;return(0,d.jsx)(o.xu,{ref:t,bottom:!!e||!!s||void 0,left:!0,onMouseLeave:this.stopMovingPinTag,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,overflow:e?"hidden":void 0,position:"absolute",right:!0,top:!0,children:n.map((t,n)=>(0,d.jsx)(eJ,{editable:e,isGrabbing:l&&t===s,pinDraftId:i,pinItemId:r,pinTagId:t,pinTagKey:n+1,startMoving:this.startMovingPinTag,stopMoving:this.stopMovingPinTag},t))})}}function e1(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,eL.vd)(),{pinDrafts:o,pinItems:c,pinTags:u}=(0,n.useSelector)(e=>e.pinbuilder),h=(0,n.useSelector)(t=>(0,eL.M)(t,e)),p=(0,n.useSelector)(t=>r(t,e)),{media:_}=c[e.pinItemId],g=_?(0,eG.Z)(_):0,{mode:m}=o[e.pinDraftId],f=p.filter(e=>e!==h).map(e=>u[e]),x=(0,n.useDispatch)();return(0,d.jsx)(e0,{...e,closeTagGrid:()=>x((0,a.c8)(e.pinDraftId,"tag")),createPinTag:(t,i)=>x((0,T.hL)(e.pinItemId,t,i)),deselectPinTag:()=>x((0,T.yV)(e.pinItemId)),height:g,i18n:i,logContextEvent:t,mode:m,movePinTag:(e,t,i)=>x((0,eR.uM)(e,t,i)),pinTagIds:p,selectedPinTagId:h,setTagError:t=>x((0,T.OD)(e.pinItemId,t)),unselectedPinTags:f})}function e2(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class e8 extends r.Component{constructor(...e){super(...e),e2(this,"state",{containerRef:null}),e2(this,"saveRef",e=>{this.setState({containerRef:e})})}render(){let{editable:e,pinDraftId:t,pinItemId:i,showStepTwoExperience:r,showStepThreeExperience:n}=this.props,{containerRef:s}=this.state;return(0,d.jsx)(o.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,d.jsxs)(o.xu,{column:12,height:"100%",position:"relative",children:[(0,d.jsx)(e1,{editable:e,forwardRef:this.saveRef,pinDraftId:t,pinItemId:i}),e&&r&&(0,d.jsx)(m.default,{anchor:s,experienceIds:[500915],idealDirection:"right",placementId:1000135}),e&&n&&(0,d.jsx)(m.default,{anchor:s,experienceIds:[500916],idealDirection:"right",placementId:1000135})]})})}}function e3(e){let t=(0,eL.vd)(),i=(0,eL.jk)(),r=(0,n.useSelector)(i=>0===t(i,e).length),o=(0,n.useSelector)(t=>i(t,e).length>0);return(0,d.jsx)(e8,{...e,showStepThreeExperience:o,showStepTwoExperience:r})}var e4=i(770065),e6=i(483205),e5=i(325016),e7=i(327096);function e9(e){var t;let i=null!==(t=(0,n.useSelector)(t=>(0,eL.Bg)(t,e)))&&void 0!==t?t:{},{shopTheLook:s,setMostRecentTaggedObjectId:l}=(0,e7.f)(),{mostRecentTaggedObjectId:a,stlHoveredTaggedObjectId:c}=s,{height:u,isHovering:h,taggedObject:p,width:_}=e,[g,m]=(0,r.useState)("inOut"),f=(0,r.useCallback)(()=>{"inOut"===g&&m("none"),l(null)}),x=a===p.id,b=c===p.id;(0,r.useEffect)(()=>{(h||b)&&(m("none"),l(null))},[h,b]);let y=p.pins[0].closeup_image_signature||function(e){let t=e.split("/");return t[t.length-1].split(".")[0]}(i.src),v=x||b?(0,d.jsx)(o.xu,{height:u,position:"absolute",width:_,children:(0,d.jsx)(e4.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:h||b?void 0:g,isHovering:!0,isPinbuilder:!0,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p})}):(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{top:p.y_percent/100*u-e6.b9/2,left:p.x_percent/100*_-e6.b9/2}},position:"absolute",children:(0,d.jsx)(e5.Z,{})});return(0,d.jsxs)(r.Fragment,{children:[!h&&(0,d.jsx)(o.xu,{"data-test-id":"stl-dot-or-flyout",children:v}),(0,d.jsx)(o.xu,{height:u,position:"absolute",width:_,children:(0,d.jsx)(e4.Z,{closeupImageSignature:y,displayHeight:u,displayWidth:_,flyoutAnimationType:void 0,isHovering:h,isPinbuilder:!0,onAnimationComplete:f,onStlFlyoutHover:()=>{},taggedItem:p})})]})}function te({isHovering:e,styleOverride:t={}}){let i=(0,l.ZP)(),r=i.bt("Click anywhere to tag", "Click anywhere to tag", "pinbuilder.product.tagging.icon", undefined, true);return(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:t},"data-test-id":"stl-overlay-text",height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:(0,d.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:e?void 0:"rgba(0, 0, 0, 0.4)"}},"data-test-id":"text-and-icon-wrapper",display:"flex",justifyContent:"center",rounding:"pill",paddingX:4,paddingY:4,position:"relative",children:[(0,d.jsx)(o.JO,{accessibilityLabel:r,color:"inverse",icon:"tag"}),(0,d.jsx)(o.xu,{marginStart:2,children:(0,d.jsx)(o.xv,{color:"inverse",size:"300",weight:"bold",children:r})})]})})}var tt=i(956069);function ti({height:e,isHovering:t,pinDraftId:i,pinItemId:n,taggedObjects:l,width:a}){let{logContextEvent:c}=(0,s.v)(),{setCurrentPinDraftId:u,setStlCallout:h,setStlTaggedCoord:p,shopTheLook:_}=(0,e7.f)(),{stlTaggedCoords:g}=_,m=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{h({showCallout:!1})},[]);let f=e=>{if(m.current){let t=m.current.getBoundingClientRect(),i=e.clientX-t.left,r=e.clientY-t.top,{width:n}=t,{height:o}=t;return{x:i,y:r,width:n,height:o}}return{}},x=e=>{let t=f(e);return!!t&&t.x<t.width-10&&t.x>10&&t.y>26&&t.y<t.height-26},b=!!l&&l.length===tt.VX,y=e=>{if(x(e)){let t=f(e);t&&(b?h({showCallout:!0,type:"error"}):(c({event_type:101,component:13308,element:12081,view_type:212}),u(i),p({x:t.x,y:t.y,xPercent:t.x/t.width,yPercent:t.y/t.height})))}else u(null),p(null)},v={height:"calc(100% - 48px)",width:"calc(100% - 16px)"},P=!!(l&&l.length>0);return(0,d.jsx)(o.Zf,{height:"100%",children:(0,d.jsxs)("div",{ref:m,onClick:e=>y(e),onKeyDown:()=>{},role:"button",style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center",cursor:b?"not-allowed":"pointer"},tabIndex:0,children:[t&&(0,d.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #fff",borderRadius:8,cursor:b?"not-allowed":"pointer",...v,margin:"6px"}},display:"flex",justifyContent:"center",position:"relative",width:"100%",children:!P&&t&&(0,d.jsx)(te,{isHovering:t})}),l&&l.length>0&&l.map(i=>["created","saved"].includes(i.status)?(0,d.jsx)(e9,{height:e,isHovering:t,pinItemId:n,taggedObject:i,width:a},i.id):null),g&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...v,top:g.y-e6.b9/2,left:g.x-e6.b9/2}},position:"absolute",children:(0,d.jsx)(e5.Z,{})}),(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{...v,top:g.y-67.5,left:g.x-67.5}},position:"absolute",children:(0,d.jsx)(o.o3,{})})]})]})})}var tr=i(875108);function tn(e){let{isHovering:t,imageDims:i,pinDraftId:s,pinItemId:l}=e,{height:a,width:c}=i||{},u=(0,eL.vd)(),h=(0,n.useSelector)(t=>u(t,e))||[],p=(0,n.useSelector)(e=>e.pinbuilder)||{},_=p.pinTags||{},g=p.taggedObjects||{},m=h.filter(e=>(0,tr.Z)(_[e])).map(e=>{let{id:t,media:i,pin:r,status:n}=g[_[e].taggedObjectIds[0]]||{};return{id:t||"",pin_tag_key:_[e].pinTagKey||"",pins:[{...r,id:(null==r?void 0:r.id)||"",images:{"236x":{url:null==i?void 0:i.url,width:null==i?void 0:i.width,height:null==i?void 0:i.height}}}],status:n,x_percent:100*_[e].x,y_percent:100*_[e].y}});return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t?"rgba(0,0,0,0.4)":void 0}},height:"100%",overflow:"hidden",position:"absolute",rounding:2,width:"100%"}),!!a&&!!c&&(0,d.jsx)(ti,{height:a,isHovering:t,pinDraftId:s,pinItemId:l,taggedObjects:m,width:c})]})}var to=i(373695),ts=i(113110);let tl={overlay:{__style:{backgroundColor:"rgba(239, 245, 252, 0.92)",pointerEvents:"none"}},border:{__style:{border:"dashed 2px #dadada",borderRadius:6}}};function ta({type:e}){let t=(0,l.ZP)();return(0,d.jsx)(o.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,padding:3,dangerouslySetInlineStyle:tl.overlay,children:(0,d.jsx)(o.xu,{alignItems:"center",column:12,display:"flex",height:"100%",justifyContent:"center",dangerouslySetInlineStyle:tl.border,children:(0,d.jsx)(o.xv,{align:"center",color:"shopping",overflow:"normal",children:"image"===e?t.bt("Replace image", "Replace image", "Text that appears over image when user drags to replace", undefined, true):t.bt("Replace video", "Replace video", "Text that appears over video when user drags to replace", undefined, true)})})})}var td=i(490072);let tc=new o.Ry(1);function tu({image:e,isDragging:t,isHovering:i,pinDraftId:s,pinItemId:a,showCarouselCreateButton:c,showCarouselControlButtons:u,showMediaTagOverlay:h,showPageNumberOverlay:p,view:_,containedHeight:g,setContainedHeight:m}){let f=(0,l.ZP)(),v=(0,n.useDispatch)(),{checkExperiment:P}=(0,b.F)(),S=(0,r.useRef)(null),[A,w]=(0,r.useState)(),{enabled:E,disable:I}=(0,ts.Z)(),j=(0,eO.Z)();(0,r.useEffect)(()=>{if(S.current){let{width:t}=S.current.getBoundingClientRect(),i=t/e.width,r=e.height*i;m(r)}},[S.current]),(0,r.useEffect)(()=>{A&&v((0,T.Sz)(a,{height:A.height,width:A.width}))},[A]);let C=(0,y.Z)(),D=(0,ez.nl)(C,j)&&"ad_creation"!==x.Z.scenario()&&P("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled;return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsxs)(o.xu,{height:null!=g?g:"100%",position:D?"absolute":void 0,width:"100%",children:[(0,d.jsx)(o.xu,{ref:S,dangerouslySetInlineStyle:{__style:{boxShadow:t?"0 0 0 1px #0074e8":void 0}},"data-test-id":"media-image-view",height:null!=g?g:"100%",overflow:"hidden",position:D?"absolute":void 0,rounding:2,width:"100%",children:x.Z.enabled("offsitePinCreation")?(0,d.jsx)(to.Z,{url:e.src,children:({image:t})=>{var i,n;return!A&&t.length>0&&w(t[0]),(0,d.jsx)(r.Fragment,{children:t.length>0&&(0,d.jsx)(o.Ee,{alt:f.bt("Uploaded image", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),crossOrigin:E?"anonymous":void 0,naturalHeight:null!==(i=t[0].height)&&void 0!==i?i:1,naturalWidth:null!==(n=t[0].width)&&void 0!==n?n:1,onError:()=>I(),src:e.src})})}}):(0,d.jsxs)(o.Ee,{alt:f.bt("Uploaded image", "Uploaded image", "Label for a user uploaded image on Pin create", undefined, true),naturalHeight:e.height,naturalWidth:e.width,src:e.src,children:[p&&(0,d.jsx)(F,{pinDraftId:s}),h&&!x.Z.enabled("shop_the_pin")&&(0,d.jsx)(e3,{editable:"tag"===_,pinDraftId:s,pinItemId:a}),t&&(0,d.jsx)(ta,{type:"image"})]})}),!x.Z.enabled("offsitePinCreation")&&"tag"!==_&&"collectionsTag"!==_&&(0,d.jsx)(o.xu,{bottom:!0,height:null!=g?g:"100%",left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,d.jsx)(o.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,d.jsx)(eZ,{deleteText:f.bt("Delete image", "Delete image", "Button to delete the image from the Pin", undefined, true),pinDraftId:s,pinItemId:a,showCarouselCreateButton:c,type:"image"})})}),D&&!i&&!u&&(0,d.jsx)("div",{role:"presentation",style:{height:"100%",position:"absolute",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"center"},children:(0,d.jsx)(o.xu,{alignItems:"center",display:"flex",justifyContent:"center",margin:2,position:"relative",width:"100%",zIndex:tc,children:(0,d.jsx)(te,{})})})]}),D&&!u&&(0,d.jsx)(tn,{imageDims:{width:e.width,height:e.height},isHovering:i,pinDraftId:s,pinItemId:a})]})}function th(e){let{pinDrafts:t,pinItems:i}=(0,n.useSelector)(e=>e.pinbuilder),{type:r}=t[e.pinDraftId],{media:o}=i[e.pinItemId],s=(0,n.useSelector)(t=>(0,td.Xe)(t,e));return(0,d.jsx)(tu,{...e,showMediaTagOverlay:"single"===r,showPageNumberOverlay:"carousel"===r&&!!o,view:s})}function tp(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let t_={progressBar:{__style:{backgroundColor:"rgba(241, 53, 53, 1)",borderRadius:"2px",transition:"1s transform",transformOrigin:"left"}},overlay:{__style:{backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.6))"}}};class tg extends r.Component{constructor(...e){super(...e),tp(this,"state",{visible:!!this.props.errorMessage||100!==this.props.progress}),tp(this,"handleHide",()=>{this.setState({visible:!1})}),tp(this,"getProgressText",()=>{let{progress:e}=this.props;return e<100?this.props.i18n.bt("Uploading...", "Uploading...", "Upload progress status for pin create", undefined, true):this.props.i18n.bt("Finishing up", "Finishing up", "Upload progress status for pin create", undefined, true)})}componentDidUpdate(e){let{progress:t}=e,{errorMessage:i,progress:r}=this.props,{visible:n}=this.state;!i&&(t<100||n)&&100===r&&(this.hidingTimeout=setTimeout(this.handleHide,3e3))}componentWillUnmount(){this.hidingTimeout&&clearTimeout(this.hidingTimeout)}render(){let{errorMessage:e,onRetryUpload:t,progress:i}=this.props,{visible:r}=this.state;return r?(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:t_.overlay,"data-test-id":"pinbuilder-media-view-progress-bar",height:72,left:!0,position:"absolute",rounding:2,top:!0,width:"100%",children:(0,d.jsxs)(o.xu,{margin:3,children:[(0,d.jsx)(o.xu,{height:6,marginBottom:2,position:"relative",children:!e&&(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:t_.progressBar,height:"100%",left:!0,position:"absolute",top:!0,width:`${i}%`})}),(0,d.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[!!e&&(0,d.jsx)(o.iP,{fullWidth:!1,onTap:t,rounding:"circle",children:(0,d.jsx)(o.xu,{marginEnd:2,children:(0,d.jsx)(o.JO,{accessibilityLabel:this.props.i18n.bt("Retry upload", "Retry upload", "Button allowing a user to retry a failed video upload", undefined, true),color:"inverse",icon:"refresh",size:20})})}),(0,d.jsx)(o.xv,{color:"inverse",inline:!0,weight:"bold",children:e||this.getProgressText()})]})]})}):null}}let tm=function(e){let t=(0,l.ZP)();return(0,d.jsx)(tg,{...e,i18n:t})};var tf=i(923490);function tx(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tb extends r.Component{constructor(...e){super(...e),tx(this,"state",{controls:!0,playing:!1,volume:0}),tx(this,"setVideoRef",e=>{this.videoRef=e}),tx(this,"handlePlay",()=>this.setState({playing:!0})),tx(this,"handlePause",()=>this.setState({playing:!1})),tx(this,"handleHideControls",()=>this.setState({controls:!1})),tx(this,"handleVolumeChange",({event:e,volume:t})=>{e.stopPropagation(),this.setState({volume:t})}),tx(this,"handleMouseEnter",()=>{this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.setState({controls:!0})}),tx(this,"handleMouseLeave",()=>{this.controlsTimeout=setTimeout(this.handleHideControls,w.Hy)})}componentDidMount(){var e,t;this.controlsTimeout=setTimeout(this.handleHideControls,w.Hy);let{setContainedHeight:i}=this.props;null!==(e=this.videoRef)&&void 0!==e&&null!==(t=e.video)&&void 0!==t&&t.clientHeight&&i(this.videoRef.video.clientHeight)}componentDidUpdate(e){let{isSelecting:t,video:i}=this.props;i.thumbnail!==e.video.thumbnail&&this.videoRef&&(this.videoRef.seek(i.thumbnail),this.setState({playing:!1})),t&&!e.isSelecting&&this.setState({playing:!1}),!t&&e.isSelecting&&this.setState({playing:!0})}componentWillUnmount(){this.controlsTimeout&&clearTimeout(this.controlsTimeout)}render(){let{isDragging:e,isEdited:t,pinDraftId:i,pinItemId:r,retryUpload:n,video:s,videoError:l,view:a,containedHeight:c}=this.props,{controls:u,playing:h,volume:p}=this.state,_=s.uploadProgress||0,g={__style:{boxShadow:e?"0 0 0 1px #0074e8":void 0}};return(0,d.jsxs)(o.xu,{dangerouslySetInlineStyle:g,"data-test-id":"media-video-view",height:null!=c?c:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,overflow:"hidden",rounding:3,width:"100%",children:[(0,d.jsxs)(o.nk,{ref:this.setVideoRef,aspectRatio:s.width/s.height,autoplay:!0,captions:"",controls:u,loop:!0,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onPlay:this.handlePlay,onPlayError:this.handlePause,onVolumeChange:this.handleVolumeChange,playing:h,src:s.src,volume:p,children:[e&&(0,d.jsx)(ta,{type:"video"}),(0,d.jsx)(tm,{errorMessage:l,onRetryUpload:n,progress:_})]}),t&&(0,d.jsxs)(o.xu,{bottom:!0,color:"transparentDarkGray",dangerouslySetInlineStyle:g,left:!0,padding:3,paddingX:8,position:"absolute",right:!0,top:!0,children:[(0,d.jsx)(o.X6,{color:"inverse",size:"400",children:this.props.i18n.bt("Your edits are stored", "Your edits are stored", "editedVideo.overlay.title", undefined, true)}),(0,d.jsx)(o.xv,{color:"inverse",children:this.props.i18n.bt("Your edits aren't showing up in this preview, but don't worry, they've been stored and will show up in your published video. Tap back to the editing mode to see your edits. ", "Your edits aren't showing up in this preview, but don't worry, they've been stored and will show up in your published video. Tap back to the editing mode to see your edits. ", "editedVideo.overlay.message", undefined, true)})]}),"tag"!==a&&"collectionsTag"!==a&&(0,d.jsx)(o.xu,{bottom:!0,height:null!=c?c:"100%",left:!0,position:"absolute",top:!0,children:(0,d.jsx)(o.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginStart:-2,children:(0,d.jsx)(eZ,{deleteText:this.props.i18n.bt("Delete video", "Delete video", "Button to delete the video from the Pin", undefined, true),pinDraftId:i,pinItemId:r})})})]})}}function ty(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,_.Z)(),o=(0,y.Z)(),a=o.isAuth?o.id:"",c=o.isAuth?o.country:"",u=(0,n.useDispatch)(),{pinDraftId:h,pinItemId:p}=e,g=(0,n.useSelector)(({pinbuilder:e})=>e.selectedPinDraftIds.length>0),m=(0,n.useSelector)(({pinbuilder:e})=>e.pinDrafts[h].mediaError),f=(0,n.useSelector)(t=>(0,td.Xe)(t,e)),{checkExperiment:x}=(0,b.F)();return(0,d.jsx)(tb,{...e,i18n:i,isSelecting:g,retryUpload:()=>u((0,tf.d)({checkExperiment:x,country:c,i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,pinDraftId:h,pinItemId:p,userId:a})),videoError:m,view:f})}var tv=i(556663),tP=i(98432);class tS extends r.Component{constructor(...e){var t,i,r;super(...e),t="handleDrop",i=e=>{let{media:t,processFiles:i,logContextEvent:r}=this.props;e.preventDefault(),e.stopPropagation();let n=(0,ee.Z)(e.dataTransfer);r({event_type:3502,component:13308,element:10966,aux_data:{pin_builder_data:JSON.stringify({media_types:n.map(e=>e.type)})}});let o=x.Z.enabled("carousel")&&!t;i(o?n:n.slice(0,1))},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}renderMedia(e,t,i,r){let{media:n,pinDraftId:o,pinItemId:s,isEdited:l,showCarouselCreateButton:a,showCarouselControlButtons:c}=this.props;if(n){if("localImage"===n.type||"webImage"===n.type)return(0,d.jsx)(th,{containedHeight:r,image:n,isDragging:e,isHovering:t,pinDraftId:o,pinItemId:s,setContainedHeight:i,showCarouselControlButtons:c,showCarouselCreateButton:a});if("localVideo"===n.type)return(0,d.jsx)(ty,{containedHeight:r,isDragging:e,isEdited:l,isHovering:t,pinDraftId:o,pinItemId:s,setContainedHeight:i,video:n})}return null}render(){let{media:e,pinDraftId:t,pinItemId:i,processFiles:r}=this.props;return e?(0,d.jsx)(tv.Z,{onDrop:this.handleDrop,children:(e,t,i,r)=>this.renderMedia(e,t,i,r)}):(0,d.jsx)(eA,{pinDraftId:t,pinItemId:i,processFiles:r})}}function tA(e){let{pinDraftId:t}=e,{logContextEvent:i}=(0,s.v)(),r=(0,l.ZP)(),o=(0,_.Z)(),a=(0,n.useDispatch)(),c=(0,y.Z)(),u=c.isAuth&&c.isPartner,h=c.isAuth?c.id:"",p=c.isAuth?c.country:"",g=(0,eO.Z)(),m=(0,ez.lJ)(c,g),{search:f}=(0,B.TH)(),x=f.includes("maxvideo"),{checkExperiment:v}=(0,b.F)();return(0,d.jsx)(tS,{...e,logContextEvent:i,processFiles:e=>{a((0,tP.Z)({pinDraftId:t,files:e,isPartner:u,userId:h,country:p,i18n:r,logContextEvent:i,orbacSubjectId:m,checkExperiment:v,ideaPinRenamingEnabled:o,isMaxVideo:x}))}})}var tw=i(47615);function tE({pinDraftId:e}){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,n.useDispatch)(),a=()=>r((0,j.Z)(e,(0,A.Z)())),c=i.bt("Create carousel", "Create carousel", "Button Text for creating Carousel Pin", undefined, true);return(0,d.jsx)(o.xu,{"data-test-id":"create-carousel-button",children:(0,d.jsx)(o.zx,{accessibilityLabel:c,onClick:()=>{t({event_type:101,component:13308,element:11123}),a()},iconEnd:"add",text:c,fullWidth:!0})})}function tI(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let tj={container:{__style:{borderRadius:6}},overlay:{__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}}};class tC extends r.Component{constructor(...e){super(...e),tI(this,"state",{isHovering:!1}),tI(this,"handleMouseEnter",()=>{this.setState({isHovering:!0})}),tI(this,"handleMouseLeave",()=>{this.setState({isHovering:!1})})}render(){let{clearCustomVideoThumbnail:e,coverImg:t}=this.props,{isHovering:i}=this.state;return(0,d.jsx)(o.xu,{height:w.u1,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:"relative",width:w.u1*t.width/t.height,children:(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:tj.container,overflow:"hidden",children:(0,d.jsx)(o.Ee,{alt:this.props.i18n.bt("Uploaded cover image", "Uploaded cover image", "Label for user uploaded cover image for video", undefined, true),naturalHeight:t.height,naturalWidth:t.width,src:t.src,children:i&&(0,d.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:tj.overlay,display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(o.hU,{accessibilityLabel:this.props.i18n.bt("Remove image", "Remove image", "Button to remove cover image for video", undefined, true),bgColor:"white",icon:"trash-can",iconColor:"darkGray",onClick:e,size:"xs"})})})})})}}function tT(e){let t=(0,l.ZP)(),i=(0,n.useDispatch)();return(0,d.jsx)(tC,{...e,i18n:t,clearCustomVideoThumbnail:()=>i((0,T.Sz)(e.pinItemId,{customCoverImg:null}))})}var tD=i(123463);function tO(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let tz=new Map,tR=new Map,tk={backdrop:{__style:{opacity:.35}},video:{height:"100%",width:"100%"}};class tL extends r.Component{constructor(...e){super(...e),tO(this,"state",{seeking:!1,thumbnails:tz.get(this.props.video.src)||[]}),tO(this,"getVideoDuration",()=>{let{video:e}=this.props,{trimmedEndTime:t,trimmedStartTime:i=0}=e,r=void 0===t?e.duration:t-i;return r}),tO(this,"getNumThumbnails",()=>{let{video:e}=this.props,t=tR.get(e.src);if(t)return t;if(this.container){let{width:t}=this.container.getBoundingClientRect(),i=Math.max(Math.ceil(t/this.getVideoWidth()),6);return tR.set(e.src,i),i}return 6}),tO(this,"getThumbnails",()=>{let{video:e}=this.props,t=this.getNumThumbnails(),i=0;this.videoThumbnail=document.createElement("video");let r=this.getVideoDuration(),n=()=>{this.videoThumbnail.currentTime=i/t*r},o=()=>{if(this.videoThumbnail.removeEventListener("canplaythrough",n),i===t){this.videoThumbnail.removeEventListener("seeked",o);return}let s=document.createElement("canvas");s.height=this.videoThumbnail.videoHeight,s.width=this.videoThumbnail.videoWidth;let l=s.getContext("2d");l.drawImage(this.videoThumbnail,0,0,s.width,s.height);let a=s.toDataURL();this.mounted&&this.setState(e=>({thumbnails:[...e.thumbnails,a]})),tz.set(e.src,[...this.state.thumbnails,a]),i+=1,this.videoThumbnail.currentTime=i/t*r};this.videoThumbnail.addEventListener("canplaythrough",n),this.videoThumbnail.addEventListener("seeked",o),this.videoThumbnail.src=e.src}),tO(this,"getVideoWidth",()=>{let{height:e=92,video:t}=this.props;return e*t.width/t.height}),tO(this,"setContainerRef",e=>{this.container=e}),tO(this,"setVideoRef",e=>{this.video=e}),tO(this,"mounted",!1),tO(this,"handleMouseDown",e=>{let{onFocusSlider:t}=this.props;t(),this.setState({seeking:!0});let{left:i}=e.currentTarget.getBoundingClientRect();this.mouseOffsetX=e.clientX-i}),tO(this,"handleMouseMove",e=>{let{mouseOffsetX:t}=this,{seeking:i}=this.state,{video:r}=this.props,{trimmedStartTime:n=0}=r;if(i&&t){let{setThumbnail:i,video:r}=this.props,{left:o,width:s}=e.currentTarget.getBoundingClientRect(),l=e.clientX-o-t,a=Math.max(0,Math.min(l/(s-this.getVideoWidth()),1)),d=Math.min(a,.98)*r.duration,{video:c}=this;c&&d<=this.getVideoDuration()&&(c.currentTime=n+d,i(n+d))}}),tO(this,"handleMouseUp",()=>{this.setState({seeking:!1}),this.mouseOffsetX=null})}componentDidMount(){this.mounted=!0;let{video:e}=this.props;this.video&&(this.video.currentTime=e.thumbnail),tz.has(e.src)||this.getThumbnails()}componentDidUpdate(e){let{setThumbnail:t,video:i}=this.props,{trimmedEndTime:r,trimmedStartTime:n}=i;if(i.src!==e.video.src){let e=tz.get(i.src);e?this.setState({thumbnails:e}):this.getThumbnails()}(e.video.trimmedEndTime!==r||e.video.trimmedStartTime!==n)&&(this.video&&(this.video.currentTime=n||0),t(n||0),this.setState({thumbnails:[]}),tz.set(i.src,[]),this.getThumbnails())}componentWillUnmount(){this.mounted=!1}render(){let{height:e,showHeading:t,video:i}=this.props,{trimmedStartTime:n=0}=i,{seeking:s,thumbnails:l}=this.state,a=this.getVideoWidth(),c=this.getVideoDuration(),u=Math.max(0,Math.round((i.thumbnail-n)*100/c)/100);return(0,d.jsxs)(r.Fragment,{children:[t&&(0,d.jsx)(o.xu,{marginBottom:3,children:(0,d.jsx)(o.xv,{color:"default",lineClamp:1,weight:"bold",children:this.props.i18n.bt("Pick a cover image", "Pick a cover image", "Heading for slider to select video thumbnail image", undefined, true)})}),(0,d.jsxs)(o.xu,{color:"secondary",column:12,rounding:1,height:e,overflow:"hidden",position:"relative",children:[(0,d.jsx)(o.xu,{color:"default",column:12,dangerouslySetInlineStyle:tk.backdrop,height:"100%",position:"relative",children:l.map((t,r)=>(0,d.jsx)(o.xu,{position:"absolute",height:e,width:a,dangerouslySetInlineStyle:{__style:{left:`${r*(100/this.getNumThumbnails())}%`}},children:(0,d.jsx)(o.Ee,{alt:"",naturalHeight:i.height,naturalWidth:i.width,src:t})},r))}),(0,d.jsx)(o.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,d.jsx)(o.xu,{column:12,height:"100%",onMouseLeave:this.handleMouseUp,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,position:"relative",ref:this.setContainerRef,children:(0,d.jsx)(o.xu,{rounding:1,dangerouslySetInlineStyle:{__style:{boxShadow:"0 0 0 3px #fff",cursor:s?"grabbing":"grab",left:`calc((100% - ${a}px) * ${u>=.98?1:u})`}},"data-test-id":"pin-draft-video-thumbnail-slider",height:e,overflow:"hidden",position:"absolute",width:a,children:(0,d.jsx)("video",{muted:!0,onMouseDown:this.handleMouseDown,ref:this.setVideoRef,src:i.src,style:tk.video,children:(0,d.jsx)("track",{kind:"captions"})})})})})]})]})}}function tN(e){let t=(0,l.ZP)(),i=(0,n.useDispatch)();return(0,d.jsx)(tL,{...e,i18n:t,setThumbnail:t=>i((0,T.Sz)(e.pinItemId,{thumbnail:t}))})}function tB(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}tO(tL,"defaultProps",{height:92,showHeading:!0});let tZ={border:{__style:{border:"dashed 0.5px rgba(51, 51, 51, 0.2)",borderRadius:.7}}},tM={__style:{padding:3}};class tF extends r.Component{constructor(...e){super(...e),tB(this,"state",{coverImgError:null}),tB(this,"logFailedAttempt",e=>{this.props.logContextEvent({event_type:7897,component:13308,aux_data:{error_message:e}})}),tB(this,"clearCoverImgError",()=>{this.setState({coverImgError:null})}),tB(this,"handleDrop",e=>{let{i18n:t,ideaPinRenamingEnabled:i}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({coverImgError:null});let r=(0,ee.Z)(e.dataTransfer);r.length>0&&(0,tD.Z)({i18n:t,ideaPinRenamingEnabled:i,file:r[0]}).then(e=>this.handleFileValidation(e))}),tB(this,"handleChange",e=>{let{i18n:t,ideaPinRenamingEnabled:i}=this.props;this.setState({coverImgError:null});let r=e.target.files&&e.target.files[0];(0,tD.Z)({i18n:t,ideaPinRenamingEnabled:i,file:r}).then(e=>this.handleFileValidation(e)),e.target.value=""}),tB(this,"handleFileValidation",e=>{let{i18n:t,ideaPinRenamingEnabled:i,setCustomVideoThumbnail:r,video:n}=this.props;switch(e.type){case"error":this.logFailedAttempt(e.id),this.setState({coverImgError:e});break;case"localVideo":{let e=(0,S.ZP)({errorId:"FILE_UNRECOGNIZED_TYPE",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e});break}case"localImage":if(Math.abs(n.width/n.height-e.width/e.height)>.001){let e=(0,S.ZP)({errorId:"VIDEO_COVER_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i});this.logFailedAttempt(e.id),this.setState({coverImgError:e})}else r(e)}})}render(){let{pinItemId:e,video:t}=this.props,{coverImgError:i}=this.state;return(0,d.jsxs)(o.xu,{display:"flex",marginStart:-2,marginEnd:-2,wrap:!0,children:[(0,d.jsx)(o.xu,{flex:"grow",paddingX:2,children:(0,d.jsx)(tN,{height:w.u1,pinItemId:e,onFocusSlider:this.clearCoverImgError,showHeading:!1,video:t})}),(0,d.jsx)(o.xu,{display:"flex",flex:"none",justifyContent:"end",paddingX:2,children:(0,d.jsx)(es.Z,{accept:eo.xl.join(","),allowMultipleFiles:!1,hasError:!!i,id:"video-cover-upload-input",onChange:this.handleChange,onDrop:this.handleDrop,children:()=>(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:tM,height:w.u1,overflow:"hidden",position:"relative",rounding:1,width:w.u1,children:(0,d.jsx)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:tZ.border,direction:"column",display:"flex",height:"100%",justifyContent:"center",children:(0,d.jsx)(o.JO,{color:i?"error":"subtle",icon:i?"alert":"arrow-circle-up",accessibilityLabel:i?this.props.i18n.bt("Upload error", "Upload error", "Error alert icon shown when image chosen is invalid", undefined, true):this.props.i18n.bt("Choose a cover image", "Choose a cover image", "Add an image for the video poster cover", undefined, true),size:18})})})})}),!!i&&(0,d.jsx)(o.xu,{column:12,paddingX:2,paddingY:3,children:(0,d.jsx)(o.xv,{color:"error",size:"100",children:i.message})})]})}}function tU(e){let{logContextEvent:t}=(0,s.v)(),i=(0,l.ZP)(),r=(0,_.Z)(),o=(0,n.useDispatch)();return(0,d.jsx)(tF,{...e,i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,setCustomVideoThumbnail:t=>o((0,T.Sz)(e.pinItemId,{customCoverImg:t}))})}function tH({pinItemId:e,video:t}){let i=(0,l.ZP)();return(0,d.jsxs)(o.xu,{children:[(0,d.jsx)(o.xu,{paddingY:3,children:(0,d.jsx)(o.xv,{size:"200",children:i.bt("Video cover image", "Video cover image", "Heading for selecting a video cover image in pin builder", undefined, true)})}),t.customCoverImg?(0,d.jsx)(tT,{coverImg:t.customCoverImg,pinItemId:e}):(0,d.jsx)(tU,{pinItemId:e,video:t})]})}var tV=i(801815),tG=i(106331);function tW(e){let t;let i=(0,l.ZP)(),{height:s,pinDraftId:c,pinItemId:u,view:h}=e,_=(0,y.Z)(),g=(0,eO.Z)(),m=(0,n.useSelector)(t=>(0,eL.jk)()(t,e).length>0),f=(0,n.useSelector)(({pinbuilder:{pinItems:e}})=>e[u].media),v=(0,n.useSelector)(({pinbuilder:{pinItems:e}})=>e[u].canvasJson),P=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[c].isAdIneligible),S=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[c].publishOption),A=(0,n.useSelector)(({pinbuilder:{pinDrafts:e}})=>e[c].type),E=(0,n.useSelector)(e=>f&&"ad_creation"===x.Z.scenario()?(0,tG.Qj)(e,c,u):null);f&&("carousel"!==A||!x.Z.enabled("carousel"))&&["localImage","assetImage","webImage"].includes(f.type)&&(f.width<w.FM||f.height<w.Mn?t=(0,ed.Z)(i.bt("We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.", "We recommend an image that is at least {{ recommendedWidth }} px x {{ recommendedHeight }} px. This image is {{ actualWidth }} px x {{ actualHeight }} px.", "pinbuilder.mediaImageView.warning", undefined, true),{recommendedWidth:w.FM,recommendedHeight:w.Mn,actualWidth:f?f.width:0,actualHeight:f?f.height:0}):f&&f.width/f.height>w.vk/w.NB&&(t=(0,ed.Z)(i.bt("We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.", "We recommend using an aspect ratio that is at least {{ recommendedWidthRatio }} width x {{ recommendedHeightRatio }} tall.", "pinbuilder.mediaView.warning", undefined, true),{recommendedWidthRatio:w.vk,recommendedHeightRatio:w.NB})));let I=!x.Z.enabled("offsitePinCreation")&&x.Z.enabled("pinQuality"),{checkExperiment:j}=(0,b.F)(),C=(0,ez.nl)(_,g)&&"ad_creation"!==x.Z.scenario()&&j("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,{campaignObjectiveType:T,allowCarouselPin:D}=(0,ea.V3)(),O=(0,n.useDispatch)(),z=(0,r.useRef)(null),R="single"===A&&"publish-immediately"===S,k=!f&&R,L=!!f&&"localImage"===f.type&&R&&x.Z.enabled("carousel")&&"collectionsTag"!==h,B="carousel"===A&&x.Z.enabled("carousel");return(0,r.useEffect)(()=>{"ad_creation"===x.Z.scenario()&&(E&&T&&!(0,tw.rt)(E,T)?z.current="objectiveType":f&&"gif"===(0,eT.Z)(f)&&(z.current="gif"),!!z.current!==P&&O((0,a.TD)(c,!0)))},[T,O,E,P,f,c]),(0,d.jsxs)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:271,children:[(0,d.jsxs)(o.xu,{direction:"column",display:"flex",height:s+w.uR,position:"relative",children:[(0,d.jsx)(o.xu,{"data-tutorial-id":"pin-builder-media-draft-view",flex:"grow",height:"100%",children:(0,d.jsx)(tA,{isEdited:!!f&&"localVideo"===f.type&&!!v&&!!(0,tV.Z)(f,v),media:f,pinDraftId:c,pinItemId:u,showCarouselControlButtons:B,showCarouselCreateButton:L})}),(0,d.jsx)(o.xu,{flex:"none",height:w.N8,marginTop:2,children:k&&(0,d.jsx)(N,{pinDraftId:c})})]}),I&&!!t&&(0,d.jsx)(o.xu,{marginTop:3,width:"100%",children:(0,d.jsx)(o.he,{iconAccessibilityLabel:i.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true),message:t,type:"warning"})}),"objectiveType"===z.current&&(0,d.jsx)(o.xu,{"data-test-id":"ad-media-type-warning-message",marginTop:3,width:"100%",children:(0,d.jsx)(o.he,{iconAccessibilityLabel:i.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true),message:i.bt("Your file type isn't compatible with your campaign objective, so it's not eligible for promotion in this campaign.", "Your file type isn't compatible with your campaign objective so it's ineligible for promotion in this campaign.", "[m10n] pinbuilder.mediaView.adWarning", undefined, true),primaryAction:{accessibilityLabel:i.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:en.C5X,label:i.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank",role:"link"},type:"warning"})}),"gif"===z.current&&(0,d.jsx)(o.xu,{"data-test-id":"ad-media-type-warning-message",marginTop:3,width:"100%",children:(0,d.jsx)(o.he,{iconAccessibilityLabel:i.bt("Warning", "Warning", "pinbuilder.common.warningBanner.icon", undefined, true),message:i.bt("Your file type isn't eligible for promotion in any campaigns.", "Your file type isn't eligible for promotion in any campaign.", "[m10n] pinbuilder.mediaView.adWarningGeneric", undefined, true),primaryAction:{accessibilityLabel:i.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),href:en.C5X,label:i.bt("Learn more", "Learn more", "pinbuilder.common.warningBanner.learnMore", undefined, true),target:"blank",role:"link"},type:"warning"})}),D&&L&&!m&&!C&&(0,d.jsx)(o.xu,{marginTop:2,children:(0,d.jsx)(tE,{pinDraftId:c})}),B&&(0,d.jsx)(o.xu,{marginTop:2,children:(0,d.jsx)(p,{pinDraftId:c})}),"tag"!==h&&"collectionsTag"!==h&&!!f&&"localVideo"===f.type&&(0,d.jsx)(o.xu,{marginTop:2,children:(0,d.jsx)(tH,{pinItemId:u,video:f})})]})}},245569:(e,t,i)=>{"use strict";i.d(t,{C:()=>E});var r=i(667294),n=i(702664),o=i(883119),s=i(785893);function l({children:e,text:t}){return(0,s.jsxs)(o.xu,{children:[(0,s.jsx)(o.xu,{"aria-live":"assertive",display:"visuallyHidden",id:"operation",children:t}),(0,s.jsx)(o.xu,{"aria-describedby":"operation",children:e})]})}var a=i(898781),d=i(755742),c=i(66699);function u({children:e,index:t,onCancel:i,onMove:n,onSelected:u,onConfirm:h,totalItems:p}){let _=(0,a.ZP)(),[g,m]=(0,r.useState)(_.bt("Press the spacebar to begin moving", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),[f,x]=(0,r.useState)(t),[b,y]=(0,r.useState)("INIT");"INIT"===b&&t!==f&&x(t);let v=()=>{m((0,c.Z)(_.bt("Position in list updated from {{index}} to {{currentIndex}}", "Position in list updated from {{index}} to {{currentIndex}}", "Assistive text describing current position in list", undefined, true),{currentIndex:f+1,index:t+1})),y("CONFIRMED"),f!==t?h():i()},P=e=>{let t=f+e;("SELECTED"===b||"MOVING"===b)&&t>=0&&t<p&&(n(t),m((0,c.Z)(_.bt("Current position in list is {{currentIndex}} of {{totalItems}}", "Current position in list is {{currentIndex}} of {{totalItems}}", "Assistive text describing current position in list", undefined, true),{totalItems:p,currentIndex:t+1})),x(t),y("MOVING"))},S=()=>{m((0,c.Z)(_.bt("List item {{index}} selected.", "List item {{index}} selected.", "Assitive text describing selected item.", undefined, true),{index:t+1})),y("SELECTED"),u(t),P(0)};return(0,s.jsx)(o.xu,{onBlur:()=>{m(_.bt("Press the spacebar to begin moving", "Press the spacebar to begin moving", "Assistive text description for how to begin assistive operation", undefined, true)),x(t),y("INIT"),i()},onKeyUp:e=>{switch(e.keyCode){case d.Z.SPACE:case d.Z.ENTER:"SELECTED"===b||"MOVING"===b?v():S();break;case d.Z.ESCAPE:break;case d.Z.LEFT:P(-1);break;case d.Z.RIGHT:P(1)}},role:"listitem",rounding:2,tabIndex:0,children:(0,s.jsx)(l,{text:g,children:e})})}var h=i(583421),p=i(345221),_=i(299295);function g(e){let{show:t}=e;return(0,s.jsx)(o.xu,{color:t?"primary":"transparent",display:"flex",flex:"grow",width:2})}function m(e){let{description:t,media:i,title:r}=e.pinItem,{height:n,src:l,width:a}=i||{};return(0,s.jsx)(o.zd,{rounding:2,height:"100%",width:"100%",children:(0,s.jsx)(o.xu,{display:"flex",direction:"column",rounding:2,children:(0,s.jsx)(o.Ee,{alt:r||t,color:"#FEFEFE",src:l,naturalHeight:n,naturalWidth:a,children:e.showOverlay?(0,s.jsx)(o.xu,{"data-test-id":"reorder-index-overlay",display:"flex",justifyContent:"end",position:"absolute",right:!0,top:!0,children:(0,s.jsx)(o.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",justifyContent:"center",margin:2,paddingX:2,paddingY:1,rounding:"circle",children:(0,s.jsx)(o.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:e.index})})}):null})})})}function f(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let x=(e,t,i)=>{let r=[...e],n=r.splice(t,1)[0];return r.splice(i,0,n),r};class b extends r.Component{constructor(...e){super(...e),f(this,"state",{pinItemIds:this.props.pinItemIds,sourceIndex:-1,targetIndex:-1}),f(this,"handleDragCancel",()=>{this.setState({sourceIndex:-1,targetIndex:-1})}),f(this,"handleDragBegin",e=>{this.setState({sourceIndex:e})}),f(this,"handleDragHover",e=>{let{targetIndex:t}=this.state;e!==t&&this.setState({targetIndex:e})}),f(this,"handleDragEnd",()=>{let{updateIds:e}=this.props,{pinItemIds:t,sourceIndex:i,targetIndex:r}=this.state,n=x(t,i,r);e(n),this.setState({pinItemIds:n,sourceIndex:-1,targetIndex:-1})})}render(){let{pinItems:e}=this.props,{sourceIndex:t,targetIndex:i}=this.state;return(0,s.jsx)(o.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",minHeight:_.DB,paddingY:6,width:"100%",children:e.map((r,n)=>(0,s.jsxs)(o.xu,{display:"flex",width:154,children:[(0,s.jsx)(g,{show:t>i&&n===i}),(0,s.jsx)(o.xu,{padding:1}),(0,s.jsx)(u,{index:n,onCancel:this.handleDragCancel,onConfirm:this.handleDragEnd,onMove:this.handleDragHover,onSelected:this.handleDragBegin,totalItems:e.length,children:(0,s.jsx)(o.zd,{rounding:2,children:(0,s.jsx)(h.Z,{index:n,onDragBegin:this.handleDragBegin,onDragEnd:this.handleDragEnd,onDragHover:this.handleDragHover,type:h.y.CarouselItem,children:(0,s.jsx)(o.xu,{display:"flex",margin:0,rounding:2,width:_.mr,children:(0,s.jsx)(m,{index:`${n+1}`,pinItem:r,showOverlay:t!==n})})})})}),(0,s.jsx)(o.xu,{padding:1}),(0,s.jsx)(g,{show:t<i&&n===i})]},`${String(r.id)}-reorder-view`))})}}let y=(0,p.Z)(h.y.CarouselItem)(b);var v=i(407043),P=i(616672),S=i(305782);function A(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends r.Component{constructor(...e){super(...e),A(this,"state",{pinItemIds:this.props.pinItemIds}),A(this,"commitChanges",()=>{let{saveChanges:e,logContextEvent:t}=this.props,{pinItemIds:i}=this.state;t({event_type:101,component:13308,element:11127}),e(i)}),A(this,"handleOnCancel",()=>{let{cancelChanges:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11128}),e()}),A(this,"updateIds",e=>{this.setState({pinItemIds:e})})}render(){let{height:e,mapPinItems:t,pinDraftId:i}=this.props,{pinItemIds:r}=this.state,n=e>_.sD?e:_.sD;return(0,s.jsxs)(o.xu,{direction:"column",display:"flex",marginBottom:10,minHeight:n,children:[(0,s.jsxs)(o.kC,{alignItems:"start",justifyContent:"end",children:[(0,s.jsx)(o.xu,{"data-test-id":"cancel-reorder-button",paddingX:3,children:(0,s.jsx)(o.zx,{onClick:this.handleOnCancel,text:this.props.i18n.bt("Cancel", "Cancel", "Button Text for cancelling an changes", undefined, true)})}),(0,s.jsx)(o.xu,{"data-test-id":"save-reorder-button",children:(0,s.jsx)(o.zx,{color:"red",onClick:this.commitChanges,text:this.props.i18n.bt("Done", "Done", "Button text for accepting changes", undefined, true)})})]}),(0,s.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginTop:10,children:[(0,s.jsxs)(o.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,s.jsx)(o.X6,{size:"500",children:this.props.i18n.bt("Organise your images", "Organize your images", "Heading for reordering images in carousel", undefined, true)}),(0,s.jsx)(o.xu,{paddingY:4,children:(0,s.jsx)(o.xv,{color:"subtle",children:this.props.i18n.bt("Drag and drop the images to change the order in which they appear in your carousel", "Drag and drop the images to change the order in which they appear in your carousel", "Text describing how to reorder images in carousel", undefined, true)})})]}),(0,s.jsx)(y,{pinDraftId:i,pinItemIds:r,pinItems:t(r),updateIds:this.updateIds})]})]})}}function E(e){let{logContextEvent:t}=(0,v.v)(),i=(0,a.ZP)(),{pinItems:r}=(0,n.useSelector)(e=>e.pinbuilder),{pinItemIds:o}=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),l=e=>e.filter(e=>!!r[e].media).map(e=>({...r[e],id:e})),d=l(o)[0].media,c=d?(0,P.Z)(d,_.mr):_.sD,u=(0,n.useDispatch)();return(0,s.jsx)(w,{...e,cancelChanges:()=>u((0,S.c8)(e.pinDraftId,"upload")),height:c,i18n:i,logContextEvent:t,mapPinItems:l,pinItemIds:o,saveChanges:t=>{u((0,S.XB)(e.pinDraftId,t)),u((0,S.c8)(e.pinDraftId,"upload"))}})}},323201:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var r=i(883119),n=i(702664),o=i(407043),s=i(898781),l=i(349700),a=i(299295),d=i(323716),c=i(388619),u=i(667294),h=i(305782),p=i(785893);function _({removeWebsiteMedia:e,media:{height:t,width:i,src:n}}){let o=(0,s.ZP)(),[l,a]=(0,u.useState)(!1);return(0,p.jsx)(r.iP,{onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:(0,p.jsxs)(r.xu,{marginStart:2,position:"relative",children:[(0,p.jsx)(r.zd,{rounding:2,width:64,height:t>=i?64:"100%",wash:!0,children:(0,p.jsx)(r.Ee,{alt:`Image from ${n}`,naturalHeight:t,naturalWidth:i,src:n})}),l&&(0,p.jsx)(r.xu,{position:"absolute",top:!0,right:!0,marginTop:-2,marginEnd:-2,rounding:"circle",color:"default",dangerouslySetInlineStyle:{__style:{border:"2px #FFFFFF solid"}},children:(0,p.jsx)(r.hU,{onClick:e,bgColor:"lightGray",icon:"cancel",iconColor:"darkGray",accessibilityLabel:o.bt("Deselect image", "Unselect image", "pinBuilder.pinDraftFooterScrapeView.pinDraftFooterScrapeViewItem.unselect.text", undefined, true),size:"xs"})})]})})}function g(e){let t=(0,n.useDispatch)();return(0,p.jsx)(_,{...e,removeWebsiteMedia:()=>t((0,h.YY)(e.pinDraftId,e.media.src))})}function m({selected:e,pinDraftId:t,onAddToPin:i,width:n,marginStart:u}){let{logContextEvent:h}=(0,o.v)(),_=(0,s.ZP)();return e.length>0?(0,p.jsxs)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{boxShadow:"0px -2px 10px -8px #000000"}},display:"flex",flex:"none",height:96,justifyContent:"between",marginStart:null!=u?u:-10,paddingX:4,width:n||a.of,children:[(0,p.jsx)(r.xu,{overflow:"scrollX",padding:2,children:(0,p.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:e.map(e=>(0,p.jsx)(g,{media:e,pinDraftId:t},e.src))})}),(0,p.jsx)(r.xu,{"data-test-id":"add-pins-from-search-container",marginStart:2,children:(0,p.jsx)(r.zx,{color:"red",onClick:()=>{h({event_type:101,component:13308,element:10970});let{tab:e}=(0,c.Z)({url:(0,d.Z)()});i(e===a.ro?"IDEA_PIN":"PIN")},text:(0,l.nk)(_.nbt(["Add {{ numPins }} Pin", "Add {{ numPins }} Pins"], e.length, "pinBuilder.pinDraftBodyScrapeView.pinDraftFooterScrapeView.addPinButton.text", true),{numPins:e.length}).join("")})})]}):null}function f(e){let t=(0,n.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteMedia),i=(0,n.useDispatch)();return(0,p.jsx)(m,{...e,onAddToPin:t=>{i((0,h.q0)(e.pinDraftId,"upload",t))},selected:t})}var x=i(313580),b=i(665866);function y({pinDraftId:e,footerWidth:t,footerMarginStart:i}){let n=b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner")?a.gU:a.sD+a.uR;return(0,p.jsxs)(r.kC,{alignItems:"stretch",direction:"column",flex:"grow",height:n,justifyContent:"start",children:[(0,p.jsx)(x.Z,{pinDraftId:e}),(b.Z.enabled("multi_pin")||b.Z.enabled("multi_pin_pinner"))&&(0,p.jsx)(f,{marginStart:i,pinDraftId:e,width:t})]})}},313580:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var r=i(702664),n=i(667294),o=i(883119),s=i(444445),l=i(938999),a=i(305782),d=i(785893);class c extends n.Component{constructor(...e){var t,i,r;super(...e),t="handleClick",i=()=>{let{addWebsiteMedia:e,clearWebsiteMedia:t,removeWebsiteMedia:i,selected:r}=this.props;r?i():(t(),e())},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{selected:e,media:{height:t,width:i,src:r}}=this.props;return(0,d.jsx)(l.Z,{onClick:this.handleClick,selected:e,children:(0,d.jsx)(o.zd,{rounding:2,wash:!0,width:s.yF,children:(0,d.jsx)(o.Ee,{alt:`Image from ${r}`,naturalHeight:t,naturalWidth:i,src:r})})})}}function u(e){let{websiteMedia:t}=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),i=t.map(e=>e.src).includes(e.media.src),n=(0,r.useDispatch)();return(0,d.jsx)(c,{...e,addWebsiteMedia:()=>n((0,a.dj)(e.pinDraftId,e.media)),clearWebsiteMedia:()=>n((0,a.hb)(e.pinDraftId)),removeWebsiteMedia:()=>n((0,a.YY)(e.pinDraftId,e.media.src)),selected:i})}var h=i(407043),p=i(898781),_=i(665866),g=i(773285),m=i(780280),f=i(66699),x=i(67347);function b({media:{src:e,height:t,width:i},pinDraftId:r,selected:s,disabled:l,addWebsiteMedia:a,removeWebsiteMedia:c}){let{logContextEvent:u}=(0,h.v)(),{checkExperiment:b}=(0,g.F)(),y=(0,p.ZP)(),{isRTL:v}=(0,m.B)(),[P,S]=(0,n.useState)(!1),{anyEnabled:A}=b("web_set_crossorigin_anonymous"),[w,E]=(0,n.useState)(A?"anonymous":void 0),I=_.Z.enabled("offsite_pin_creation_multi_select")?"transparent":"default";return(0,d.jsx)(o.iP,{onMouseEnter:()=>{S(!0)},onMouseLeave:()=>{S(!1)},onTap:()=>{s?(c(),u({event_type:8722,component:13308,element:12229,aux_data:{pin_draft_id:r,src_url:e}})):!l&&(a(),u({event_type:8721,component:13308,element:12229,aux_data:{pin_draft_id:r,src_url:e}}),_.Z.enabled("offsite_pin_creation_multi_select")&&(0,x.nP)("offsite_pin_creation.select_image",{sampleRate:1,tags:{type:"multi_pin"}}))},children:(0,d.jsx)(o.xu,{color:P?"secondary":"transparent",dangerouslySetInlineStyle:{__style:{padding:"2px"}},rounding:5,children:(0,d.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{padding:"2px",cursor:"pointer",boxShadow:s?"0 0 0 2px #000000":"none",borderRadius:"18px",outline:"none"}},"data-test-id":"image-from-search-container",children:(0,d.jsxs)(o.zd,{rounding:4,wash:!0,children:[(0,d.jsx)(o.Ee,{alt:(0,f.Z)(s?y.bt("Deselect image from {{imageSource}}", "Deselect image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Deselect", undefined, true):y.bt("Select image from {{imageSource}}", "Select image from {{imageSource}}", "PinDraftMultiSelectGridItem.ImageLabel.Select", undefined, true),{imageSource:e}),crossOrigin:w,naturalHeight:t,naturalWidth:i,onError:()=>E(void 0),src:e}),(0,d.jsx)(o.xu,{bottom:!0,color:s?"dark":I,height:24,left:!!v,marginBottom:3,marginEnd:3,padding:1,position:"absolute",right:!v,rounding:2,width:24,children:s&&(0,d.jsx)(o.JO,{accessibilityLabel:y.bt("Selected", "Selected", "pinBuilder.pinDraftInputScrapeGrid.pinDraftInputScrapeGriditem.selected.text", undefined, true),color:"inverse",icon:"check"})})]})})})})}function y(e){let{websiteMedia:t}=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),i=t.map(e=>e.src).includes(e.media.src),n=t.length>=10,o=(0,r.useDispatch)();return(0,d.jsx)(b,{...e,addWebsiteMedia:()=>o((0,a.dj)(e.pinDraftId,e.media)),disabled:n,removeWebsiteMedia:()=>o((0,a.YY)(e.pinDraftId,e.media.src)),selected:i})}var v=i(299295);function P(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class S extends n.Component{constructor(...e){super(...e),P(this,"saveScrollContainer",e=>{this.scrollContainer=e}),P(this,"renderItem",({data:e})=>{let{pinDraftId:t}=this.props;return _.Z.enabled("multi_pin")||_.Z.enabled("multi_pin_pinner")||_.Z.enabled("offsite_pin_creation_multi_select")?(0,d.jsx)(y,{media:e,pinDraftId:t}):(0,d.jsx)(u,{media:e,pinDraftId:t})})}getColumnWidth(){return _.Z.enabled("multi_pin")||_.Z.enabled("multi_pin_pinner")?v.eZ:s.yF}getGutterWidth(){return _.Z.enabled("multi_pin")||_.Z.enabled("multi_pin_pinner")?s.lX:_.Z.enabled("offsite_pin_creation_multi_select")?s.nW:s.P2}render(){let{errorMessage:e,media:t,showSpinner:i}=this.props,{scrollContainer:r}=this;return(0,d.jsxs)(o.xu,{ref:this.saveScrollContainer,column:12,height:"100%",overflow:"auto",padding:_.Z.enabled("multi_pin")||_.Z.enabled("multi_pin_pinner")?0:2,width:v.km,children:[(0,d.jsx)(o.$j,{accessibilityLabel:this.props.i18n.bt("Loading images from URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),r&&t.length>0?(0,d.jsx)(o.Rk,{columnWidth:this.getColumnWidth(),gutterWidth:this.getGutterWidth(),items:t,layout:_.Z.enabled("offsite_pin_creation_multi_select")?"flexible":"basic",minCols:_.Z.enabled("offsite_pin_creation_multi_select")?3:s.yc,renderItem:({data:e})=>this.renderItem({data:e}),scrollContainer:()=>r}):e&&(0,d.jsx)(o.xu,{"data-test-id":"pinbuilder-pin-draft-input-scrape-grid-error-message",children:(0,d.jsx)(o.xv,{align:"center",color:"subtle",children:(0,d.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]})}}function A(e){let t=(0,p.ZP)();return(0,d.jsx)(S,{...e,i18n:t})}var w=i(122097);function E({pinDraftId:e,websiteLink:t}){return(0,d.jsx)(w.Z,{source:"pin_create",url:t,children:({images:i,error:r,loading:n})=>{let o=[...i];return o.forEach(e=>Object.assign(e,{src:e.url,type:"webImage",sourceURL:t})),(0,d.jsx)(A,{errorMessage:r,media:o,pinDraftId:e,showSpinner:n})}},t)}function I(e){let t=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteLink),i=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].websiteDefaultImageUrl);return(0,d.jsx)(E,{...e,websiteDefaultImageUrl:i,websiteLink:t})}},854156:(e,t,i)=>{"use strict";i.d(t,{Z:()=>M});var r=i(702664),n=i(883119),o=i(469823),s=i(667294),l=i(172045),a=i(407043),d=i(898781),c=i(349700),u=i(299295),h=i(305782),p=i(502890),_=i(277348),g=i(785893);class m extends s.PureComponent{constructor(...e){var t,i,r;super(...e),t="handleTouch",i=()=>{let{mode:e,saveTaggedObject:t,logContextEvent:i}=this.props;i({event_type:101,component:13308,element:10911,aux_data:{method:e}}),t()},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{image:e}=this.props,{height:t,width:i,url:r}=e;return(0,g.jsxs)(s.Fragment,{children:[(0,g.jsx)(n.iP,{onTap:this.handleTouch,rounding:2,children:(0,g.jsx)(n.zd,{rounding:2,wash:!0,width:u.yC,children:(0,g.jsx)(n.Ee,{alt:`Image from ${null!=r?r:""}`,naturalHeight:null!=t?t:1,naturalWidth:null!=i?i:1,src:null!=r?r:""})})}),(0,g.jsx)(n.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,g.jsx)(n.xv,{align:"center",children:(0,c.nk)(this.props.i18n.bt("{{ height }} × {{ width }}", "{{ height }} × {{ width }}", "Dimensions of an image separated by multiplication sign", undefined, true),{height:t,width:i})})})]})}}function f(e){let{logContextEvent:t}=(0,a.v)(),i=(0,d.ZP)(),n=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode),o=(0,r.useDispatch)();return(0,g.jsx)(m,{...e,i18n:i,logContextEvent:t,mode:n,saveTaggedObject:()=>{let t=e.pinId||(0,l.Z)();o((0,_.Dn)(e.pinTagId,t,{media:e.image})),o((0,p.C_)(e.pinItemId,null)),o((0,h.c8)(e.pinDraftId,"tag"))}})}class x extends s.Component{constructor(...e){var t,i,r;super(...e),t="saveScrollContainer",i=e=>{this.scrollContainer=e},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{errorMessage:e,images:t,showSpinner:i}=this.props,{scrollContainer:r}=this;return(0,g.jsx)(n.xu,{ref:this.saveScrollContainer,column:12,height:"100%",children:(0,g.jsxs)(n.xu,{padding:2,children:[(0,g.jsx)(n.$j,{accessibilityLabel:this.props.i18n.bt("Loading images from URL...", "Loading images from URL...", "loading message", undefined, true),show:i}),e&&(0,g.jsx)(n.xv,{color:"error",size:"200",children:e}),r&&t.length>0&&(0,g.jsx)(n.xu,{"data-test-id":"pin-tag-grid",children:(0,g.jsx)(n.Rk,{columnWidth:u.yC,gutterWidth:24,items:t,minCols:2,renderItem:({data:e})=>(0,g.jsx)(f,{image:e,pinDraftId:this.props.pinDraftId,pinId:this.props.pinId,pinItemId:this.props.pinItemId,pinTagId:this.props.pinTagId}),scrollContainer:()=>r})})]})})}}function b(e){let t=(0,d.ZP)();return(0,g.jsx)(x,{...e,i18n:t})}var y=i(122097),v=i(954931),P=i(131555);class S extends s.PureComponent{constructor(...e){var t,i,r;super(...e),t="handleError",i=()=>{let{mode:e,logContextEvent:t}=this.props;t({event_type:7580,component:13308,aux_data:{method:e}})},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{closeTagGrid:e,pinDraftId:t,pinItemId:i,pinTagId:r,link:o}=this.props,s=(0,v.Z)(o)?/\/pin\/([\w-]+)\/?$/.exec(o):null;return(0,g.jsxs)(n.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,g.jsxs)(n.xu,{alignItems:"center",display:"flex",flex:"none",marginBottom:6,children:[(0,g.jsxs)(n.xu,{flex:"grow",children:[(0,g.jsx)(n.xu,{marginBottom:1,children:(0,g.jsx)(n.X6,{size:"400",children:this.props.i18n.bt("Pick an image for this product", "Pick an image for this product", "Instructions to select an image to add as a tagged product to a Pin tag", undefined, true)})}),(0,g.jsx)(n.xv,{lineClamp:1,size:"200",children:(0,c.nk)(this.props.i18n.bt("Images from {{ link }}", "Images from {{ link }}", "Text displaying the website link where images were collected", undefined, true),{link:o})})]}),(0,g.jsx)(n.xu,{flex:"none",children:(0,g.jsx)(n.hU,{accessibilityLabel:this.props.i18n.bt("Cancel", "Cancel", "Button to cancel selecting products for a Pin tag", undefined, true),icon:"cancel",iconColor:"gray",onClick:e,size:"md"})})]}),(0,g.jsx)(n.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",overflow:"auto",children:s?(0,g.jsx)(P.Z,{fieldSetKey:"images_only_item",pinId:s[1],children:({pin:e,error:n,loading:o})=>(0,g.jsx)(b,{errorMessage:n,images:e?[e.images["474x"]]:[],pinDraftId:t,pinId:s[1],pinItemId:i,pinTagId:r,showSpinner:o})}):(0,g.jsx)(y.Z,{onError:this.handleError,source:"product_tags",url:o,children:({images:e,error:n,loading:o})=>(0,g.jsx)(b,{errorMessage:n,images:e,pinDraftId:t,pinItemId:i,pinTagId:r,showSpinner:o})})})]})}}function A(e){let{logContextEvent:t}=(0,a.v)(),i=(0,d.ZP)(),{selectedPinTagId:n}=(0,r.useSelector)(t=>t.pinbuilder.pinItems[e.pinItemId]),o=(0,r.useSelector)(e=>n?e.pinbuilder.pinTags[n].link:""),s=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId].mode),l=(0,r.useDispatch)();return(0,g.jsx)(S,{...e,closeTagGrid:()=>l((0,h.c8)(e.pinDraftId,"tag")),i18n:i,link:o,logContextEvent:t,mode:s,pinTagId:n||""})}var w=i(258821),E=i(665866);function I({disabled:e,selectPinTag:t}){let i=(0,d.ZP)(),r=E.Z.enabled("shop_the_pin"),o=(0,g.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:r?u.MN:u.Bj,justifyContent:"center",rounding:2,width:r?u.MN:u.Bj,children:(0,g.jsx)(n.JO,{accessibilityLabel:i.bt("Add product", "Add product", "Accessibility label for adding a new product to a tag", undefined, true),icon:"add",color:"subtle",size:24})});return e?o:(0,g.jsx)(n.iP,{onTap:t,rounding:2,children:o})}function j(e){let t=(0,r.useDispatch)();return(0,g.jsx)(I,{...e,selectPinTag:()=>t((0,p.C_)(e.pinItemId,e.pinTagId))})}var C=i(957025);let T={circle:{__style:{border:"solid 2px #efefef"}},overlay:{__style:{opacity:.4}}};function D(e){let t=(0,d.ZP)(),{isSelected:i,pinItemId:r,pinTagId:o,pinTagKey:s,taggedObjectIds:l}=e,a=l.length,u=!1===i;return(0,g.jsxs)(n.xu,{column:12,dangerouslySetInlineStyle:u?T.overlay:void 0,children:[(0,g.jsxs)(n.xu,{alignItems:"center",display:"flex",marginBottom:2,children:[(0,g.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:T.circle,display:"flex",height:24,justifyContent:"center",rounding:"circle",width:24,children:(0,g.jsx)(n.xv,{size:"100",weight:"bold",children:s})}),(0,g.jsx)(n.xu,{paddingX:2,children:(0,g.jsx)(n.xv,{size:"200",weight:"bold",children:(0,c.nk)(t.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], a, "Text displaying the total number of products across a single tag on a Pin", true),{numProducts:a})})})]}),(0,g.jsxs)(n.xu,{display:"flex",marginEnd:-1,marginStart:-1,wrap:!0,children:[l.map(e=>(0,g.jsx)(n.xu,{padding:1,children:(0,g.jsx)(w.Z,{disabled:u,pinTagId:o,taggedObjectId:e})},e)),(0,g.jsx)(n.xu,{padding:1,children:(0,g.jsx)(j,{disabled:u,pinItemId:r,pinTagId:o})})]})]})}function O(e){let t=(0,C.A$)(),{selectedPinTagId:i}=(0,r.useSelector)(t=>t.pinbuilder.pinItems[e.pinItemId]),n=i?i===e.pinTagId:null,o=(0,r.useSelector)(i=>t(i,e));return(0,g.jsx)(D,{...e,isSelected:n,taggedObjectIds:o})}var z=i(948618),R=i(562501);function k({numProducts:e,pinItemId:t,pinTagIds:i}){let r=(0,d.ZP)(),o=i.length;return(0,g.jsxs)(n.xu,{column:12,direction:"column",display:"flex",height:"100%",children:[(0,g.jsxs)(n.xu,{flex:"none",marginBottom:6,children:[(0,g.jsx)(n.xu,{marginBottom:1,children:(0,g.jsx)(n.X6,{size:"400",children:r.bt("Products tagged", "Products tagged", "Heading for grid of products tagged to one Pin tag", undefined, true)})}),(0,g.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,g.jsx)(n.xv,{size:"200",children:(0,c.nk)(r.nbt(["{{ numTags }} tag", "{{ numTags }} tags"], o, "Text displaying the total number of tags on a Pin", true),{numTags:o})}),(0,g.jsx)(z.Z,{}),(0,g.jsx)(n.xv,{size:"200",children:(0,c.nk)(r.nbt(["{{ numProducts }} product", "{{ numProducts }} products"], e, "Text displaying the total number of products across all tags on a Pin", true),{numProducts:e})})]})]}),(0,g.jsx)(n.kC,{alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"start",overflow:"auto",children:i.map((e,i)=>(0,g.jsx)(n.xu,{marginBottom:5,children:(0,g.jsx)(O,{pinItemId:t,pinTagId:e,pinTagKey:i+1})},e))})]})}function L(e){let t=(0,R.vd)(),i=(0,R.jk)(),n=(0,r.useSelector)(t=>i(t,e).length),o=(0,r.useSelector)(i=>t(i,e));return(0,g.jsx)(k,{...e,numProducts:n,pinTagIds:o})}var N=i(616672);let B={__style:{paddingBottom:u.uR}};function Z({height:e,pinDraftId:t,pinItemId:i,view:r,paddingX:s=5}){return(0,g.jsxs)(n.xu,{dangerouslySetInlineStyle:B,direction:"row",display:"flex",children:[(0,g.jsx)(n.xu,{paddingX:s,children:(0,g.jsx)(o.Z,{height:e,pinDraftId:t,pinItemId:i})}),(0,g.jsxs)(n.xu,{flex:"grow",height:e,minHeight:u.sD,paddingX:5,width:"100%",children:["tag"===r&&(0,g.jsx)(L,{pinItemId:i}),"selectTag"===r&&(0,g.jsx)(A,{pinDraftId:t,pinItemId:i})]})]})}function M(e){let{pinItemIds:t}=(0,r.useSelector)(t=>t.pinbuilder.pinDrafts[e.pinDraftId]),{media:i}=(0,r.useSelector)(e=>e.pinbuilder.pinItems[t[0]]),n=i?(0,N.Z)(i):u.sD;return(0,g.jsx)(Z,{...e,height:n})}},258821:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var r=i(702664),n=i(883119),o=i(407043),s=i(898781),l=i(299295),a=i(665866),d=i(925797),c=i(984268),u=i(277348),h=i(785893);function p({disabled:e,media:t,removeTaggedObject:i,pin:r}){let{logContextEvent:u}=(0,o.v)(),p=(0,s.ZP)(),{height:_,width:g,url:m}=t||{},f=a.Z.enabled("shop_the_pin"),x=r&&"pin"===r.type;return(0,h.jsxs)(n.xu,{"data-test-id":"tagged-item",position:"relative",rounding:2,children:[(0,h.jsx)(n.zd,{height:f?l.MN:l.Bj,rounding:2,wash:!0,width:f?l.MN:l.Bj,children:(0,h.jsx)(n.Ee,{alt:`Image from ${null!=m?m:""}`,fit:"cover",naturalHeight:null!=_?_:1,naturalWidth:null!=g?g:1,src:null!=m?m:""})}),f&&x&&(0,h.jsxs)(n.xu,{children:[r&&(0,h.jsx)(c.dV,{input:{type:"deprecated",data:r},children:e=>!!e&&(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.xu,{display:"flex",paddingY:1,children:(0,h.jsx)(d.Z,{icon:"tag",text:e})})})}),r&&x&&(0,h.jsx)(c.v2,{input:{type:"deprecated",data:r},children:e=>!!e&&(0,h.jsx)(n.xu,{width:f?l.MN:l.Bj,children:(0,h.jsx)(n.xv,{overflow:"breakWord",size:"200",weight:"bold",children:e})})})]}),(0,h.jsx)(n.xu,{"data-test-id":"remove-tagged-item-button",left:!0,margin:2,position:"absolute",top:!0,children:(0,h.jsx)(n.hU,{accessibilityLabel:p.bt("Remove tagged product", "Remove tagged product", "button to remove tagged product", undefined, true),bgColor:"white",icon:"cancel",iconColor:"gray",onClick:e?void 0:()=>{i(),u({event_type:101,component:13308,element:12127})},size:"xs"})})]})}function _(e){let t=(0,r.useSelector)(t=>t.pinbuilder.taggedObjects[e.taggedObjectId].media||null),i=(0,r.useSelector)(t=>t.pinbuilder.taggedObjects[e.taggedObjectId].pin||null),n=(0,r.useDispatch)();return(0,h.jsx)(p,{...e,media:t,pin:i,removeTaggedObject:()=>{n((0,u.Go)(e.pinTagId,e.taggedObjectId)),n((0,u.Cf)(e.pinTagId,"edited"))}})}},344948:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var r=i(702664),n=i(883119),o=i(237056),s=i(407043),l=i(898781),a=i(299295),d=i(665866),c=i(773285),u=i(414327),h=i(19121),p=i(717615),_=i(231947),g=i(305782),m=i(502890),f=i(838548),x=i(785893);function b({pinDraftId:e,pinItemId:t}){let{logContextEvent:i}=(0,s.v)(),{checkExperiment:b}=(0,c.F)(),y=(0,l.ZP)(),v=(0,o.Z)(),P=(0,h.Z)(),S=P.isAuth?P.id:"",A=P.isAuth?P.country:"",w=P.isAuth&&P.isPartner,{anyEnabled:E}=b("web_m10n_business_access_orbac_www"),I=(0,p.Z)(),j=E?(0,_.lJ)(P,I):"",C=(0,r.useDispatch)(),T=()=>{C((0,m.C_)(t,null)),C((0,g.c8)(e,"upload")),C((0,m.b0)(t))},D=()=>{C((0,m.C_)(t,null)),C((0,m.b0)(t)),C((0,f.Z)({pinDraftId:e,userId:S,orbacSubjectId:j,country:A,isPartner:w,i18n:y,logContextEvent:i,ideaPinRenamingEnabled:v})),C((0,u.jB)("PinResource"))},O=(0,r.useSelector)(({pinbuilder:t})=>"selectTag"===t.pinDrafts[e].view),z=(0,r.useSelector)(({pinbuilder:t})=>"edit"===t.pinDrafts[e].mode),R=(0,r.useSelector)(({pinbuilder:e})=>e.pinItems[t].tagError),k=(0,r.useSelector)(({pinbuilder:e})=>e.closeupImageSignature),L=(0,r.useSelector)(({pinbuilder:e})=>e.entryPoint),N=(0,_.nl)(P,E?I:{})&&"ad_creation"!==d.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,B=N?()=>{i({event_type:101,component:13308,element:10973,aux_data:{...L||k?{entry_point_source:L,image_signature:k}:{}}}),D()}:D;return(0,x.jsxs)(n.kC,{alignItems:"stretch",justifyContent:R?"between":"end",children:[!!R&&(0,x.jsx)(n.xu,{alignItems:"center",display:"flex",paddingX:5,children:(0,x.jsx)(n.xu,{width:a.LM,children:(0,x.jsx)(n.xv,{color:"error",size:"200",children:R})})}),(0,x.jsx)(n.zx,{color:"red",disabled:O,name:"pin-draft-header-tag-view-done",onClick:z?B:()=>{i({event_type:101,component:13308,element:12128}),T()},text:y.bt("Done", "Done", "Button to save changes to the tagging flow.", undefined, true)})]})}},430957:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var r=i(667294),n=i(702664),o=i(82596),s=i(407043),l=i(858472),a=i(938999),d=i(474394),c=i(490072),u=i(785893);let h=l.x7;class p extends r.Component{constructor(...e){var t,i,r;super(...e),t="handleClick",i=()=>{let{deselectPinDraft:e,inSelectMode:t,pinDraftId:i,pinDraftRefs:r,published:n,selected:o,selectPinDraft:s,logContextEvent:l}=this.props;l({event_type:101,component:13395,element:11330});let a=r.get(i);a&&a.scrollIntoView({behavior:"smooth",block:"start"}),t&&!n&&(o?e():s())},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{pinDraftId:e,published:t,selected:i,selectedColor:r,width:n,height:s,hasError:l,shouldHighlightErrors:d}=this.props,c=l&&d;return(0,u.jsx)(a.Z,{color:c?h:r,onClick:this.handleClick,selected:c||i,children:(0,u.jsx)(o.Z,{collapsed:t,height:s,pinDraftId:e,type:"thumbnail",width:n})})}}function _(e){let{logContextEvent:t}=(0,s.v)(),i=(0,n.useDispatch)(),r=(0,n.useSelector)(({pinbuilder:{selectedPinDraftIds:e}})=>e.length>0),o=(0,n.useSelector)(({pinbuilder:{selectedPinDraftIds:t}})=>t.includes(e.pinDraftId)),l=(0,n.useSelector)(({pinbuilder:{pinDrafts:t}})=>"succeeded"===t[e.pinDraftId].status),a=(0,n.useSelector)(({pinbuilder:t})=>(0,c.Fh)(t,e));return(0,u.jsx)(p,{...e,deselectPinDraft:()=>i((0,d.deselectPinBuilderPinDraft)(e.pinDraftId)),hasError:a,inSelectMode:r,logContextEvent:t,published:l,selected:o,selectPinDraft:()=>i((0,d.selectPinBuilderPinDraft)(e.pinDraftId))})}},82596:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var r=i(702664),n=i(898781),o=i(795067),s=i(883119),l=i(785893);function a({type:e,height:t,width:i}){let r=(0,n.ZP)();return(0,l.jsx)(s.xu,{alignItems:"center",color:"lightWash",display:"flex",height:t||("thumbnail"===e?60:"100%"),justifyContent:"center",rounding:2,width:i||("thumbnail"===e?40:"100%"),children:(0,l.jsx)(s.JO,{accessibilityLabel:r.bt("Empty Pin", "Empty Pin", "Label for Pin draft with no image", undefined, true),color:"subtle",icon:"camera-roll",size:16})})}var d=i(667294),c=i(299295),u=i(616672);let h={video:{height:"100%",objectFit:"cover",width:"100%"},wash:{__style:{opacity:.3}},container:{__style:{transition:`height 250ms ${c.rc}`}}};class p extends d.Component{constructor(...e){var t,i,r;super(...e),t="videoRef",i=(0,d.createRef)(),(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){let{media:e}=this.props;"localVideo"===e.type&&this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}componentDidUpdate(e){let{media:t}=e,{media:i}=this.props;"localVideo"===i.type&&t.thumbnail!==i.thumbnail&&this.videoRef.current&&(this.videoRef.current.currentTime=i.thumbnail)}render(){let{collapsed:e,media:t,text:i,type:r,width:n=40}=this.props,{customCoverImg:o}="localVideo"===t.type?t:{},a="square"===r?"100%":n,d=e?4:(0,u.Z)(o||t,n);return(0,l.jsxs)(s.xu,{rounding:2,width:a,height:"square"===r?"100%":d,position:"relative",dangerouslySetInlineStyle:h.container,children:[(0,l.jsx)(s.xu,{column:12,height:"100%",dangerouslySetInlineStyle:e?h.wash:void 0,children:(0,l.jsxs)(s.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:["localVideo"===t.type&&o&&(0,l.jsx)(s.Ee,{alt:this.props.i18n.bt("Video Pin", "Video Pin", "Label for Pin draft with an video", undefined, true),fit:"square"===r?"cover":void 0,naturalHeight:o.height,naturalWidth:o.width,src:o.src}),"localVideo"===t.type&&!o&&(0,l.jsx)("video",{muted:!0,ref:this.videoRef,src:t.src,style:h.video,children:(0,l.jsx)("track",{kind:"captions"})}),("localImage"===t.type||"webImage"===t.type)&&(0,l.jsx)(s.Ee,{alt:this.props.i18n.bt("Image Pin", "Image Pin", "Label for Pin draft with an image", undefined, true),fit:"square"===r?"cover":void 0,naturalHeight:t.height,naturalWidth:t.width,src:t.src})]})}),("localVideo"===t.type||!!i)&&(0,l.jsxs)(s.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center",children:["localVideo"===t.type&&(0,l.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Video Pin", "Video Pin", "Label for Pin draft with an video", undefined, true),color:"inverse",icon:"video-camera"}),!!i&&(0,l.jsx)(s.xv,{color:"inverse",size:"100",weight:"bold",children:i})]})]})}}function _(e){let t=(0,n.ZP)();return(0,l.jsx)(p,{...e,i18n:t})}function g({collapsed:e,media:t,text:i,type:r,height:n,width:o}){return t?"localImage"===t.type||"webImage"===t.type||"localVideo"===t.type?(0,l.jsx)(_,{collapsed:e,media:t,text:i,type:r,width:o}):null:(0,l.jsx)(a,{height:n,type:r,width:o})}function m(e){let t=(0,n.ZP)(),{pinDrafts:i,pinItems:s,storyPinItems:a}=(0,r.useSelector)(e=>e.pinbuilder),{pinItemIds:d,pinItemIndex:c,type:u}=i[e.pinDraftId],h=d[c],{media:p}="story"===u?a[h]:s[h],_="carousel"===u?`${c+1}/${d.filter(e=>"story"===u?!!a[e].media:!!s[e].media).length}`:p&&"gif"===(0,o.Z)(p)?t.bt("GIF", "GIF", "Overlay text for GIF images", undefined, true):void 0;return(0,l.jsx)(g,{...e,i18n:t,media:p,text:_})}},248740:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(299487),o=i(407043),s=i(385740),l=i(124237),a=i(898781),d=i(780280),c=i(616693),u=i(785893);function h({isExtensionInstalled:e=!1,isFromPinBuilder:t=!1,onInstall:i=()=>{},onHide:h=()=>{},onMounted:p=()=>{}}){let{logContextEvent:_}=(0,o.v)(),g=(0,a.ZP)(),{userAgent:{browserName:m}}=(0,d.B)(),f=(0,s.SU)();(0,r.useEffect)(()=>(_({event_type:13,view_type:438,component:13588}),p(),()=>{_({event_type:13,view_type:f.viewType,view_parameter:f.viewParameter,view_data:f.viewData})}),[]);let x=()=>{e?l.Z.showError(g.bt("Oops! You already have the browser button.", "Oops! You already have the browser button.", " - ", undefined, true)):n.Z.handleExtensionInstall(m,()=>{i()})};return(0,u.jsx)(c.Z,{installClick:()=>{x(),_({event_type:101,component:7,element:456})},isExtensionInstalled:!t&&e,isFromPinBuilder:!!t,skipClick:()=>{h()}})}},709773:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var r=i(667294),n=i(616550),o=i(883119),s=i(302667),l=i(215292),a=i(785893);let d={boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0};function c({accessibilityLabel:e,buttonColor:t,buttonText:i,handleClick:r,icon:n}){return(0,a.jsx)(l.q,{children:({active:s,focused:l,hovered:c,onBlur:u,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m})=>{let f={borderRadius:24};return c&&(f={...f,backgroundColor:"primary"===t?"rgb(216,0,33)":"rgb(226, 226, 226)"}),s&&(f={...f,backgroundColor:"primary"===t?"rgb(207,0,31)":"rgb(218, 218, 218)"}),l&&(f={...f,...d}),(0,a.jsx)("button",{"aria-label":e,onBlur:u,onClick:r,onFocus:h,onMouseDown:p,onMouseEnter:_,onMouseLeave:g,onMouseUp:m,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"},children:(0,a.jsx)(o.xu,{color:t,dangerouslySetInlineStyle:{__style:f},rounding:2,children:(0,a.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{padding:"10px 14px"}},display:"flex",minHeight:40,children:["share"===n&&(0,a.jsxs)(o.xu,{children:[(0,a.jsx)(o.JO,{accessibilityLabel:"",color:"default",icon:"share",size:18}),(0,a.jsx)(o.xu,{paddingX:3})]}),(0,a.jsx)(o.xv,{align:"center",color:"primary"===t?"light":"default",weight:"bold",children:i})]})})})}})}var u=i(306775),h=i(407043),p=i(898781),_=i(349700),g=i(780280),m=i(784590),f=i(19121),x=i(717615),b=i(231947),y=i(65057),v=i(580189),P=i(850760),S=i(818747);function A(e){let{color:t,description:i,imageUrl:r,link:n}=e;return(0,a.jsx)(o.xu,{alignItems:"center",justifyContent:"center",padding:2,display:"flex",children:!r&&t&&n?(0,a.jsx)(o.xu,{width:236,children:(0,a.jsx)(S.Z,{color:t,description:i,url:n})}):(0,a.jsx)(o.zd,{rounding:2,width:236,children:(0,a.jsx)("img",{alt:i,src:r})})})}var w=i(616672),E=i(152028);let I={width:"100%"};class j extends r.Component{constructor(...e){var t,i,n;super(...e),t="videoRef",i=(0,r.createRef)(),(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){let{video:e}=this.props;this.videoRef.current&&(this.videoRef.current.currentTime=e.thumbnail)}render(){let{video:e}=this.props,t=(0,w.Z)(e.customCoverImg||e,236);return(0,a.jsx)(o.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:(0,a.jsxs)(o.xu,{height:t,position:"relative",rounding:2,width:236,children:[(0,a.jsx)(o.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:e.customCoverImg?(0,a.jsx)(o.Ee,{alt:e.customCoverImg.name,naturalHeight:e.customCoverImg.height,naturalWidth:e.customCoverImg.width,src:e.customCoverImg.src}):(0,a.jsx)("video",{muted:!0,src:e.src,ref:this.videoRef,style:I,children:(0,a.jsx)("track",{kind:"captions"})})}),(0,a.jsx)(o.xu,{bottom:!0,left:!0,right:!0,top:!0,alignItems:"end",display:"flex",justifyContent:"start",padding:2,position:"absolute",children:(0,a.jsx)(E.Z,{duration:1e3*e.duration})})]})})}}class C extends r.PureComponent{renderPinCreateSuccessImage(){let{color:e,description:t,imageUrl:i,link:r,websiteMedia:n}=this.props;return n&&n.length>1?(0,a.jsx)(o.xu,{maxHeight:540,overflow:"scrollY",padding:8,children:(0,a.jsx)(o.Rk,{renderItem:({data:e})=>(0,a.jsx)(A,{description:t,imageUrl:e.src}),items:n,minCols:3,columnWidth:160})}):(0,a.jsx)(A,{color:e,description:t,imageUrl:i,link:r})}render(){let{relatedBoard:e}=this.props;if(!e.isLoaded)return(0,a.jsx)(o.xu,{minHeight:250,children:(0,a.jsx)(o.$j,{accessibilityLabel:this.props.i18n.bt("See suggested board", "See suggested board", "suggested board to follow after pinnning", undefined, true),show:!0})});if(e.data&&!e.data.length){let{video:e}=this.props;return(0,a.jsx)(o.xu,{marginTop:-8,paddingY:8,children:e?(0,a.jsx)(j,{video:e}):this.renderPinCreateSuccessImage()})}return null}}function T(e){let t=(0,p.ZP)(),i=(0,f.Z)(),r=(0,x.Z)(),n=(0,b.lJ)(i,r),o=(0,m.Z)({name:"RelatedBoardForPinRandomFeedResource",options:{page_size:1,pin:e.pinId,orbac_subject_id:n},noCache:!0});return(0,a.jsx)(C,{...e,i18n:t,relatedBoard:o})}var D=i(67347);function O({boardName:e,color:t,description:i="",hideHeader:l,imageUrl:d,link:S,onClose:A,openNewTab:w,pin:E,pinId:I,sectionName:j,siteType:C,video:O,websiteMedia:z}){let R=(0,p.ZP)(),{logContextEvent:k}=(0,h.v)(),L=(0,n.k6)(),N=(0,g.B)(),B=(0,f.Z)(),Z=(0,x.Z)(),M=(0,b.lJ)(B,Z),F=(0,m.Z)({name:"PinResource",options:{id:I,field_set_key:"detailed",orbac_subject_id:M}}),U=()=>E&&E.is_quick_promotable_by_pinner&&3!==C&&(0,u.su)(B);(0,r.useEffect)(()=>{U()?((0,s.vF)(k,y.NH.RENDER,y.Xc.PIN_CREATE_SUCCESS_PINNER,120,207),(0,D.nP)("web.pin_create.success.promote")):(0,D.nP)("web.pin_create.success.send"),(0,D.nP)("web.pin_create.success.default")},[]);let H=(0,v.Z)({currentSiteType:C,destinationSiteType:0,inputPath:`/pin/${I}`}),V=j?(0,_.nk)(R.bt("Saved to {{ sectionName }} in {{ boardName }}", "Saved to {{ sectionName }} in {{ boardName }}", " - ", undefined, true),{boardName:e,sectionName:j}):(0,_.nk)(R.bt("Saved to {{ boardName }}", "Saved to {{ boardName }}", " - ", undefined, true),{boardName:e}),G=F.data&&F.data.link_domain&&F.data.link_domain.official_user,W=B.isAuth&&G&&G.id!==B.id&&!G.followed_by_me;return(0,a.jsx)(o.xu,{"data-test-id":"saved-pin-modal",minWidth:500,children:(0,a.jsxs)(o.xu,{color:"default",rounding:2,width:"auto",children:[l?null:(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(o.xu,{paddingX:6,paddingY:4,children:(0,a.jsx)(o.X6,{size:"500",children:V})}),(0,a.jsx)(o.iz,{})]}),!!G&&W&&(0,a.jsxs)(r.Fragment,{children:[(0,a.jsx)(o.xu,{paddingX:6,paddingY:3,children:(0,a.jsx)(P.Z,{user:G})}),(0,a.jsx)(o.iz,{})]}),(0,a.jsx)(T,{color:t,description:i,imageUrl:d,link:S,pinId:I,video:O,websiteMedia:z}),(0,a.jsx)(o.iz,{}),(0,a.jsx)(o.xu,{paddingX:6,paddingY:2,children:(0,a.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"end",children:[!U()&&(0,a.jsx)(c,{accessibilityLabel:R.bt("Send", "Send", "Accessible label for button to send this pin", undefined, true),buttonColor:"secondary",buttonText:R.bt("Send", "Send", "Text for button to send this pin", undefined, true),handleClick:()=>{L.push(`/pin/${I}/?share=true`)},icon:"share",tabIndex:0}),(0,a.jsx)(o.xu,{"data-test-id":"seeItNow",paddingX:1,children:(0,a.jsx)(o.ZP,{color:B.isAuth&&B.isPartner||E&&U()?"gray":"red",href:H,onClick:()=>{(0,s.vF)(k,y.NH.DISMISS,y.Xc.PIN_CREATE_SUCCESS_PINNER,123,207),A()},target:w?"blank":null,text:R.bt("See it now", "See it now", "pinCreateSuccess.seeItNow", undefined, true)})}),E&&U()&&(0,a.jsx)(o.xu,{paddingX:1,children:(0,a.jsx)(o.zx,{color:"red",onClick:()=>{(0,s.vF)(k,y.NH.CLICK,y.Xc.PIN_CREATE_SUCCESS_PINNER,101,207),(0,u.Pw)({history:L,pinId:I,requestContext:N}),A()},text:R.bt("Promote your Pin", "Promote your Pin", "Text for button to that takes users to promote a Pin", undefined, true)})})]})})]})})}},453451:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(883119),n=i(807592),o=i(898781),s=i(785893);function l({colorOverride:e,isSoldOut:t,isStale:i,productDetails:l,showSalesPrice:a,type:d,weight:c="bold"}){let{maxPrice:u,minPrice:h,price:p,standardPrice:_}=l,g=!!p&&!!_&&p!==_,m="100";"pdpPlusHeading"===d?m="400":"heading"===d?m="500":"pdpPlusMobileHeading"===d&&(m="300");let f=(0,o.ZP)(),x=f.bt("See price on site", "See price on site", "product.price.stale", undefined, true),b=f.bt("Sold out", "Sold out", "product.price.soldOut", undefined, true);return i?(0,s.jsx)(r.xv,{color:"subtle",size:m,weight:"bold",children:x}):(0,s.jsxs)(r.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:[t&&(0,s.jsx)(r.xu,{"data-test-id":"product-sold-out-text",marginEnd:2,children:(0,s.jsx)(r.xv,{color:"subtle",size:m,weight:"bold",children:b})}),(!!p||!!h||!!u)&&(0,s.jsx)(r.xv,{color:e||(g?"shopping":"default"),size:m,weight:c,children:(0,s.jsx)("span",{children:(0,n.Z)({maxPrice:u,minPrice:h,price:p})})}),g&&!a&&(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"subtle",size:m,weight:["pdpPlusHeading","pdpPlusMobileHeading"].includes(d)?"normal":c,children:(0,s.jsx)("span",{style:{textDecoration:"line-through"},children:_})})})]})}},770065:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(883119),o=i(453451),s=i(407043),l=i(391254),a=i(335174),d=i(327096),c=i(785893);let u=()=>{};function h({alwaysShow:e,closeupImageSignature:t,displayHeight:i,displayWidth:h,onStlFlyoutHover:p,taggedItem:_,flyoutAnimationType:g,onAnimationComplete:m,isPinbuilder:f,isHovering:x}){var b;let y;let{logContextEvent:v}=(0,s.v)(),[P,S]=(0,r.useState)();(0,r.useEffect)(()=>{if(_&&!f){let{pins:e}=_,i=e[0];v({event_type:120,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:_.x_percent,y:_.x_percent,product_pin_id:i.id||_.id,product_pin_image_signature:i.image_signature,pin_tag_key:_.pin_tag_key})}})}},[_,f]);let{shopTheLook:{selectedStlItemId:A}}=(0,d.f)(),w=_.x_percent/100*h,E=_.y_percent/100*i,{pins:I=[]}=_,j=null!==(b=I[0])&&void 0!==b?b:{},{grid_title:C,id:T,images:D,rich_summary:O}=j||{},z=(D||{})["236x"]||{},R=(((O||{}).products||[])[0]||{}).offer_summary||{},{price:k,max_price:L}=R||{},N=j.id===A;"in"===g||N?y="stelaSlideIn .3s ease-in-out forwards":"out"===g?y="stelaSlideOut .3s ease-in-out forwards":"inOut"===g?y="stelaSlideInThenOut 3s ease-in-out forwards":"none"===g&&(y="none");let B=!!R&&(!!k||!!L),Z=B?124:48,M="up",F=w<Z+10,U=w+(Z+10)/2>h,H=E<60;return F&&!H?M="right":U&&!H&&(M="left"),F&&H?(w=Z/2+10,E=70):U&&H?(w=h-Z/2-10,E=70):H&&!(F&&U)&&(M="down"),(0,c.jsxs)(n.xu,{ref:e=>{e&&!P&&S(e)},dangerouslySetInlineStyle:{__style:{top:E,left:w}},"data-test-id":"stl-flyout",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),position:"relative",width:1,children:[(0,c.jsx)(l.Z,{unsafeCSS:(0,a.Z)()}),(f&&x||!f)&&(0,c.jsx)(n.mh,{children:(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:e?{opacity:1}:{animation:y,opacity:"none"===y?0:void 0}},onAnimationEnd:()=>{m&&"inOut"===g&&m()},children:(0,c.jsx)(n.Tg,{href:f?"":`/pin/${T}`,onTap:f?u:()=>{if(!f){let{pins:e}=_,i=e[0];v({event_type:101,view_type:3,element:11962,aux_data:{image_signature:t,commerce_data:JSON.stringify({pin_is_shop_the_look:!0,x:_.x_percent,y:_.x_percent,product_pin_id:i.id||_.id,product_pin_image_signature:i.image_signature,pin_tag_key:_.pin_tag_key})}})}},children:(0,c.jsx)(n.J2,{_deprecatedShowCaret:!0,anchor:P,idealDirection:M,onDismiss:()=>{},positionRelativeToAnchor:!1,size:"flexible",children:(0,c.jsxs)(n.xu,{alignContent:"center",alignItems:"center",color:"default",display:"flex",height:48,justifyContent:"center",rounding:3,width:Z,children:[(0,c.jsx)(n.xu,{direction:"row",display:"flex",height:40,marginStart:B?1:0,minWidth:40,overflow:"hidden",rounding:3,width:40,children:(0,c.jsx)(n.zd,{height:40,wash:!0,width:40,children:(0,c.jsx)(n.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:z.url||""})})}),B&&(0,c.jsxs)(n.xu,{alignContent:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginStart:1,children:[(0,c.jsx)(o.Z,{productDetails:{maxPrice:R.max_price,minPrice:R.min_price,price:R.price,standardPrice:R.standard_price},showSalesPrice:!0,type:"text"}),C&&(0,c.jsx)(n.xv,{lineClamp:1,size:"100",children:C})]})]})})})})})]})}},424624:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o,n:()=>s});var r=i(875108);function n({pinTagIds:e=[],pinTags:t,taggedObjects:i},n){return e.filter(function(e){let i=(0,r.Z)(t[e])&&"deleted"!==t[e].status;return n?i:!i}).map(e=>t[e].taggedObjectIds.map(t=>{var r;return{taggedObjectId:t,pinTagId:e,status:null===(r=i[t])||void 0===r?void 0:r.status}})).reduce((e,t)=>[...e,...t],[])}function o(e){return n(e,!0)}function s(e){return n(e,!1).filter(e=>["saved","created"].includes(e.status))}},807592:(e,t,i)=>{"use strict";function r({maxPrice:e,minPrice:t,price:i}){return e&&t?`${t}-${e}`:i}i.d(t,{Z:()=>r})},293759:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(616550),n=i(237056),o=i(53987);function s({isAdsManager:e}){let t=(0,r.TH)(),i=(0,n.Z)(!0),s=i&&(0,o.mk)(t);return!!e||s}},699222:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var r=i(702664),n=i(883119),o=i(407043),s=i(499128),l=i(898781),a=i(902355),d=i(785893);function c({hideToast:e,isThumbnailUrlValid:t,pinId:i,text:r,thumbnailUrl:a}){let c=(0,l.ZP)(),{logContextEvent:u}=(0,o.v)();return(0,d.jsx)(s.ZP,{duration:5e3,href:`/pin/${i}`,onClick:()=>{u({event_type:101,view_type:212,view_parameter:3228,element:13911})},onHide:e,primaryAction:{accessibilityLabel:c.bt("Navigate to created Pin", "Navigate to created Pin", "storyboard.toast.viewPublishedPin.accessibilityLabel", undefined, true),label:c.bt("View", "View", "storyboard.toast.viewPublishedPin.buttonText", undefined, true),onClick:()=>{}},text:r,thumbnail:t?{image:(0,d.jsx)(n.Ee,{alt:"",naturalHeight:45,naturalWidth:45,role:"presentation",src:a},a)}:void 0})}function u({hideToast:e,thumbnailUrl:t,pinId:i}){let r=(0,l.ZP)(),n=(0,a.Z)(t),o=r.bt("Your Pin has been published!", "Your Pin has been published!", "storyboard.toast.viewPublishedPin.text", undefined, true);return(0,d.jsx)(c,{hideToast:e,isThumbnailUrlValid:!!n,pinId:i,text:o,thumbnailUrl:t})}var h=i(616550),p=i(451820),_=i(782534),g=i(349700),m=i(780280),f=i(19121);function x({hideToast:e,scheduledDate:t,scheduledTime:i,showAction:r}){let n=(0,l.ZP)(),o=(0,m.B)(),{username:a}=(0,f.Z)(),c=(0,h.k6)(),u=t&&i&&new Date(t.getFullYear(),t.getMonth(),t.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()),x=t&&i&&u?(0,g.nk)(n.bt("Scheduled for {{ date }} at {{ scheduledTime }}", "Scheduled for {{ date }} at {{ scheduledTime }}", "schedulePinConfirmation.toast.description", undefined, true),{date:(0,p.Z)(o.locale,t,_.k.SHORT_MONTH_DAY,!1),scheduledTime:u.toLocaleTimeString([o.locale],{hour:"2-digit",minute:"2-digit"})}).join(""):n.bt("Your Pin has been scheduled", "Your Pin has been scheduled", "schedulePinConfirmation.toast.description.fallback", undefined, true);return(0,d.jsx)(s.ZP,{duration:5e3,onHide:e,...r&&a?{primaryAction:{accessibilityLabel:n.bt("Navigate to scheduled Pins", "Navigate to scheduled Pins", "storyboard.toast.viewScheduledPin.accessibilityLabel", undefined, true),label:n.bt("View", "View", "storyboard.toast.viewScheduledPin.buttonText", undefined, true),onClick:()=>{c.push(`/${a}/scheduled-pins/`)}}}:{},text:x})}var b=i(343341),y=i(490072);function v(){let{pinDrafts:e}=(0,r.useSelector)(e=>({pinDrafts:(0,y.Wp)(e)})),t=(0,b.F9)();return function({pinId:i,showActionForScheduledPin:r=!1}){let{storyPin:n,publishOption:o,scheduledDate:s,scheduledTime:l}=Object.values(e).find(({pinId:e})=>e===i)||{},a=(null==n?void 0:n.image_square_url)||"";t.showToast(({hideToast:e})=>"publish-later"===o?(0,d.jsx)(x,{hideToast:e,scheduledDate:s,scheduledTime:l,showAction:r}):(0,d.jsx)(u,{hideToast:e,pinId:i,thumbnailUrl:a}))}}},630767:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var r=i(667294),n=i(58545),o=i(969690),s=i(383894),l=i(69119),a=i(883119),d=i(785893);let c=({children:e,description:t,error:i,id:n,label:o,required:s,onLabelTouch:l})=>(0,d.jsxs)(r.Fragment,{children:[(o||s)&&(0,d.jsx)(a.__,{htmlFor:n,children:(0,d.jsx)(a.xu,{marginBottom:1,children:(0,d.jsxs)(a.xv,{color:i?"error":"default",children:[o,s&&(0,d.jsx)(a.xv,{color:"error",inline:!0,weight:"bold",children:(0,d.jsx)("span",{"aria-hidden":"true",children:"*"})})]})})}),e,(!!i||!!t)&&(0,d.jsx)(a.__,{htmlFor:n,children:(0,d.jsx)(a.xu,{marginTop:1,children:l?(0,d.jsx)(a.iP,{onTap:l,children:(0,d.jsx)(a.xv,{color:i?"error":"default",size:"200",children:i||t})}):(0,d.jsx)(a.xv,{color:i?"error":"default",size:"200",children:i||t})})})]});function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends r.Component{constructor(...e){super(...e),u(this,"setTextFieldInputRef",e=>{let{forwardedRef:t}=this.props;t(e||null)}),u(this,"handleBlur",({event:e})=>{let{onBlur:t}=this.props;t&&t(e)}),u(this,"handleChange",({event:e})=>{let{onChange:t}=this.props;t&&t(e)}),u(this,"handleFocus",({event:e})=>{let{onFocus:t}=this.props;t&&t(e)}),u(this,"handleKeyDown",({event:e})=>{let{onKeyDown:t}=this.props;t&&t(e)})}render(){let{accessibilityLabelIcon:e,disabled:t,icon:i,id:r,isRTL:n=!1,onClick:o,placeholder:s,value:l}=this.props;return(0,d.jsx)(a.iP,{onTap:o,children:(0,d.jsxs)(a.xu,{alignItems:"center",column:12,display:"flex",flex:"grow",position:"relative",children:[(0,d.jsx)(a.xu,{width:"100%",children:(0,d.jsx)(a.nv,{ref:this.setTextFieldInputRef,disabled:t,id:r,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:s,size:"lg",value:l})}),(0,d.jsx)(a.xu,{left:n,position:"absolute",right:!n,children:(0,d.jsx)(a.xu,{marginEnd:4,position:"relative",children:(0,d.jsx)(a.JO,{accessibilityLabel:e,color:"default",icon:"clock"===i||"arrow-down"===i?i:"calendar",inline:!0})})})]})})}}let p=(0,r.forwardRef)((e,t)=>(0,d.jsx)(h,{...e,forwardedRef:t}));var _=i(898781),g=i(780280);function m(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends r.Component{constructor(...e){super(...e),m(this,"state",{showFlyout:!1}),m(this,"setTimeFieldRef",e=>{this.timeFieldRef=e}),m(this,"handleChange",(e,t)=>{let{onChange:i}=this.props;this.handleHideFlyout(),i({event:e,value:t})}),m(this,"handleShowFlyout",()=>{this.setState({showFlyout:!0})}),m(this,"handleHideFlyout",()=>{this.setState({showFlyout:!1})})}render(){let{error:e,id:t,idealDirection:i,interval:r,minTime:s,maxTime:l,placeholder:u,value:h,disabled:_=!1,maxHeight:m}=this.props,{showFlyout:f}=this.state,x=[],b=(0,o.Z)(l,s)/r;for(let e=0;e<b;e+=1){let t=(0,n.Z)(s,e*r);x.push(t)}return(0,d.jsx)(c,{error:e,id:t,children:(0,d.jsx)(g.LC,{children:e=>(0,d.jsxs)(a.xu,{position:"relative",children:[(0,d.jsx)(p,{ref:this.setTimeFieldRef,accessibilityLabelIcon:this.props.i18n.bt("Select a time", "Select a time", "timeField.TextFieldWrapper.accessibilityLabel.clockIcon", undefined, true),disabled:_,icon:"clock",id:t,isRTL:e.isRTL,onFocus:this.handleShowFlyout,placeholder:u,value:h?h.toLocaleTimeString(["en-US"],{hour:"2-digit",minute:"2-digit"}):""}),f&&(0,d.jsx)(a.Lt,{anchor:this.timeFieldRef,disableMobileUI:!0,id:"time-field-dropdown",idealDirection:i,isWithinFixedContainer:!0,maxHeight:m,onDismiss:this.handleHideFlyout,zIndex:new a.Ry(1e3),children:x.map(e=>{let t=e.toLocaleTimeString(["en-US"],{hour:"2-digit",minute:"2-digit"});return(0,d.jsx)(a.Lt.Item,{onSelect:({event:t})=>this.handleChange(t,e),option:{label:t,value:t},children:(0,d.jsx)(a.xv,{color:"default",size:"200",weight:"bold",children:t})},e.getTime())})})]})})})}}function x(e){let t=(0,_.ZP)();return(0,d.jsx)(f,{...e,i18n:t})}m(f,"defaultProps",{interval:30,minTime:(0,l.Z)(new Date),maxTime:(0,s.Z)(new Date)})},299487:(e,t,i)=>{"use strict";let r;i.d(t,{Z:()=>u});var n=i(366284),o=i(56641);let s=()=>Promise.resolve().then(i.bind(i,422722)),l=100,a={},d={EXTENSION_PINIT_CHROME_URL:"https://chrome.google.com/webstore/detail/gpdjojdkbbmdfjfahjcgigfpmkopogic",EXTENSION_PINIT_FIREFOX_URL:"https://assets.pinterest.com/ext/Pinterest_Firefox.xpi",EXTENSION_PINIT_SAFARI_URL:"https://safari-extensions.apple.com/details/?id=com.pinterest.extension-HWZFLG9PNK",EXTENSION_PINIT_IE_URL:"https://about.pinterest.com/assets/ext/Pinterest-IE-0.0.4.exe",EXTENSION_PINIT_OPERA_URL:"https://addons.opera.com/en/extensions/details/pinterest-8/?display=en",EXTENSION_PINIT_EDGE_URL:"https://microsoftedge.microsoft.com/addons/detail/pinterest-save-button/bkgoflemacdadndiohhdnphcmdhacabg/"},c={[n.oi.CHROME]:{url:d.EXTENSION_PINIT_CHROME_URL,newWindow:!0},[n.oi.FIREFOX]:{url:d.EXTENSION_PINIT_FIREFOX_URL,newWindow:!1},[n.oi.SAFARI]:{url:d.EXTENSION_PINIT_SAFARI_URL,newWindow:!0},[n.oi.IE]:{url:d.EXTENSION_PINIT_IE_URL,newWindow:!1},[n.oi.OPERA]:{url:d.EXTENSION_PINIT_OPERA_URL,newWindow:!0},[n.oi.EDGE]:{url:d.EXTENSION_PINIT_EDGE_URL,newWindow:!0}};a.handleExtensionInstall=(e,t)=>{let i=(0,n.u$)(e),r=i?c[i].url:void 0;r&&((0,o.Z)(r,i?c[i].newWindow:void 0),t())},a.isExtensionInstalled=()=>r,a.isBrowserExtensionSupported=e=>(0,n.i7)(e)||(0,n.vU)(e)||(0,n.un)(e),a.extensionReady=(e,t=l)=>new Promise(i=>{setTimeout(()=>{document.body&&(r=document.body.hasAttribute("data-pinterest-extension-installed"),a.isBrowserExtensionSupported(e)||(r=!0),i(r))},t)}),a.initBrowserExtension=()=>{s().then(({default:e})=>{e.logToServer(e.SERVER_LOG_TYPE.BROWSER_EXTENSION,e.HTTP_METHOD.POST,{browser_extension_installed:r})})};let u=a},27255:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},155378:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var r=i(667294),n=i(883119),o=i(214494),s=i(407043),l=i(319915),a=i(499128),d=i(898781),c=i(349700),u=i(784590),h=i(947599),p=i(80816),_=i(966113),g=i(343341),m=i(50286),f=i(19121),x=i(379764),b=i(67347),y=i(785893);let v=(0,r.lazy)(()=>Promise.all([i.e(80582),i.e(13047)]).then(i.bind(i,380582))),P=new n.H3([x.Z]);function S({handleComplete:e,isNag:t}){let i=(0,m.ZP)(),x=(0,f.Z)(),{logContextEvent:S}=(0,s.v)(),A=(0,d.ZP)(),[w,E]=(0,r.useState)(!0),[I,j]=(0,r.useState)(!1),{showOneToast:C}=(0,g.F9)(),T=(0,u.Z)({name:"UserResource",options:{user_id:x.id||""}}),D="desktop"===i;(0,r.useEffect)(()=>{S({event_type:13,component:13716,view_type:474})},[]);let O=(0,y.jsxs)(n.xv,{align:D?"start":"center",children:[A.bt("We use cookies to deliver personalised ads and experiences, and to analyse traffic on our site.", "We use cookies to deliver personalized ads and experiences, and to analyze traffic on our site.", "homeFeed.cookiesConsentBanner.bannerText", undefined, true)," ",(0,c.nk)(A.bt("Read our {{ cookiePolicyLink }} for more information.", "Read our {{ cookiePolicyLink }} for more information.", "homeFeed.cookiesConsentBanner.readCookiePolicyText", undefined, true),{cookiePolicyLink:(0,y.jsx)(n.xv,{inline:!0,weight:"bold",children:(0,y.jsx)(n.rU,{display:"inlineBlock",href:_._Ib,target:"blank",underline:"hover",children:A.bt("Cookie Policy", "cookie policy", "homeFeed.cookiesConsentBanner.cookiePolicyLink", undefined, true)},"cookie-policy-link")})})]}),z=(0,y.jsxs)(n.kC,{direction:D?"row":"column",gap:D?{row:2,column:0}:{column:4,row:0},children:[(0,y.jsx)(n.zx,{fullWidth:!0,onClick:()=>{S({event_type:101,component:13716,view_type:474,element:11984}),(0,b.nP)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"true",allow_marketing_cookies:"true",allow_personalization_cookies:"true",location:"app_packages_CookieConsent_Banner_handleAcceptAll"}}),o.Z.create("UserSettingsResource",{allow_analytic_cookies:!0,allow_marketing_cookies:!0,allow_personalization_cookies:!0,surface_tag:p.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{T.refresh(),C(({hideToast:e})=>(0,y.jsx)(a.ZP,{duration:3e3,onHide:e,text:A.bt("We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)})),e()})},size:D?"lg":"md",text:A.bt("Accept all", "Accept all", "navFooter.cookieConsentBanner.acceptAllButton", undefined, true)}),(0,y.jsx)(n.zx,{fullWidth:!0,onClick:()=>{S({event_type:101,component:13716,view_type:474,element:11985}),(0,b.nP)("webapp.updateCookiePreferences",{sampleRate:.1,tags:{allow_analytic_cookies:"false",allow_marketing_cookies:"false",allow_personalization_cookies:"false",location:"app_common_react_components_CookieConsent_Banner_handleRejectAll"}}),o.Z.create("UserSettingsResource",{allow_analytic_cookies:!1,allow_marketing_cookies:!1,allow_personalization_cookies:!1,surface_tag:p.i.HOLISTIC_PROFILE_PROMPT}).callUpdate().then(()=>{T.refresh(),C(({hideToast:e})=>(0,y.jsx)(a.ZP,{duration:3e3,onHide:e,text:A.bt("We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "We saved your cookie preferences. You can change them in the settings section of your profile at any time.", "homeFeed.cookiesConsentBanner.acceptedAllToastText", undefined, true)})),e()})},size:D?"lg":"md",text:A.bt("Reject all", "Reject all", "navFooter.cookieConsentBanner.rejectAllButton", undefined, true)}),(0,y.jsx)(n.zx,{fullWidth:!0,onClick:()=>{S({event_type:101,component:13716,view_type:474,element:11986}),j(!0),D||E(!1)},size:D?"lg":"md",text:A.bt("Let me choose", "Let me choose", "navFooter.cookieConsentBanner.manageCookiesButton", undefined, true)})]});return(0,y.jsxs)(r.Fragment,{children:[w&&(D?(0,y.jsx)(n.xu,{paddingX:2,paddingY:2,smPaddingX:6,smPaddingY:t?2:0,children:(0,y.jsxs)(n.xu,{alignItems:"center",borderStyle:"sm","data-test-id":"cookie-consent-banner",direction:"column",display:"flex",justifyContent:"between",marginBottom:t?0:6,overflow:"hidden",padding:t?3:6,position:"relative",rounding:4,smDirection:"row",children:[(0,y.jsx)(n.xu,{display:"flex",marginEnd:0,smMarginEnd:7,children:O}),(0,y.jsx)(n.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"center",marginTop:4,smMarginTop:0,children:z})]})}):(0,y.jsx)(n.mh,{zIndex:P,children:(0,y.jsx)(n.xu,{bottom:!0,marginBottom:2,position:"fixed",width:"100%",children:(0,y.jsxs)(n.xu,{alignItems:"center",borderStyle:"shadow",color:"default",direction:"column",display:"flex",marginEnd:"auto",marginStart:"auto",padding:6,rounding:6,width:"95%",children:[O,(0,y.jsx)(n.xu,{marginTop:4,minWidth:240,children:z})]})})})),I&&(0,y.jsx)(l.Z,{name:"SafeSuspense_CookieConsentBanner_SettingsModal",children:(0,y.jsx)(h.Z,{children:(0,y.jsx)(n.xu,{"data-test-id":"settings-modal",children:(0,y.jsx)(v,{dismissIcon:"cancel",handleComplete:e,onClose:()=>j(!1)})})})})]})}},199324:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r='-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",Helvetica,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro",メイリオ,Meiryo,"ＭＳ Ｐゴシック",Arial,sans-serif'},918301:(e,t,i)=>{"use strict";i.d(t,{CB:()=>p,y9:()=>h});var r=i(667294),n=i(425288),o=i(883119),s=i(186656),l=i(121151),a=i(898781),d=i(785893);let c=({onConfirm:e})=>{let t=(0,a.ZP)(),[i,n]=(0,r.useState)(!1),c=()=>{n(!0),(0,s.Z)({url:"/v3/users/email/verify/resend/",method:"POST"})};return(0,d.jsx)(l.ZP,{accessibilityModalLabel:t.bt("Verify your email", "Verify your email", "Accessible label for email verification being required", undefined, true),footer:(0,d.jsxs)(o.kC,{gap:{row:2,column:0},justifyContent:"end",children:[i?(0,d.jsx)(o.zx,{color:"gray",disabled:i,fullWidth:!0,onClick:c,size:"lg",text:t.bt("Email sent", "Email sent", "Button text for verification email being sent", undefined, true)}):(0,d.jsx)(o.zx,{color:"gray",disabled:i,fullWidth:!0,onClick:c,size:"lg",text:t.bt("Resend email", "Resend email", "Button text for resending email verification email", undefined, true)}),(0,d.jsx)(o.zx,{color:"red",fullWidth:!0,onClick:e,size:"lg",text:t.bt("OK", "Got it", "Button text for acknowledging email verificaiton is required", undefined, true)})]}),heading:t.bt("Verify your email", "Verify your email", "Accessible label for email verification being required", undefined, true),onDismiss:e,role:"alertdialog",children:(0,d.jsx)(o.xu,{padding:8,children:(0,d.jsx)(o.xv,{align:"center",size:"300",children:t.bt("Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.", "Keep your account secure by verifying your email address. Check the inbox associated with this account for an email from us to continue using Pinterest.", "Inform users that they need to verify their email to keep their account secure and continue using Pinterest", undefined, true)})})})},{Provider:u,useHook:h}=(0,n.Z)("EmailVerificationReminderModal");function p({children:e}){let[t,i]=(0,r.useState)(!1),n=(0,r.useMemo)(()=>({showEmailVerificationReminderModal:()=>{i(!0)}}),[]);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(u,{value:n,children:e}),t&&(0,d.jsx)(c,{onConfirm:()=>{i(!1)}})]})}},403368:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(667294),n=i(883119),o=i(898781),s=i(785893);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends r.Component{constructor(...e){super(...e),l(this,"state",{isHovering:!1}),l(this,"handleMouseEnter",e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)}),l(this,"handleMouseLeave",e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)})}render(){let{forwardedRef:e,icon:t,onClick:i,onMouseDown:r,onMouseUp:o,selected:l,style:a,text:d,x:c,y:u,zIndex:h,backdropDiameter:p=32,dotDiameter:_=16}=this.props,{isHovering:g}=this.state,m=g?p+4:p;return(0,s.jsx)("div",{ref:e,"aria-label":this.props.i18n.bt("Search for this item", "Search this item", "flashlight.dot.a11ylabel", undefined, true),"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:o,role:"button",style:{zIndex:h,position:"absolute",top:u-m/2,left:c-m/2,outline:"none"},tabIndex:"0",children:(0,s.jsxs)(n.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:l?"0 0 0 3px #e60023":"none",borderRadius:_,top:(m-_)/2,left:(m-_)/2,...a}},"data-test-id":"flashlight-dot-style",display:"flex",height:_,justifyContent:"center",padding:0,position:"absolute",width:_,children:[!!d&&(0,s.jsx)(n.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:d}),t&&(0,s.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Tag anchor", "Tag anchor", "accessibility label for an anchor for an object in a pin", undefined, true),color:"error",icon:t,inline:!0,size:_/2})]})})}}let d=(0,r.forwardRef)((e,t)=>{let i=(0,o.ZP)();return(0,s.jsx)(a,{...e,forwardedRef:t,i18n:i})})},558068:(e,t,i)=>{"use strict";i.d(t,{Hv:()=>a,aX:()=>u,nK:()=>h});var r=i(667294),n=i(616550),o=i(425288),s=i(785893);let{Provider:l,useHook:a}=(0,o.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),d=e=>e&&e.pathname?e.pathname+(e.search||""):"";function c(e,t){var i;let r={action:t.type,location:t.location,match:t.match};if(t.location===(null===(i=e.current)||void 0===i?void 0:i.location))return e;switch(t.type){case"POP":if(e.forward.length>0&&d(e.forward[0].location)===d(r.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:r,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:r};default:return e}}function u(){let{current:e,previous:t}=a(),i=(0,r.useMemo)(()=>e?t.concat(e):t,[e,t]);return i}function h({children:e}){let t=(0,n.k6)(),i=(0,n.TH)(),o=(0,n.$B)(),a={forward:[],current:{action:t.action,location:i,match:o},previous:[]},[d,u]=(0,r.useReducer)(c,a);return(0,r.useEffect)(()=>{let{action:e}=t;u({type:e,location:i,match:o})},[i]),(0,s.jsx)(l,{value:d,children:e})}},391254:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o}),i(441143);var r=i(785893);class n{static factory(e){return e instanceof n?e:new n(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function o(e){let{css:t,unsafeCSS:i,...o}=e,s=String(t||"")||i||"",l=!!s;return l?(0,r.jsx)("style",{...o,dangerouslySetInnerHTML:{__html:String(n.factory(s))}}):null}},966224:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(898781),o=i(785893);function s({accessibilityLabel:e,fixedPosition:t,rounding:i}){let s=(0,n.ZP)();return(0,o.jsxs)(r.xu,{children:[(0,o.jsx)(r.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,opacity:1,position:t?"fixed":"absolute",right:!0,top:!0,zIndex:new r.Ry(101),children:(0,o.jsx)(r.$j,{accessibilityLabel:e||s.bt("Loading", "Loading", "Label for loading spinner", undefined, true),show:!0})}),(0,o.jsx)(r.xu,{bottom:!0,color:"default",left:!0,opacity:.7,position:t?"fixed":"absolute",right:!0,rounding:i,top:!0,zIndex:new r.Ry(100)})]})}},241244:(e,t,i)=>{"use strict";i.d(t,{N:()=>s,Z:()=>o});var r=i(883119),n=i(785893);function o({children:e,fullWidth:t}){return(0,n.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},"data-test-id":"pointer-events-wrapper",children:e})}function s({children:e,enabled:t}){return t?(0,n.jsx)(o,{children:e}):e}},335174:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(483205);let n=(e=0)=>`@keyframes shopButtonSlideInThenOut {
    0% {
      width: 0px;
    }

    15% {
      width: ${e+r.I6}px;
    }

    85% {
      width: ${e+r.I6}px;
    }

    100% {
      width: 0px;
    }
  }

  @keyframes revealShopText {
    from {
      clip-path: inset(0 100% 0 0);
    }
    to {
      clip-path: inset(0 0 0 0);
    }
  }

@keyframes stelaSlideInThenOut {
    0% {
      opacity: 0;
    }

    15% {
      opacity: 0;
    }

    25% {
      opacity: 1;
    }

    50% {
      opacity: 1;
    }

    75% {
      opacity: 1;
    }

    85% {
      opacity: 0;
    }

    100% {
      opacity: 0;
    }
}


@keyframes stelaGrowInAndOut {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  10% {
    transform: scale(1);
    opacity: 1;
  }

  90% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(0);
    opacity: 0;
  }
}

  `},325016:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(112690),o=i(898781),s=i(391254),l=i(241244),a=i(483205),d=i(335174),c=i(829407),u=i(785893);function h({alwaysShow:e,animationDelay:t=0,contextLogData:i,enablePointerEvents:h=!0,isInCloseupDotAnimationExperiment:p,isSelected:_,onStelaDotAnimationComplete:g,stelaDotAnimationType:m}){let f;let x=(0,o.ZP)(),b=(0,n.Z)();return f="inOut"===m?p?`stelaGrowInAndOut 3s cubic-bezier(0, 0.15, 0.15, 0.5) ${t}s forwards`:"stelaSlideInThenOut 3s ease-in-out forwards":void 0,(0,c.Z)(()=>{b({event_type:120,view_type:3,aux_data:{...i},...i})}),(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(l.N,{enabled:h,children:[(0,u.jsx)(s.Z,{unsafeCSS:(0,d.Z)()}),(0,u.jsx)("div",{"aria-label":x.bt("Search for this item", "Search this item", "visualSearch.dot.label", undefined, true),"data-test-id":"closeup-stela-dot",height:a.b9,onAnimationEnd:()=>{g&&"inOut"===m&&g()},style:e?{opacity:1}:{animation:f,opacity:0},width:a.b9,children:(0,u.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,u.jsx)("g",{filter:"url(#filter0_d)",children:(0,u.jsx)("circle",{cx:"18",cy:"18",fill:_&&e?"black":"white",r:"8"})}),(0,u.jsx)("defs",{children:(0,u.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,u.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,u.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,u.jsx)("feOffset",{}),(0,u.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,u.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,u.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,u.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}},483205:(e,t,i)=>{"use strict";i.d(t,{I6:()=>n,Nv:()=>r,RZ:()=>o,ZG:()=>a,b9:()=>l,s0:()=>s});let r=44,n=24,o=446,s=.05,l=36,a=20},55259:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(619937),n=i(794230);let o={campaignFilter:"all",adGroupFilter:"all",adFilter:"all"},s=e=>{let t={};return e&&(t={objectiveTypes:[e]}),t},l={overview:()=>"/",reporting:e=>{let t=e.objectiveType||null;delete e.objectiveType;let i={...e,...s(t)};return(0,n.Z)("/reporting/campaigns/",i)},reportingAdGroup:e=>{let{campaignId:t,objectiveType:i,showAllEntities:r,adGroupId:l,message:a}=e,d=r?o:{},c={campaignIds:[t],...d,...s(i),...l?{adGroupIds:[l]}:{},message:a};return(0,n.Z)("/reporting/adgroups/",c)},campaign:e=>{let{id:t,objectiveType:i}=e;return(0,n.Z)("/reporting/adgroups/",{campaignIds:[t],...s(i)})},editCampaign:e=>e.isAutomatedCampaign?l.editAutomated({campaignId:e.id,view:"campaign"}):l.editV2({campaignId:e.id,view:"campaign"}),adgroup:e=>{let{id:t,objectiveType:i,showAllEntities:r,pinPromotionId:l,campaignId:a}=e;if("TEMPORARY_SHOPPING"===i||"CATALOG_SALES"===i)return(0,n.Z)("/reporting/productgroups/",{adGroupIds:[t],...s(i)});{let e=r?o:{},d=a?{campaignIds:[a]}:{},c=l?{pinPromotionIds:[l]}:{};return(0,n.Z)("/reporting/ads/",{adGroupIds:[t],...s(i),...e,...c,...d})}},editAdGroup:e=>e.isAutomatedCampaign?l.editAutomated({campaignId:e.id,view:"campaign"}):l.editV2({adGroupId:e.id,view:"adgroup"}),pinPromotion:e=>{let{id:t,adFilter:i}=e,r=i?{adFilter:i}:{};return(0,n.Z)("/reporting/ads/",{pinPromotionIds:[t],...r})},editPinPromotion:e=>{let t=e.isCreatingPins?{isCreatingPins:!0}:{},i=e.pinPromotionId?{pinPromotionId:e.pinPromotionId}:{};return l.editV2({adGroupId:e.adGroupId,view:"ad",...i,...t})},productGroup:e=>{let{id:t,name:i}=e;return(0,n.Z)("/reporting/productgroups/",{productGroupIds:[t],name:i})},campaigns:()=>"/reporting/campaigns/",adgroups:()=>"/reporting/adgroups/",ads:()=>"/reporting/ads/",bulkEdit:e=>{let{entity_level:t,ids:i}=e;return(0,n.Z)("/ads/bulk_edit/",{entity_level:t,ids:i})},productgroups:()=>"/reporting/productgroups/",productitems:()=>"/reporting/productitems/",campaignNegativeKeywords:()=>"/reporting/campaignNegativeKeywords/",campaignSearchQueries:()=>"/reporting/campaignSearchQueries/",adGroupNegativeKeywords:()=>"/reporting/adGroupNegativeKeywords/",adGroupPositiveKeywords:()=>"/reporting/adGroupPositiveKeywords/",adGroupSearchQueries:()=>"/reporting/adGroupSearchQueries/",ad:e=>l.pinPromotion(e),campaignMode:e=>(0,n.Z)("/ads/campaign_mode/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),create:e=>{let{campaignId:t,objectiveType:i,partialCreate:r,catalogsFeedId:o,managedClientId:s,productGroupId:l,resumeLastDraft:a}=e,d={};return t&&r&&(d.campaignId=t),i&&(d.objectiveType=i),"CATALOG_SALES"===i&&o&&(d.catalogsFeedId=o),l&&(d.productGroupId=l),s&&(d.managedClientId=s),a&&(d.resumeLastDraft=!0),(0,n.Z)("/ads/create/",d)},createAutomated:e=>(0,n.Z)("/automated/ads/create/",e),editV2:e=>(0,n.Z)("/ads/edit/",e),editAutomated:e=>(0,n.Z)("/automated/ads/edit/",e),editDraftCampaign:e=>(0,n.Z)("/ads/edit_draft/",{campaignId:e.campaignId,view:"campaign"}),duplicateCampaign:e=>(0,n.Z)("/ads/duplicate/",e),audiences:e=>(0,n.Z)("/audiences/",e.managedClientId?{managedClientId:e.managedClientId}:void 0),audience_debug:()=>"/audience_debug/",prepaid_spend_campaign_breakdown:()=>"/billing/prepaid_spend_campaign_breakdown/",billing:e=>{let{page:t,subSection:i,nextStepUrl:o}=e;switch(t){case r.kM.BILLING_HISTORY:return"/billing/history/";case r.kM.ORDER_LINES:return"/billing/order_lines/";case r.kM.PROMOTIONS:return"/billing/promotions/";case r.kM.DOCUMENTS:return"/billing/documents/";case r.kM.TAX_DOCUMENTS:return"/billing/tax_documents/";case r.kM.PREPAID_CAMPAIGN_SPEND:return"/billing/prepaid_campaign_spend_summary/";default:let s={};return i&&(s.section=i),o&&(s.next_step_link_url=o),(0,n.Z)("/billing/",s)}},bulk:e=>{let{subSection:t,page:i,jobStarted:o}=e||{};switch(i){case r.fm.UPLOAD_TEMPLATE:return(0,n.Z)("/bulk_editor/upload_template/",{section:t});case r.fm.DOWNLOAD_TEMPLATE:return(0,n.Z)("/bulk_editor/download_template/",{section:t});case r.fm.HISTORY:return(0,n.Z)("/bulk_editor/history/",{section:t,job_started:o});case r.fm.RESOURCES:return(0,n.Z)("/bulk_editor/resources/",{section:t});default:return"/bulk_editor/"}},history:e=>(0,n.Z)("/history/",e),shopping:e=>l.reporting(s("TEMPORARY_SHOPPING")),pinterest_tag:e=>{let{page:t,subSection:i,platform:o,source:s,origin:l}=e;switch(t){case r.qp.PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:return"/conversions/events-overview/";case r.qp.PINTEREST_EVENT_HISTORY:if(s)return(0,n.Z)("/conversions/event-history/",{source:s});return"/conversions/event-history/";case r.qp.CONVERSION_HEALTH:return"/conversions/health/";case r.qp.PINTEREST_TEST_EVENTS:return(0,n.Z)("/conversions/test-events/",{subPage:i,platform:o});case r.qp.PINTEREST_TAG:return(0,n.Z)("/conversions/tag/",{subPage:i,platform:o});case r.qp.PINTEREST_TAG_MANUAL_SETUP_FLOW:if(o)return(0,n.Z)("/conversions/tag_manual_setup/",{platform:o,source:s});return"/conversions/tag_manual_setup/";case r.qp.PINTEREST_TAG_EVENTS:return"/conversions/tag-events/";case r.qp.PINTEREST_TAG_HEALTH:return"/conversions/tag-health/";case r.qp.CONVERSION_UPLOAD:return(0,n.Z)("/conversions/upload/",{subPage:i});case r.qp.UPLOAD_HISTORY:return(0,n.Z)("/conversions/history/",{subPage:i});case r.qp.PCA_UPLOAD_HISTORY:return(0,n.Z)("/conversions/pca_history/",{subPage:i});case r.qp.PCA_UPLOAD:return(0,n.Z)("/conversions/pca_upload/",{subPage:i});case r.qp.CONVERSIONS_API_MANUAL_SETUP_FLOW:if(s||l)return(0,n.Z)("/conversions/api_manual_setup/",{source:s,origin:l});return"/conversions/api_manual_setup/";case r.qp.CONVERSIONS_API_PARTNER_SETUP_FLOW:if(s||l)return(0,n.Z)("/conversions/api_partner_setup/",{source:s,origin:l});return"/conversions/api_partner_setup/";case r.qp.CONVERSIONS_API_ACCESS_TOKEN:return"/conversions/access_token/";case r.qp.PINTEREST_SETUP_API:return"/conversions/setup-api/";case r.qp.CONVERSIONS_API_DEDUPLICATION:return"/conversions/deduplication/";case r.qp.PAYLOAD_HELPER:return"/conversions/payload-helper/";case r.qp.CONVERSIONS:return"/conversions/";default:return"/conversions/tag/"}},"pin-builder":e=>(0,n.Z)("/pin-builder/",e),purchases:()=>l.reporting(s("PURCHASE")),awareness_reserved:()=>l.reporting(s("IMPRESSION")),engagement:()=>l.reporting(s("BILLABLE_ENGAGEMENT")),videos:()=>l.reporting(s("TEMPORARY_BIDDED_CPM_VIDEO")),videos_reserved:()=>l.reporting(s("TEMPORARY_IMPRESSION_VIDEO")),videos_cpv:()=>l.reporting(s("TEMPORARY_MRC_CPV_VIDEO")),conversions:()=>l.reporting(s("WEB_CONVERSION")),accounts_manager:()=>"/accounts_manager/",reporting_preferences:e=>(0,n.Z)("/reporting/preferences/",e),report_builder:e=>(0,n.Z)("/report-center/builder/",e),report_history:e=>(0,n.Z)("/report-center/history/",e),report_unsubscribe:e=>(0,n.Z)("/report-center/unsubscribe/",e),report_download:e=>(0,n.Z)("/report-center/download/",e),media_planner:()=>"/media_planner/",awareness:()=>l.reporting(s("AWARENESS")),traffic:()=>l.reporting(s("TRAFFIC")),app_installs:()=>l.reporting(s("APP_INSTALL")),catalog_sales:()=>l.reporting(s("CATALOG_SALES")),web_conversion:()=>l.reporting(s("WEB_CONVERSION")),video_view:()=>l.reporting(s("VIDEO_VIEW")),quick_promote:e=>(0,n.Z)("/quick-promote/",e),quick_promote_on_www:()=>"/advertiser/quick-promote/",recommendations:e=>(0,n.Z)("/recommendations/",e),catalog_view:()=>"/product-catalogs/data-source",campaign_insights:e=>`/campaign-insights/${e.campaignId}/`,product_group_reporting:e=>`/campaign-insights/${e.campaignId}/product-group/${e.productGroupId}`},a=l},619937:(e,t,i)=>{"use strict";i.d(t,{$N:()=>_,Cu:()=>m,GY:()=>d,MZ:()=>s,NR:()=>u,Vn:()=>c,bC:()=>g,fm:()=>r,kM:()=>o,q6:()=>n,qp:()=>a,uV:()=>h,ug:()=>p,xL:()=>l});let r={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},n={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},o={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},s={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},l={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},a={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",PAYLOAD_HELPER:"PAYLOAD_HELPER",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},u={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},h="604800",p="86400",_={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},g="click",m="view"},28543:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});var r=i(55259),n=i(966113),o=i(567831);function s(e,t,i){var s;let l;if(!r.Z[e])throw Error(`unknown url key: ${e}`);i||(i={});let a=r.Z[e](i),d=(l=null,(s=i)&&(l=s.advertiserId||null),!l&&t&&(l=t.id),l),c=!!i.absolutify;return"string"==typeof d&&(a="/advertiser/"+d+a),c&&(a=(0,o.Z)(a,void 0,n.KUo)),a}},209064:(e,t,i)=>{"use strict";i.d(t,{FO:()=>o,Fv:()=>a,LN:()=>s,Ob:()=>r,Tc:()=>n,mE:()=>l});let r={APP_INSTALL:"TEMPORARY_APP_INSTALL_CLICKTHROUGH",APP_TRAFFIC:"TEMPORARY_TRAFFIC_CLICKTHROUGH_APP",AWARENESS:"TEMPORARY_BIDDED_CPM",VIDEO:"TEMPORARY_BIDDED_CPM_VIDEO",TRAFFIC:"CLICKTHROUGH",SHOPPING:"TEMPORARY_SHOPPING",WEB_CONVERSION:"WEB_CONVERSION",APP_INSTALL_V2:"APP_INSTALL_VARIABLE_ATTR",VIDEO_VIEW:"TEMPORARY_MRC_CPV_VIDEO"},n="CONSIDERATION",o="ALL",s={TRAFFIC:"TRAFFIC",AWARENESS:"AWARENESS",APP_INSTALL:"APP_INSTALL",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS",VIDEO_COMPLETION:"VIDEO_COMPLETION"},l={CONSIDERATION:"CONSIDERATION",AWARENESS:"AWARENESS",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES",VIDEO_VIEW:"VIDEO_VIEW",WEB_SESSIONS:"WEB_SESSIONS",VIDEO_COMPLETION:"VIDEO_COMPLETION"},a={[s.TRAFFIC]:l.CONSIDERATION,[s.AWARENESS]:l.AWARENESS,[s.APP_INSTALL]:null,[s.WEB_CONVERSION]:l.WEB_CONVERSION,[s.CATALOG_SALES]:l.CATALOG_SALES,[s.VIDEO_VIEW]:l.VIDEO_VIEW,[s.WEB_SESSIONS]:l.WEB_SESSIONS,[s.VIDEO_COMPLETION]:l.VIDEO_COMPLETION}},422586:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(966113),n=i(89254);function o(e,t){let i="";if(e&&(i=e,t)){let o=(0,n.Z)(e,!0),s="/advertiser/",{hostname:l}=o;(null===l||l===r.KUo)&&(e.startsWith(r.auO)&&(e=e.replace(r.auO,"")),i=e.startsWith(s)?e:s+t+e)}return i}},21353:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(702664),n=i(28543);function o(){let e=(0,r.useSelector)(({advertiser:e})=>e);return(t,i)=>(0,n.default)(t,e,i)}},77601:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});let r="undefined"!=typeof window&&window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now();function n({window:e,duration:t,run:i}){let n=r(),o=0,s=null,l=()=>{let a=r()-n,d=a-o;if(t===1/0)i(0,a,d);else{let e=a/t;if(e>=1){i(1,a,d);return}i(e,a,d)}o=a,s=e.requestAnimationFrame(l)};return{start:()=>{s=e.requestAnimationFrame(l)},cancel:()=>{s&&(e.cancelAnimationFrame(s),s=null)}}}},987765:(e,t,i)=>{"use strict";i.d(t,{t:()=>f,Z:()=>b});var r=i(883119),n=i(667294),o=i(391254),s=i(785893);let l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a=()=>[,,,,,].fill().map(()=>l[Math.floor(Math.random()*l.length)]).join(""),d=e=>{let t=[],i=Math.floor(3*Math.random()+1);for(let r=0;r<i-1;r+=1){let i=Math.floor(Math.random()*(e.length-1)+1);t.push(i)}t.sort((e,t)=>e-t);let r=[],n=0;for(let i=0;i<t.length;i+=1)r.push(e.slice(n,t[i])),n=t[i];return r.push(e.slice(n)),[...r]};function c({children:e}){let t=(0,n.useMemo)(()=>d(e.replace("  "," ")).map(e=>({className:a(),content:e})),[e]);return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(o.Z,{unsafeCSS:t.map(({className:e,content:t})=>`.${e} { display: inline; overflow-wrap: unset; } .${e}:before { content: "${t}"; font-weight: 600;  }`).join(" ")}),t.map(({className:e})=>(0,s.jsx)("div",{className:e},e))]})}var u=i(773285),h=i(780280),p=i(19121);let _=e=>"Promoted by"===e,g=()=>{var e;let t=(0,p.Z)(),{checkExperiment:i}=(0,u.F)(),r=null!==(e=i("web_obfuscate_ads_with_global_css").group.split("_")[3])&&void 0!==e?e:"op";return`${r}${t.isAuth?t.id:"unauth"}`},m=()=>(0,s.jsx)("div",{className:g()}),f=()=>{let{checkExperiment:e}=(0,u.F)(),t=g();return e("web_obfuscate_ads_with_global_css").anyEnabled?(0,s.jsx)(o.Z,{unsafeCSS:`.${t}:before { content: "Promoted by"; font-weight: 600;  }`}):null};function x({children:e}){let{checkExperiment:t}=(0,u.F)();return t("web_obfuscate_ads_with_global_css").anyEnabled?(0,s.jsx)(m,{}):(0,s.jsx)(c,{children:e})}function b({children:e,lineClamp:t,size:i,underline:n,weight:o}){let{isAuthenticated:l}=(0,h.B)(),a=l&&_(e);return(0,s.jsx)(r.xv,{lineClamp:t,size:i,title:a?void 0:e,underline:n,weight:o,children:a?(0,s.jsx)(x,{children:e}):e})}},377184:(e,t,i)=>{"use strict";i.d(t,{CX:()=>l,ML:()=>n,N$:()=>s,Od:()=>r,yK:()=>o});let r="extensionNagCount",n=4,o=3,s=1050,l=880},773515:(e,t,i)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&"url"in e&&"media"in e}i.d(t,{Z:()=>r})},945212:(e,t,i)=>{"use strict";i.d(t,{O:()=>n,r:()=>r});let r="ref",n="os"},78714:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(56641),n=i(867820),o=i(954931);let s=(e,t)=>{null!=t&&t.disableOriginCheck||(0,o.Z)(e)||(e="/",(0,n.My)("url_reset")),(0,r.Z)(e)}},792182:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(667294);function n(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}function o(){return window.innerWidth}function s(){return window.innerHeight}function l(){return null}function a(){let e=(0,r.useSyncExternalStore)(n,s,l),t=(0,r.useSyncExternalStore)(n,o,l);return null!==e&&null!==t?{height:e,width:t}:null}},924196:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r={GOOGLE_ADWORDS_ID:852082959,GOOGLE_ADWORDS_LABEL_PROPEL_QUALIFIED:"Mah3CPrv13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_PROPEL_UNQUALIFIED:"_DJfCKzy13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CREATE:"GGbCCM7p-nYQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT:"SwBsCIz9k3cQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_ADVERTISER_INTENT:"kDf0COWL4okBEI-Cp5YD",DOUBLECLICK_TAG_ID:"8032161",DOUBLECLICK_EVENT_ID_PROPEL:"prope001",DOUBLECLICK_CATEGORY_ID_PROPEL_QUALIFIED:"pinte0",DOUBLECLICK_CATEGORY_ID_PROPEL_UNQUALIFIED:"pinte00",TRADEDESK_ADVERTISER_ID:"fc1uc9n",TRADEDESK_EVENT_ID_GENERAL_PAGEVIEW:"ogalyt3",TRADEDESK_CONVERSION_ID_PROPEL_QUALIFIED:"judrn76",TRADEDESK_CONVERSION_ID_PROPEL_UNQUALIFIED:"f0v4s5d",FACEBOOK_ADVERTISER_ID:"956400731086791",TWITTER_UNIVERSAL_TAG_ID:"nuzh8",TWITTER_CONVERSION_ID_PROPEL_QUALIFIED:"ny8zl",TWITTER_CONVERSION_ID_PROPEL_UNQUALIFIED:"nya0d",LINKEDIN_PARTNER_ID:"44352",LINKEDIN_CONVERSION_ID_PROPEL_QUALIFIED:"166217",LINKEDIN_CONVERSION_ID_PROPEL_UNQUALIFIED:"171754",LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT:"529092",PINTEREST_TAG_ID:"2614461171935",SMB_PAID_PINTEREST_ID:"2613736141997"}},904431:(e,t,i)=>{"use strict";function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>o});class n{static reportGoogleConversion(e,t,i,r){if(!r){if(void 0===window.gtag_report_conversion){n.queuedGoogleConversions.push({id:e,label:t,url:i});return}window.gtag_report_conversion(e,t,i)}}static reportFacebookConversion(e,t,i){if(void 0===window.fbq){n.queuedFacebookConversions.push({id:e,event:t,data:i});return}i?window.fbq("track",t,i):window.fbq("track",t)}static reportCustomFacebookConversion(e,t,i){if(void 0===window.fbq){n.queuedFacebookConversions.push({id:e,isCustomEvent:!0,event:t,data:i});return}i?window.fbq("trackCustom",t,i):window.fbq("trackCustom",t)}static reportPinterestConversion(e,t,i){if(void 0===window.pintrk){n.queuedPinterestConversions.push({id:e,event:t,data:i});return}i?window.pintrk("track",t,i):window.pintrk("track",t)}static reportTheTradeDeskConversion(e,t){let i=document.createElement("img");i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("role","presentation"),i.style.borderStyle="none",i.style.position="absolute",i.setAttribute("src",`//insight.adsrvr.org/track/conv/?adv=${e}&ct=0:${t}&fmt=3`),document.body.insertBefore(i,document.body.lastChild)}static reportLinkedInConversion(e,t){let i=document.createElement("img");i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("role","presentation"),i.setAttribute("src",`https://dc.ads.linkedin.com/collect/?pid=${e}&conversionId=${t}&fmt=gif`),i.style.display="none",document.body.insertBefore(i,document.body.lastChild)}static reportDoubleClickConversion(e,t,i){let r=document.createElement("iframe");r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("frameborder","0"),r.setAttribute("src",`https://${e}.fls.doubleclick.net/activityi;src=${e};
    type=${t};cat=${i};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=${1e13*Math.random()}?`),r.style.display="none",document.body.insertBefore(r,document.body.lastChild)}static insertGoogleAdWordsTag(e,t){let i=document.createElement("script");t||(i.setAttribute("async",""),i.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=AW-${e}`),i.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(e,t,i){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","AW-"+e),window.gtag_report_conversion=function(e,t,i){return window.gtag("event","conversion",{send_to:"AW-"+e+"/"+t,event_callback:function(){void 0!==i&&window.location.assign(i)}}),!1};let i=n.queuedGoogleConversions;for(let r=0;r<i.length;r+=1){let o=i[r];o.id===e&&n.reportGoogleConversion(o.id,o.label,o.url,t)}}),document.body.insertBefore(i,document.body.firstChild)}static insertFacebookPixelTag(e){var t,i,r,o,s,l;t=window,i=document,r="script",t.fbq||(o=t.fbq=function(){"function"==typeof o.callMethod?o.callMethod(...arguments):o.queue.push(arguments)},t._fbq||(t._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(s=i.createElement(r)).async=!0,s.src="//connect.facebook.net/en_US/fbevents.js",(l=i.getElementsByTagName(r)[0]).parentNode.insertBefore(s,l)),window.fbq("init",e),window.fbq("track","PageView");let a=n.queuedFacebookConversions;for(let t=0;t<a.length;t+=1){let i=a[t];i.id===e&&(i.isCustomEvent?n.reportCustomFacebookConversion(e,i.event,i.data):n.reportFacebookConversion(e,i.event,i.data))}}static insertPinterestTag(e){!function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};let t=window.pintrk;t.queue=[],t.version="3.0";let i=document.createElement("script");i.async=!0,i.src=e;let r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}}("https://s.pinimg.com/ct/core.js"),window.pintrk("load",e),window.pintrk("page");let t=n.queuedPinterestConversions;for(let i=0;i<t.length;i+=1){let r=t[i];r.id===e&&n.reportPinterestConversion(e,r.event,r.data)}}}r(n,"queuedGoogleConversions",[]),r(n,"queuedFacebookConversions",[]),r(n,"queuedPinterestConversions",[]);let o=n},639410:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(667294),n=i(898781),o=i(785893);function s(){let e=(0,n.ZP)();return(0,o.jsx)(r.Fragment,{children:e.bt("400 million", "400 million", "Business.MauText", undefined, true)})}},306775:(e,t,i)=>{"use strict";i.d(t,{Fl:()=>a,Pw:()=>h,dl:()=>l,k3:()=>p,su:()=>_,tW:()=>d});var r=i(926275),n=i(411938),o=i(826067);let s=["AT","AU","BE","BR","CA","CH","CY","CZ","DE","DK","ES","FI","FR","GB","GR","HU","IE","IT","LU","MT","MX","NL","NO","NZ","PT","RO","SE","SK","US"],l=["AU","AT","BE","BR","CA","CY","CZ","DK","FI","FR","DE","GR","HU","IE","IT","LU","MT","MX","NL","NZ","NO","PL","PT","RO","SK","ES","SE","CH","GB","US","AR","CO","CL","JP"],a=e=>s.includes(e.toUpperCase()),d=Object.freeze({NOT_ANSWERED:0,YES:1,NO:2,NOT_SURE:3}),c=e=>e?`/business/ad_create?pinId=${e}`:"/business/ad_create",u=(e,t)=>{let i=(0,o.ru)("/business/convert",{next:t});e.push(i)},h=({requestContext:e,history:t,pinId:i})=>{u(t,c(i))},p=e=>{let t=e.trim().split(" ").filter(e=>!!e),i=t.length>0?t[0]:"",r=t.length>1?t.slice(1).join(" "):"";return{firstName:i,lastName:r}},_=e=>e.isAuth&&!e.isPartner&&!(0,n.Z)(null,e)&&!(0,r.Z)(e.createdAt)},41861:(e,t,i)=>{"use strict";function r(e){return function e(t,i){let r;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let n=i.find(e=>e.value===t);if(n)return n.result;let o=Object.prototype.toString.call(t);switch(o){case"[object Array]":r=Array(t.length);break;case"[object Set]":r=new Set;break;case"[object Object]":case"[object Arguments]":r={};break;case"[object Map]":r=new Map;break;default:return t}let s=[...i,{value:t,result:r}];switch(o){case"[object Array]":t.forEach((t,i)=>{r[i]=e(t,s)});break;case"[object Set]":t.forEach(t=>{r.add(e(t,s))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,i])=>{r[t]=e(i,s)});break;case"[object Map]":t.forEach((t,i)=>{r.set(i,e(t,s))})}return r}(e,[])}i.d(t,{Z:()=>r})},81636:(e,t,i)=>{"use strict";i.d(t,{Q:()=>a,Z:()=>d});var r=i(667294),n=i(112690),o=i(385740),s=i(767546),l=i(780280);function a(e,t){let{setViewContextData:i}=(0,o.sV)(),{requestIdentifier:a}=(0,l.B)(),d=(0,n.Z)(),{viewData:c}=(0,o.SU)();(0,r.useEffect)(()=>{if(e){var t;i({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data?(0,s.Z)(c,e.view_data):c,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),d({...e,event_type:13,request_identifier:a})}},[t])}function d(e){let{children:t,log:i}=e;return a(i),t||null}},407043:(e,t,i)=>{"use strict";i.d(t,{B:()=>a,v:()=>l});var r=i(385740),n=i(425288),o=i(785893);let{Provider:s,useHook:l}=(0,n.Z)("ContextLogger");function a({children:e,value:t}){let{setViewContextData:i}=(0,r.sV)();return t.injectSetViewContextDataFromHook=i,(0,o.jsx)(s,{value:t,children:e})}},112690:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(407043);let n=()=>(0,r.v)().logContextEvent},385740:(e,t,i)=>{"use strict";let r;i.d(t,{BE:()=>d,Ih:()=>c,SU:()=>u,sV:()=>a});var n=i(667294),o=i(425288),s=i(785893);let{Provider:l,useHook:a}=(0,o.Z)("View");function d(){return r}function c({children:e,initialState:t={}}){let[i,o]=(0,n.useState)(t),a=(0,n.useCallback)(()=>{r={},o({})},[]),d=(0,n.useCallback)(e=>{r={...r,...e},o(t=>({...t,...e}))},[]),c=(0,n.useMemo)(()=>({viewContextData:i,clearViewContextData:a,setViewContextData:d}),[i,d,a]);return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(l,{value:c,children:e})})}function u(){let{viewContextData:e}=a();return e}},425288:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294);function n(e,t){let i="consumer"===t?`${e}Consumer`:`use${e}`;return`
  ${i} must be used within a ${e}Provider.
  Please see https://pdocs.pinadmin.com/docs/webapp/docs/testing-jest#createhydra-errors for more information.
  `}function o(e,t){let i=(0,r.createContext)(t),{messageDisplayName:o}=function(e,t){let i=e.slice(1);if(i=i.endsWith("Context")?i:`${i}Context`,t){let r=`with${e[0].toUpperCase()}${i}(${t})`;return{hocDisplayName:r}}let r=`${e[0].toLowerCase()}${i}`,n=`${e[0].toUpperCase()}${i}`;return{propsDisplayName:r,messageDisplayName:n}}(e);i.displayName=o;let{Provider:s}=i,l=({children:e})=>{let t=(0,r.useContext)(i);if(void 0===t)throw Error(n(o,"consumer"));return e(t)},a=()=>(0,r.useContext)(i);return s.displayName=`${o}Provider`,l.displayName=`${o}Consumer`,{Provider:s,Consumer:l,MaybeConsumer:({children:e})=>{let t=(0,r.useContext)(i);return e(t)},useMaybeHook:a,useHook:function(){let e=a();if(void 0===e)throw Error(n(o,"hook"));return e}}}},998499:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(316271);function n(e,t={execution:"sequential"}){let{execution:i}=t,n=e.reduce((e,t)=>{let{combinedTransitions:n,totalDelay:o}=e,s=t.delay||0,l="sequential"===i?o+s:t.delay,a=0===n.length?(0,r.Z)(t):`${n}, ${(0,r.Z)({...t,delay:l})}`;return{combinedTransitions:a,totalDelay:o+s}},{combinedTransitions:"",totalDelay:0});return n.combinedTransitions}},316271:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});let r={instant:85,short:250,medium:420,semiLong:500,long:800},n={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function o({property:e,duration:t,timingFunction:i,delay:o}){let s=o?` ${o}ms`:"",l="number"==typeof t?`${t}ms`:`${r[t]}ms`;return`${e} ${l} cubic-bezier(${n[i]})${s}`}},643010:(e,t,i)=>{"use strict";i.d(t,{F6:()=>u,Hs:()=>c,Yc:()=>a,vs:()=>d});var r=i(667294),n=i(844974),o=i(867820);let s="theme",l="dark"===(0,n.qn)(s),a=()=>l;function d(){let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(a())},[t]),e}let c=()=>{(0,n.Nh)(s,"dark"),(0,o.My)("mweb.dark_mode.enable"),window.location.reload()},u=()=>{(0,n.L_)(s),(0,o.My)("mweb.dark_mode.disable"),window.location.reload()}},782534:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s,k:()=>r.k});var r=i(451820),n=i(780280),o=i(785893);let s=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,o.jsx)(n.LC,{children:n=>(0,r.Z)(n.locale,i,e,t)})},969759:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=(e,t)=>{let i=new Date(e);return i.setDate(e.getDate()+t),i}},451820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o,k:()=>r});let r={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},n=function(e){switch(e){case r.YEAR:return{year:"numeric"};case r.LONG:return{year:"numeric",month:"long",day:"numeric"};case r.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case r.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case r.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case r.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case r.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case r.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.MONTH_DAY:return{month:"long",day:"numeric"};case r.SHORT_MONTH:return{month:"short"};case r.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case r.DAY:return{day:"numeric"};case r.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case r.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case r.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case r.TIME:return{hour:"numeric",minute:"2-digit"};case r.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case r.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function o(e,t,i,r=!0){let o=n(i);r&&(o.timeZone="UTC");let s=new Intl.DateTimeFormat(e,o);return s.format(t)}},81226:(e,t,i)=>{"use strict";function r(e){let t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}i.d(t,{Z:()=>r})},816068:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=e=>Math.floor(new Date(e).getTime()/1e3)},594736:(e,t,i)=>{"use strict";function r(e,t,i){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(!o(e[r],t[r],i+1))return!1;return!0}function n(e,t,i){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(!(r in t)||!o(e[r],t[r],i+1))return!1;return!0}function o(e,t,i){if(i>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let o=Object.prototype.toString.call(e),s=Object.prototype.toString.call(t);if(o!==s)return!1;switch(o){case"[object Array]":return r(e,t,i);case"[object Set]":return r(Array.from(e).sort(),Array.from(t).sort(),i);case"[object Object]":case"[object Arguments]":return n(e,t,i);case"[object Map]":return n(Object.fromEntries(e),Object.fromEntries(t),i);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function s(e,t){return o(e,t,0)}i.d(t,{ZP:()=>s,qP:()=>r})},995146:(e,t,i)=>{"use strict";i.d(t,{a$:()=>h,kv:()=>u,pH:()=>p});var r=i(214494),n=i(584595),o=i(966113),s=i(643913);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends Error{constructor(e){super(e.statusText),l(this,"name","CrossDomainHandshakeHttpError"),this.response=e}}class d extends Error{constructor(e){super(e.message),l(this,"name","CrossDomainHandshakeApiError"),this.api_error_code=e.code,this.response=e}}let c=({path:e,data:t,unauthId:i})=>fetch(`${o.cDv}/v3/${e}/handshake/`,{credentials:"include",mode:"cors",method:"POST",body:(0,s.Z)(t),headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":i}}).then(e=>{if(200===e.status||401===e.status||409===e.status)return e;throw new a(e)}).then(e=>e.json()).then(e=>{if("success"===e.status)return Promise.resolve(e);if(e.code===n.Zn)return e.api_error_code=e.code,Promise.reject(e);throw new d(e)}).catch(e=>{throw e}),u=(e,t=!1)=>r.Z.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),h=(e,{facebookToken:t,inviteCode:i,locale:r,referrer:n,unauthId:o})=>{let s=e.business_name&&"partner"||e.facebook_id&&"facebook"||"email",l={email:e.email||"",username:e.username||"",password:e.password||"",first_name:e.first_name||"",last_name:e.last_name||"",country:e.country||"",locale:r,referrer:n};return e.birthday&&(l={...l,birthday:e.birthday}),e.custom_gender&&(l={...l,custom_gender:e.custom_gender}),e.gender&&(l={...l,gender:e.gender}),e.business_name&&(l={...l,business_name:e.business_name,first_name:e.business_name}),i&&(l={...l,invite_code:i}),e.facebook_id&&(l={...l,facebook_id:e.facebook_id,facebook_token:t||e.facebook_token||""}),e.recaptchaV3Token&&(l={...l,recaptcha_v3_token:e.recaptchaV3Token}),c({path:`register/${s}`,data:l,unauthId:o})},p=(e,{recaptchaV3Token:t,referrer:i,unauthId:r})=>{let n=e.mfa_token&&"login/mfa"||"login",o={username_or_email:e.username_or_email.trim(),password:e.password,referrer:i};return e.mfa_token&&(o={...o,mfa_token:e.mfa_token}),t&&(o={...o,token:t}),c({path:n,data:o,unauthId:r})}},233211:(e,t,i)=>{"use strict";i.d(t,{B$:()=>d,Cw:()=>s,I7:()=>a,c4:()=>l});var r=i(667294),n=i(425288);let o=(0,r.createContext)(null),s=()=>(0,r.useContext)(o),l=o.Provider,{Provider:a,useHook:d}=(0,n.Z)("DesktopCoreLogin")},11363:(e,t,i)=>{"use strict";i.d(t,{Bx:()=>n,N4:()=>s,is:()=>l,lt:()=>r,oM:()=>o});let r=e=>e.bt("You're almost there! Log in to access all of Pinterest", "You're almost there! Log in to access all of Pinterest", "loginModal.limitedLogin.subheader", undefined, true),n=e=>e.bt("Log in to save this Pin", "Log in to save this Pin", "limitedLogin.modalHeader.repin", undefined, true),o=e=>e.bt("Log in to edit this Pin", "Log in to edit this Pin", "limitedLogin.modalHeader.editPin", undefined, true),s=({i18n:e,toFollow:t})=>t?e.bt("Log in to follow", "Log in to follow", "limitedLogin.modalHeader.follow", undefined, true):e.bt("Log in to unfollow", "Log in to unfollow", "limitedLogin.modalHeader.unfollow", undefined, true),l=e=>e.bt("Log in to create a Pin or board", "Log in to create a Pin or board", "limitedLogin.modalHeader.create", undefined, true)},780679:(e,t,i)=>{"use strict";i.d(t,{g:()=>s,t:()=>o});var r=i(667294);let n=(0,r.createContext)(null),o=n.Provider,s=()=>(0,r.useContext)(n)},85334:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var r=i(667294),n=i(214494),o=i(464232),s=i(407043),l=i(231486),a=i(226198),d=i(995146),c=i(532975),u=i(88307),h=i(584595),p=i(283943),_=i(807998),g=i(290148),m=i(383690),f=i(330102),x=i(817656),b=i(762752),y=i(957161),v=i(867820),P=i(69642),S=i(529195),A=i(67347);function w(){let e=(0,p.hq)(),t=(0,m.Z)(),{logContextEvent:i}=(0,s.v)(),w=(0,P.Z)();return(0,r.useCallback)(({creds:r,isAccountSwitch:s,loggingOptions:{loggingData:p=Object.freeze({}),loginAttemptContextEvent:m},recaptchaV2Token:P,recaptchaV3Token:E})=>{t();let I=!!(r.facebook_autologin||r.autologin),j=(0,g.eD)(r);y.Z.setItem(o.V6,(0,g.nY)(r));let C=e=>{let t=r.google_open_id_token?"google":"facebook";I&&(0,v.dy)({event:e,provider:t})},T=e=>{I||(0,v.EX)({event:e,provider:(0,g.nY)(r)})},D=e=>{var t;i({...m,event_type:e,aux_data:{...m.aux_data,upsell_reason:(null===(t=m.aux_data)||void 0===t?void 0:t.upsell_reason)||(I?"autologin":y.Z.getItem(o.bg)||null),upsell_view_count:y.Z.getItem(o.w0)||0}}),7536===e&&y.Z.setItem(o.w0,0)};D(7534),w({action:I?"autologin":"login",event:"attempt",trigger:p.trigger,type:j});let O=e=>{let t="referrer_unknown";try{let e=document.referrer;t=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(e){}let i=p===Object(p)?p.container:"container_unknown";(0,v.My)("login.referrer."+t+"."+j),(0,v.My)("login.container."+String(i)+"."+j),(0,v.My)("login.type."+j);let n=j||"method_unknown",o=p.page||"page_unknown";r.facebook_autologin?((0,v.My)("web_autologin_facebook"),(0,v.My)("new_web_autologin_facebook",{page:o,referrer:t,container:i})):((0,v.My)(`web_login.${n}.success.${o}.${String(i)}.${t}.tier1`),(0,A.nP)(`web_login.${n}.success.${o}.${String(i)}.${t}.tier1`),(0,v.My)(`new_web_login.${n}.success`,{page:o,referrer:t,container:i})),(0,f.ko)({country:null==e?void 0:e.country,countryFromHostName:null==e?void 0:e.countryFromHostName,countryFromIp:null==e?void 0:e.countryFromIp,regionFromIp:null==e?void 0:e.regionFromIp,deviceType:"Desktop",eventCategory:"Logins"}),D(7536),w({action:I?"autologin":"login",event:"success",trigger:p&&p.trigger,type:j})},z=({error:e,isCrossDomain:t})=>{if(!e)return;let i=e.http_status===x.Ej?x.Ej:e.api_error_code,r=i;i&&h.qF.has(i)&&(r=h.qF.get(i));let{container:n,trigger:o}=p;(0,v.My)(`${t?"unauth_web_client_cctld_login_api_error":"unauth_web_client_login_api_error"}.${String(r)}.${n||"unknow_container"}.${j}`),D(7535),w({action:I?"autologin":"login",event:"fail",trigger:o,type:j})};if(r.username_or_email&&!r.mfa_resend&&e&&-1!==_.Z.indexOf(e.origin)){let t=e=>(0,v.My)(`web_cross_domain_login.${e}.${(0,g.eD)(r)}`);t("attempt");let{referrer:i,facebookToken:n,unauthId:o}=e;return(0,d.pH)(r,{recaptchaV3Token:E,referrer:i,facebookToken:n,unauthId:o}).then(e=>{let i=e&&e.data;if(i)return t("success_with_token"),(0,d.kv)(i).then(e=>(t("success_token_exchanged"),O(),Promise.resolve()),e=>{throw t("success_token_not_exchanged"),e});throw t("success_without_token"),Error()},e=>{throw t("failure"),z({error:e,isCrossDomain:!0}),e})}C("login_api_call_start"),T("login_api_call_start");let R=(0,S.OJ)(),k=n.Z.create("UserSessionResource",{...r,...R?{referrer:R}:Object.freeze({}),get_user:r.get_user||r.switch_account&&s,app_type_from_client:7===e.appType?7:5,visited_pages_before_login:(0,S.t_)()||null,recaptchaV2Token:P,recaptchaV3Token:E});return k.callCreate({showError:!1,async:!0}).then(e=>{let{country:t,country_from_hostname:i,country_from_ip:r,region_from_ip:n}=(null==e?void 0:e.client_context)||Object.freeze({});return O({country:t,countryFromHostName:i,countryFromIp:r,regionFromIp:n}),C("login_api_call_success"),T("login_api_call_success"),(0,c.B)(!1),(0,u.Z)(),l.zN(a.e7.name),l.zN(a.x3.name),(0,b.D)("login").then(()=>e)},e=>(z({error:e,isCrossDomain:!1}),C("login_api_call_failure"),T("login_api_call_failure"),Promise.reject(e)))},[e,t,i,w])}},946984:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(11363),n=i(898781),o=i(987318);let s=()=>{let{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,o.H)(),s=(0,n.ZP)();return"AUTH"===t.type?null:t=>{null==e||e.setVisible(!0),null==i||i.setText((null==t?void 0:t.loginModalHeader)||(0,r.lt)(s))}}},532975:(e,t,i)=>{"use strict";i.d(t,{B:()=>s,a:()=>o});var r=i(464232),n=i(957161);let o=()=>!!n.Z.getItem(r.WM),s=e=>{n.Z.setItem(r.WM,!!e)}},583421:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d,y:()=>l});var r=i(667294),n=i(60598),o=i(14890),s=i(785893);let l={Pin:"pin",Board:"board",Section:"section",CarouselItem:"carouselitem"};class a extends r.Component{render(){let{children:e,connectDragSource:t,connectDropTarget:i,isDragging:r,isDraggingInternal:n,isDropTargetOnly:o}=this.props,l=i((0,s.jsx)("div",{ref:e=>this.targetEl=e,style:{opacity:r||n?0:1},children:e}));return o?l:t(l)}}let d=(0,o.compose)((0,n.GR)(e=>e.type,{hover:({index:e,onDragHover:t},i,r)=>{t(e,function(e,t){let i=t.targetEl;if(!(i&&i instanceof HTMLElement))return null;let{x:r,y:n}=e.getClientOffset(),{left:o,right:s,top:l,bottom:a,width:d,height:c}=i.getBoundingClientRect();return{positionRelativeToCenter:{x:r-(o+s)/2,y:n-(l+a)/2},boundingBox:{width:d,height:c}}}(i,r))}},e=>({connectDropTarget:e.dropTarget()})),(0,n.Ej)(e=>e.type,{beginDrag:({index:e,onDragBegin:t})=>(t(e),{index:e}),endDrag:({onDragEnd:e},t)=>e(t.didDrop())},(e,t)=>({connectDragSource:e.dragSource(),isDraggingInternal:t.isDragging()})))(a)},266898:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(60598),n=i(395141);let o=(0,r.Z5)(n.ZP)},345221:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(60598),n=i(14890);i(583421);var o=i(266898);let s=e=>t=>(0,n.compose)(o.Z,(0,r.GR)(e,{},(e,t)=>({connectDropTarget:e.dropTarget(),isDragWithinBounds:t.isOver()})))(t)},375571:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(667294),n=i(395164),o=i(67347);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends r.Component{constructor(...e){super(...e),s(this,"state",{error:null,info:null}),s(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{var i;let{name:t}=this.props,r=this.props.type||"secondary";(0,n.T)({extraData:null!==(i=e.extraData)&&void 0!==i?i:{},errorBoundary:t,errorBoundaryType:r,message:e.message,name:e.name,stack:e.stack}),(0,o.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,o.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(375571);let n=r.Z},320415:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var r=i(667294),n=i(702664),o=i(112690),s=i(332611),l=i(214494);let a=(e,t,i,r)=>(n,o)=>a=>{if(n&&n.id){let d=l.Z.create(e,{placed_experience_id:n.id,extra_context:{}});switch(t){case"dismissed":d.callDelete().then(()=>{a((0,s.fO)()),i&&r&&i({event_type:r,object_id_str:n.id.toString()})});break;case"completed":d.callUpdate().then(()=>{o||a((0,s.fO)()),i&&r&&i({event_type:r,object_id_str:n.id.toString()})});break;case"viewed":d.callUpdate().then(()=>{i&&r&&i({event_type:r,object_id_str:n.id.toString()})})}}},d=e=>a("UserExperienceCompletedResource","completed",e,6567),c=a("UserExperienceResource","dismissed"),u=e=>a("UserExperienceViewedResource","viewed",e,4503);var h=i(785893);function p(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _ extends r.Component{constructor(...e){super(...e),p(this,"state",{hasCompleted:[],hasDismissed:[]}),p(this,"view",()=>{let{experience:e,isBackendExperience:t,targeting:i,viewExperience:r,viewExperienceObject:n}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",n(e)):i?r(e.placement_id,e.experience_id,i):r(e.placement_id,e.experience_id))}),p(this,"complete",e=>{let{completeExperience:t,completeExperienceObject:i,experience:r,isBackendExperience:n,preventRemoval:o,targeting:s}=this.props,l=e||1;if(r&&!this.state.hasCompleted.includes(r.experience_id)){let{placement_id:e,experience_id:a}=r||{},d=o||2===l;(1===l||d)&&e&&a&&(n?i(r,d):s?t(e,a,d,s):t(e,a,d),this.setState(e=>({hasCompleted:[...e.hasCompleted,a]})))}}),p(this,"dismiss",()=>{let{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:r,preventRemoval:n,targeting:o}=this.props,{placement_id:s,experience_id:l}=i||{};i&&!this.state.hasDismissed.includes(l)&&(r?t(i):o?e(s,l,!!n,o):e(s,l,!!n),this.setState(e=>({hasDismissed:[...e.hasDismissed,l]})))}),p(this,"isEligibleExperience",()=>{let{experience:e}=this.props;if(!e)return!1;let{eligibleIds:t,eligibleTypes:i,predicate:r,transitionType:n}=this.props,{experience_id:o,type:s}=e;return t&&t.length?t.includes(o):i&&i.length?i.includes(s):r?r(e):!n||n===s})}componentDidMount(){if(this.props.disableAutoView)return;let{experience:e}=this.props;e&&this.isEligibleExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;let t=e.experience,i=this.props.experience;i&&this.isEligibleExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){let{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.isEligibleExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):r.Children.only(e):null}}function g(e){let t=(0,n.useSelector)(({experiences:t})=>e.experience||(e.placementId?t[e.placementId]:void 0)),i=(0,n.useDispatch)(),r=(0,s.be)(),l=(0,s.Am)(),a=(0,s.Ig)(),p=(0,o.Z)();return(0,h.jsx)(_,{...e,completeExperience:(e,t,n,o)=>i(r(e,t,n,!1,{},o)),completeExperienceObject:(e,t)=>i(d(p)(e,t)),dismissExperience:(e,t,r,n)=>i(l(e,t,r,void 0,n)),dismissExperienceObject:e=>i(c(e)),experience:t,viewExperience:(e,t,r)=>i(a(e,t,!1,!1,void 0,r)),viewExperienceObject:e=>i(u(p)(e))})}p(_,"defaultProps",{eligibleIds:[],eligibleTypes:[]})},701500:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var r=i(667294),n=i(883119),o=i(570470),s=i(785893);class l extends r.Component{renderPulsar(){let{anchor:e,handleComplete:t,handlePulsarCompleteOnHover:i,zIndex:r}=this.props;return(0,s.jsx)(o.Z,{anchor:e,onMouseEnter:i,onTouch:t,zIndex:r})}renderFlyout(){let{anchor:e,tooltip:t,handleDismiss:i,handleComplete:r}=this.props;if(!t)return null;let{cancelButtonText:o,confirmButtonText:l,mainText:a,idealDirection:d="down"}=t,c=o&&!!i&&l&&r;return(0,s.jsx)(n.Li,{anchor:e,idealDirection:d,message:a,onDismiss:i,primaryAction:{onClick:c?i:r,text:c?String(o):String(l),role:"button"},size:"flexible"})}render(){let{anchor:e,pulserOnly:t}=this.props;return e?t?this.renderPulsar():this.renderFlyout():null}}var a=i(123159),d=i(764990),c=i(249647),u=i(70061);let h=({anchor:e,anchorExperiences:t,passedExperience:i})=>i||(t?t[e]:null),p=e=>{let{display_data:t}=e;return t.tooltip&&(t.tooltip={...t.tooltip.options,...t.tooltip},delete t.tooltip.options),(0,c.Z)(u.Z,!0)(t)};function _({anchor:e,anchorElementRef:t,children:i,containerBoxConfig:o,experience:c,isHidden:u,onCompleteClick:_,zIndex:g}){var m;let{completeExperience:f,dismissExperience:x,experiences:b,viewExperience:y}=(0,a.M)(),v=Object.values(b).reduce((e,t)=>(8===t.type&&(e[(0,d.A0)(t)]=t),e),{}),P=h({anchor:e,anchorExperiences:v,passedExperience:c}),S=(null==P?void 0:null===(m=P.display_data)||void 0===m?void 0:m.delay)||0,[A,w]=(0,r.useState)(!!S);if((0,r.useEffect)(()=>{if(S>0&&A){let e=setTimeout(()=>{w(!1)});return()=>clearTimeout(e)}return()=>{}},[S,A]),(0,r.useEffect)(()=>{!A&&P&&y(P.placement_id,P.experience_id)},[A,P]),!P||A||u)return r.Children.only(i);let E=p(P),I=()=>{var e;null!==(e=P.display_data)&&void 0!==e&&e.complete_on_hover&&f(P.placement_id,P.experience_id)};return(0,s.jsxs)(n.xu,{display:null==o?void 0:o.display,height:null==o?void 0:o.height,position:"relative",children:[(0,s.jsx)(n.iP,{onMouseEnter:I,onTap:()=>{_&&_(),E.skipComplete||f(P.placement_id,P.experience_id)},children:r.Children.only(i)}),(0,s.jsx)(l,{anchor:t||null,handleComplete:()=>{t instanceof HTMLElement&&t.click()},handleDismiss:e=>{null!=e&&e.event&&e.event.stopPropagation(),x(P.placement_id,P.experience_id)},handlePulsarCompleteOnHover:I,pulserOnly:!!E.pulserOnly,tooltip:E.tooltip,zIndex:g})]})}},123159:(e,t,i)=>{"use strict";i.d(t,{F:()=>h,M:()=>u});var r=i(667294),n=i(702664),o=i(14890),s=i(425288),l=i(332611),a=i(957191),d=i(785893);let{Provider:c,useHook:u}=(0,s.Z)("ExperienceContext");function h({children:e}){let[t,i]=(0,r.useReducer)((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,mountedPlacements:{...e.mountedPlacements,[t.payload]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let i={...e};return delete i.mountedPlacements[t.payload],delete i.registerdAfterActionPlacements[t.payload],i}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[t.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:s,registerdAfterActionPlacements:u}=t,h=(0,n.useDispatch)(),p=(0,n.useSelector)(e=>e.experiences),_=(0,l.be)(),g=(0,l.Am)(),m=(0,l.Ig)(),f=(0,r.useMemo)(()=>{let e=(0,o.bindActionCreators)({completeExperience:_,dismissExperience:g,fetchAllExperiences:l.fO,fetchAllExperiencesMulti:a.NW,fetchExperienceForPlacements:l.pz,mountPlacement:l.N,triggerExperimentsForPlacement:l.kd,viewExperience:m},h);return{...e,mountPlacement:(t,...r)=>{e.mountPlacement(t,...r),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{i({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[_,g,h,i,m]),x=(0,r.useMemo)(()=>({experiences:p,mountedPlacements:s,registerdAfterActionPlacements:u,...f}),[p,s,u,f]);return(0,d.jsx)(c,{value:x,children:e})}},70943:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var r=i(667294),n=i(615071),o=i(883119),s=i(155378),l=i(320415),a=i(391254),d=i(249647),c=i(780280),u=i(70061),h=i(898781),p=i(6663),_=i(785893);let g=()=>{};function m({color:e,completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:r,dismissButtonText:n,handleComplete:o=g,handleDismiss:s=g,header:l="",headerSubtitle:a=""}){let d=(0,h.ZP)();return(0,_.jsx)(p.Z,{color:e,completeButtonText:t||d.bt("Go", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,dismissButtonText:n||d.bt("Close", "Close", "Closing a Hero banner", undefined, true),external:r,message:(l+" "+a).trim(),onComplete:o,onDismiss:s})}let f=function({handleDismiss:e=()=>{},header:t="",headerSubtitle:i="",dismissButtonText:r=""}){let n=(0,h.ZP)();return(0,_.jsx)(p.Z,{message:`${t} ${i}`,dismissButtonText:r||n.bt("OK", "Got it", "dismissButton.hero.dismissText", undefined, true),onDismiss:e})},x=function({color:e="default",completeButtonText:t,completeButtonUrl:i,completeButtonUrlInNewTab:r,handleComplete:n=()=>{},header:o="",headerSubtitle:s=""}){let l=(0,h.ZP)();return(0,_.jsx)(p.Z,{message:(o+" "+s).trim(),completeButtonText:t||l.bt("Go", "Go", "Completing the Hero banner", undefined, true),completeUrl:i,onComplete:n,external:r,color:e})};var b=i(356997),y=i(349700),v=i(19121);function P({completeButtonText:e,headerSubtitle:t,handleComplete:i,handleDismiss:r}){let n=(0,h.ZP)(),s=(0,v.Z)(),{firstName:l,imageLargeUrl:a}=s.isAuth?s:{};return(0,_.jsx)(o.xu,{display:"flex",justifyContent:"center",position:"relative",children:(0,_.jsxs)(o.xu,{alignItems:"center",borderStyle:"shadow",dangerouslySetInlineStyle:{__style:{backgroundColor:"#EBF4FE"}},display:"flex",justifyContent:"between",marginBottom:2,marginEnd:8,marginStart:8,marginTop:4,padding:8,position:"relative",rounding:4,width:1016,children:[(0,_.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,_.jsx)(o.xu,{marginEnd:6,marginTop:-2,marginBottom:-2,children:(0,_.jsx)(b.qE,{name:l,src:a,size:"lg",outline:!0})}),(0,_.jsxs)(o.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,_.jsx)(o.xu,{marginBottom:2,children:(0,_.jsx)(o.X6,{size:"400",children:(0,y.nk)(n.bt("Welcome back, {{ name }}", "Welcome back, {{ name }}", "shown on a banner, \"welcome back, first_name\"", undefined, true),{name:l})})}),(0,_.jsx)(o.xv,{children:t})]})]}),(0,_.jsx)(o.xu,{marginEnd:4,children:(0,_.jsx)(o.zx,{color:"white",size:"lg",text:e,onClick:i})}),(0,_.jsx)(o.xu,{position:"absolute",padding:2,top:!0,right:!0,children:(0,_.jsx)(o.hU,{accessibilityLabel:n.bt("Close", "Close", "accessible label for close button", undefined, true),iconColor:"darkGray",icon:"cancel",onClick:r,size:"sm"})})]})})}function S({completeButtonUrl:e,onDismiss:t,placementId:i}){let[h,p]=(0,r.useState)(!1),g=(0,c.B)(),b=e=>{switch(e){case 502597:return s.default;case 500863:return P;case 501153:case 501487:return x;default:return m}},y=()=>{h||p(!0)},v=`
.ExperienceHero-enter {
  opacity: 0;
  transform: translateY(-50px);
}

.ExperienceHero-enter-active {
  opacity: 1;
  transform: none;
  transition: all 400ms ease-out;
}

.ExperienceHero-exit {
  opacity: 1;
}

.ExperienceHero-exit-active {
  opacity: 0;
  transition: opacity 400ms ease-out;
}
`;return(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(a.Z,{unsafeCSS:v}),(0,_.jsx)(l.Z,{eligibleTypes:[13],placementId:i,children:({complete:i,dismiss:r,experience:{display_data:s,experience_id:l}})=>{e&&(s.complete_button_url=e);let a=b(l),c={requestContext:g,experienceId:l,handleComplete:i,handleDismiss:()=>{t&&t(),r()},color:a===f?"dark":"infoBase",...(0,d.Z)(u.Z)(s)};return y(),(0,_.jsx)(n.Z,{classNames:"ExperienceHero",in:h,timeout:400,unmountOnExit:!0,children:(0,_.jsx)(o.xu,{marginBottom:4,children:(0,_.jsx)(a,{...c})})})}})]})}},333312:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var r=i(667294),n=i(883119),o=i(320415),s=i(785893);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends r.PureComponent{constructor(...e){super(...e),l(this,"onScroll",()=>{let{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout(()=>{e(),this.dismissed=!0,this.timer=void 0},3e3))}),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){let{anchor:e,text:t,thumbnails:i,idealDirection:r}=this.props,o=i.slice(-3);return(0,s.jsx)(n.J2,{anchor:e,color:"white",idealDirection:r,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,s.jsxs)(n.xu,{alignContent:"center",display:"flex",justifyContent:"between",padding:3,width:"100%",children:[(0,s.jsx)(n.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,s.jsx)(n.xv,{color:"default",weight:"bold",children:t})}),(0,s.jsx)(n.xu,{display:"flex",marginEnd:-2,paddingX:2,children:o.map(e=>(0,s.jsx)(n.xu,{height:60,paddingX:1,width:50,children:(0,s.jsx)(n.zd,{height:60,rounding:2,children:(0,s.jsx)(n.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e))})]})})}}var d=i(570470);function c(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends r.Component{constructor(...e){super(...e),c(this,"dismissRef",(0,r.createRef)()),c(this,"state",{paused:!1}),c(this,"dismissCb",()=>{var e,t;null===(e=(t=this.dismissRef).current)||void 0===e||e.call(t)}),c(this,"handlePulsarClick",(e,t)=>{e?this.setState({paused:!0}):t()})}componentWillUnmount(){let{anchor:e}=this.props;clearTimeout(this.timer),null==e||e.removeEventListener("click",this.dismissCb)}setDefaultPulsarTooltip(e){e.has_pulsar=null==e.has_pulsar||e.has_pulsar,e.has_tooltip=null==e.has_tooltip||e.has_tooltip}getText(e,t,i){return(t&&e.text.replace("{boardName}",t),i)?i(e):e.text}render(){let{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:l,flyoutSize:c,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:_,noClickToDismiss:g,onClickComplete:m,onClickDismiss:f,placementId:x,positionRelativeToAnchor:b,shouldTimeoutDismiss:y,showCaret:v,textAlign:P,textOverflow:S,textOverrideFn:A,textWeight:w,customizedComplete:E,pulsarZIndex:I,advertiserId:j,dismissButtonLocation:C,dismissButtonColor:T,dismissButtonMarginTop:D}=this.props,O=t||(({children:e})=>_?(0,s.jsx)(n.mh,{children:e}):e);return(0,s.jsx)(o.Z,{eligibleIds:i,eligibleTypes:[8],placementId:x,targeting:j?{advertiserId:parseInt(j,10)}:null,children:({complete:t,dismiss:i,experience:o})=>{let{display_data:{scroll_to_dismiss:x,scroll_to_dismiss_delay_in_seconds:j=0,...z}}=o,R=x&&e,k=()=>{L(),setTimeout(i,1e3*j)},L=()=>{R&&(window.removeEventListener("scroll",k),window.removeEventListener("touchmove",k))},N=()=>{L(),t()};if(R&&(window.addEventListener("scroll",k),window.addEventListener("touchmove",k)),this.setDefaultPulsarTooltip(z),!z.has_pulsar&&!z.has_tooltip)return N(),null;y&&z.disappearTime&&z.disappearTime>0&&(this.timer=setTimeout(()=>(k(),null),z.disappearTime));let B=501041===o.experience_id||505086===o.experience_id;return z.has_tooltip&&!z.has_pulsar&&(this.dismissRef.current=k,null==e||e.addEventListener("click",this.dismissCb)),(0,s.jsxs)(r.Fragment,{children:[z.has_pulsar&&(0,s.jsx)(d.Z,{anchor:e,leftOverride:B?342:void 0,onTouch:()=>this.handlePulsarClick(z.has_tooltip,N),paused:this.state.paused,topOverride:B?-5:void 0,zIndex:I&&I.index()}),z.has_tooltip&&(!z.has_pulsar||this.state.paused)&&(z.thumbnail_urls?(0,s.jsx)(a,{anchor:e,dismiss:k,idealDirection:p||"down",text:z.text,thumbnails:z.thumbnail_urls}):(0,s.jsx)(O,{children:(0,s.jsx)(n.J2,{_deprecatedShowCaret:v,anchor:e,color:"deprecatedBlue",idealDirection:p||"down",onDismiss:g?()=>{}:k,positionRelativeToAnchor:!_&&b,shouldFocus:!1,size:c,children:(0,s.jsxs)(n.xu,{column:12,padding:3,children:[(0,s.jsxs)(n.xv,{align:"right"===P?"end":P,color:"inverse",overflow:S,size:u,weight:w||"bold",children:[this.getText(z,l,A),z.secondary_cta_link&&(0,s.jsx)(n.xu,{display:"inlineBlock",marginStart:1,children:(0,s.jsx)(n.xv,{color:"inverse",size:u,weight:"bold",children:(0,s.jsx)(n.rU,{display:"inlineBlock",href:z.secondary_cta_link.url,target:"blank",underline:"hover",children:z.secondary_cta_link.text})})})]}),z.sub_text&&(0,s.jsx)(n.xu,{paddingY:2,children:(0,s.jsx)(n.xv,{color:"inverse",size:u,children:z.sub_text})}),(z.dismiss_button_text||z.complete_button_text)&&(0,s.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:C||"start",marginTop:D||2,children:[z.dismiss_button_text&&(0,s.jsx)(n.xu,{column:6,marginEnd:1,children:(0,s.jsx)(n.zx,{color:T||"blue",fullWidth:h,onClick:()=>{f&&f(),k()},size:"md",text:z.dismiss_button_text})}),z.complete_button_text&&(0,s.jsx)(n.xu,{column:z.dismiss_button_text?6:12,children:E?(0,s.jsx)(n.iP,{fullHeight:!0,onTap:()=>{N(),m&&m()},rounding:2,children:(0,s.jsx)(n.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"10px"}},display:"flex",justifyContent:"center",padding:2,rounding:2,children:(0,s.jsx)(n.xv,{color:"shopping",weight:"bold",children:z.complete_button_text})})}):(0,s.jsxs)(n.kC,{justifyContent:"center",children:[z.complete_button_cta_url&&(0,s.jsx)(n.ZP,{color:"white",fullWidth:h,href:z.complete_button_cta_url,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),N(),m&&m()},size:"md",target:z.complete_button_cta_url?"blank":null,text:z.complete_button_text}),!z.complete_button_cta_url&&(0,s.jsx)(n.zx,{color:"white",fullWidth:h,onClick:()=>{N(),m&&m()},size:"md",text:z.complete_button_text})]})})]})]})})}))]})}})}}c(u,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{"use strict";let r;i.d(t,{Am:()=>f,Ig:()=>g,N:()=>v,Sd:()=>x,YX:()=>y,be:()=>m,fO:()=>h,kd:()=>b,pz:()=>p});var n=i(667294),o=i(214494),s=i(112690),l=i(764990),a=i(957191),d=i(186656),c=i(67347);let u=(e,t,i={})=>(0,c.nP)(`${e}.${t}`,{sampleRate:1,tags:i}),h=(e,t)=>i=>{let r=t?{extra_context:e,targeting:t}:{extra_context:e};return o.Z.create("UserExperiencePlatformResource",r).callGet().then(e=>e.resource_response?i((0,a.OD)(e.resource_response.data)):void 0)},p=(e,t,i,n)=>(s,d)=>{if(t)return Promise.resolve();if(n&&(r=n),1===e.length){let t=e[0],r=d().experiences,n=r[t],o=(null==n?void 0:n.extraContext)||null;if(JSON.stringify(o)===JSON.stringify(i)||(0,l.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return o.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:n}).callGet().then(e=>e.resource_response?s((0,a.cL)(e.resource_response.data)):void 0)},_=(e,t,i,n)=>(s,l,d,c=!1,u,p)=>(_,g)=>{let{experiences:m,experiencesMulti:f}=g(),x=null,b=!0;if(!c){var y;x=(b=m[s]&&m[s].experience_id===l)?m[s]:Array.isArray(f[s])&&(null===(y=f[s])||void 0===y?void 0:y.find(e=>e.experience_id===l))}if(x&&x.experience_id===l||c&&s&&l){let c=o.Z.create(e,{placed_experience_id:`${s}%3A${l}`,extra_context:null!=u?u:{},targeting:p}),g=b?a.Yb:a.xW;switch(t){case"dismissed":return c.callDelete().then(()=>{_(g(s,l,t)),_(h(void 0,r)),i&&n&&i({event_type:n,object_id_str:l.toString()})});case"completed":return c.callUpdate().then(()=>{!d&&(_(g(s,l,t)),_(h(void 0,r)),i&&n&&i({event_type:n,object_id_str:l.toString()}))});case"viewed":return _(g(s,l,t)),c.callUpdate().then(()=>{1000162===s&&_(h()),i&&n&&i({event_type:n,object_id_str:l.toString()})});case"completedWithoutHomefeed":return c.callUpdate().then(()=>{d||_(g(s,l,t)),i&&n&&i({event_type:n,object_id_str:l.toString()})})}}return Promise.resolve()},g=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(_("UserExperienceViewedResource","viewed",e,4503),[e]);return t},m=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(_("UserExperienceCompletedResource","completed",e,6567),[e]);return t},f=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(_("UserExperienceResource","dismissed",e,6568),[e]);return t},x=()=>{let e=(0,s.Z)(),t=(0,n.useCallback)(_("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e]);return t},b=(e,t)=>(i,r)=>{let{experiences:n}=r(),o=n[e];o&&o.triggerable_placed_exps&&o.triggerable_placed_exps.length&&o.triggerable_placed_exps.forEach(i=>{let[,r]=i.split(":"),n=t;o.metadata&&o.metadata[r]&&(n={...t,...o.metadata[r]}),(0,d.Z)({url:`/v3/experiences/${i.replace(":","%3A")}/trigger/`,method:"PUT",data:n?{extra_context:JSON.stringify(n,null,1)}:{}}).then(()=>{u("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:r})})})},y=e=>(t,i)=>{t(b(e));let{experiences:r}=i();return r[e]},v=(e,t,i)=>n=>{i&&(r=i),n(b(e,t)),t&&Object.keys(t).length>0&&n(p([e],!1,t,i))}},764990:(e,t,i)=>{"use strict";i.d(t,{A0:()=>a,E3:()=>s,MQ:()=>l,fL:()=>d});var r=i(883119),n=i(149230),o=i(785893);function s(e){return!!e&&0!==e.type}let l=(e,t,i)=>{let r=e[i];return t[i]&&s(r)?r:null};function a(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}let d=e=>{var t;let i=new DOMParser,s=i.parseFromString(e,"text/html"),l=[...(null===(t=s.body)||void 0===t?void 0:t.childNodes)||[]].map(e=>{if("A"!==e.nodeName)return(0,o.jsx)(r.xv,{inline:!0,children:e.textContent});{let t=e.href||"",i=(0,n.Z)({url:t});return(0,o.jsx)(r.rU,{display:"inline",externalLinkIcon:i?"default":"none",href:t,rel:i?"nofollow":"none",target:"blank",children:e.textContent})}});return(0,o.jsx)(r.xv,{inline:!0,children:l})}},207737:(e,t,i)=>{"use strict";i.d(t,{$S:()=>r,V$:()=>n,_4:()=>s,iY:()=>l,mR:()=>o});let r="REFRESH_ALL_EXPERIENCES_MULTI",n="UPDATE_EXPERIENCE_MULTI",o="FETCH_EXPERIENCES",s="REFRESH_ALL_EXPERIENCES",l="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{"use strict";i.d(t,{NW:()=>l,OD:()=>d,Yb:()=>a,cL:()=>c,xW:()=>s});var r=i(214494),n=i(207737);let o=e=>({type:n.$S,payload:{experiencesMulti:e}}),s=(e,t,i)=>({type:n.V$,payload:{placementId:e,experienceId:t,status:i}}),l=e=>t=>r.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(e=>e.resource_response?t(o(e.resource_response.data)):void 0),a=(e,t,i)=>({type:n.iY,payload:{placementId:e,experienceId:t,status:i}}),d=e=>({type:n._4,payload:{experiences:e}}),c=e=>({type:n.mR,payload:{experiences:e}})},570470:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(883119),n=i(667294),o=i(785893);let s=(e,t,i,r)=>({horizontalOffset:-(r/2-t/2),verticalOffset:-(i/2-e/2)});function l({anchor:e,children:t,zIndex:i,leftOverride:l,topOverride:a}){let d=(0,n.useRef)(null),[c,u]=(0,n.useState)(0),[h,p]=(0,n.useState)(0),{height:_,width:g}=e.getBoundingClientRect();return(0,n.useEffect)(()=>{let{current:t}=d;if(e&&t){let{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:r,verticalOffset:n}=s(_,g,e,i);u(r),p(n)}}),(0,o.jsx)(r.xu,{ref:d,dangerouslySetInlineStyle:{__style:{left:l||c,top:a||h}},"data-test-id":"center-box",position:"absolute",zIndex:i?new r.Ry(i):void 0,children:t})}let a=function(e){let{anchor:t,leftOverride:i,onTouch:n,onMouseEnter:s,paused:a,size:d,topOverride:c,zIndex:u}=e;return t?(0,o.jsx)(l,{anchor:t,leftOverride:i,topOverride:c,zIndex:u,children:(0,o.jsx)(r.iP,{fullWidth:!1,onMouseEnter:s,onTap:({event:e})=>n(e),rounding:"circle",children:(0,o.jsx)(r.o3,{paused:a,size:d})})}):null}},497529:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(667294);i(332611);var n=i(123159),o=i(764990);i(957191);var s=i(780280);function l(e){let{mountedPlacements:t,completeExperience:i,dismissExperience:l,experiences:a,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p}=(0,n.M)(),{isBot:_}=(0,s.B)(),g=e&&!_?(0,o.MQ)(a,t,e):null;return(0,r.useMemo)(()=>({completeExperience:i,dismissExperience:l,experienceForPlacement:g,fetchAllExperiences:d,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:u,triggerExperimentsForPlacement:h,viewExperience:p}),[i,l,g,d,c,u,h,p])}},869636:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(702664),o=i(442279),s=i(123159),l=i(780280),a=i(67347);let d=(0,o.P1)(e=>e.experiences,(e,t)=>t,(e,t)=>e[t]),c=(e,t,i={})=>(0,a.nP)(`${e}.${t}`,{sampleRate:1,tags:i}),u=(e,t)=>"function"==typeof t?t(e):t,h=(e,t={},i=!1)=>{let[o,a]=(0,r.useReducer)(u,t),{isBot:h}=(0,l.B)(),{fetchExperienceForPlacements:p,mountPlacement:_,triggerExperimentsForPlacement:g,unmountPlacement:m}=(0,s.M)();(0,r.useDebugValue)(`Placement Hook ID - ${e}`),(0,r.useEffect)(()=>{let t={...o},r=i&&null!=t&&t.advertiser_id?{advertiserId:t.advertiser_id}:void 0;return _(e,t,r),()=>{m(e)}},[]),(0,r.useEffect)(()=>{Object.keys(o).length>0&&p([e],h,o)},[o]);let f=(0,n.useSelector)(t=>d(t,e)),x=(0,n.useSelector)(t=>t.experiencesMulti[e]),b=f?f.triggerable_placed_exps:[];return(0,r.useEffect)(()=>{let t={platform:"web",placement_id:e,...b};c("experienceservice","placementHookExperimentTrigger.1",t),g(e,o)},[JSON.stringify(b)]),{experience:f,experiencesMulti:x,setExtraContext:a}}},784450:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(667294),n=i(702664),o=i(594736),s=i(332611),l=i(123159),a=i(764990),d=i(780280),c=i(785893);function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1,isAdvertiserPlacement:!1},p=(e,t={},i)=>p=>{i={...h,...i};let _=function(e,t,i=!0,h=!0,p=!1,_){class g extends r.Component{constructor(e){super(e),u(this,"state",{extraContext:void 0}),u(this,"setExtraContextState",e=>{(0,o.ZP)(this.state.extraContext,e)||this.setState({extraContext:e})})}componentDidMount(){this.dispatchPlacementMount()}componentDidUpdate(i,r){let{dispatch:n,experience:l,requestContext:a}=this.props,d=r.extraContext,c=this.state.extraContext||t||{};"function"==typeof t&&(d=t(i,r.extraContext||{}),c=t(this.props,this.state.extraContext||{})),c&&Object.keys(c).length>0&&!(0,o.ZP)(d,c)&&n((0,s.pz)([e],a.isBot,c)),l&&(!i.experience||l.id!==i.experience.id)&&n((0,s.kd)(e,c))}componentWillUnmount(){this.props.unmountPlacement(e)}dispatchPlacementMount(){let i="function"==typeof t?t(this.props,this.state.extraContext||{}):{...t},r=p&&null!=i&&i.advertiser_id?{advertiserId:i.advertiser_id}:void 0;this.props.mountPlacement(e,i,r)}render(){let{experience:e,experiencesMulti:t}=this.props,i=p?"advertiserExperience":"experience",r={[i]:(0,a.E3)(e)?e:null};return(0,c.jsx)(_,{...this.props,setPlacementExtraContext:this.setExtraContextState,...r,experiencesMulti:t})}}function m(e){let t=(0,d.B)(),i=(0,n.useDispatch)(),{mountPlacement:r,unmountPlacement:o}=(0,l.M)();return(0,c.jsx)(g,{...e,dispatch:i,mountPlacement:r,requestContext:t,unmountPlacement:o})}return m.displayName=`withPlacement(${_.displayName||_.name||"Component"})`,m}(e,t,i.shouldUsePlacedExperience,i.dispatchMountActionDuringSSR,i.isAdvertiserPlacement,p),g=t=>{let i=(0,n.useSelector)(t=>t.experiences[e]),r=(0,n.useSelector)(t=>t.experiencesMulti?t.experiencesMulti[e]:void 0);return(0,c.jsx)(_,{...t,experience:i,experiencesMulti:r})};return g.displayName=_.displayName,g}},173159:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(537347),n=i.n(r);function o(e,t){if("undefined"==typeof window)return Promise.resolve(void 0);let i=document.querySelector(`#${t}`);if(i)return Promise.resolve(void 0);(i=document.createElement("style")).setAttribute("id",t),e.filter(e=>!!e.fontFaceUrl).forEach(e=>{i&&e.fontFaceUrl&&i.appendChild(document.createTextNode(`@import url('${e.fontFaceUrl}');`))});let{head:r}=document;if(!r)return Promise.resolve(void 0);let o=document.createElement("style");o.setAttribute("id",`${t}-font-faces`),r.appendChild(i),r.appendChild(o);let s=[];return e.forEach(e=>{e.styles.forEach(t=>{if(e.format&&t.fontUrl&&o&&o.sheet){var i;let r=o.sheet;r.insertRule(`
            @font-face {
              font-family: "${null!==(i=e.fontFamily)&&void 0!==i?i:""}";
              font-style: "${t.fontStyle}";
              font-weight: "${t.fontWeight}";
              src: url("${t.fontUrl}") format("${e.format}");
            }`,0)}s.push(new(n())(e.fontFamily,{weight:t.fontWeight,style:t.fontStyle}).load())})}),Promise.all(s)}},382415:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(785893);let n=({color:e="rgba(0, 0, 0, 0.06)",size:t=8})=>(0,r.jsxs)("svg",{height:"100%",preserveAspectRatio:"none",style:{display:"flex"},version:"1.1",width:"100%",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("pattern",{height:2*t,id:"pattern",patternUnits:"userSpaceOnUse",width:2*t,x:0,y:0,children:[(0,r.jsx)("rect",{fill:e,height:t,width:t,x:0,y:0}),(0,r.jsx)("rect",{fill:e,height:t,width:t,x:t,y:t})]}),(0,r.jsx)("rect",{fill:"url(#pattern)",height:"100%",width:"100%",x:0,y:0})]})},286939:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r="M6 5h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm8 0h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm0 8h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1z"},485142:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r="M19 8C18.448 8 18 8.448 18 9V16C18 16.552 18.448 17 19 17H23C23.552 17 24 16.552 24 16V9C24 8.448 23.552 8 23 8H19ZM11 8C10.448 8 10 8.448 10 9V16C10 16.552 10.448 17 11 17H15C15.552 17 16 16.552 16 16V9C16 8.448 15.552 8 15 8H11ZM7 7H1C0.448 7 0 7.448 0 8V17C0 17.552 0.448 18 1 18H7C7.552 18 8 17.552 8 17V8C8 7.448 7.552 7 7 7Z"},248058:(e,t,i)=>{"use strict";i.d(t,{Cc:()=>s,G9:()=>a,VE:()=>u,Ys:()=>l,ZP:()=>p,iA:()=>o,j5:()=>d,kq:()=>c});var r=i(858472),n=i(785893);let o=37.8,s=277.1569,l=0,a=1,d=38,c=37.8,u=8,h=(0,n.jsxs)("svg",{height:316,style:{opacity:1,overflow:"visible",transform:"scale(.95)"},viewBox:"0 0 440 316",width:440,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("path",{d:"M15.9508 11.963c-2.2026 0-3.9877 1.7852-3.9877 3.9878 0 2.2025 1.7851 3.9877 3.9877 3.9877 2.2025 0 3.9877-1.7852 3.9877-3.9877 0-2.2026-1.7852-3.9877-3.9877-3.9877m-11.9631 0c2.2025 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7852 3.9877-3.9877 3.9877C1.7852 19.9385 0 18.1533 0 15.9508c0-2.2026 1.7852-3.9877 3.9877-3.9877zm23.9261 0c2.2026 0 3.9877 1.7851 3.9877 3.9877 0 2.2025-1.7851 3.9877-3.9877 3.9877-2.2025 0-3.9876-1.7852-3.9876-3.9877 0-2.2026 1.7851-3.9877 3.9876-3.9877z",id:"a"}),(0,n.jsx)("path",{d:"M8.4456.6691l1.3182 4.3182h4.3945c.8974 0 1.2824 1.153.569 1.705L11.133 9.4709l1.3475 4.4165c.2699.8827-.7398 1.5963-1.4654 1.0349l-3.466-2.6794-3.4659 2.6794c-.7266.5614-1.7363-.1522-1.4664-1.035L3.9653 9.471.37 6.6923c-.7124-.552-.3274-1.705.57-1.705h4.3935L6.6527.6691c.2727-.8921 1.5202-.8921 1.7929 0",id:"b"}),(0,n.jsx)("path",{d:"M8.0882 12.9614c-2.6756 0-4.853-2.1808-4.853-4.8606 0-2.6797 2.1774-4.8605 4.853-4.8605 2.6756 0 4.853 2.1808 4.853 4.8605 0 2.6798-2.1774 4.8606-4.853 4.8606m10.6126 2.3314l-3.444-3.4486c.5848-1.1203.9197-2.3921.9197-3.7434C16.1765 3.6268 12.5554 0 8.0882 0 3.6211 0 0 3.6267 0 8.1008s3.6211 8.1009 8.0882 8.1009c1.3492 0 2.619-.3354 3.7376-.921L15.269 18.73c.948.9494 2.4839.9494 3.4318 0 .948-.9486.948-2.4878 0-3.4372",id:"c"}),(0,n.jsx)("path",{d:"M0 39.5562c0 16.8872 10.5846 31.3054 25.4808 36.9784-.3626-3.0887-.7483-8.1815.0824-11.7548.7153-3.0722 4.6182-19.5737 4.6182-19.5737s-1.1768-2.3569-1.1768-5.8477c0-5.472 3.171-9.5594 7.1234-9.5594 3.3622 0 4.984 2.5217 4.984 5.5444 0 3.3788-2.1525 8.4288-3.2633 13.113-.9263 3.9193 1.9679 7.1167 5.8312 7.1167 6.9982 0 12.381-7.3805 12.381-18.0343 0-9.4308-6.7772-16.0202-16.452-16.0202-11.201 0-17.7772 8.4023-17.7772 17.0882 0 3.3854 1.302 7.0114 2.9305 8.9859.3197.3922.3692.7318.2736 1.1306-.3 1.246-.9659 3.9194-1.0944 4.4666-.1747.7186-.5703.8735-1.3186.524-4.9181-2.2876-7.9903-9.477-7.9903-15.2521 0-12.424 9.022-23.8293 26.0148-23.8293 13.66 0 24.2776 9.7341 24.2776 22.7415 0 13.571-8.554 24.4952-20.434 24.4952-3.992 0-7.74-2.0767-9.0255-4.526 0 0-1.9745 7.5223-2.4525 9.3617-.9295 3.5732-3.5073 8.0958-5.106 10.6637 3.6853 1.134 7.5948 1.7437 11.6493 1.7437 21.8449 0 39.5561-17.7112 39.5561-39.5561C79.1123 17.7112 61.4011 0 39.5562 0 17.7112 0 0 17.7113 0 39.5562",id:"d"})]}),(0,n.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,n.jsx)("path",{d:"M15.12 33.6034c-7.6878 0-13.92 6.2322-13.92 13.92V300.88c0 7.6878 6.2322 13.92 13.92 13.92h409.76c7.6878 0 13.92-6.2322 13.92-13.92V47.5234c0-7.6878-6.2322-13.92-13.92-13.92H15.12z",fill:"#FFF",stroke:"#DEDEDE",strokeWidth:"2.4"}),(0,n.jsxs)("g",{transform:`translate(0 ${4*u+.441})`,children:[(0,n.jsx)("path",{d:"M15.12 0h409.76C433.2305 0 440 6.7695 440 15.12v48.6067H0V15.12C0 6.7695 6.7695 0 15.12 0z",fill:"#DEDEDE"}),(0,n.jsx)("rect",{fill:"#FFF",height:"38.8841",rx:"19.442",width:"218.9216",x:"15.5858",y:"12.0152"}),(0,n.jsx)("use",{fill:"#FFF",transform:"translate(384.8501 15.6198)",xlinkHref:"#a"}),(0,n.jsx)("use",{fill:"#DEDEDE",transform:"translate(206.2125 24.0304)",xlinkHref:"#b"}),(0,n.jsx)("use",{fill:"#DEDEDE",transform:"translate(26.376 21.6274)",xlinkHref:"#c"})]}),(0,n.jsxs)("g",{fill:"#DEDEDE",children:[(0,n.jsx)("rect",{height:"126.3732",id:"content-morph",width:"230.7843",x:31,y:139}),(0,n.jsx)("rect",{className:"content-bar",height:"14.0415",width:"126.1765",x:"281.4706",y:"139.3346"}),(0,n.jsx)("rect",{className:"content-bar",height:"14.0415",width:"85.1961",x:"281.4706",y:"164.1772"})]}),(0,n.jsx)("ellipse",{cx:38,cy:38,fill:"#FFF",fillOpacity:"0.49",id:"pinterest-logo-pop-bg",rx:d,ry:c}),(0,n.jsxs)("g",{id:"pinterest-logo",transform:`translate(${s}) scale(${a})`,children:[(0,n.jsx)("ellipse",{cx:"37.8",cy:"37.8479",fill:"#FFF",rx:o,ry:o}),(0,n.jsxs)("g",{transform:"translate(0 .0493)",children:[(0,n.jsx)("mask",{fill:"#fff",id:"e",children:(0,n.jsx)("use",{xlinkHref:"#d"})}),(0,n.jsx)("g",{fill:r.x7,mask:"url(#e)",children:(0,n.jsx)("rect",{height:"80.1649",width:"80.1649"})})]})]})]})]}),p=h},870479:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(785893);let n=(0,r.jsx)("svg",{height:100,viewBox:"0 0 24 24",width:100,xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M6 1.75l6 3.844-6 3.844 6 3.844-6 3.844-6-3.844 6-3.844-6-3.844L6 1.75zm12 0l6 3.844-6 3.844-6-3.844 6-3.844zm-6 11.532l6-3.844 6 3.844-6 3.844-6-3.844zm-6 5.124l6-3.843 6 3.843-6 3.844-6-3.844z",fill:"#0061FF"})}),o=n},829130:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(785893);let n=(0,r.jsx)("svg",{height:"10",viewBox:"3 3 18 18",width:"14",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M20.571 8.573h-3.428V12h1.714v1.715h-1.714v3.428h-1.714V6.86h5.142v1.714zM12 17.144V6.86h1.714v10.285H12zm-1.714-8.571H5.143v6.857H8.57v-1.714H6.857V12h3.429v5.143H3.429V6.86h6.857v1.714zM5.143 3.43A5.143 5.143 0 0 0 0 8.573v6.857a5.143 5.143 0 0 0 5.143 5.143h13.714A5.143 5.143 0 0 0 24 15.43V8.573a5.143 5.143 0 0 0-5.143-5.143H5.143z",fill:"#333"})}),o=n},252044:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(785893);let n=(0,r.jsx)("svg",{height:"20",viewBox:"0 0 168 40",width:"83",children:(0,r.jsxs)("g",{fill:"#005062",fillRule:"nonzero",children:[(0,r.jsxs)("g",{transform:"translate(47.213 6.557)",children:[(0,r.jsx)("path",{d:"M18.689 7.721h5.295v16.64h-5.295zM25.098 7.721h5.099V10h.098c1.23-1.787 2.82-2.754 5.131-2.754 3.64 0 5.787 2.606 5.787 6.311v10.82h-5.295v-9.754c0-1.754-.885-2.95-2.607-2.95-1.754 0-2.918 1.458-2.918 3.507v9.197h-5.295V7.721z"}),(0,r.jsx)("circle",{cx:"21.344",cy:"3.279",r:"3.18"}),(0,r.jsx)("path",{d:"M78.459 7.475c-.148-.016-.328-.016-.525-.016-2.016 0-3.377.885-4.557 2.852h-.098v-2.59h-5.066v16.64h5.295v-7.476c0-3.459 1.918-5.065 4.951-4.787V7.475zM104.459 13.869c-2.115-.394-4-.558-4-1.721 0-1.033 1-1.525 2.311-1.525 1.46 0 2.476.459 2.673 1.95h4.868c-.262-3.278-2.786-5.327-7.508-5.327-3.934 0-7.18 1.82-7.18 5.328 0 3.901 3.082 4.672 5.984 5.164 2.213.393 4.23.557 4.23 2.049 0 1.065-1 1.656-2.607 1.656-1.59 0-2.656-.673-2.984-2.05h-5.05c.378 3.427 3.378 5.492 8.066 5.492 4.361 0 7.574-1.885 7.574-5.524-.016-4.263-3.459-5-6.377-5.492zM86.967 21.05c-2.18 0-3.41-1.394-3.737-3.64h11.95c.033-3.377-.934-6.279-2.918-8.099-1.426-1.295-3.311-2.081-5.688-2.081-5.066 0-8.541 3.803-8.541 8.77 0 5.033 3.377 8.836 8.869 8.836 2.114 0 3.803-.557 5.196-1.525 1.46-1 2.443-2.442 2.787-3.934h-5.164c-.442 1.05-1.344 1.672-2.754 1.672zM86.672 11c1.721 0 2.951 1.262 3.148 3.246h-6.558c.361-1.967 1.41-3.246 3.41-3.246zM120.148 20.443c-.246.016-.574.016-.886.016-1.13 0-1.852-.328-1.852-1.623v-7.803h2.738V7.72h-2.738V2.46h-5.164v5.262h-1.623v3.312h1.623v8.934c0 3.574 2.213 4.59 5.295 4.59 1.18 0 2.066-.082 2.607-.196v-3.918zM50.672 20.443c-.213 0-.459.016-.688.016-1.132 0-1.853-.328-1.853-1.623v-7.803h2.541V7.72h-2.54V2.46h-5.165v5.262h-1.721v3.312h1.721v8.934c0 3.574 2.213 4.59 5.295 4.59 1.05 0 1.87-.065 2.41-.164v-3.95z"}),(0,r.jsx)("path",{d:"M50.41 16.016c0-4.967 3.475-8.77 8.54-8.77 2.378 0 4.263.787 5.69 2.082 1.983 1.82 2.95 4.705 2.917 8.098h-11.95c.327 2.246 1.557 3.64 3.737 3.64 1.394 0 2.312-.623 2.754-1.656h5.164c-.36 1.492-1.328 2.918-2.787 3.934-1.393.967-3.082 1.525-5.196 1.525-5.492-.017-8.87-3.82-8.87-8.853zm11.803-1.754c-.197-1.983-1.426-3.246-3.147-3.246-2.017 0-3.05 1.263-3.41 3.246h6.557zM.066 1.131h9.196c2.82 0 4.902.787 6.345 2.148C17.098 4.672 17.95 6.656 17.95 9c0 4.459-3.082 7.607-7.869 7.607H5.426v7.77H.066V1.131zM9.492 12.05c2.082 0 3.246-1.23 3.246-3.082 0-1.852-1.197-2.983-3.246-2.983H5.426v6.082h4.066v-.017z"})]}),(0,r.jsx)("path",{d:"M19.934 0C8.918 0 .016 8.918.016 19.918c0 8.443 5.246 15.656 12.656 18.557-.18-1.573-.328-4 .066-5.72.36-1.558 2.328-9.903 2.328-9.903s-.59-1.196-.59-2.95c0-2.77 1.606-4.836 3.606-4.836 1.705 0 2.525 1.278 2.525 2.803 0 1.705-1.082 4.262-1.656 6.64-.476 1.983 1 3.606 2.95 3.606 3.542 0 6.263-3.738 6.263-9.115 0-4.77-3.426-8.098-8.328-8.098-5.672 0-9 4.246-9 8.639 0 1.705.656 3.541 1.475 4.541.164.197.18.377.132.574-.148.623-.492 1.983-.558 2.262-.082.36-.295.443-.672.262-2.459-1.18-4-4.82-4-7.737 0-6.28 4.557-12.05 13.164-12.05 6.902 0 12.279 4.918 12.279 11.509 0 6.868-4.328 12.393-10.328 12.393-2.017 0-3.918-1.05-4.558-2.295l-1.245 4.738c-.443 1.737-1.656 3.901-2.476 5.23 1.869.573 3.836.884 5.902.884 11 0 19.918-8.918 19.918-19.918C39.852 8.918 30.934 0 19.934 0z"})]})}),o=n},579014:(e,t,i)=>{"use strict";i.d(t,{B1:()=>n,Md:()=>c,iX:()=>d,lI:()=>o,op:()=>a,uZ:()=>s,wN:()=>r,z_:()=>l});let r="var(--color-background-default)",n="var(--color-background-inverse-base)",o="var(--color-background-secondary-base)",s="var(--color-background-error-base)",l="var(--color-background-info-weak)",a="var(--color-border-error)",d="var(--color-border-container)",c="var(--color-text-subtle)"},858472:(e,t,i)=>{"use strict";i.d(t,{$$:()=>f,C5:()=>I,CZ:()=>m,EX:()=>o,FZ:()=>r,HH:()=>l,KK:()=>S,Kp:()=>_,Ln:()=>g,Mv:()=>w,OX:()=>s,P6:()=>j,Rb:()=>v,Xn:()=>y,YX:()=>u,bu:()=>d,cO:()=>x,ci:()=>a,fM:()=>b,k6:()=>A,oY:()=>n,sX:()=>E,vZ:()=>h,wA:()=>P,x7:()=>c,xE:()=>p});let r="var(--color-transparent)",n="var(--color-black-cosmicore-900)",o="var(--color-blue-skycicle-900)",s="var(--color-red-pushpin-50)",l="var(--color-red-pushpin-100)",a="var(--color-red-pushpin-200)",d="var(--color-red-pushpin-300)",c="var(--color-red-pushpin-450)",u="var(--color-red-pushpin-500)",h="var(--color-red-pushpin-600)",p="var(--color-red-pushpin-700)",_="var(--color-red-pushpin-800)",g="var(--color-pink-flaminglow-0)",m="var(--color-white-mochimalist-0)",f="var(--color-gray-roboflow-50)",x="var(--color-gray-roboflow-200)",b="var(--color-gray-roboflow-300)",y="var(--color-gray-roboflow-400)",v="var(--color-gray-roboflow-500)",P="var(--color-gray-roboflow-600)",S="var(--color-gray-roboflow-700)",A="var(--color-purple-mysticool-200)",w="var(--color-purple-mysticool-300)",E="var(--color-purple-mysticool-500)",I="var(--color-teal-spabattical-100)",j="var(--color-yellow-caramellow-300)"},121151:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>d,b7:()=>s.b7,bN:()=>l,p4:()=>a});var r=i(240684),n=i(50286),o=i(785893),s=i(968121);let l=(0,r.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(51879).then(i.bind(i,373420)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>373420}),a=(0,r.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(72430).then(i.bind(i,430322)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>430322});function d(e){let t=(0,n.ZP)(),i=void 0===e.isOpen||e.isOpen;if("desktop"===t&&i){let{isOpen:t,mobileAccessibilityCloseIconLabel:i,mobileAllowScroll:r,mobileHideCloseIcon:n,mobileIsFullscreen:s,mobileIsSlideUp:a,type:d,mobileIsFooter:c,zIndex:u,...h}=e;return(0,o.jsx)(l,{...h})}let{allowMediaPlay:r,allowScroll:s,role:d,size:c,_dangerouslyDisableScrollBoundaryContainer:u,...h}=e;return(0,o.jsx)(a,{...h,isOpen:i})}},968121:(e,t,i)=>{"use strict";i.d(t,{JN:()=>d,Vf:()=>c,ZM:()=>l,b7:()=>s,i_:()=>a});var r=i(883119),n=i(643010),o=i(379764);let s=new r.Ry(1e3),l=new r.H3([o.Z]),a=12,d=({variant:e})=>({__style:"fullscreen"===e?{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"}:"tablet"===e?{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1}:"footer"===e?{border:(0,n.Yc)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1}:"signup"===e?{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"}:{border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden",borderRadius:"32px 32px 0 0"}}),c=({isFullscreen:e,isTablet:t,isShowing:i,isRelatedInterestsModal:r})=>{let o={border:(0,n.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},s=i?"translateY(0)":"translateY(100vh)";return o.height=e?"100vh":"",t&&r&&(o={...o,width:425,left:"50%",transform:"translateX(-50%)"},s=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...o,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:s}}}},499128:(e,t,i)=>{"use strict";i.d(t,{UZ:()=>d,Vg:()=>a,ZP:()=>c});var r=i(667294),n=i(883119),o=i(50286),s=i(829407),l=i(785893);let a=200,d=({deviceType:e,hiding:t,visible:i})=>{let r="desktop"===e,n=0,o=r?"translateY(200px)":"translateY(-200px)",s="opacity 0.1s ease-in-out",l="hidden";return i&&!t&&(n=1,o="translateY(0)",s="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",l="visible"),i&&t&&(o="scale(1.1)",s="opacity transform 0.2s"),{opacity:n,pointerEvents:"auto",position:"relative",marginTop:r?10:0,transform:o,transition:s,visibility:l}};function c({_dangerouslySetThumbnail:e,_dangerouslySetPrimaryAction:t,text:i,primaryAction:c,dismissButton:u,helperLink:h,thumbnail:p,type:_,dataTestId:g,duration:m=2e3,onHide:f,href:x,onClick:b,openNewPage:y,imageUrl:v}){var P;let S;let A=(0,o.ZP)(),[w,E]=(0,r.useState)(!1),[I,j]=(0,r.useState)(!1),C=(0,r.useRef)(),T=()=>{E(!0),C.current=setTimeout(f,a)},D=()=>{C.current=setTimeout(T,m)},O=()=>{C.current&&clearTimeout(C.current)};(0,s.Z)(()=>(setTimeout(()=>j(!0),100),D(),O)),v&&(S={image:(0,l.jsx)(n.Ee,{alt:"string"==typeof i?i:`${i[0]} ${i[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:v})});let z=(0,l.jsx)(n.FN,{_dangerouslySetPrimaryAction:t,_dangerouslySetThumbnail:e,dismissButton:u,helperLink:h,primaryAction:c,text:i,thumbnail:null!==(P=S)&&void 0!==P?P:p,type:_}),{marginTop:R,opacity:k,pointerEvents:L,position:N,transform:B,transition:Z,visibility:M}=d({deviceType:A,hiding:w,visible:I});return(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:B,transition:Z,visibility:M,pointerEvents:L}},"data-test-id":null!=g?g:"toast",display:"flex",marginTop:R,onMouseEnter:O,onMouseLeave:D,opacity:k,position:N,children:x?(0,l.jsx)(n.Tg,{href:x,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{x.startsWith("#")&&(e.preventDefault(),t()),null==b||b(e)},rounding:"pill",target:y?"blank":null,children:z}):z})}},356997:(e,t,i)=>{"use strict";i.d(t,{qE:()=>l,u_:()=>a.ZP});var r=i(883119),n=i(785893);let o=(e,t)=>{let i=null==e?void 0:e.includes("images/user/default");return!!(i&&t)};function s({accessibilityLabel:e,name:t,outline:i,size:s,src:l,verified:a}){return(0,n.jsx)(r.qE,{accessibilityLabel:e,name:t,outline:i,size:s,src:o(l,t)?void 0:l,verified:a})}s.displayName="Avatar";let l=s;var a=i(121151);i(499128)},572752:(e,t,i)=>{"use strict";function r(e){let t=e.userAgent.isMobile?"mobile":"desktop";return`${t}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}i.d(t,{Z:()=>r})},444445:(e,t,i)=>{"use strict";i.d(t,{$H:()=>s,$q:()=>b,D6:()=>d,KN:()=>v,Lo:()=>n,OS:()=>p,P2:()=>m,Wv:()=>y,ZZ:()=>u,g5:()=>h,jC:()=>l,lX:()=>g,nW:()=>_,oX:()=>f,qG:()=>x,tG:()=>o,yF:()=>r,yc:()=>c,yt:()=>a});let r=236,n=2*r/3,o=175,s=24,l=4,a=8,d=2,c=2,u=14,h=16,p=5,_=12,g=16,m=24,f=16,x=-1,b=(e=!1,t=!1)=>e?t?g:_:m,y=({contentVisibleItemCount:e,gap:t,width:i})=>e||i?(i-(e-1)*t)/e:r,v=(e,t,i,r,n=u)=>{let o=e+n,s=`
@media (min-width: ${t*o}px) and (max-width: ${(i+1)*o-1}px) {
  ${r}
}
`;return s}},694379:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(892819),n=i(780280),o=i(785893);let s=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:s,shortformMaximumFractionDigits:l,formatStyle:a,uplimit:d,value:c})=>{let u=(0,r.Z)();return(0,o.jsx)(n.LC,{children:r=>u(r.locale||"en-US",c,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:s,shortform_maximum_fraction_digits:l,style:a,uplimit:d})})}},298361:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(202139),n=i(898781),o=i(349700);function s(){let e=(0,n.ZP)();return function(t,i){let n=new Date(t),s=new Date,l=s-n,a=Math.floor(l/r.FS),d=Math.floor(l/r.UK),c=Math.floor(l/r.F4),u=Math.floor(l/r.VL),h=Math.floor(l/r.N1),p=e.nbt(["{{ minutes }} minute ago", "{{ minutes }} minutes ago"], a, " - ", true),_=e.nbt(["{{ hours }} hour ago", "{{ hours }} hours ago"], d, " - ", true),g=e.nbt(["{{ days }} day ago", "{{ days }} days ago"], c, " - ", true),m=e.nbt(["{{ weeks }} week ago", "{{ weeks }} weeks ago"], u, " - ", true),f=e.nbt(["{{ years }} year ago", "{{ years }} years ago"], h, " - ", true),x=e.nbt(["{{ minutes }}m", "{{ minutes }}m"], a, "minutes ago abbreviated", true),b=e.nbt(["{{ hours }}h", "{{ hours }}h"], d, "hours ago abbreviated", true),y=e.nbt(["{{ days }}d", "{{ days }}d"], c, "days ago abbreviated", true),v=e.nbt(["{{ weeks }}w", "{{ weeks }}w"], u, "weeks ago abbreviated", true),P=e.nbt(["{{ years }}y", "{{ years }}y"], h, "years ago abbreviated", true);return h>0?(0,o.nk)(i?P:f,{years:h}).join(""):u>0?(0,o.nk)(i?v:m,{weeks:u}).join(""):c>0?(0,o.nk)(i?y:g,{days:c}).join(""):d>0?(0,o.nk)(i?b:_,{hours:d}).join(""):a>0?(0,o.nk)(i?x:p,{minutes:a}).join(""):e.bt("Just now", "Just now", " - ", undefined, true)}}},898781:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>l,oz:()=>o,q6:()=>n});var r=i(425288);let{Provider:n,Consumer:o,useHook:s}=(0,r.Z)("i18n"),l=s},892819:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(898781),n=i(66699);let o=(e,t)=>{let i=t||0,r=10**i,n=+(i?e*r:e).toFixed(8),o=Math.floor(n),s=n-o,l=s>.49999999&&s<.50000001?o%2==0?o:o+1:Math.round(n);return i?l/r:l},s=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:r})=>{let n={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...n,style:i,..."currency"===i?{currency:r,currencyDisplay:"symbol"}:{}}:n},l=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},a=(e,t)=>{if(t){let{minimumFractionDigits:i,maximumFractionDigits:r}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==r)return{minimumFractionDigits:i,maximumFractionDigits:r}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,r.ZP)();return(t,i,r)=>{let d=0,c=0,u=r&&r.style||void 0,h=r&&r.shortform||!1,p=r&&r.uplimit||void 0,_=r&&r.currency||void 0,g=!!p&&i>=p,m=p&&g?p:i;if("currency"===u){let{minimumFractionDigits:e,maximumFractionDigits:i}=a(t,_);d=void 0===r||void 0===r.maximum_fraction_digits?i:r.maximum_fraction_digits,c=void 0===r||void 0===r.minimum_fraction_digits?e:r.minimum_fraction_digits}else d=void 0===r||void 0===r.maximum_fraction_digits?0:r.maximum_fraction_digits,c=void 0===r||void 0===r.minimum_fraction_digits?0:r.minimum_fraction_digits;if(h&&m>999&&(d=void 0===r||void 0===r.shortform_maximum_fraction_digits?2:r.shortform_maximum_fraction_digits,c=0),d<c)return String(m);let f=m,x="",b=[{"100M":{value:1e8,localeKey:e.bt("億", "億", "Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}},{"10k":{value:1e4,localeKey:e.bt("万", "万", "Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.", undefined, true)}}],y=[{b:{value:1e9,localeKey:e.bt("B", "B", "Abbreviation for one billion.", undefined, true)}},{m:{value:1e6,localeKey:e.bt("M", "M", "Abbreviation for one million.", undefined, true)}},{k:{value:1e3,localeKey:e.bt("k", "k", "Abbreviation for one thousand.", undefined, true)}}],v=/^zh|ja|ko/.test(t);if(h&&m>999){let e=v?b:y;for(let t=0;t<e.length;t+=1){let i=Object.keys(e[t])[0],r=e[t][i].value;if(m>=r){f=o(m/r*Math.pow(10,d))/Math.pow(10,d),x=e[t][i].localeKey;break}}}if(null==f)return"";let P=f.toLocaleString([l(t)&&"ar-SA"!==t?t:"en-US"],s({maximumFractionDigits:d,minimumFractionDigits:c,currency:_,style:u}));return x&&x.length>0?(0,n.Z)(e.bt("{{formattedNumber}}{{numberSuffix}}", "{{formattedNumber}}{{numberSuffix}}", "i18n.usePrettyNumberFormat.prettyNumberFormat", undefined, true),{formattedNumber:P,numberSuffix:x})+(g?"+":""):P+(g?"+":"")}}},12610:(e,t,i)=>{"use strict";function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>u,LU:()=>h,ZP:()=>p});let n=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,o={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},s={},l={background:"#FF8A8A",transform:"scale(.98)"},a={init:e=>({transform:`scale(${s[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[o.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[o.exit]:l,[o.stopped]:l,[o.paused]:l,[o.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){r(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),r(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),r(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),r(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){let e=Date.now();this.startTime=e,this._debug(o.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach(e=>e())}else!t&&this.inViewport&&(this._debug(o.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON())));this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,n&&Object.assign(this.node.style,a.init(e)),this}pause(){return this.inViewport&&(this._debug(o.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(o.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(o.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`}}_debug(e,t){if(n)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),a[e]&&Object.assign(this.node.style,a[e]),e){case o.flushed:case o.paused:case o.exit:s[this.debugId]=!0}}}function c(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u=!0,h=!1;class p{constructor(){c(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),c(this,"_handleMutations",(e,t)=>{let i=this.mutationObservers.get(t),r=i&&i.offsetHeight<1;r&&i&&this.stop(i,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=h,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let i=this.activeImpressions.get(e);if(i){var r;i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),null===(r=window.activeImpressions)||void 0===r||r.delete(e),this.observer.unobserve(e)}}start(e){let t=this.activeImpressions.get(e);if(!t){var i;t=new d(e),this.activeImpressions.set(e,t),null===(i=window.activeImpressions)||void 0===i||i.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=u){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==h||(this.pausePriority=e))}resume(e=u){(e!==h||this.pausePriority!==u)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=h)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:i}=t.getBoundingClientRect();return i>e?i:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:i}=t.getBoundingClientRect();return i<e?i:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},124580:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(12610);let n=new r.ZP},349700:(e,t,i)=>{"use strict";i.d(t,{Wc:()=>a,bF:()=>c,nk:()=>l,r7:()=>u});var r=i(667294),n=i(785893);function o(e,t,i){return e.split(i).map(e=>{if(e.match(i)){let i=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,i))return t[i]}return e})}let s=/(\{\{\s*\w+\s*\}\})/g;function l(e,t){return o(e,t,s)}function a(e,t){return o(e,t,s).join("")}let d=/(\{\s*\w+\s*\})/g;function c(e,t){return o(e,t,d)}let u=({text:e})=>Array.isArray(e)?e.map((e,t)=>(0,n.jsx)(r.Fragment,{children:e},t)):e},926275:(e,t,i)=>{"use strict";function r(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}i.d(t,{Z:()=>r})},844753:(e,t,i)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}i.d(t,{Z:()=>r})},755742:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},713930:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(67347);function n(e,t){return new Promise((i,n)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t){if(window.FB)i();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),i()):(e+=1,(0,r.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}}else if("GSI"===t){if(window.google)i();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),i()):(e+=1,(0,r.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}}else i()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>i()),t.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(t)}})}},539278:(e,t,i)=>{"use strict";i.d(t,{Di:()=>h,Jl:()=>d,R:()=>c,ZP:()=>f,aU:()=>p,j2:()=>u,pN:()=>_,rL:()=>x,vW:()=>m});var r=i(883119),n=i(356997),o=i(499128),s=i(349700),l=i(826067),a=i(785893);let d=7e3,c="permanent_account_closure",u="account_deletion_email_sent",h="account_deactivated",p="unlink_successful",_="account_switch_to_settings";function g(e,t,i){return(0,a.jsx)(r.xv,{align:i||"center",children:(0,s.nk)(e,{username:(0,a.jsx)(r.xv,{inline:!0,weight:"bold",children:t})})})}function m({i18n:e,message:t,multipleAccounts:i,username:r=""}){switch(t){case c:return e.bt("Your account has been deleted. We're sorry to see you go", "Your account has been deleted. We're sad to see you go", "unauthLoginPage.accountDeletedToast.message", undefined, true);case u:if(i)return g(e.bt("An email has been sent with final steps to delete your account, {{username}}, and its linked accounts", "An email has been sent with final steps to delete your account, {{username}} and its linked accounts", "accountDeletedEmailToast.message.multipleAccounts", undefined, true),r);return g(e.bt("An email has been sent with final steps to delete your account, {{username}}", "An email has been sent with final steps to delete your account, {{username}}", "accountDeletedEmailToast.message.singleAccount", undefined, true),r);case h:return g(i?e.bt("The account, {{username}}, and its associated linked accounts have been deactivated", "The account, {{username}}, and its associated linked accounts have been deactivated", "unauthLoginPage.deactivatedToast.message.multipleAccounts", undefined, true):e.bt("The account, {{username}}, has been deactivated", "The account, {{username}}, has been deactivated", "unauthLoginPage.deactivatedToast.message.singleAccount", undefined, true),r);case p:return g(e.bt("Success! You've unlinked this business account. You are currently in {{username}}.", "Success! You've unlinked this business account. You are currently in {{username}}.", "authHomeFeedPage.unlinkAccountToast.message", undefined, true),r,"start");case _:return g(e.bt("You've switched into and are currently in the account {{username}}", "You've switched into and are currently in the account {{username}}", "accountSettings.switchAccountToAccountChanges", undefined, true),r,"start");default:return""}}function f(e,t,i=""){if(!(t&&t.search))return"";let{message:r}=(0,l.mB)(t.search),n=(0,l.mB)(t.search).username||i,o="true"===(0,l.mB)(t.search).multiple_accounts;return m({i18n:e,message:r,multipleAccounts:o,username:n})}function x({showOneToast:e,i18n:t,location:i,history:r,username:s,fullName:c,avatarUrl:u}){if(!(i&&i.search))return;let h=f(t,i,s||""),{message:g}=(0,l.mB)(i.search),m=g===_||g===p;h&&(e(({hideToast:e})=>(0,a.jsx)(o.ZP,{duration:d,onHide:e,text:h,thumbnail:m?{avatar:(0,a.jsx)(n.qE,{name:c||"",size:"md",src:u||""})}:void 0})),r.replace(i.hash?`${i.pathname}${i.hash}`:i.pathname))}},379913:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(407159),n=i(884732);let o=e=>{var t;let i={id:e.id,username:e.username,email:e.email,fullName:e.fullName||e.full_name,imageMediumUrl:e.imageMediumUrl||e.image_medium_url,imageLargeUrl:e.imageLargeUrl||e.image_large_url};return(i.fullName&&i.imageMediumUrl&&i.imageLargeUrl||(0,r.Z)("utils.incomplete_user_values"),null!==(t=e.partner)&&void 0!==t&&t.is_create)?{...i,partner:{is_create:!0}}:i},s=(e,t,i)=>{(0,n.r8)({...(0,n.rl)(),[e.id]:o(e)}),t&&i&&(0,r.Z)("new_account_add_success",{method:t,user_added:e.id},i)}},407159:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(172045),n=i(884732),o=i(867820);let s="web_account_switcher",l=()=>{let e=(0,r.Z)();return(0,o.tj)(`${s}.utils.group_created`,{group_id:e,group_count:(0,n.lv)()}),e},a=(e,t,i)=>{let r=(0,n.yW)();r||(r=l(),(0,n.M3)(r));let a={group_count:(0,n.lv)()},d="";i&&(d="account_switcher_modal"===i?"modal.":"flyout."),(0,o.tj)(`${s}.${d}${e}`,{...t,...a})}},249647:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(844753);function n(e,t=!1){let i=(t,i)=>e(i);return e=>(function e(t,i=!1){return n=>{if(!(0,r.Z)(n))return i&&Array.isArray(n)?n.map(e(t,i)):n;let o={};return Object.keys(n).forEach(s=>{let l=t(n[s],s);(0,r.Z)(n[s])||i&&Array.isArray(n[s])?o[l]=e(t,i)(n[s]):o[l]=n[s]}),o}})(i,t)(e)}},767546:(e,t,i)=>{"use strict";i.d(t,{Z:()=>function e(t,i,r=()=>void 0){let n=r(t,i);return void 0!==n?n:void 0===i?t:Array.isArray(t)&&Array.isArray(i)?i.reduce((t,n,o)=>(t[o]=e(t[o],i[o],r),t),[...t]):t&&"object"==typeof t&&i&&"object"==typeof i?Object.keys(i).reduce((t,n)=>(t[n]=e(t[n],i[n],r),t),{...t}):i}})},567450:(e,t,i)=>{"use strict";function r(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>s});let n=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},o=e=>{if(e.isHidden){let{reason:t}=e;n.windowInFocus=!1,n.onPauseListeners.forEach(e=>e(t))}else n.windowInFocus=!0,n.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>o({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>o({isHidden:!1})),window.addEventListener("blur",()=>o({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>o({isHidden:!1})),window.addEventListener("pagehide",()=>o({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>o(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>o(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let s=n},373695:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294);function n(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends r.Component{constructor(e){super(e),n(this,"onImageLoad",e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState(t=>({loadedItems:[...t.loadedItems,e]})):this.setState(e=>({errors:e.errors+1})))}),n(this,"onImageError",()=>{this.mounted&&this.setState(e=>({errors:e.errors+1}))}),n(this,"mounted",!1),n(this,"loadImages",e=>{let t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e}),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;let{url:e}=this.props;this.loadImages(e||"")}componentWillUnmount(){this.mounted=!1}render(){let{children:e}=this.props,{loadedItems:t}=this.state;return e({image:t})}}},122097:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(667294),n=i(898781),o=i(54574),s=i(785893);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends r.Component{constructor(e){super(e),l(this,"onImageLoad",e=>{this.mounted&&("number"==typeof e.width&&"number"==typeof e.height&&e.width>119&&e.height>119?this.setState(t=>({loadedItems:[...t.loadedItems,e]})):this.setState(e=>({errors:e.errors+1})))}),l(this,"onImageError",()=>{this.mounted&&this.setState(e=>({errors:e.errors+1}))}),l(this,"mounted",!1),l(this,"loadImages",e=>{e.forEach(e=>{let t=new Image;t.onload=()=>this.onImageLoad({height:t.naturalHeight,url:e.url,width:t.naturalWidth}),t.onerror=()=>this.onImageError(),t.src=e.url})}),this.state={errors:0,loadedItems:[]}}componentDidMount(){this.mounted=!0;let{images:{data:e}}=this.props,{items:t}=e||{};this.loadImages(t||[])}componentDidUpdate(e){let{images:{data:t,error:i},url:r}=e,{onError:n,images:{isLoaded:o,data:s,error:l},url:a}=this.props;if(!i&&l&&n&&n(),r!==a&&this.setState({loadedItems:[]}),o&&s){let{items:e}=t||{},{items:i}=s||{},r=(i||[]).slice((e||[]).length);this.loadImages(r)}}componentWillUnmount(){this.mounted=!1}render(){let{children:e,images:{data:t,error:i,isLoaded:r},url:n}=this.props,{items:o,title:s}=t||{},{errors:l,loadedItems:a}=this.state,d=i?i.message_detail||i.message:this.props.i18n.bt("No images found. Check your URL and try again.", "No images found. Check your URL and try again.", "No images are found at the URL submitted", undefined, true),c=r&&0===a.length&&l===(o||[]).length&&n?d:void 0;c&&n.includes("?")&&(c=this.props.i18n.bt("No images found. Remove any tracking parameters in this URL to try again.", "No images found. Remove any tracking parameters in this URL to try again.", "No images are found at the URL submitted. The url may contain tracking parameters", undefined, true));let u=!r||0===a.length&&l!==(o||[]).length;return e({loading:u,title:s,error:c,images:a})}}function d(e){let t=(0,n.ZP)(),i=(0,o.Z)({url:e.url,source:e.source});return(0,s.jsx)(a,{...e,i18n:t,images:i})}},54574:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(784590);function n({url:e,source:t}){return(0,r.Z)({name:"FindPinImagesResource",options:{url:e,source:t||"pin_create",appendItems:!1,followRedirects:!0,scrapeMetric:"www_url_scrape"}})}},299295:(e,t,i)=>{"use strict";i.d(t,{$4:()=>D,AQ:()=>W,ASPECT_RATIO_FORMAT_MAP:()=>M,Bj:()=>x,DB:()=>$,FH:()=>ea,FM:()=>Q,G9:()=>N,GX:()=>m,Hy:()=>eu,JO:()=>z,Ke:()=>O,LM:()=>n,Lc:()=>ep,Lr:()=>ec,MN:()=>y,Mn:()=>ee,N8:()=>f,NB:()=>ei,P0:()=>er,P9:()=>el,Pn:()=>v,S:()=>R,TK:()=>S,TZ:()=>j,UU:()=>u,Uw:()=>K,W_:()=>ed,XB:()=>a,Xy:()=>C,YM:()=>A,aD:()=>e_,aj:()=>U,bA:()=>L,bo:()=>d,cH:()=>ex,dS:()=>E,eZ:()=>_,fk:()=>eo,g1:()=>eh,gU:()=>c,i2:()=>h,iR:()=>B,jh:()=>eg,km:()=>p,lx:()=>k,mr:()=>X,mt:()=>G,n_:()=>F,np:()=>V,of:()=>r,q:()=>ef,qY:()=>w,qm:()=>es,rc:()=>J,ro:()=>em,sD:()=>s,sG:()=>g,u1:()=>q,uR:()=>l,v5:()=>o,v9:()=>Y,vk:()=>et,wj:()=>P,x1:()=>Z,yC:()=>b,yI:()=>T,yX:()=>I,yb:()=>H,zr:()=>en});let r=880,n=340,o=380,s=510,l=40,a=20,d=4,c=474,u=134,h=96,p=800,_=186,g=40,m=10,f=48,x=88,b=183,y=130,v=24,P=400,S=50,A=8,w=8,E=5,I=20,j=29,C=5,T=20,D=T**2,O=100,z=500,R=800,k=500,L=40,N=100,B=5,Z=["attempted","publishing","succeeded","uploading"],M={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}],storyFARPortrait:[{w:1,h:2},{w:9,h:16},{w:2,h:3},{w:3,h:4},{w:4,h:5},{w:1,h:1}],storyFARLandscape:[{w:2,h:1},{w:16,h:9},{w:3,h:2},{w:4,h:3},{w:5,h:4},{w:1,h:1}]},F=["tl","tc","tr","bl","bc","br"],U=["left","center"],H=["top","center","bottom"],V=["none","uppercase"],G=["sm","md","lg"],W=[1,.75],$=198,X=132,Y=1,q=56,K=240,J="cubic-bezier(0.66, 0.025, 0.33, 0.975)",Q=1e3,ee=1500,et=2,ei=3,er=20,en=20,eo=2,es=["processing","publishing","saving"],el=60.5,ea=120.5,ed=1,ec=209715200,eu=2500,eh=3,ep="pin-builder-default-education-id",e_="pin-builder-default-tour-id",eg="pin-builder-editing-tour-id",em="save_from_url",ef=["processing","edited","creating","saving","saved"],ex=2048},66743:(e,t,i)=>{"use strict";i.d(t,{NC:()=>o,Rc:()=>l,WK:()=>d,X9:()=>n,b9:()=>r,f9:()=>a,gu:()=>s});let r="pin-builder-font-faces",n="system-font-faces",o="pin-builder-education-font-faces",s="licensed",l="system",a="brand",d=4},309256:(e,t,i)=>{"use strict";i.d(t,{$D:()=>a,CP:()=>l,KV:()=>d,Wt:()=>o,a2:()=>u,bs:()=>h,j1:()=>s,vK:()=>c});var r=i(173159),n=i(66743);let o=[{fontGroup:n.gu,fontFamily:"A-FRAME",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!0},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik XCond-Black.otf"}]},{fontGroup:n.gu,fontFamily:"Cross-stitch",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"normal",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Medium.otf"}]},{fontGroup:n.gu,fontFamily:"Lagoon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Gabriello-Black.otf"}]},{fontGroup:n.gu,fontFamily:"Lava lamp",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Ultra Italic.otf"}]},{fontGroup:n.gu,fontFamily:"Marathon",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Produkt-Super Italic.otf"}]},{fontGroup:n.gu,fontFamily:"Sourdough",defaultStyle:0,format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},styles:[{name:"Black",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Publico Banner-Bold.otf"}]},{fontGroup:n.gu,fontFamily:"Superglue",format:"truetype",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"",fontWeight:"normal",fontUrl:"https://s.pinimg.com/font/Graphik-Bold+Italic.otf"}]},{fontGroup:n.Rc,fontFamily:"Merriweather",fontFaceUrl:"https://fonts.googleapis.com/css?family=Merriweather:700",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:n.gu,fontFamily:"Noto Serif SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:n.gu,fontFamily:"Noto Sans SC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+SC:400&display=swap&subset=chinese-simplified",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-CN"},{fontGroup:n.gu,fontFamily:"Noto Serif TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:n.gu,fontFamily:"Noto Sans TC",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+TC:400&display=swap&subset=chinese-traditional",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"zh-TW"},{fontGroup:n.gu,fontFamily:"Noto Serif KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:n.gu,fontFamily:"Noto Sans KR",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+KR:400&display=swap&subset=korean",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ko-KR"},{fontGroup:n.gu,fontFamily:"Noto Serif JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:n.gu,fontFamily:"Noto Sans JP",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans+JP:400&display=swap&subset=japanese",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"ja"},{fontGroup:n.gu,fontFamily:"Noto Serif",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Serif:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:n.gu,fontFamily:"Noto Sans",fontFaceUrl:"https://fonts.googleapis.com/css?family=Noto+Sans:400&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}],localeFilter:"hi-IN"},{fontGroup:n.Rc,fontFamily:"Playfair Display",fontFaceUrl:"https://fonts.googleapis.com/css?family=Playfair+Display:400",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:n.Rc,fontFamily:"Raleway",fontFaceUrl:"https://fonts.googleapis.com/css?family=Raleway:900",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Black",fontStyle:"",fontWeight:"900"}]},{fontGroup:n.Rc,fontFamily:"Roboto Condensed",fontFaceUrl:"https://fonts.googleapis.com/css?family=Roboto+Condensed:700i",fontOverrides:{letterSpacing:0,lineHeight:1.2,textTransform:!1},defaultStyle:0,styles:[{name:"Bold Italic",fontStyle:"italic",fontWeight:"700"}]},{fontGroup:n.Rc,fontFamily:"Suez One",fontFaceUrl:"https://fonts.googleapis.com/css?family=Suez+One&display=swap",fontOverrides:{letterSpacing:0,lineHeight:.9,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:n.Rc,fontFamily:"Domine",fontFaceUrl:"https://fonts.googleapis.com/css?family=Domine&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]},{fontGroup:n.Rc,fontFamily:"Overlock",fontFaceUrl:"https://fonts.googleapis.com/css?family=Overlock:900i&display=swap",fontOverrides:{letterSpacing:-1,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Black Italic",fontStyle:"",fontWeight:"400"}]},{fontGroup:n.Rc,fontFamily:"Satisfy",fontFaceUrl:"https://fonts.googleapis.com/css?family=Satisfy&display=swap",fontOverrides:{letterSpacing:0,lineHeight:1,textTransform:!1},defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"400"}]}];function s(){return o}function l(e,t,i){let r=e.styles.find(e=>e.fontStyle===t&&e.fontWeight===i);return r?r.name:""}function a(e,t){let i=e.reduce((e,t)=>[...e,...t.fonts],[]);return i.find(e=>e.fontFamily===t)||null}function d(e){return(0,r.Z)(e,n.b9)}function c(){return(0,r.Z)(o,n.X9)}function u(){return(0,r.Z)([o[n.WK]],n.NC)}function h(e){let t=function(e){if(e){let t=o.findIndex(t=>t.localeFilter===e);if(t>=0)return o[t]}return o[6]}(e),{defaultStyle:i}=t,r=t.styles[i],{fontFamily:s,fontOverrides:l}=t,a=l&&l.textTransform?1:0,d=l&&l.lineHeight||1.2,c=l&&l.letterSpacing||0;return{fontGroupName:n.gu,fontFamilyName:null!=s?s:"",fontStyleName:r.name,fontWeight:r.fontWeight,fontSize:50,textColor:"#FFFFFF",marginIndex:1,alignmentIndex:1,positionIndex:2,backgroundColor:"",backgroundTransparencyIndex:0,lineHeight:d,letterSpacing:c,transformIndex:a,showMoreOptions:!1}}},984244:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(299295);function n(e){return r.ASPECT_RATIO_FORMAT_MAP[e]}},795067:(e,t,i)=>{"use strict";function r(e){let t=e.lastIndexOf("."),i=e.toLocaleLowerCase(),r=i.substr(t);return r.includes("gif")||i.startsWith("data:image/gif")}function n(e){if("localVideo"===e.type)return"localVideo";if("localImage"===e.type)return"image/gif"===(e.fileSrc&&e.fileSrc.type)?"gif":null;if("webImage"===e.type)return r(e.src)?"gif":null;if("dropboxFile"===e.type)return r(e.name)?"gif":null;if("pin"===e.type){let{images:t,videos:i}=e;if(i)return"localVideo";if(null!=t&&t.orig&&t.orig.url&&r(t.orig.url))return"gif"}return null}i.d(t,{Z:()=>n})},616672:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(299295);function n(e,t=r.LM,i=0){return(t-2*i)/e.width*e.height+2*i}},388628:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(299295);function n(e,t){let i=e/t,{carousel:n}=r.ASPECT_RATIO_FORMAT_MAP,o=n.length,s=n[0],l=n[o-1];if(i<=l.w/l.h)return{w:e,h:t};let[a]=n.reduce((e,t,r)=>{let n=t.w/t.h,[o,s]=e,l=Math.abs(n-i);return s&&s<l?[o,s]:[t,l]},[null,null]),d=a?a.w/a.h:s.w/s.h;return{w:t*d,h:t}}},573545:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(540794);function n(e){if(e){let e=(0,r.Z)(),t=e.includes("/create/")?"create_flow":"standalone";return`partner_upload_${t}`}return"pinner_upload_standalone"}},47615:(e,t,i)=>{"use strict";i.d(t,{PG:()=>n,Sl:()=>o,rt:()=>l});var r=i(299295);function n(e){return e.width>=r.FM&&e.height>=r.Mn}function o(e){return!!e&&("localImage"===e.type||"webImage"===e.type||"assetImage"===e.type)}let s={STATIC:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],CAROUSEL:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"],VIDEO:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","VIDEO_VIEW","WEB_SESSIONS","VIDEO_COMPLETION"],COLLECTIONS:["TRAFFIC","CONSIDERATION","AWARENESS","WEB_CONVERSION","WEB_SESSIONS"]};function l(e,t){return!!e&&!!t&&(s[e]||[]).includes(t)}},454074:(e,t,i)=>{"use strict";function r(e){let t=[];return e.items?Array.from(e.items).forEach(e=>{if("file"===e.kind){let i=e.getAsFile();i&&t.push(i)}}):t.concat(Array.from(e.files)),t}i.d(t,{Z:()=>r})},724565:(e,t,i)=>{"use strict";i.d(t,{SD:()=>o,TA:()=>n,to:()=>r});let r=e=>{let t=Math.floor(100*e||0),i=Math.floor(t/6e3),r=Math.floor((t-6e3*i)/100),n=t-6e3*i-100*r,o=i<10?`0${i}`:i,s=r<10?`0${r}`:r,l=n<10?`0${n}`:n;return`${o}:${s}:${l}`},n=e=>{let t=r(e);return`00:${t.substring(0,5)}:00`},o=e=>{let t=e.split(":"),i=0;return 3===t.length&&(i+=(isNaN(t[0])?0:60*+t[0])+(isNaN(t[1])?0:+t[1])+(isNaN(t[2])?0:+t[2]/100)),i}},840839:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(385740);function n(e,t){let i=(0,r.BE)();e({event_type:13,view_type:212}),e(t),e({event_type:13,view_type:null==i?void 0:i.viewType,view_parameter:null==i?void 0:i.viewParameter,view_data:null==i?void 0:i.viewData})}},113110:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294),n=i(773285);let o=()=>{let{checkExperiment:e}=(0,n.F)(),{anyEnabled:t}=e("web_set_crossorigin_anonymous"),[i,o]=(0,r.useState)(t);return{enabled:i,disable:()=>o(!1)}}},283943:(e,t,i)=>{"use strict";i.d(t,{aU:()=>l,hq:()=>s,o_:()=>n});var r=i(425288);let{Provider:n,useHook:o}=(0,r.Z)("AuthenticationContext");function s(){return o().loginContext}function l(){return o().logout}},177471:(e,t,i)=>{"use strict";i.d(t,{k:()=>w});var r=i(667294),n=i(702664),o=i(214494),s=i(186656);let l=["etsy","facebook","microsoft","twitter","google","instagram","youtube","dropbox"],a=(e,t,i)=>{let r;switch(e){case"facebook":let{facebookToken:n}=i;r=t?{facebook_id:t.id,facebook_token:n}:Object.freeze({});break;case"gplus":r=t?{one_time_code:t.one_time_code,redirect_uri:t.redirect_uri||void 0}:Object.freeze({});break;case"line":r=t?{line_id_token:t.line_id_token,line_access_token:t.line_access_token}:Object.freeze({});break;default:r=Object.freeze({})}return r};var d=i(124237),c=i(402201),u=i(572752),h=i(553171),p=i(83969),_=i(966113),g=i(867820);async function m(e,t){var i,r;await (0,p.Px)(void 0,t||void 0);let n=null===(i=window.google)||void 0===i?void 0:null===(r=i.accounts)||void 0===r?void 0:r.oauth2;if(n){let t=n.initCodeClient({client_id:_.v3o,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e});t.requestCode()}}let f=Object.freeze({}),x=e=>{let{network:t}=e;if(!f[t])return;let{[t]:{error:i,success:r,complete:n},...o}=f;f={...o},"error"===e.type?null==i||i(Object.freeze({message:"Please do not close the window when claiming your account!"})):r("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==n||n()},b=e=>{switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,c.Z)({width:580,height:580});case"etsy":return(0,c.Z)({width:580,height:775});case"youtube":return(0,c.Z)({width:605,height:640});default:return(0,c.Z)()}},y=({i18n:e,network:t,callbacks:i,requestContext:r})=>{if(i={error:()=>{},complete:()=>{},...i},(0,g.My)(`auth_web.social_connect.${t}.${(0,u.Z)(r)}`),"gplus"===t||"google"===t)(0,g.My)("auth_web.social_connect.google.migration"),m(e=>{i.success({one_time_code:e.code,redirect_uri:"postmessage"})},r.language);else if("line"===t){let{locale:e}=r;(0,h.Z)(e,i)}else{let r=window.open("/connect/"+t+"/","",b(t));if(!r){d.Z.showError(e.bt("You must enable pop-ups.", "You must enable popups!", " - ", undefined, true)),i.error&&i.error(Object.freeze({}));return}f={...f,[t]:i}}};window.addEventListener("message",e=>{let t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin!==t)return;let i=e.data;if(i&&"social-connect-complete"===i.type){let t=e.data;t.network&&x(t)}});var v=i(780280),P=i(414327),S=i(19121);class A{constructor({invalidateResource:e,requestContext:t,viewer:i}){this.getUserId=()=>i.isAuth?i.id:"",this.getUsername=()=>i.isAuth?i.username:"",this.isLimitedLogin=()=>i.isLimitedLogin,this.invalidateResource=e,this.requestContext=t}handleConnect(e,t,i,r){let n=t=>{("connect"===t.type?function({network:e,data:t,requestContext:i}){if(l.includes(e))return o.Z.create("UserSocialNetworkResource",{network:e,data:t}).callCreate();let r=`/v3/connect/${e}/`,n=a(e,t,i);return(0,s.Z)({url:r,method:"PUT",data:n})}({network:e,data:t.data,requestContext:this.requestContext}):(0,s.Z)({url:`/v3/connect/${e}/`,method:"DELETE"})).then(e=>{var t;let r={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",r),o.Z.create("UserResource",r).callGet(),null===(t=i.success)||void 0===t||t.call(i,e)},e=>{if(e&&"object"==typeof e){var t;null===(t=i.error)||void 0===t||t.call(i,{api_error_code:e.api_error_code,code:e.code,message:e.message})}}).finally(()=>{var e;null===(e=i.complete)||void 0===e||e.call(i)})};t?this.isLimitedLogin()?n({type:"connect"}):y({network:e,callbacks:{success:e=>n({type:"connect",data:e}),error:i.error,complete:i.complete},i18n:r,requestContext:this.requestContext}):n({type:"disconnect"})}}function w(){let e=(0,n.useDispatch)(),t=(0,v.B)(),i=(0,S.Z)(),o=(0,r.useMemo)(()=>new A({invalidateResource:(t,i)=>e((0,P.jB)(t,i)),requestContext:t,viewer:i}),[e,t,i]);return o}},7893:(e,t,i)=>{"use strict";i.d(t,{Kw:()=>l,RD:()=>a,dD:()=>c});var r=i(214494),n=i(186656),o=i(884732);let s=["partner.biz_ownership_email","partner.business_name","partner.contact_email","partner.contact_phone","partner.contact_phone_country()","partner.enable_profile_address","partner.enable_profile_message","partner.is_linked_business","partner.profile_place()","place.country","place.extra_street","place.locality","place.postal_code","place.region","place.street","user.businesses()","user.email","user.fast_advertiser_info_has_any_managed_advertisers","user.full_name","user.id","user.image_medium_url","user.owners()","user.partner()","user.username"],l=async()=>{var e;let t=await r.Z.create("UserSessionResource",{session_accounts:!0}).callCreate();return(null===(e=t.resource_response.data)||void 0===e?void 0:e.session_accounts)||{}},a=(e,t)=>{let i=Object.freeze({});try{i=(0,o.rl)()}catch(i){e(`${t}.removeAccountDataFromLocalStorage.jsonParseFailed`)}let r=Object.keys(i);if(e(`${t}.removeAccountDataFromLocalStorage.start`),0===r.length||i[r[0]].logged_in){e(`${t}.removeAccountDataFromLocalStorage.early_return`);return}let n=r.reduce((e,t)=>({...e,[t]:{logged_in:!0}}),{});(0,o.r8)(n),e(`${t}.removeAccountDataFromLocalStorage.updated`)},d=e=>{var t,i,r,n;return{id:e.id,username:e.username,email:e.email,fullName:e.full_name,imageMediumUrl:e.image_medium_url,imageLargeUrl:e.image_large_url||"",owners:e.owners||null,partner:e.partner?{bizContactEmail:(null===(t=e.partner)||void 0===t?void 0:t.contact_email)||"",bizOwnershipEmail:(null===(i=e.partner)||void 0===i?void 0:i.biz_ownership_email)||e.email||"",businessName:null===(r=e.partner)||void 0===r?void 0:r.business_name,isLinkedBusiness:null===(n=e.partner)||void 0===n?void 0:n.is_linked_business}:null,businesses:((null==e?void 0:e.businesses)||[]).map(t=>{var i,r,n,o;return{...d(t),partner:{bizContactEmail:(null===(i=t.partner)||void 0===i?void 0:i.contact_email)||"",bizOwnershipEmail:(null===(r=t.partner)||void 0===r?void 0:r.biz_ownership_email)||e.email||"",businessName:null===(n=t.partner)||void 0===n?void 0:n.business_name,isLinkedBusiness:null===(o=t.partner)||void 0===o?void 0:o.is_linked_business}}})}},c=async e=>{let t=await l(),i=e.id;t[i]||(t[i]={logged_in:!0});let r=Object.keys(t||{}),o=r.map(e=>({uri:`v3/users/${e}/`,method:"GET",params:{fields:s.join(",")}})),a=await (0,n.Z)({url:"/v3/batch/",method:"POST",data:{requests:JSON.stringify(o)}}),c=a.resource_response.data;if(c&&Object.keys(c).length>0){let e=Object.keys(c),t=e.filter(e=>"success"===c[e].status).map(e=>d(c[e].data));return function(e){let t=e.every(e=>!!e.fullName),i=t?"fullName":"username";return[...e].sort((e,t)=>e[i]>t[i]?1:t[i]>e[i]?-1:0)}(t)}return[]}},56528:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(214494);let n=e=>r.Z.create("UserPasswordResource",e).callUpdate({showError:!1})},807998:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=["https://www.pinterest.info","https://www.pinterest.at","https://www.pinterest.com.au","https://www.pinterest.ca","https://www.pinterest.ch","https://www.pinterest.cl","https://www.pinterest.de","https://www.pinterest.dk","https://www.pinterest.es","https://www.pinterest.fr","https://www.pinterest.co.uk","https://www.pinterest.ie","https://www.pinterest.it","https://www.pinterest.jp","https://www.pinterest.co.kr","https://www.pinterest.com.mx","https://www.pinterest.nz","https://www.pinterest.se","https://www.pinterest.ph","https://www.pinterest.pt","https://www.pinterest.ru"]},467570:(e,t,i)=>{"use strict";i.d(t,{GH:()=>a,JF:()=>f,Jb:()=>p,MI:()=>g,_V:()=>d,sl:()=>u,we:()=>h});var r=i(816068),n=i(186656),o=i(713930),s=i(935879),l=i(867820);let a="274266067164",d=()=>["public_profile","email","user_friends"],c=["picture.type(large)","id","first_name","last_name","email","gender"],u=e=>{e&&(0,l.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,l.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:a,status:!0,xfbml:!0,version:"v2.7"})):e?(0,l.dy)({event:"global_object_not_found",provider:"facebook"}):(0,l.My)("pcons.non_autologin.fb.global_object_not_found")},h=(e,t)=>{t&&(0,l.dy)({event:"load_script_start",provider:"facebook"});let i=(0,o.Z)((0,s.Z)(e),"FACEBOOK");return i.then(()=>u(t))},p=()=>new Promise(e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)}),_=({userID:e,accessToken:t,data:{birthday:i,email:n,first_name:o,gender:s,last_name:l,picture:a}})=>({type:"facebook",facebook_id:e,facebook_token:t,birthday:i?(0,r.Z)(i):void 0,email:n,first_name:o,gender:s,image_url:a&&!a.data.is_silhouette?a.data.url:void 0,last_name:l});async function g(e){let t=await (0,n.Z)({url:"/v3/facebook/profile_data/",method:"POST",data:{access_token:e,pii_safe_birthday:!0,fields:c}}),i=t.resource_response.data||{};return(0,l.My)(i?"pcons.facebook_user.non_empty_user_data_returned":"pcons.facebook_user.empty_user_data_returned"),{access_token:e,birthday:i.birthday,email:i.email,first_name:i.first_name,gender:i.gender,id:i.id,last_name:i.last_name,picture:i.picture}}let m=(e,t)=>new Promise((i,r)=>{if("connected"!==e.status){r({status:e.status||"unknown"});return}let{userID:n,accessToken:o}=e.authResponse;g(o).then(e=>{i({creds:{facebook_id:n,facebook_token:o,facebook_autologin:(null==t?void 0:t.autologin)||!1},signupOptions:_({userID:n,accessToken:o,data:e})})},r)}),f=()=>new Promise(e=>{window.FB.login(e,{scope:d().join(",")})}).then(e=>m(e))},935879:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});let r=e=>{let t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}},n=e=>`//connect.facebook.net/${r(e)}/sdk.js`},290148:(e,t,i)=>{"use strict";i.d(t,{Ny:()=>u,ZP:()=>p,eD:()=>g,lp:()=>_,nY:()=>m});var r=i(464232),n=i(78714),o=i(432300),s=i(957161),l=i(966113),a=i(867820),d=i(794230),c=i(704115);let u=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class h{static defaultLoginRedirectUrl(){return window.location.pathname===l.lfe||window.location.pathname===l.ZEf||window.location.pathname.startsWith(l.rOJ)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(l.rOJ)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){let e=s.Z.getItem(r.kl);if(e&&e.indexOf("|")>-1){let t=e.split("|");return 3===t.length&&new Date().getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){let e=s.Z.getItem(r.kl),t=[];e&&3===(t=e.split("|")).length&&t.shift();let i=(new Date().getTime()/1e3).toString();t.push(i);let n=t.join("|");s.Z.setItem(r.kl,n)}static isFullyLoggedIn(e,t){return e&&t===o.Z.DEFAULT}static handleRedirect(e){if(!e){e="/";let t=(0,c.Z)();if(t){let i=t.next;i&&(e=i,delete t.next),e=(0,d.Z)(e,t)}}(0,n.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){s.Z.setItem(r.F6,Date.now()),!t&&e&&"/"!==e?h.handleRedirect(e):h.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){let t=window.navigator.credentials;if(t&&e.username_or_email)try{let i=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(i).then(()=>{(0,a.My)("navigatorCredentials.store.success")})}catch(e){(0,a.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,i){(0,a.My)("multi_step_login"),h.storeLoginCredentialsToBrowser(e),i?i(e,t):(0,a.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}let p=h;function _(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":"other"}function g(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":_(e)}function m(e){return e.facebook_id?"facebook":e.google_open_id_token?"google":e.username_or_email?"email":"other"}},884732:(e,t,i)=>{"use strict";i.d(t,{M3:()=>d,PE:()=>s,Q:()=>c,lv:()=>l,r8:()=>o,rl:()=>n,yW:()=>a});var r=i(844974);let n=()=>{try{let e=(0,r.qn)("MULTIPLE_ACCOUNTS");return e?JSON.parse(e):Object.freeze({})}catch(e){return Object.freeze({})}},o=e=>(0,r.Nh)("MULTIPLE_ACCOUNTS",JSON.stringify(e)),s=()=>!!(0,r.qn)("MULTIPLE_ACCOUNTS"),l=()=>Object.keys(n()).length,a=()=>{try{let e=(0,r.qn)("MULTIPLE_ACCOUNTS_GROUP");return e?JSON.parse(e):null}catch(e){return null}},d=e=>(0,r.Nh)("MULTIPLE_ACCOUNTS_GROUP",JSON.stringify(e)),c=()=>({multipleAccountMap:n(),multipleAccountGroupId:a()})},773285:(e,t,i)=>{"use strict";i.d(t,{F:()=>o,a:()=>n});var r=i(425288);let{Provider:n,useHook:o}=(0,r.Z)("ExperimentContext")},311560:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";case"AU":return"AU";case"IN":return"IN";default:return"OTHER"}}},874103:(e,t,i)=>{"use strict";i.d(t,{OA:()=>c,f$:()=>_,rY:()=>a,sk:()=>g,wQ:()=>u,xW:()=>h,yc:()=>d,ys:()=>p});var r=i(67347);let n="onloadRecaptchaJsCallback",o="6Ldx7ZkUAAAAAF3SZ05DRL2Kdh911tCa3qFP0-0r",s="recaptcha-enterprise-src",l=(e,t,i)=>{(0,r.nP)("recaptcha_v3.request_token.attempt",{sampleRate:.1,tags:{action:i}}),void 0===window.grecaptcha||void 0===window.grecaptcha.enterprise?(t(Error("Error loading reCAPTCHA Enterprise")),(0,r.nP)("recaptcha_v3.request_token.js_loading_error",{sampleRate:.1,tags:{action:i}})):window.grecaptcha.enterprise.ready(()=>{try{window.grecaptcha.enterprise.execute(o,{action:i}).then(e).catch(t)}catch(e){(0,r.nP)("recaptcha_v3.request_token.exec_error",{sampleRate:.1,tags:{action:i}}),t(e)}})},a=(e,t,i)=>{if(window[n]=()=>l(e,t,i),document.getElementById(s))l(e,t,i);else{let e=document.createElement("script");e.id=s,e.src=`https://www.recaptcha.net/recaptcha/enterprise.js?onload=${n}&render=${o}`;let t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}},d=105e3,c=8e3,u="mweb_auth",h="mweb_login",p="mweb_signup",_="web_auth",g="web_unauth"},561195:(e,t,i)=>{"use strict";i.d(t,{A:()=>s,Z:()=>l});var r=i(667294),n=i(883119),o=i(785893);let s=({fill:e,width:t})=>{let i="half"===e?(0,o.jsxs)(r.Fragment,{children:[(0,o.jsx)(n.xu,{position:"absolute",children:(0,o.jsx)(n.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,o.jsx)(n.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,o.jsx)(n.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},"data-test-id":`rating-star-${e}`,display:"inlineBlock",children:i})};function l({max_rating:e,rating:t,width:i}){var r;let l=[],a=parseFloat(e)||5,d=5*(r=(r=parseFloat(t)||0)<=a?r:a)/a;if(Number.isNaN(d))return null;let c=Math.floor(d),u=d-c;return[...Array(c).keys()].forEach(e=>l.push((0,o.jsx)(s,{fill:"full",width:i},e))),u>=.75?l.push((0,o.jsx)(s,{fill:"full",width:i},l.length)):u>=.25&&l.push((0,o.jsx)(s,{fill:"half",width:i},l.length)),[...Array(5-l.length).keys()].forEach(()=>l.push((0,o.jsx)(s,{fill:"empty",width:i},l.length))),(0,o.jsx)(n.xu,{display:"inlineBlock",position:"relative",width:15*a,children:l})}},780280:(e,t,i)=>{"use strict";i.d(t,{B:()=>u,LC:()=>d,P2:()=>a,fH:()=>c,gf:()=>h});var r=i(667294),n=i(608832),o=i(239745),s=i(785893);let l=(0,r.createContext)();function a({children:e,initialValue:t}){let[i,a]=(0,r.useState)(t),d=(0,r.useMemo)(()=>({requestContext:i,updateRequestContext:e=>{let t={...i,...e};(0,o.Z)(i,e)||a(t),(0,n.J)(t)}}),[i]);return(0,s.jsx)(l.Provider,{value:d,children:e})}let d=({children:e})=>{let t=(0,r.useContext)(l);if(!t)throw Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)},c=({children:e})=>{let t=(0,r.useContext)(l);if(!t)throw Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)};function u(){let e=(0,r.useContext)(l);if(!e)throw Error("useRequestContext must be used within a RequestContextProvider");return e.requestContext}function h(){let e=(0,r.useContext)(l);if(!e)throw Error("useUpdateRequestContext must be used within a RequestContextProvider");return e.updateRequestContext}},608832:(e,t,i)=>{"use strict";let r;function n(e){r=e}function o(){return r}i.d(t,{J:()=>n,l:()=>o})},784590:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(702664),o=i(616550),s=i(886858),l=i(780280),a=i(248327),d=i(718368);let c={},u=({httpStatus:e})=>!e||e>=500;function h(e){let{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:h,name:p,noCache:_,options:g,schema:m}=null!=e?e:{name:"DisabledResource",options:null},f=!e,x=(0,n.useDispatch)(),b=(0,s.Z)(g),y=(0,r.useRef)(null),v=(0,r.useRef)(),P=(0,o.k6)(),S=P&&"POP"!==P.action,A=e=>(e[p]||c)[b]||c,w=(0,n.useSelector)(({resources:e})=>A(e).nextBookmark),E=(0,n.useSelector)(({resources:e})=>A(e).data),I=(0,n.useSelector)(({resources:e})=>A(e).auxData),j=(0,n.useSelector)(({resources:e})=>A(e).error),C=(0,n.useSelector)(({resources:e})=>!!A(e).fetching),T="object"==typeof I&&"string"==typeof(null==I?void 0:I.pagination_group)?I.pagination_group:void 0,D=!!j||void 0!==E,O=D&&!C&&w===d.q,z=!!(D&&t&&S&&!f),[R,k]=(0,r.useState)(z),L=(0,r.useCallback)((e,t)=>{y.current=x((0,a.U)(p,{options:g,schema:m,bookmark:e,headers:h,paginationGroup:t}))},[x,p,b,m,h]),N=()=>{y.current=x((0,a.b)(p,{options:g,schema:m,headers:h}))},{isBot:B}=(0,l.B)(),Z=()=>{if(!f&&v.current!==b){let e=void 0===v.current;v.current=b,!D&&!C||e&&j&&u(j)?L():(!B&&_||z)&&N()}};(0,r.useEffect)(()=>{i||Z()}),i&&Z();let M=(0,r.useCallback)(()=>{f||(N(),k(!0))},[f,a.b,p,b,h,k]),F=(0,r.useCallback)(()=>{!w||O||C||f||L(w,T)},[f,L,w,O,C,T]);if(y.current){if(D&&!C)y.current=null;else if(i)throw y.current}let U=(0,r.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:F,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:M}),H={auxData:I,data:E,error:j,fetchMore:F,isAtEnd:O,isFetching:C,isLoaded:D,isRefreshing:R,nextBookmark:w,refresh:M};return(0,n.shallowEqual)(H,U.current)||(R&&(U.current.data||!z)&&!(0,n.shallowEqual)(H.data,U.current.data)&&(H.isRefreshing=!1,k(!1)),U.current=H),U.current}},418614:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(784590),n=i(19121),o=i(616550),s=i(780280),l=i(50286),a=i(826067);function d({getOptions:e,checkExperiments:t,disableFetch:i,...d}){let c=function(){let e=(0,n.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:u,fetchDisabled:h}=function({checkExperiments:e,disableFetch:t,viewer:i}){var r;let n=(0,o.TH)(),d=(0,o.$B)(),c=(0,s.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:i,search:r},inviteCode:n,match:{params:o,path:s},viewer:l}){let d={inviteCode:n,matchPath:s,params:o,parsedSearch:(0,a.mB)(r),pathname:i,search:r},c={country:l.country||void 0,id:l.id||void 0,isAuth:l.isAuth,isEmployee:!!l.isEmployee,isPartner:!!l.isPartner,username:l.username||void 0};return{advertiser:e,deviceType:t,routeData:d,user:c}}({advertiser:c.advertiser,deviceType:(0,l.Mq)(c),location:n,match:d,viewer:i,inviteCode:null!==(r=c.inviteCode)&&void 0!==r?r:""}),h=!!t&&t(u),p=!!h||!e||e(c.experimentsClient);return{args:u,fetchDisabled:h||!p}}({checkExperiments:t,disableFetch:i,viewer:c}),p=e?e(u):void 0;return(0,r.Z)(h?null:{options:p,...d})}},995228:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294),n=i(785893);function o({children:e,fallback:t}){return(0,n.jsx)(r.Suspense,{fallback:t||null,children:e})}},947599:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(995228);let n=r.Z},251183:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(77601);function n({scrollPosition:e,containerSize:t,contentSize:i,intendedDistance:r,extendToEdgeDistance:n=0}){let o=i-t,s=r;return s=Math.max(s=Math.min(s,o-e),-e),r>0&&o-(e+s)<=n?s=o-e:r<0&&e+s<=n&&(s=-e),s}let o={easingFunction:"ease-in-out",extendToEdgeDistanceX:0,extendToEdgeDistanceY:0,scrollSpeedPxPerMs:1.2,minScrollDuration:200},s={linear:e=>e,"ease-in":e=>e*e,"ease-out":e=>e*(2-e),"ease-in-out":e=>e<.5?2*e*e:-1+(4-2*e)*e};function l(e,t,i,l={}){let a={...o,...l},{scrollLeft:d,scrollTop:c,scrollWidth:u,scrollHeight:h,clientWidth:p,clientHeight:_}=e,g=n({scrollPosition:d,containerSize:p,contentSize:u,intendedDistance:t,extendToEdgeDistance:a.extendToEdgeDistanceX}),m=n({scrollPosition:c,containerSize:_,contentSize:h,intendedDistance:i,extendToEdgeDistance:a.extendToEdgeDistanceY}),f=Math.abs(Math.floor(g/a.scrollSpeedPxPerMs)),x=Math.abs(Math.floor(m/a.scrollSpeedPxPerMs)),b=Math.max(f,x);a.minScrollDuration&&(b=Math.max(b,a.minScrollDuration));let y=s[a.easingFunction]||s["ease-in-out"],v=(0,r.Z)({window,duration:b,run:t=>{e.scrollLeft=d+g*y(t),e.scrollTop=c+m*y(t),1===t&&a.onAnimationComplete&&setTimeout(a.onAnimationComplete,0)}});return v}},80816:(e,t,i)=>{"use strict";i.d(t,{i:()=>r});let r={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",UNKNOWN:"unknown"}},239745:(e,t,i)=>{"use strict";function r(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let i=Object.keys(e),r=Object.keys(t);return i.length===r.length&&i.every(i=>e[i]===t[i])}i.d(t,{Z:()=>r})},458882:(e,t,i)=>{"use strict";i.d(t,{l:()=>o,r:()=>s});var r=i(667294);let n=(0,r.createContext)(null),o=()=>(0,r.useContext)(n),s=n.Provider},734765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(50286),n=i(582406);function o(){let e=(0,r.ZP)(),t=(0,n.uo)();return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"pintergration":return 10;case"creators":return 11;case"newsroom":return 13;default:return"phone"===e||"tablet"===e?1:0}}({deviceType:e,site:t})}},619277:(e,t,i)=>{"use strict";i.d(t,{o$:()=>n,ty:()=>o,vE:()=>s});var r=i(425288);let{Provider:n,MaybeConsumer:o,useMaybeHook:s}=(0,r.Z)("inviteContext")},223815:(e,t,i)=>{"use strict";i.d(t,{U:()=>s,Z:()=>l});var r=i(755742),n=i(785893);let o=()=>{},s=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function l({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:l,children:a}){let d=e=>{t&&e.keyCode===r.Z.ESCAPE||s(e)};return(0,n.jsx)("div",{onAbort:s,onAnimationEnd:s,onAnimationIteration:s,onAnimationStart:s,onBlur:o,onCanPlay:i?o:s,onCanPlayThrough:s,onChange:s,onClick:e?o:s,onCompositionEnd:s,onCompositionStart:s,onCompositionUpdate:s,onContextMenu:s,onCopy:s,onCut:s,onDoubleClick:s,onDurationChange:s,onEmptied:s,onEncrypted:s,onEnded:s,onError:s,onFocus:o,onInput:s,onInvalid:s,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:s,onLoadedData:s,onLoadedMetadata:s,onLoadStart:s,onMouseDown:s,onMouseEnter:s,onMouseLeave:s,onMouseMove:e?o:s,onMouseOut:s,onMouseOver:s,onMouseUp:e?o:s,onPaste:s,onPause:s,onPlay:s,onPlaying:s,onProgress:s,onRateChange:s,onScroll:l?o:s,onSeeked:s,onSeeking:s,onSelect:s,onStalled:s,onSubmit:s,onSuspend:s,onTimeUpdate:s,onTouchCancel:s,onTouchEnd:e?o:s,onTouchMove:e?o:s,onTouchStart:e?o:s,onTransitionEnd:s,onVolumeChange:s,onWaiting:s,onWheel:s,children:a})}},858416:(e,t,i)=>{"use strict";i.d(t,{Wr:()=>u,Hx:()=>p,RC:()=>h});var r=i(667294),n=i(425288),o=i(924687),s=i(311541),l=i(785893);let a=()=>Promise.resolve().then(i.bind(i,924687)),{Provider:d,useHook:c}=(0,n.Z)("IdeaPinVideoPlayer");function u({children:e}){let[t,i]=(0,s.Z)(a,o.initialState),n=(0,r.useMemo)(()=>({dispatch:i,ideaPinVideoPlayerControls:t}),[i,t]);return(0,l.jsx)(d,{value:n,children:e})}function h(){let{dispatch:e}=c();return(0,r.useMemo)(()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})},updateSeekingIdeaPin:t=>{t?e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t}}):e({type:"UPDATE_SEEKING_IDEA_PIN",payload:{isSeekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}}),[e])}function p(){let{ideaPinVideoPlayerControls:e}=c();return e}},924687:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,initialState:()=>r});let r={seekTime:void 0,seekTimes:{},isSeekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function n(e=r,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime},seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{},seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,isSeekingIdeaPin:t.payload.isSeekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},224496:(e,t,i)=>{"use strict";i.d(t,{Cc:()=>p,DL:()=>d,Gf:()=>m,LX:()=>n,Lc:()=>f,Ls:()=>_,Rf:()=>a,YL:()=>l,ap:()=>o,h8:()=>u,pE:()=>c,s5:()=>g,tQ:()=>h,yR:()=>s});var r=i(883119);let n={w:9,h:16},o=n.w/n.h,s=8,l=10,a=5e3,d=2e3;function c(e,t=1){return{x:(null!=e?e:24)/5,y:(null!=e?e:24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},h=[u.IMAGE,u.VIDEO],p={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},_=new r.Ry(1),g=new r.H3([_]),m=new r.H3([g]),f=e=>{let t=Math.floor(e||0),i=Math.floor(t/60),r=t-60*i,n=i<10?`${i}`:i,o=r<10?`0${r}`:r;return`${n}:${o}`}},985913:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(858142);let n=/\{\{\s*(\w+)\s*\}\}/g,o=(e,t)=>(0,r.Z)(n,e,t)},858791:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=(e,t,i)=>t?t.replace(e,(e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:""):""},66699:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(985913),n=i(858791);let o=(e,t)=>{let i={};return Object.keys(t).forEach(e=>{i[e]=t[e]?(0,n.Z)(t[e].toString()):""}),(0,r.Z)(e,i)}},883561:(e,t,i)=>{"use strict";function r(e,t=80,i="…",r=!1){let n;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||r)n=e.substring(0,t);else{let i=e.lastIndexOf(" ",t);n=e.substring(0,i)}return(n=n.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+i}i.d(t,{ZP:()=>r})},70061:(e,t,i)=>{"use strict";function r(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}i.d(t,{Z:()=>r})},52022:(e,t,i)=>{"use strict";i.d(t,{S:()=>l,Z:()=>a});var r=i(667294),n=i(616550),o=i(53987),s=i(867820);let l=e=>(0,o.L6)(e)?"pin":(0,o.am)(e)?"board":(0,o.Xn)(e)?"login":(0,o.C$)(e)?"home":(0,o.cD)(e)?"profile":(0,o.dr)(e)?"ideas":(0,o.gT)(e)?"ideas-root":(0,o.tZ)(e)?"videos":(0,o.Q0)(e)?"videos-category":(0,o.$Y)(e)?"article":(0,o.E0)(e)?"shopping-spotlight":(0,o.Zz)(e)?"today":(0,o.j8)(e)?"unauth-profile":(0,o.f1)(e)?"shopping-root":(0,o.OX)(e)?"shopping-category":"other";function a(){let e=(0,n.TH)();return(0,r.useCallback)(({action:t,item:i,within:r})=>{let n=l(e);(0,s.My)(`logged_out_product.interaction.${n}.${t}`,{item:i||"none",within:r||"none"})},[e])}},6663:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(667294),n=i(883119),o=i(701500),s=i(898781),l=i(391254),a=i(785893);function d({color:e="dark",completeButtonText:t,completeUrl:i,dismissButtonText:d,experienceId:c,external:u,message:h,onComplete:p,onDismiss:_}){let g=(0,s.ZP)(),m=(0,r.useRef)(null),f=h&&!t,x=500735===c,b=t&&(!i||x)&&(0,a.jsx)(n.zx,{color:"white",onClick:({event:e})=>{p&&p(e)},text:t}),y=t&&i&&(0,a.jsx)(o.Z,{anchor:".HomeButton2",anchorElementRef:m.current,containerBoxConfig:{display:"flex",height:"100%"},children:(0,a.jsx)(n.ZP,{ref:m,accessibilityLabel:t,color:"white",href:i,onClick:({event:e})=>{p&&p(e)},rel:u?"nofollow":"none",size:"md",text:t},"naglink")}),v=d&&_&&(0,a.jsx)(n.xu,{mdPaddingX:2,children:(0,a.jsx)(n.zx,{color:"shopping"===e?"white":"gray",onClick:({event:e})=>{_&&_(e)},text:d})}),P=f&&!x&&_&&!d&&(0,a.jsx)(n.hU,{accessibilityLabel:g.bt("Close", "Close", "accessibility close label", undefined, true),bgColor:"lightGray",icon:"cancel",iconColor:"gray",onClick:({event:e})=>{_&&_(e)},size:"md"});return(0,a.jsxs)(n.xu,{alignItems:"center",color:e,direction:"column",display:"flex",justifyContent:"between",paddingX:6,paddingY:3,smDirection:"row",children:[(0,a.jsx)(n.xu,{column:12,smColumn:f?11:8,children:(0,a.jsxs)(n.xv,{color:"inverse",weight:x?"normal":"bold",children:[(0,a.jsx)(l.Z,{unsafeCSS:".Banner--message a { color: #fff; text-decoration: underline; }"}),(0,a.jsx)("div",{className:"Banner--message",children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})})]})}),(0,a.jsxs)(n.kC,{alignItems:"center",justifyContent:"end",children:[v,b||y,P]})]})}},948618:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(883119),n=i(785893);function o({ariaHidden:e=!1,color:t="darkGray",size:i}){return(0,n.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,n.jsx)(r.xv,{color:t,inline:!0,size:null!=i?i:"200",children:"\xb7"})})}},938999:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(667294),n=i(858472),o=i(785893);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends r.Component{constructor(...e){super(...e),s(this,"handleKeyPress",e=>{let{onClick:t}=this.props;t&&(32===e.charCode||13===e.charCode)&&(e.preventDefault(),t())})}render(){let{selected:e,rounded:t,color:i,onClick:r,children:n,style:s}=this.props,l={cursor:r?"pointer":"default",borderRadius:t?"8px":0,boxShadow:e?`0 0 0 2px ${i}`:"none",outline:"none",...s};return(0,o.jsx)("div",{onClick:r,onKeyPress:this.handleKeyPress,role:"button",style:l,tabIndex:"0",children:n})}}s(l,"defaultProps",{selected:!1,rounded:!0,color:n.x7})},343341:(e,t,i)=>{"use strict";i.d(t,{F9:()=>o,Zo:()=>n});var r=i(425288);let{Provider:n,useHook:o}=(0,r.Z)("toastManagerContext")},925797:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(883119),n=i(237056),o=i(286939),s=i(829130),l=i(898781),a=i(561195),d=i(784590),c=i(785893);function u({pinId:e}){let t=(0,l.ZP)(),i=(0,n.Z)(),{data:o}=(0,d.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed"}}),s=o&&o.story_pin_data?o.story_pin_data.page_count:null;return(0,c.jsxs)(r.kC,{alignItems:"center",height:20,justifyContent:"start",children:[(0,c.jsx)(r.JO,{accessibilityLabel:i?t.bt("Pin icon", "Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel.sce", undefined, true):t.bt("Idea Pin Icon", "Idea Pin Icon", "legacyPinTypeIdentifier.ideaPinAccessibilityLabel", undefined, true),color:"default",icon:"idea-pin",size:12}),s&&(0,c.jsx)(r.xu,{marginStart:1,children:(0,c.jsx)(r.xv,{inline:!0,size:"100",weight:"bold",children:s})})]})}let h=({icon:e,i18n:t,ideaPinRenamingEnabled:i})=>{switch(e){case"arrow-up-right":return t.bt("Promoted Pin", "Promoted Pin", "Icon indicating this Pin is promoted", undefined, true);case"play":return t.bt("Video Pin", "Video Pin", "Icon indicating this Pin is a video", undefined, true);case"gif":return t.bt("GIF Pin", "GIF Pin", "Icon indicating this Pin is a GIF", undefined, true);case"tag":return t.bt("Product Pin", "Product Pin", "Icon indicating this Pin is a product", undefined, true);case"star":return t.bt("Recipe Pin", "Recipe Pin", "Icon indicating this Pin is a recipe", undefined, true);case"story-pin":return i?t.bt("Pin", "Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel.sce", undefined, true):t.bt("Idea Pin", "Idea Pin", "legacyPinTypeIdentifier.getLabel.ideaPinLabel", undefined, true);case"collage":return t.bt("Collage Pin", "Collage Pin", "Icon indicating this Pin is a collage", undefined, true);default:return""}};function p({max_rating:e,icon:t,text:i,rating:d,pinId:p}){let _;let g=(0,l.ZP)(),m=(0,n.Z)();if(t)switch(t){case"star":_=(0,c.jsx)(a.Z,{max_rating:e,rating:d||"",width:10});break;case"gif":_=s.Z;break;case"story-pin":_=(0,c.jsx)(u,{pinId:p||""});break;default:_=(0,c.jsx)(r.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,c.jsx)(r.JO,{accessibilityLabel:h({icon:t,i18n:g,ideaPinRenamingEnabled:m}),color:"default",dangerouslySetSvgPath:"collage"===t?{__path:o.Z}:void 0,icon:"collage"===t?void 0:t,inline:!0,size:10})})}return(0,c.jsxs)(r.kC,{alignItems:"center",justifyContent:"start",children:[_,i&&(0,c.jsx)(r.xu,{marginStart:1,children:(0,c.jsx)(r.xv,{inline:!0,size:"200",children:i.trim().substring(0,25)})})]})}},170168:(e,t,i)=>{"use strict";i.d(t,{Ag:()=>o,C0:()=>a,L1:()=>h,Vi:()=>s,YD:()=>u,kS:()=>n,oo:()=>l,p3:()=>p,vC:()=>d,vI:()=>c});var r=i(401060);let n="https://www.pinterest.com/business/hub/",o="https://www.pinterest.com/homefeed/",s="www.pinterest.com",l="https://help.pinterest.com",a=`${(0,r.Z)({site:"www"})}`,d=(0,r.Z)({site:"developers"}),c=`${(0,r.Z)({site:"sterling"})}`,u=`${(0,r.Z)({site:"analytics"})}`,h=`${(0,r.Z)({site:"trends"})}`,p=`${(0,r.Z)({site:"www",path:"/product-catalogs/data-source/?advertiserId="})}`},934723:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(422586),n=i(966113);function o({advertiser:e,isAdsSite:t,isAnalyticsSite:i,isTrendsSite:o,baseUrl:s,adsUrl:l,isQuickPromote:a,isShoppingCatalogs:d}){if(t&&!e&&!a)return"/";let c=s;return(t||i||o)&&!d?(l||(l=s),e?(c=(0,r.Z)(l,e.id),t||(c=n.auO+c)):c=t?l:n.auO+c):d?c=n.auO+(0,r.Z)(s,e?e.id:""):l||(c=n.auO+s),c}},540794:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=()=>window.location.pathname},388619:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(704115);let n=({url:e})=>{if(e){let t=e.split("?");if(t[1])return(0,r.Z)(t[1])}return(0,r.Z)()}},149230:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(954931);let n=({url:e})=>!!(e&&e.match(/^https{0,1}:\/\//)&&!(0,r.Z)(e))},508847:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});let r=(e,t)=>0===e.lastIndexOf(t,0);var n=i(567831);let o=({url:e})=>{let t=(0,n.Z)("/");return r(e,t)?e.substr(t.length-1):e}},437730:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=({url:e})=>{let t=new RegExp(/http(s?):/);return t.test(e)?e:"http://"+e}},566101:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=({url:e})=>""===e||/^(https?:\/\/)?[a-z0-9_\-]+\..+/i.test(e)},50286:(e,t,i)=>{"use strict";i.d(t,{HG:()=>u,Kf:()=>s,Mq:()=>n,Wb:()=>c,ZP:()=>h,dA:()=>l,ds:()=>a,ml:()=>d});var r=i(780280);function n(e){let{isMobile:t,isTablet:i}=e.userAgent;return i?"tablet":t?"phone":"desktop"}let o=()=>{let e=(0,r.B)();return n(e)},s=e=>"phone"===e,l=e=>"tablet"===e,a=e=>"desktop"===e,d=()=>s(o()),c=()=>l(o()),u=()=>a(o()),h=o},311541:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(667294);function n(e,t){let i=(0,r.useRef)([]),[n,o]=(0,r.useState)(),[s,l]=(0,r.useReducer)(null!=n?n:()=>t,t),a=(0,r.useCallback)(t=>{n?l(t):(i.current.length||e().then(e=>{o(()=>e.default)}),i.current=[...i.current,t])},[e,n]);return(0,r.useEffect)(()=>{n&&(i.current.forEach(l),i.current=[])},[n]),[s,a]}},829407:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(667294);let n=e=>{(0,r.useEffect)(e,[])}},215292:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s,q:()=>o});var r=i(667294);let n=()=>{let[e,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1);return{active:e,focused:i,hovered:o,onBlur:()=>{n(!1),t(!1)},onFocus:()=>n(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),t(!1)},onMouseUp:()=>t(!1)}};function o({children:e}){let t=n();return e(t)}let s=n},902355:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(667294);async function n(e){return new Promise((t,i)=>{let r=document.createElement("img");r.onerror=()=>i(Error(`Image failed to load with src ${e}`)),r.onload=()=>t(!0),r.src=e})}async function o(e){try{let t=await fetch(e,{method:"HEAD"}),i=await t.blob(),r=i.type.startsWith("image/");{let t=await n(e);return r&&t}}catch(e){return!1}}function s(e){let[t,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){let t=await o(e);i(t)})()},[e]),t}},19121:(e,t,i)=>{"use strict";i.d(t,{$:()=>n,Z:()=>s});var r=i(425288);let{Provider:n,useHook:o}=(0,r.Z)("viewer"),s=o},556663:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(667294),n=i(883119),o=i(785893);function s(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let l={default:{backgroundColor:"#efefef",boxShadow:"none"},drag:{backgroundColor:"rgba(74, 144, 226, 0.08)",boxShadow:"0 0 0 1px #0074e8"},error:{backgroundColor:"rgba(230, 0, 35, 0.03)",boxShadow:"0 0 0 1px #e60023"}};class a extends r.Component{constructor(...e){super(...e),s(this,"state",{isDraggingOver:!1,isHoveringOver:!1,containedHeight:null}),s(this,"handleOnDragEnter",e=>{let{onDragEnter:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),t&&t(e)}),s(this,"handleOnDragLeave",e=>{let{onDragLeave:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleOnDragOver",e=>{let{onDragOver:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e)}),s(this,"handleOnDrop",e=>{let{onDrop:t}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),t&&t(e)}),s(this,"handleMouseEnter",()=>{let{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})}),s(this,"handleMouseLeave",()=>{let{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}),s(this,"setContainedHeight",e=>{this.setState({containedHeight:e})})}getDragContainerStyles(e,t){return t&&"default"===e?{...l[e],backgroundColor:t}:l[e]}render(){let{children:e,color:t,dropRounding:i,hasError:r,height:s,position:l,width:a}=this.props,{isDraggingOver:d,isHoveringOver:c,containedHeight:u}=this.state,h=d?"drag":r?"error":"default";return(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(h,t),...i?{borderRadius:i}:{}}},"data-test-id":"drag-behavior-container",height:s||u||"100%",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:l,rounding:2,width:a||"100%",children:e(d,c,this.setContainedHeight,u)})}}},281139:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(667294),n=i(883119),o=i(556663),s=i(785893);function l(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let a={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0};class d extends r.Component{constructor(...e){super(...e),l(this,"handleChange",e=>{let{onChange:t}=this.props;e.preventDefault(),e.stopPropagation(),t&&t(e),e.target.value=""}),l(this,"handleClick",e=>{let{onClick:t}=this.props;t&&t(e)})}render(){let{accept:e,accessibilityLabel:t,allowMultipleFiles:i,children:r,color:l,dropRounding:d,hasError:c,height:u,id:h,onDrop:p,position:_,rounding:g=2,width:m,isAriaHidden:f,experimentsClient:x}=this.props;return(0,s.jsx)(o.Z,{color:l,dropRounding:d,experimentsClient:x,hasError:c,height:u,onDrop:p,position:_,width:m,children:o=>(0,s.jsxs)(n.xu,{height:"100%",position:"relative",rounding:g,children:[r(o),(0,s.jsx)("input",{accept:e,"aria-hidden":f,"aria-label":t,"data-test-id":h,id:h,multiple:i,onChange:this.handleChange,onClick:this.handleClick,style:a,tabIndex:f?-1:0,type:"file"})]})})}}},893446:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(214494);function n(e,{onSuccess:t,onError:i,onProcessingStarted:n,resolvedAfterProcessingStarted:o,delay:s=2e3},l){let a,d;let c=!1,u=()=>{clearTimeout(d),clearTimeout(a)},h=()=>{c||r.Z.create("VIPResource",{upload_ids:[e],orbacSubjectId:l}).callGet().then(r=>{let{data:l}=r.resource_response;if(l[e]){let{status:r,signature:p,failure_code:_}=l[e];a||(a=setTimeout(()=>{c=!0,i("","registered_timeout")},6e4)),d||(d=setTimeout(()=>{c=!0,i("","processing_timeout")},3e5)),"processing"===r||"registered"===r?"processing"===r?(clearTimeout(a),n?o?(clearTimeout(d),n(p)):(n(p),setTimeout(()=>h(),s)):setTimeout(()=>h(),s)):setTimeout(()=>h(),s):"succeeded"===r?(u(),t(p)):(u(),i(`VIP status failure code: ${_}`,null))}else i("VIP upload ID was not returned",null)}).catch(()=>{i("VIP failure with checking status",null)})};h()}},531245:(e,t,i)=>{"use strict";i.d(t,{P7:()=>n,Zx:()=>l,sc:()=>s,ss:()=>o,xl:()=>r});let r=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],n=["bmp","gif","jpg","jpeg","png","tiff","webp"],o=["video/mp4","video/x-m4v","video/quicktime"],s=["mp4","m4v","mov"],l={border:"2px dashed #DADADA",borderRadius:"32px",pointerEvents:"none"}},62087:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(172045),n=i(41703);let o=e=>t=>t((0,n.Z)("IMAGE_UNRECOGNIZED_TYPE",e)),s=e=>t=>new Promise((i,n)=>{let s=new Image;s.addEventListener("load",()=>i({fileSrc:t,height:s.height,id:(0,r.Z)(),name:t.name,size:t.size,src:s.src,type:"localImage",width:s.width})),s.addEventListener("error",()=>o(e)(n)),s.src=URL.createObjectURL(t)})},275988:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(172045),n=i(41703),o=i(155455);let s=e=>t=>{t((0,n.Z)((0,o.Z)(),e))},l=e=>t=>new Promise((i,n)=>{var o;let l=new FileReader,a=(null===(o=window.navigator)||void 0===o?void 0:o.userAgent)||"",d=a.includes("Safari"),c=d?t.slice(0,t.size,"video/mp4"):t,u=URL.createObjectURL(c);l.addEventListener("load",()=>{let o=document.createElement("video");o.addEventListener("loadedmetadata",()=>i({id:(0,r.Z)(),duration:o.duration,fileSrc:t,height:o.videoHeight,name:t.name,size:t.size,src:o.src,thumbnail:0,type:"localVideo",width:o.videoWidth})),o.addEventListener("error",()=>s(e)(n)),o.src=u}),l.readAsDataURL(t)})},155455:(e,t,i)=>{"use strict";function r(){var e;let t=(null===(e=window.navigator)||void 0===e?void 0:e.userAgent)||"";if(t.includes("Firefox"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX";if(t.includes("SamsungBrowser")||t.includes("Opera")||t.includes("OPR")||t.includes("Edge"))return"VIDEO_UNRECOGNIZED_ENCODING";if(t.includes("Edg"))return"VIDEO_UNRECOGNIZED_ENCODING";if(t.includes("Chrome"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME";if(t.includes("Safari"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI";else return"VIDEO_UNRECOGNIZED_ENCODING"}i.d(t,{Z:()=>r})},471155:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(214494),n=i(893446);let o=[200,201,204];function s(e,t,i=!0,s,l,a){return new Promise((d,c)=>{r.Z.create("VIPResource",{type:t,aux_data:l,orbacSubjectId:a}).callCreate().then(r=>{let{onCancelUpload:l,onFailureUpload:u,onFinishProcessing:h,onFinishUpload:p,onProgress:_,onStartProcessing:g,onStartUpload:m,setXhr:f}=s||{},{upload_id:x,upload_url:b,upload_parameters:y}=r.resource_response.data,v=e.size,P=new Date;m&&m({fileSizeBytes:v,uploadId:x});let S=(e,t)=>{u&&u({failureReason:t,fileSizeBytes:v,message:e,uploadId:x}),c({isError:!0,uploadId:x})},A=new XMLHttpRequest;A.open("POST",b,!0),A.onabort=()=>{l&&l(x),c({isError:!1,uploadId:x})},A.onload=()=>{if(o.includes(A.status)){let e=new Date,r=(e-P)/1e3;if(p){let e=A.getResponseHeader("x-amz-request-id"),t=A.getResponseHeader("x-amz-id-2");p({amzId2:t,amzRequestId:e,statusCode:A.status,uploadId:x,uploadTime:r})}(0,n.Z)(x,{onProcessingStarted:e=>(g&&g({signature:e,uploadId:x}),i?d({signature:e,uploadId:x}):void 0),delay:t.includes("image")?2e3:8e3,onError:S,onSuccess:t=>{let i=(new Date-e)/1e3;return h&&h({fileSizeBytes:v,processingTime:i,signature:t,uploadId:x,uploadTime:r}),d({signature:t,uploadId:x})},resolvedAfterProcessingStarted:i},a)}else S(`XHR failure status code: ${A.status}`,null)},A.onerror=()=>{A.abort()},_&&(A.upload.onprogress=_),f&&f(A);let w=new FormData;Object.keys(y).forEach(e=>{w.append(e,y[e])}),w.append("file",e),A.send(w)}).catch(e=>{c({isError:!0})})})}},123463:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var r=i(531245),n=i(41703),o=i(62087),s=i(665866),l=i(451105),a=i(299295),d=i(275988),c=i(155455);let u="enabled_min",h="employees_min";function p({i18n:e,file:t,options:i,ideaPinRenamingEnabled:p}){let{allowVideo:_,videoOnly:g}=i||{};return r.ss.includes(t.type)&&_?function(e,t,i){let{forStoryPin:r}=i||{},o=r?a.Lr:2147483648;return t.size>o?Promise.resolve((0,n.Z)(r?"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":"VIDEO_OVER_MAX_FILE_SIZE",e)):(0,d.Z)(e)(t).then(t=>(function(e,t,i){let{forStoryPin:r,allowAllAspectRatios:o}=i||{},l=!!r,d=l&&s.Z.enabled("ideaPinExtendVideoLength"),p=d&&s.Z.enabled("ideaPinExtendVideoLengthAboveTwoMin"),_=(()=>{if(p){let e=s.Z.getExperimentGroup("ideaPinExtendVideoLengthAboveTwoMin");if(e){let t=e.startsWith(u)&&e.length>u.length?parseInt(e.substring(u.length),10):e.startsWith(h)&&e.length>h.length?parseInt(e.substring(h.length),10):-1;if(t>0)return 60*t+.5}}return d?a.FH:a.P9})(),g=l?a.W_:4,m=l?_:900;return t.duration<g?(0,n.Z)(l?"STORY_PIN_VIDEO_BELOW_MIN_DURATION":"VIDEO_BELOW_MIN_DURATION",e):t.duration>m?(0,n.Z)(l?p?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION_ABOVE_TWO_MIN":d?"EXTEND_STORY_PIN_VIDEO_OVER_MAX_DURATION":"STORY_PIN_VIDEO_OVER_MAX_DURATION":"VIDEO_OVER_MAX_DURATION",e,void 0,_):t.width&&t.height?!o&&(t.width/t.height<.5||t.width/t.height>1.91)?(0,n.Z)("VIDEO_UNSUPPORTED_RATIO",e):t.width<100||t.height<100?(0,n.Z)("VIDEO_UNDER_MIN_DIMENSIONS",e):t:(0,n.Z)((0,c.Z)(),e)})(e,t,i)).catch(e=>e)}(e,t,i):!r.xl.includes(t.type)||g?Promise.resolve((0,n.Z)("FILE_UNRECOGNIZED_TYPE",e)):t.size>20971520?Promise.resolve((0,n.Z)("IMAGE_OVER_MAX_FILE_SIZE",e)):(0,o.Z)(e)(t).then(t=>(function(e,t,i,r){let[n,o]=s.Z.enabled("pinQuality")||null!=r&&r.isStoryPin?[300,200]:[100,100],a=(null==r?void 0:r.minHeight)||n,d=(null==r?void 0:r.minWidth)||o;return i.height*i.width>89478485?(0,l.ZP)({errorId:"IMAGE_OVER_MAX_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t}):i.height<a||i.width<d?(0,l.ZP)({errorId:"IMAGE_UNDER_MIN_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:t,options:r}):i})(e,p,t,i)).catch(e=>e)}},77891:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(123463);function n({i18n:e,files:t,options:i,ideaPinRenamingEnabled:n}){return Promise.all(t.map(t=>(0,r.Z)({i18n:e,file:t,options:i,ideaPinRenamingEnabled:n})))}},869899:(e,t,i)=>{"use strict";i.d(t,{r:()=>y,K:()=>b});var r=i(667294),n=i(425288),o=i(773285),s=i(784590),l=i(19121),a=i(389643),d=i(339363),c=i(70061);let u=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,c.Z)(i)]=e[i]:t[(0,c.Z)(i)]=u(e[i]));return t},h=(e,t)=>{let i=[];for(let r in e)r!==t&&i.push({id:r,...u(e[r])});let r=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of r)n.set(e.id,e);return n},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},_=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:n,disableProfileChanger:o,headerVisible:s}=i,l=(0,r.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]),a=(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!n})},[t,e,n]),d=(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!o})},[t,e,o]),c=(0,r.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!s})},[t,e,s]);return{changeProfile:l,toggleORBACVisibility:a,toggleDisableProfileChanger:d,toggleHeaderVisibility:c}},m=e=>{let[t,i]=(0,r.useReducer)(_,p),n=g({dispatch:i,isEnabled:e,state:t}),{activeProfile:o,orbacVisibility:s}=t;(0,r.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(()=>{(0,d.Nh)("orbacVisibility",s)},[s]),(0,r.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",o)},[o]);let l=(0,r.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:h(e,t)})},[i]);return{state:t,actions:n,receiveProfiles:l}};var f=i(785893);let{Provider:x,useMaybeHook:b}=(0,n.Z)("RoleBasedAccessControlContext"),y=({children:e})=>{let t;let{checkExperiment:i}=(0,o.F)(),n=(0,l.Z)(),d=!!(n.isAuth&&n.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:u,receiveProfiles:h}=m(d),{activeProfile:p,headerVisible:_,profiles:g=[]}=c,b=g?Array.from(g.values()):[],y=(0,a.Z)(b),v=!!n.isAuth&&b.length>0&&y,P=n.isAuth?n.id:"",S=n.isAuth?n.username:"",{changeProfile:A,toggleORBACVisibility:w,toggleDisableProfileChanger:E,toggleHeaderVisibility:I}=u;(0,r.useEffect)(()=>{if(d){if("string"==typeof y){A(y);return}p||A(P)}},[y,P,d,A,p]),(0,r.useEffect)(()=>{d&&(v&&!_&&I(!0),!v&&_&&I(!1))},[I,v,d,_,g]);let{data:j}=(0,s.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),C=null==j?void 0:j.profiles;n&&n.isAuth&&c.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:S,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:p&&c.profiles&&(t=c.profiles.get(p)),(0,r.useEffect)(()=>{C&&h(C,P)},[h,C,P]);let T=c.profiles?Array.from(c.profiles.values()):[];return(0,f.jsx)(x,{value:{profiles:T,headerVisible:c.headerVisible,activeProfile:t,changeProfile:A,toggleORBACVisibility:w,toggleDisableProfileChanger:E,toggleHeaderVisibility:I},children:e})}},717615:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(773285),n=i(869899),o=i(389643);let s=()=>{let{checkExperiment:e}=(0,r.F)(),t=(0,n.K)(),{activeProfile:i}=t||{},s=e("web_m10n_business_access_orbac_www").anyEnabled,l=(0,o.Z)((null==t?void 0:t.profiles)||[]),{anyEnabled:a}=e("useorbacroutematcher_in_useorbacactingas");return s&&(!a||l)&&i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},76696:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(773285),n=i(780280),o=i(734765),s=i(869899),l=i(717615),a=i(65057);let d=function(){var e;let t=(0,r.F)().checkExperiment("web_m10n_orbac_in_create_flow").anyEnabled,{advertiser:i}=(0,n.B)(),{isSterlingSite:d}=(0,a.O9)((0,o.Z)()),c=(0,l.Z)(),u=(null===(e=(0,s.K)())||void 0===e?void 0:e.profiles)||[],h=u.find(e=>(null==e?void 0:e.id)===(null==i?void 0:i.owner_user_id));return t&&d&&h||c}},389643:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(616550),n=i(53987),o=i(773285),s=i(19121),l=i(350118);let a=e=>{var t,i,a,d;let c=(0,r.TH)(),u=(0,s.Z)(),h=(0,l.S6)(),{anyEnabled:p}=(0,o.F)().checkExperiment("web_m10n_business_access_orbac_www"),_=(0,r.$B)("/:username"),g=null==_?void 0:null===(t=_.params)||void 0===t?void 0:t.username,m=(0,r.$B)("/pin/:id"),f=null!=m&&null!==(i=m.params)&&void 0!==i&&!!i.id&&(null===(a=h(m.params.id))||void 0===a?void 0:null===(d=a.pinner)||void 0===d?void 0:d.id);if((0,n.ej)(c))return!1;if((0,n.RU)(c))return!0;if((0,n.mY)(c))return p;let x=e.concat(u.isAuth?{user:{username:u.username},id:u.id}:{}).find(e=>{let{user:t={},id:i}=e||{},{username:r}=t;return(!!r&&!!g||!!f&&!!i)&&(r===g||f===i)});return!!x&&x.id}},845772:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(19121),n=i(717615),o=i(231947);let s=()=>{let e=(0,r.Z)(),t=(0,n.Z)(),i=(0,o.lJ)(e,t);return i}},231947:(e,t,i)=>{"use strict";i.d(t,{D3:()=>d,DX:()=>l,KY:()=>c,Ms:()=>r,N1:()=>u,_P:()=>s,lJ:()=>o,nl:()=>n,q6:()=>a});let r=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},n=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),o=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",s=(e,t,i)=>{var r;return i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:null===(r=e.advertiser)||void 0===r?void 0:r.merchant_id},l=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,a=(e,t,i)=>{let r=e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t;return!!r},d=(e,t,i)=>{let r=a(e,t,i)||e&&e.isAuth&&t===e.id;return!!r},c=(e,t,i)=>{let r=t&&t.owner&&t.owner.id||"";return d(e,r,i)};function u(e,t,i){let r=t?t.id:"";return d(e,r,i)}},65057:(e,t,i)=>{"use strict";i.d(t,{uB:()=>x,re:()=>b,Xc:()=>P,NH:()=>v,Mz:()=>y,Mj:()=>O,LZ:()=>C,Lu:()=>j,es:()=>T,i5:()=>B,QR:()=>V,xV:()=>k,o_:()=>H,d5:()=>E,if:()=>M,xQ:()=>w,O9:()=>S,bq:()=>L,HH:()=>N,Ti:()=>z,cG:()=>A,Hw:()=>D,YA:()=>F,HC:()=>R,Y8:()=>Z,$n:()=>U});var r=i(983722),n=i(382891),o=i(709622);let s=({values:e,pin:t,productGroup:i,country:r,inFdbExp:s})=>{let{name:l,destination_url:a,budget:d,duration:c,inclusive_end_date:u,is_ongoing:h,advertiser_id:p,ages:_,interests:g,genders:m,ad_type:f,selected_ocpm_tag:x,isAutoTargeting:b,is_fdb:y}=e,v=Math.round(d*o.Az),P=(0,n.Z)({ages:_,interests:g,genders:m,country:r}),S={};f===o.Hl.WEB_CONVERSION&&(S.objective_type=o.Hl.WEB_CONVERSION,S.optimization_goal_metadata={conversion_tag_v3_goal_metadata:{conversion_tag_id:x.conversionTagId,conversion_event:x.conversionEvent}});let A={budget_in_micro_currency:v,campaign_name:l&&l.length<64?l:`${(l||"").substr(0,62)}…`,destination_url:t?a:null,duration:parseInt(c,10),auto_targeting_enabled:b,is_ongoing:h,start_now:!0,targeting_spec:P,advertiser_id:p,ads_client_type:"quick_promote",pin_id:t?t.id:null,product_group_id:i?i.id:null,...S,flexible_daily_budget_enabled:!!s&&y};return!h&&u&&u.trim().length>0&&(A.inclusive_end_date=u),A};var l=i(464232),a=i(28543),d=i(186656),c=i(251819),u=i(957161),h=i(966113),p=i(826067),_=i(170168),g=i(934723);let m=()=>["pin.description","pin.dominant_color","pin.grid_title","pin.id","pin.images[170x, 236x, 474x, orig]","pin.price_currency","pin.price_value","pin.rich_metadata()","pin.rich_summary()","pin.title"];var f=i(67347);let x=472,b=364,y={VIEW:"view",SUBMIT:"submit",SUBMIT_SUCCESS:"submit.success",SUBMIT_ERROR:"submit.error"},v={CLICK:"click",DISMISS:"dismiss",RENDER:"render"},P={BIZ_HUB_AD_CREDITS:"biz_hub_ad_credits",BIZ_HUB_EMPTY_STATE_ADS_WIDGET:"biz_hub_empty_state_ads_widget",BIZ_HUB_CREATE_AD:"biz_hub_create_ad",CLOSEUP_PARTNER_MODULE:"closeup_partner_module",NAVBAR_PROMOTE_PIN:"navbar_promote_pin",PIN_CREATE_SUCCESS:"pin_create_success",PIN_CREATE_SUCCESS_PINNER:"pin_create_success_pinner",PIN_REP:"pin_rep",PINANALYTICS:"pinanalytics",TRENDS_HOME_PAGE:"trends_home_page",TRENDS_DETAILS_PAGE:"trends_details_page",BIZ_HUB_TOP_CAROUSEL_SECTION:"biz_hub_top_carousel_section"},S=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e}),A=e=>{let{isAnalyticsSite:t=!1,isSterlingSite:i=!1,isWwwSite:r=!1,loggingType:n}=e,o="";t?o=".analytics":r?o=".www":i&&(o=".ads"),(0,f.nP)(`sterling.quick_promote.page${o}.${n}`,{sampleRate:1})},w=e=>e?o.vX.indexOf(e):-1,E=e=>{if(null!=e&&!(e<0)&&!(e>o.vX.length-1))return o.vX[e]},I=e=>e===o.Gl.BUSINESS_FORM?{element:11213,component:13375}:e===o.Gl.BILLING_FORM?{element:11214,component:13376}:{component:205,element:1223},j=(e,t)=>{let i=E(e),{component:r,element:n}=I(i);t({event_type:101,component:r,element:n,aux_data:{page:"GestaltQuickPromote"}})},C=(e,t)=>{let i=E(e),{component:r}=I(i);i===o.Gl.PIN_SELECTION_MODAL?t({event_type:6358,component:13288,aux_data:{page:"GestaltQuickPromote"}}):i===o.Gl.SUCCESS_MODAL&&t({event_type:6358,component:r,aux_data:{page:"GestaltQuickPromote"}})},T=(e,t)=>{let i=[...new Set(null==e?void 0:e.split("+"))];return t&&i.filter(e=>e in t)},D=(e,t)=>{if(!t||!e)return"";let i=`https://${h.KUo}`,r=`?campaign_id=${t.campaign_id}&objective_type=CLICKTHROUGH&is_quick_promote=true`;return`${i}/advertiser/${e}/billing/${r}`},O=(e,t)=>{if(!e)return"";let{ad_group_id:i=""}=e,r=(0,a.default)("adgroup",t,{id:i,showAllEntities:!0});return(0,g.Z)({advertiser:null,isAdsSite:!1,isAnalyticsSite:!1,isTrendsSite:!1,baseUrl:r,adsUrl:null,isQuickPromote:!0})},z=e=>({hasValidBusinessInfo:e.hasBusinessAddress||e.hasBusinessInfo,hasValidBillingInfo:e.hasValidBillingProfile||e.hasBillingInfo}),R=async e=>{let{pin:t,productGroup:i,country:r,onSaveSuccess:n,onSaveFailed:o,quickPromoteFormValues:l,advertiserId:a,inFdbExp:c}=e,u=t?`/ads/v4/advertisers/${a}/pins/${(null==t?void 0:t.id)||""}/quick_promote/`:`/ads/v4/advertisers/${a}/product_group/${(null==i?void 0:i.id)||""}/quick_promote/`,h=t?"pin":"product_group";try{let{resource_response:e}=await (0,d.Z)({url:u,method:"POST",data:s({values:l,pin:t,productGroup:i,country:r,inFdbExp:c})});e.data&&n(e.data)}catch(i){let{httpStatus:e,message_detail:t}=i;o(t?{area:401===e?h:"modal",message:t}:{area:"modal"})}},k=e=>{let{hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:r,hasBusinessInfo:n,serverErrorArea:s,stepIndex:l,isQuickPromotePage:a=!1}=e,{hasValidBusinessInfo:d,hasValidBillingInfo:c}=z({hasValidBillingProfile:t,hasBusinessAddress:i,hasBillingInfo:r,hasBusinessInfo:n}),u=[void 0,null].includes(l)?0:l+1,h=E(l);return h!==o.hf||(s?u="modal"===s?w(o.Gl.ERROR_MODAL):l:d&&c?u=w(o.Gl.SUCCESS_MODAL):d?u=w(o.Gl.BILLING_FORM):a||(u=w(o.Gl.BUSINESS_FORM))),u>o.vX.length-1?void 0:u},L=e=>{let t=o.Pq.WIDE;return e<870?t=o.Pq.NARROW:e>=870&&e<=1275&&(t=o.Pq.MEDIUM),t},N=(e,t,i)=>{var n,o;let{crossSite:s}=(0,p.mB)(e.search),l=null!==(n=null===(o=(0,r.Z)())||void 0===o?void 0:o.experimentsClient.checkExperiment("advertiser_growth_close_modal_window_without_history").anyEnabled)&&void 0!==n&&n;if(l&&t.length<=1){window.close();return}if(window){let e=i.find(e=>e&&e.location&&e.location.pathname.includes("pin-builder"));[...Array(e?3:1)].forEach(()=>s?window.history.back():t.goBack())}else t.goBack()},B=e=>{switch(e){case 4:return _.YD;case 3:return h.KUo;case 0:return _.Vi;default:return null}},Z=(e,t,i)=>{u.Z.setItem(l.hM,{...u.Z.getItem(l.hM),[`${t}.${e}`]:{pin:i.pin,dailyBudget:i.dailyBudget,destinationUrl:i.destinationUrl,duration:i.duration,locale:i.locale,name:i.name,interests:i.interests,ages:i.ages,genders:i.genders,adType:i.adType}})},M=(e,t)=>{if(!e||!t)return null;{let i=`${t}.${e}`,r=u.Z.getItem(l.hM);if(null===r)return null;let n=r[i];return(0,c.Z)(n)?null:n}},F=(e,t)=>{if(e&&t){let i=`${t}.${e}`,r=u.Z.getItem(l.hM);null!==r&&(delete r[i],0===Object.keys(r).length?u.Z.removeItem(l.hM):u.Z.setItem(l.hM,r))}};function U(e,t){let i=[...e],r=i.indexOf(t);return r>-1?i.splice(r,1):i.push(t),i}async function H(e,t,i){let r=e.filter(e=>e.filter_v2),n=await Promise.all(r.map(async e=>{try{(0,f.nP)("client.partner.shoppingAds.getProductsForCatalog.success",{sampleRate:1});let t=await (0,d.Z)({url:`/v3/catalogs/product_groups/products/${e.merchant_id}/${e.feed_profile_id}/`,enabledRouteRefresh:!0,data:{filters:JSON.stringify(e.filter_v2)},field_sets:m()});return{productGroup:e,pins:t.resource_response.data||[]}}catch(e){return(0,f.nP)("client.partner.shoppingAds.getProductsForCatalog.error",{sampleRate:1}),[]}})),o=n.filter(e=>e.productGroup&&Array.isArray(e.pins)&&e.pins.length>0),s=o.map(e=>({productPin:Array.isArray(e.pins)?e.pins[0]:[],productGroup:Array.isArray(e)?null:e.productGroup}));i(t(s))}async function V(e,t,i,r){if(!t)return;let n=await Promise.all(t.map(async t=>{try{let i=await (0,d.Z)({url:`/ads/v4/advertisers/${e}/product_groups/catalogs/`,enabledRouteRefresh:!0,data:{feed_profile_id:t.id}}),r=i.resource_response.data||[],n=r.filter(e=>e.product_count&&e.product_count>0);return{feed:t,productGroups:n}}catch(e){return[]}}));r(i(n))}},438112:(e,t,i)=>{"use strict";i.d(t,{L0:()=>c,M5:()=>u,Ui:()=>d,aI:()=>a});var r=i(800751);let n=Object.freeze({ACF_RELEASE_ALPHA:"aid_exp_acf_alpha",ACF_RELEASE_BETA:"aid_exp_acf_beta",ACF_RELEASE_GA:"aid_exp_acf_ga"}),o=Object.freeze({ALPHA:"ALPHA",BETA:"BETA",GA:"GA"}),s=[o.ALPHA,o.BETA,o.GA],l=(e,t)=>{let i={[o.ALPHA]:n.ACF_RELEASE_ALPHA,[o.BETA]:n.ACF_RELEASE_BETA,[o.GA]:n.ACF_RELEASE_GA},r=i[e],s=r?t.checkExperiment(r):void 0;return(null==s?void 0:s.group)==="enabled"},a=e=>s.some(t=>l(t,e)),d=e=>{let t=e.checkExperiment("aid_exp_acf_default_budgets_objv4");return"enabled"===t.group||"employees"===t.group},c=e=>{let t=e.checkExperiment("advertiser_growth_acf_redesign");return"enabled"===t.group||"employees"===t.group},u=(e,t,i)=>t===r.$o.APPROVED&&!!i&&e.checkExperiment("adv_growth_acf_shopping").anyEnabled},680241:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(883119),n=i(968121),o=i(898781),s=i(966113),l=i(785893);let a=({pinDraftId:e,onChange:t,pinIsAdsOnly:i})=>{let a=(0,o.ZP)(),d=`${e}--ads-only-pin-switch`;return(0,l.jsxs)(r.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,l.jsx)(r.rs,{id:d,name:"is-ads-only-toggle",onChange:t,switched:i}),(0,l.jsxs)(r.xu,{alignItems:"center",direction:"row",display:"flex",paddingX:2,children:[(0,l.jsx)(r.__,{htmlFor:d,children:(0,l.jsx)(r.xv,{size:"200",children:a.bt("Ad-only Pin", "Ad-only Pin", "storyboard.editor.adsOnlyPinSwitch.adOnlyText", undefined, true)})}),(0,l.jsx)(r.xu,{marginStart:2,children:(0,l.jsx)(r.MG,{accessibilityLabel:a.bt("Click to find out more about ad-only Pins", "Click to learn more about Ad-only Pins", "adsOnlyPinSwitch.adOnlyHelpButton.accessibilityLabel.text", undefined, true),accessibilityPopoverLabel:a.bt("Expanded information about ad-only Pins", "Expanded information about Ad-only Pins", "adsOnlyPinSwitch.adOnlyHelpButton.accessibilityPopoverLabel.text", undefined, true),idealDirection:"up",link:{href:s.Dm$,text:a.bt("Learn more", "Learn more", "[m10n] createFlow.adForm.promotedPinRepDetails.adsOnlyPinHelperText.learnMoreCta", undefined, true)},text:a.bt("Ad-only Pins don’t distribute an organic Pin and can’t be saved by people who see them", "Ad-only Pins don’t distribute an organic Pin and can’t be saved by people who see them", "adsOnlyPinSwitch.adOnlyTooltip.text", undefined, true),zIndex:n.b7})})]})]})}},719286:(e,t,i)=>{"use strict";i.d(t,{$v:()=>g,eN:()=>m,gf:()=>s,i7:()=>_,in:()=>u,jz:()=>a,pD:()=>l,p_:()=>o,s5:()=>c,tz:()=>h,uE:()=>p,zY:()=>d});let r="iphone",n="android_mobile",o="ipad",s="android_tablet",l="web_mobile",a=["web",l,r,o,n,s],d=["android_mobile","android_tablet","iphone","ipad","web"],c=["android_mobile","android_tablet","iphone","ipad","web"],u=["android_mobile","iphone"],h=["android_mobile","android_tablet","iphone","ipad"],p=[r,n],_=[r,n],g=[r,n,o,s],m=[r,n]},522679:(e,t,i)=>{"use strict";i.d(t,{N:()=>h,t:()=>g});var r=i(667294),n=i(214494),o=i(78714),s=i(904431),l=i(924196),a=i(425288),d=i(773285),c=i(785893);let{Provider:u,useHook:h}=(0,a.Z)("LinkedAccount"),p=e=>{(0,o.Z)(e?`/?next=${encodeURIComponent(e)}`:"/")},_=e=>{s.Z.reportFacebookConversion(l.Z.FACEBOOK_ADVERTISER_ID,"CompleteRegistration",{content_name:"/business/convert"}),s.Z.reportPinterestConversion("track","lead",{lead_type:"Self-serve"}),s.Z.reportLinkedInConversion(l.Z.LINKEDIN_PARTNER_ID,l.Z.LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT),s.Z.reportGoogleConversion(l.Z.GOOGLE_ADWORDS_ID,l.Z.GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT,"/",e)};function g({children:e}){let[t,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)([]),{checkExperiment:l}=(0,d.F)(),a=l("ppm_p_gate").anyEnabled,h=(0,r.useCallback)(({businessName:e,thirdPartyApps:t,thirdPartyMarketingTrackingEnabled:r,nextUrl:o})=>(i(!0),n.Z.create("BusinessOwnershipResource",{business_name:e,third_party_apps:t}).callCreate({showError:!0}).then(()=>{r&&_(a),i(!1),p(o)}).catch(e=>(i(!1),Promise.reject({error:e})))),[i,a]),g=(0,r.useMemo)(()=>({createLinkedBusinessAccount:h,linkedBusinessCreationLoading:t,userAccounts:o,userAccountsRetrieved:s}),[h,t,s,o]);return(0,c.jsx)(u,{value:g,children:e})}},965900:(e,t,i)=>{"use strict";i.d(t,{g:()=>h,I:()=>u});var r=i(667294),n=i(425288),o=i(567450),s=i(41861);let l={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},a=(e=l,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:n,currentTime:o}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:a,promotedVideosAutoplaying:d,organicVideosAutoplaying:c}=l,u=(0,s.Z)(d),h=(0,s.Z)(c);return!n&&a?e:(n?u[r]={pinId:r,currentTime:o,paused:!1}:h[r]={pinId:r,currentTime:o,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:n?a:r,promotedVideosAutoplaying:u,organicVideosAutoplaying:h}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:i}=t,{pinId:r,isPromoted:n,currentTime:o}=i,{videosAutoplaying:l}=e,{promotedVideosAutoplaying:a,organicVideosAutoplaying:d}=l,c=(0,s.Z)(a),u=(0,s.Z)(d);return n?c[r]={...c[r],paused:!0,currentTime:o}:u[r]={...u[r],paused:!0,currentTime:o},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:c,organicVideosAutoplaying:u}}}if("SET_APP_FOCUS_STATE"===t.type)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type)return{...e,footerPlusButtonVisible:t.payload};return e};var d=i(785893);let{Provider:c,useHook:u}=(0,n.Z)("AppUI");function h({children:e}){let[t,i]=(0,r.useReducer)(a,l),n=(0,r.useCallback)(e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),s=(0,r.useCallback)(e=>i({type:"SET_APP_FOCUS_STATE",payload:e}),[]),u=(0,r.useCallback)(e=>i({type:"SET_CURRENT_VIDEO",payload:e}),[]),h=(0,r.useCallback)(e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),p=(0,r.useCallback)(e=>i({type:"SET_IS_AUTOPLAY",payload:e}),[]),_=(0,r.useCallback)(e=>i({type:"SET_VIEWPORT_SIZE",payload:e}),[]),g=(0,r.useCallback)(e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),m=(0,r.useMemo)(()=>({pauseAutoplay:n,setCurrentVideo:u,setFooterPlusButtonVisible:h,setIsAutoplay:p,setViewportSize:_,toggleTypeaheadOverlay:g,setAppFocusState:s,appUI:t}),[n,u,h,p,_,g,s,t]);return(0,r.useEffect)(()=>{o.Z.onSessionResume(()=>{s(!0)}).onSessionPause(()=>{s(!1)})},[s]),(0,d.jsx)(c,{value:m,children:e})}},333206:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var r=i(667294),n=i(702664),o=i(883119),s=i(27255),l=i(898781),a=i(19121),d=i(76696),c=i(231947),u=i(959472),h=i(109892),p=i(785893);function _(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends r.Component{constructor(...e){super(...e),_(this,"handleSubmit",e=>{let{advertiserId:t,createBoard:i,onBoardCreate:r,viewer:n,orbacActingAs:o}=this.props,s=(0,c.lJ)(n,o),{name:l,description:a,privacy:d,collab_board_email:u,collaborator_invites_enabled:h}=e,p={name:l,description:a,privacy:d,collab_board_email:u,collaborator_invites_enabled:h,...t?{advertiser_id:t}:{},...s?{orbac_subject_id:s}:Object.freeze({})};return i({boardCreateOptions:p}).then(e=>{r(e)})}),_(this,"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:this.props.suggestedBoardName||"",description:"",category:"other",owner:{username:(0,c.Ms)(this.props.viewer,this.props.orbacActingAs)},pin_count:0})}render(){let{advertiserId:e,isAdAccountOwner:t,onClose:i,privacy:r,useModalWithNoLayer:n,showSecretBoardCreateToggle:l}=this.props;return(0,p.jsx)(u.Z,{board:{...this.emptyBoardData,privacy:t?r:s.Z.BoardPrivacy.PROTECTED},currentUserIsOwner:!0,isAdAccount:!!e,isAdAccountOwner:t,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,onClose:i,onSubmit:this.handleSubmit,submitText:this.props.i18n.bt("Create", "Create", " - ", undefined, true),useModalWithNoLayer:n,showSecretBoardCreateToggle:l,title:(0,p.jsx)(o.xu,{paddingY:8,width:"100%",children:(0,p.jsx)(o.X6,{align:"center",size:"500",children:this.props.i18n.bt("Create board", "Create board", "BoardCreate.BoardCreate", undefined, true)})})})}}function m(e){let t=(0,h.Z)(),i=(0,l.ZP)(),r=(0,a.Z)(),o=(0,n.useSelector)(({advertiser:e})=>e?e.id:void 0),s=(0,d.Z)(),u=(0,c.lJ)(r,s),_=(0,n.useSelector)(({advertiser:e})=>!e||r.isAuth&&e.owner_user_id===r.id||!!u);return(0,p.jsx)(g,{...e,advertiserId:o,createBoard:t,dispatch:(0,n.useDispatch)(),isAdAccountOwner:_,viewer:r,i18n:i,orbacActingAs:s})}_(g,"defaultProps",{privacy:s.Z.BoardPrivacy.PUBLIC})},959472:(e,t,i)=>{"use strict";i.d(t,{Z:()=>V});var r=i(667294),n=i(883119),o=i(27255),s=i(121151),l=i(898781),a=i(349700),d=i(773285),c=i(780280),u=i(995228),h=i(66699),p=i(343341),_=i(50286),g=i(19121),m=i(134906),f=i(526760),x=i(607989),b=i(785893);let y=({label:e,labelId:t})=>t?(0,b.jsx)(n.__,{htmlFor:t,children:(0,b.jsx)(n.xv,{size:"100",children:e})}):(0,b.jsx)(n.xv,{size:"100",children:e});function v(e){let{children:t,label:i,labelId:o}=e;return(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(n.xu,{marginBottom:2,children:(0,b.jsx)(y,{label:i,labelId:o})}),t]})}function P({coverPin:e,handleShowBoardCoverEditModal:t}){let i=(0,l.ZP)(),[o,s]=(0,r.useState)(!1),{isRTL:a}=(0,c.B)();return(0,b.jsx)(v,{label:i.bt("Board cover", "Board cover", "BoardForm.BoardFormCoverButton", undefined, true),children:(0,b.jsx)(n.xu,{width:138,position:"relative",children:(0,b.jsx)(n.iP,{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),onTap:t,rounding:4,children:null!=e&&e.custom_cover?(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(n.zd,{height:138,rounding:4,width:138,children:(0,b.jsx)(n.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||138,naturalWidth:e.size&&e.size[0]||138,src:e.image_url})}),(0,b.jsx)(n.xu,{position:"absolute",left:a,right:!a,bottom:!0,padding:2,children:(0,b.jsx)(n.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:o?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,b.jsx)(n.JO,{accessibilityLabel:i.bt("Edit board cover", "Edit board cover", "BoardForm.BoardFormBoardCoverButton", undefined, true),icon:"edit",color:"default",size:16})})})]}):(0,b.jsx)(n.xu,{alignItems:"center",color:o?"darkWash":"secondary",display:"flex",height:138,justifyContent:"center",rounding:4,width:138,children:(0,b.jsx)(n.JO,{accessibilityLabel:i.bt("Add cover photo", "Add cover photo", "BoardForm.BoardFormCoverButton", undefined, true),color:"default",icon:"add",size:24})})})})})}function S({children:e,label:t,labelId:i,subtext:o}){return(0,b.jsx)(r.Fragment,{children:(0,b.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,b.jsx)(n.xu,{marginStart:2,children:(0,b.jsxs)(n.__,{htmlFor:i,children:[(0,b.jsx)(n.xv,{size:"300",weight:"bold",children:t}),o]})})]})})}function A({hasCollabBoardEmail:e,isCollaborative:t,onCheckboxChange:i}){let r=(0,l.ZP)();return t&&(0,b.jsx)(S,{label:r.bt("Email notifications", "Email notifications", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true),labelId:"emailNotificationsCheckbox",subtext:(0,b.jsx)(n.xv,{color:"subtle",size:"300",children:r.bt("Get an email when someone saves Pins to this board", "Get an email when someone saves Pins to this board", "BoardForm.BoardFormCollaboratorsEmailCheckbox", undefined, true)}),children:(0,b.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(n.xu,{marginEnd:1,children:(0,b.jsx)(n.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:i})})})})}var w=i(948618),E=i(960278);function I({board:e,onCollaboratorInviteClick:t}){var i;let r=(0,l.ZP)(),o=(0,E.Z)({boardId:e.id,ownerName:null!==(i=e.owner.full_name)&&void 0!==i?i:"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),s=o.slice(0,3).map(e=>e.name),d="";switch(o.length){case 3:d=(0,a.Wc)(`${r.bt("{{ first }}, {{ second }} and {{ last }}", "{{ first }}, {{ second }}, and {{ last }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars", undefined, true)}`,{first:`${s[0]}`,second:`${s[1]}`,last:`${s[2]}`});break;case 2:d=(0,a.Wc)(`${r.bt("{{ first }} and {{ second }}", "{{ first }} and {{ second }}", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars", undefined, true)}`,{first:`${s[0]}`,second:`${s[1]}`});break;default:d=s.join(", ")}let c=o.length>3?(0,a.Wc)(r.nbt(["Collaborators: {{ userNames }} and {{ leftCount }} more.", "Collaborators: {{ userNames }} and {{ leftCount }} more."], o.length - 3, "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree", true),{userNames:d,leftCount:`${o.length-3}`}):(0,a.Wc)(`${r.bt("Collaborators: {{ userNames }}.", "Collaborators: {{ userNames }}.", "CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree", undefined, true)}`,{userNames:d});return(0,b.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,b.jsx)(n.HE,{accessibilityLabel:c,collaborators:o.map(({name:e,src:t})=>({src:null!=t&&t.endsWith("/default_75.png")?void 0:t,name:e})),size:"md"}),(0,b.jsx)(n.hU,{accessibilityLabel:r.bt("Invite collaborators", "Invite collaborators", "BoardEdit.BoardCollaboratorsAndInviteSection", undefined, true),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:t,size:"lg"})]})}function j({board:e,onCollaboratorInviteClick:t}){let i=(0,l.ZP)(),r=(0,b.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,b.jsx)(n.xv,{size:"100",inline:!0,children:i.bt("Collaborators", "Collaborators", " - ", undefined, true)}),(0,b.jsx)(w.Z,{}),(0,b.jsx)(n.xv,{inline:!0,size:"100",weight:"bold",children:(0,b.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/group-boards?source=board_create",underline:"hover",children:i.bt("Learn more", "Learn more", " - ", undefined, true)})})]});return(0,b.jsx)(v,{label:r,labelId:"collaborators",children:(0,b.jsx)(I,{board:e,onCollaboratorInviteClick:t})})}function C({collaboratorInvitesEnabled:e,isCollaborative:t,onCheckboxChange:i}){let r=(0,l.ZP)();return t&&(0,b.jsx)(S,{label:r.bt("Let collaborators add people", "Let collaborators add people", "BoardForm.BoardFormCollaboratorsInviteToggle", undefined, true),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,b.jsx)(n.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:i})})}function T({description:e,descriptionValidatorErrors:t,onChange:i}){let r=(0,l.ZP)(),o="boardEditDescription";return(0,b.jsx)(v,{label:r.bt("Description", "Description", "BoardForm.BoardFormDescription", undefined, true),labelId:o,children:(0,b.jsx)(n.Kx,{errorMessage:t.join(", "),id:o,name:"description",onChange:i,placeholder:r.bt("What's your board about?", "What's your board about?", " - ", undefined, true),value:e})})}let D=({children:e})=>(0,b.jsx)(n.xu,{paddingX:8,role:"list",children:r.Children.map(e,(t,i)=>t&&(0,b.jsx)(n.xu,{role:"listitem",marginBottom:i===r.Children.count(e)-1?1:8,children:t},i))});function O({name:e,nameValidatorErrors:t,onChange:i,disabled:r}){let o=(0,l.ZP)();return(0,b.jsx)(v,{label:o.bt("Name", "Name", "BoardForm.BoardFormTitleInput", undefined, true),labelId:"boardEditName",children:(0,b.jsx)(n.nv,{disabled:r,errorMessage:t.join(", "),id:"boardEditName",name:"boardName",onChange:i,placeholder:o.bt("E.g. \"Places to go\" or \"Recipes to make\"", "Like \"Places to Go\" or \"Recipes to Make\"", " - ", undefined, true),size:"lg",value:e})})}let z=({board:e,collabBoardEmail:t,collaboratorInvitesEnabled:i,coverPin:r,currentUserIsOwner:o,description:s,descriptionValidatorErrors:a,handleBoardLeave:d,hideCollaboratorsSection:c,isCollaborative:u,showCoverEdit:h,name:p,nameValidatorErrors:_,handleShowBoardCoverEditModal:g,handleChangeName:m,handleChangeDescription:f,handleShowCollaboratorsModal:x,handleChangeCollabBoardEmail:y,handleChangeCollaboratorInvitesEnabled:v})=>{let S=(0,l.ZP)();return(0,b.jsxs)(D,{children:[h&&(0,b.jsx)(P,{coverPin:r,handleShowBoardCoverEditModal:g}),(0,b.jsx)(O,{disabled:!0,name:p,nameValidatorErrors:_,onChange:m}),(0,b.jsx)(T,{description:s,descriptionValidatorErrors:a,onChange:f}),o&&!!d&&!c&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:x}),u&&(0,b.jsx)(n.xu,{marginBottom:-7,children:(0,b.jsx)(n.xv,{size:"100",children:S.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,b.jsx)(A,{hasCollabBoardEmail:t,isCollaborative:u,onCheckboxChange:y}),(0,b.jsx)(C,{collaboratorInvitesEnabled:i,isCollaborative:u,onCheckboxChange:v})]})};function R({isProtectedToggler:e,isToggleDisable:t,onChange:i,onCheckboxChange:s,privacy:a}){let c=(0,l.ZP)(),u=(0,g.Z)(),{checkExperiment:h}=(0,d.F)(),p=u.isPrivateProfile&&h("web_hide_u16_board").anyEnabled;if(p)return(0,b.jsxs)(n.kC,{alignItems:"start",direction:"column",gap:2,children:[(0,b.jsx)(n.xv,{size:"100",children:c.bt("Private", "Private", "BoardForm.BoardFormSecretToggle.text", undefined, true)}),(0,b.jsx)(n.xv,{color:"subtle",size:"100",children:c.bt("This board will only be visible to you", "This board will only be visible to you", "BoardForm.BoardFormSecretToggle.subText", undefined, true)})]});if(!0===e)return(0,b.jsx)(S,{label:c.bt("Protected board (not listed on user's profile)", "Protected board (not listed on user's profile)", "BoardForm.BoardFormSecretToggle", undefined, true),labelId:"protected",children:(0,b.jsx)(n.xu,{paddingY:2,children:(0,b.jsx)(n.rs,{onChange:i,switched:a===o.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:t})})});if(a!==o.Z.BoardPrivacy.PROTECTED){let e=c.bt("Keep this board secret", "Keep this board secret", "BoardForm.BoardFormSecretToggle", undefined, true),i=(0,b.jsx)(r.Fragment,{children:(0,b.jsxs)(n.xv,{color:"subtle",size:"300",children:[c.bt("So only you and collaborators can see it.", "So only you and collaborators can see it.", "BoardForm.BoardFormSecretToggle", undefined, true)," ",(0,b.jsx)(n.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/article/change-board-privacy?source=secret_create",underline:"hover",children:c.bt("Learn more", "Learn more", "BoardForm.BoardFormSecretToggle", undefined, true)})]})});return(0,b.jsx)(S,{label:e,labelId:"secret",subtext:i,children:(0,b.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,b.jsx)(n.XZ,{checked:a===o.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:s,disabled:t})})})}return null}function k({allowHomefeedRecommendations:e,onCheckboxChange:t}){let i=(0,l.ZP)();return(0,b.jsx)(S,{label:i.bt("Personalisation", "Personalization", "BoardForm.BoardFormRecommendationToggle", undefined, true),labelId:"recommendation",subtext:(0,b.jsx)(n.xv,{color:"subtle",size:"300",children:i.bt("Show Pins inspired by this board in your home feed.", "Show Pins inspired by this board in your home feed.", "BoardForm.BoardFormRecommendationToggle", undefined, true)}),children:(0,b.jsx)(n.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:t})})}function L(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let N=(0,r.lazy)(()=>Promise.all([i.e(97270),i.e(75322)]).then(i.bind(i,659099))),B=(0,r.lazy)(()=>Promise.all([i.e(10966),i.e(741),i.e(49510),i.e(49426),i.e(29467)]).then(i.bind(i,357156))),Z=(e,t)=>(0,m.Gy)({max:e,maxErrorString:(0,h.Z)(t.bt("Please enter no more than {{ maxLength }} characters.", "Please enter no more than {{ maxLength }} characters.", "Validation error when a string is too long", undefined, true),{maxLength:e})}),M=e=>[Z(o.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],F=e=>[(0,m.aH)({message:e.bt("Don't forget to name your board!", "Don't forget to name your board!", " - ", undefined, true)}),Z(o.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],U=({condition:e,children:t})=>e?(0,b.jsx)(n.xu,{position:"absolute",zIndex:s.b7,children:t}):t;class H extends r.Component{constructor(e){super(e),L(this,"handleChangeName",({value:e})=>{let t=(0,m.FU)(F(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:t})}),L(this,"handleChangeDescription",({value:e})=>{let t=(0,m.FU)(M(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:t})}),L(this,"handleChangePrivacyToggle",({value:e})=>{let t="public";e&&(t=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==t&&this.setState({privacy:t})}),L(this,"handleEnableSecret",()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})}),L(this,"handleHideSecretConfirmation",()=>{this.setState({showSecretConfirmation:!1})}),L(this,"handleChangeRecommendationToggle",({value:e})=>{this.setState({allowHomefeedRecommendations:e})}),L(this,"handleChangeCollabBoardEmail",({value:e})=>{this.setState({collab_board_email:e})}),L(this,"handleChangeCollaboratorInvitesEnabled",({value:e})=>{this.setState({collaboratorInvitesEnabled:e})}),L(this,"handleCheckboxChange",e=>({event:t,checked:i})=>e({event:t,value:i})),L(this,"handleSubmit",e=>{let{onSubmit:t}=this.props,{collab_board_email:i,collaboratorInvitesEnabled:r,description:n,name:o,privacy:s,allowHomefeedRecommendations:l}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;let a=o.trim(),d=n.trim();this.setState({submitting:!0,submitError:""}),t({name:a,collab_board_email:i,collaborator_invites_enabled:r,description:d,privacy:s,allow_homefeed_recommendations:l}).then(()=>{this.setState({submitting:!1})}).catch(e=>{let t=this.props.i18n.bt("Something went wrong.", "Uh oh! Something went wrong.", " - ", undefined, true);if(e.message){let{message:i,message_detail:r}=e;t=r?`${i} ${r}`:i}else"string"==typeof e&&(t=e);this.setState({submitting:!1,submitError:t})})}),L(this,"handleShowBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!0})}),L(this,"handleHideBoardCoverEditModal",()=>{this.setState({showBoardCoverEdit:!1})}),L(this,"handleShowCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!0})}),L(this,"handleHideCollaboratorsModal",()=>{this.setState({showCollaboratorsModal:!1})}),L(this,"handleSaveBoardCoverEditModal",e=>{this.handleHideBoardCoverEditModal();let{onCropChange:t}=this.props;t&&t(e)});let{board:{collab_board_email:t,collaborator_invites_enabled:i,description:r,name:n,pin_count:o,privacy:s,allow_homefeed_recommendations:l}}=e;this.state={collab_board_email:t,description:r,name:n,pin_count:o,privacy:s,allowHomefeedRecommendations:l,collaboratorInvitesEnabled:i,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:n,previousDescription:r,previousPrivacy:s}}static getDerivedStateFromProps(e,t){let i={};return e.board.name&&e.board.name!==t.previousName&&(i.previousName=e.board.name,i.nameValidatorErrors=(0,m.FU)(F(e.i18n),e.board.name)),e.board.description&&e.board.description!==t.previousDescription&&(i.previousDescription=e.board.description,i.descriptionValidatorErrors=(0,m.FU)(M(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==t.previousPrivacy&&(i.previousPrivacy=e.board.privacy),i}getFormFooter(){let{submitText:e}=this.props,{submitError:t}=this.state;return(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(n.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,b.jsx)(n.xu,{children:(0,b.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",children:(0,b.jsx)(n.xu,{height:48,children:(0,b.jsx)(n.zx,{dataTestId:"board-form-submit-button",color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),t&&(0,b.jsx)(n.xu,{paddingX:1,"aria-live":"polite",tabIndex:"0",children:(0,b.jsx)(n.xv,{color:"error",children:t})})]})}submitDisabled(){let{descriptionValidatorErrors:e,name:t,nameValidatorErrors:i,submitting:r}=this.state;return!t||i.length>0||e.length>0||r}render(){let{board:e,board:{archived_by_me_at:t,cover_pin:i,id:o,is_collaborative:l},coverImageHeight:d,coverImageWidth:c,currentUserIsOwner:h,handleBoardLeave:p,hideCollaboratorsSection:_,isAdAccount:g,isAdAccountOwner:m,isDeletable:y,isDesktop:v,isEditable:S,isNameAndSecretView:w,isSoftDeletedBoardsEnabled:E,onClose:I,onDeleteButtonClick:L,requestContext:Z,title:M,useModalWithNoLayer:F,showSecretBoardCreateToggle:H}=this.props,{allowHomefeedRecommendations:V,collab_board_email:G,collaboratorInvitesEnabled:W,description:$,descriptionValidatorErrors:X,name:Y,nameValidatorErrors:q,pin_count:K,privacy:J,showBoardCoverEdit:Q,showCollaboratorsModal:ee,showSecretConfirmation:et}=this.state,ei=S&&K>0,er=e.is_ads_only,en=(0,b.jsxs)(D,{children:[ei&&(0,b.jsx)(P,{coverPin:i,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,b.jsx)(O,{disabled:er,name:Y,nameValidatorErrors:q,onChange:this.handleChangeName}),(0,b.jsx)(T,{description:$,descriptionValidatorErrors:X,onChange:this.handleChangeDescription}),h&&!!p&&!_&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,b.jsx)(n.xu,{marginBottom:-7,children:(0,b.jsx)(n.xv,{size:"100",children:this.props.i18n.bt("Settings", "Settings", "BoardForm.BoardForm", undefined, true)})}),(0,b.jsx)(R,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:J}),!t&&(0,b.jsx)(k,{allowHomefeedRecommendations:V,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,b.jsx)(A,{hasCollabBoardEmail:G,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,b.jsx)(C,{collaboratorInvitesEnabled:W,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),y&&(0,b.jsxs)(n.xu,{marginTop:-6,paddingY:4,children:[(0,b.jsx)(n.xv,{size:"100",children:this.props.i18n.bt("Action", "Action", "BoardForm.BoardForm.Action", undefined, true)}),(0,b.jsxs)(n.iP,{onTap:L,children:[(0,b.jsx)(n.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,b.jsx)(n.X6,{size:"400",children:this.props.i18n.bt("Delete board", "Delete board", "BoardForm.Delete", undefined, true)})}),E?(0,b.jsx)(n.xv,{size:"300",color:"subtle",children:(0,a.nk)(this.props.i18n.bt("You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted board. After that, it will be deleted permanently.", "You have {{ MAX_AGE_RECENTLY_DELETED_BOARD }} days to restore a deleted Board. After that, it will be permanently deleted.", "boardForm.delete.helperText", undefined, true),{MAX_AGE_RECENTLY_DELETED_BOARD:f.Xq})}):(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(n.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("Delete this board and all of its Pins forever.", "Delete this board and all its Pins forever.", "BoardForm.BoardForm.Delete.Label", undefined, true)}),(0,b.jsx)(n.xv,{size:"300",color:"subtle",children:this.props.i18n.bt("You can't undo this.", "You can't undo this!", "BoardForm.BoardForm.Delete.LabelTwo", undefined, true)})]})]})]})]});h?w&&(en=(0,b.jsxs)(D,{children:[(0,b.jsx)(O,{disabled:er,name:Y,nameValidatorErrors:q,onChange:this.handleChangeName}),!H&&(0,b.jsx)(R,{isProtectedToggler:!!g,isToggleDisable:!!g&&!m,onChange:this.handleChangePrivacyToggle,privacy:J,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):en=(0,b.jsxs)(D,{children:[!!p&&(0,b.jsx)(j,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,b.jsx)(A,{hasCollabBoardEmail:G,isCollaborative:l,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!t&&er&&(0,b.jsx)(k,{allowHomefeedRecommendations:V,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,b.jsx)(n.xv,{color:"subtle",size:"300",children:(0,a.nk)(this.props.i18n.bt("Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "Only the board’s owner ({{ boardOwner }}) can manage the rest of its features", "BoardForm.CollaboratorPermissionsCopy", undefined, true),{boardOwner:(0,b.jsx)(n.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});let eo=F?n.u_:s.ZP,es=this.props.i18n.bt("Change board cover", "Change board cover", "BoardForm.BoardCoverEdit.heading", undefined, true),el=(0,b.jsxs)(n.xu,{paddingY:8,position:"relative",children:[(0,b.jsx)(n.X6,{align:"center",size:"500",children:es}),(0,b.jsx)(n.xu,{position:"absolute",top:!0,left:Z.isRTL,right:!Z.isRTL,paddingY:8,paddingX:6,children:(0,b.jsx)(n.hU,{accessibilityLabel:this.props.i18n.bt("Cancel change board cover", "Cancel change board cover", "BoardForm.BoardCoverEdit.cancel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal,size:"md"})})]});return(0,b.jsxs)(r.Fragment,{children:[(0,b.jsx)(U,{condition:!!F,children:!Q&&!ee&&(0,b.jsx)(eo,{accessibilityModalLabel:this.props.i18n.bt("Board form", "Board form", "BoardForm.BoardForm", undefined, true),size:"sm",onDismiss:I,footer:this.getFormFooter(),heading:M,children:(0,b.jsx)(n.xu,{"data-test-id":"board-form-container",marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,b.jsxs)("form",{method:"post",onSubmit:this.handleSubmit,children:[!er&&en,er&&(0,b.jsx)(z,{board:e,collabBoardEmail:G,collaboratorInvitesEnabled:W,coverPin:i,currentUserIsOwner:h,description:$,descriptionValidatorErrors:X,handleBoardLeave:p,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal,handleChangeName:this.handleChangeName,handleChangeDescription:this.handleChangeDescription,handleShowCollaboratorsModal:this.handleShowCollaboratorsModal,handleChangeCollabBoardEmail:this.handleCheckboxChange(this.handleChangeCollabBoardEmail),handleChangeCollaboratorInvitesEnabled:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled),hideCollaboratorsSection:_,isCollaborative:l,showCoverEdit:ei,name:Y,nameValidatorErrors:q})]})})})}),Q&&v&&(0,b.jsx)(u.Z,{children:(0,b.jsx)(N,{boardId:o,boardName:Y,coverPinId:null==i?void 0:i.pin_id,frameHeight:d,frameWidth:c,heading:el,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),et&&(0,b.jsx)(x.Z,{confirmButtonLabel:this.props.i18n.bt("Make secret", "Make secret", "Setting the boards visibility to secret", undefined, true),heading:this.props.i18n.bt("Are you sure?", "Are you sure?", "Warning label asking users to be sure of their action", undefined, true),message:this.props.i18n.bt("If you make this board secret, some active ads will stop running", "If you make this board secret, some active ads will stop running", "Explicitly warning users of the board visibility action they are doing", undefined, true),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),ee&&(0,b.jsx)(u.Z,{children:(0,b.jsx)(B,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})})]})}}function V(e){let t=(0,l.ZP)(),i=(0,_.ZP)(),r=(0,g.Z)(),{checkExperiment:n}=(0,d.F)(),o="control"!==n("curation_board_holdout_h1").group,s=!!r.isPrivateProfile&&n("web_hide_u16_board").anyEnabled&&!n("web_hide_u16_group_board_v2").anyEnabled;return(0,b.jsx)(H,{...e,hideCollaboratorsSection:s,isDesktop:"desktop"===i,i18n:t,isSoftDeletedBoardsEnabled:o,requestContext:(0,c.B)(),toastManagerContext:(0,p.F9)()})}L(H,"defaultProps",{isNameAndSecretView:!1})},312918:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var r=i(667294),n=i(883119),o=i(987765),s=i(356997),l=i(694379),a=i(898781),d=i(349700),c=i(773285),u=i(985913),h=i(883561),p=i(954931),_=i(215292),g=i(202870),m=i(777906),f=i(785893);let x=function(e){let t=(0,a.ZP)(),{followerCount:i,fullName:x,hasVerifiedIdentity:b,imageUrl:y,isPromoted:v,isVerifiedMerchant:P,profileUrl:S,sponsorName:A,sponsorshipStatus:w,sponsorUsername:E="",verified:I,color:j="default",onAvatarClick:C,onNavigateClick:T,onNavigateSponsorClick:D,openNewTab:O,isLeadPin:z=!1}=e,R=(0,c.F)().checkExperiment("mweb_web_android_ios_backend_clbc_display_controls").anyEnabled,k=(0,u.Z)(t.bt("{{ fullName }} avatar link", "{{ fullName }} avatar link", "creatorCardProfile.avatar.accessibilityLabel", undefined, true),{fullName:null!=x?x:""}),L=(0,f.jsx)(_.q,{children:({active:e,focused:t,hovered:i,onBlur:r,onFocus:o,onMouseEnter:l,onMouseLeave:a})=>(0,f.jsx)(n.xu,{onBlur:r,onFocus:o,onMouseEnter:l,onMouseLeave:a,onMouseDown:()=>{C&&C()},children:(0,f.jsx)(n.zd,{rounding:"circle",wash:i||e||t,children:(0,f.jsx)(s.qE,{accessibilityLabel:k,name:null!=x?x:"",size:"md",src:null!=y?y:"",verified:I})})})}),N=(0,h.ZP)(x,70),B=(0,f.jsxs)(r.Fragment,{children:[v&&(0,f.jsx)(o.Z,{size:"200",lineClamp:1,weight:"bold",children:t.bt("Promoted by", "Promoted by", "indicating the username of the person who promoted the pin", undefined, true)}),(0,f.jsx)(n.xu,{"data-test-id":"creator-profile-name",children:(0,f.jsx)(n.xu,{maxWidth:270,children:(0,f.jsx)(n.xv,{color:j,size:"200",weight:z?"normal":"bold",children:b||P?(0,f.jsx)(n.xu,{"data-test-id":"verified-name",children:(0,f.jsx)(m.Z,{badgeSize:"xs",badgeSpacing:2,fullName:N,identityIsVerified:b,isVerifiedMerchant:P})}):x})})})]}),Z=E&&A||g.j.includes(w)&&R,M=`/${null!=E?E:""}/`;return(0,f.jsxs)(n.xu,{alignItems:"center",display:"flex",marginEnd:-1,marginStart:-1,dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"creator-card-profile",children:[(0,f.jsx)(n.xu,{"data-test-id":"creator-avatar",flex:"none",paddingX:1,children:S?(0,f.jsx)(n.Tg,{dataTestId:"creator-avatar-link",rel:(0,p.Z)(S)?"none":"nofollow",target:O?"blank":null,onTap:T,href:S,children:L}):L}),(0,f.jsxs)(n.xu,{children:[(0,f.jsx)(n.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingX:1,children:S?(0,f.jsx)(n.rU,{dataTestId:"creator-profile-link",underline:"none",href:S,onClick:T,rel:(0,p.Z)(S)?"none":"nofollow",target:O?"blank":null,children:B}):B}),Z?(0,f.jsx)(n.xu,{"data-test-id":"sponsor-title",display:"flex",paddingX:1,children:(0,f.jsx)(g.Z,{href:M,isPromoted:v,sponsorName:A,sponsorUsername:E,sponsorshipStatus:w,onNavigateSponsorClick:D})}):!!i&&(0,f.jsx)(n.xu,{"data-test-id":"follower-count",display:"flex",paddingX:1,children:(0,f.jsx)(n.xv,{color:j,size:"200",children:(0,d.nk)(t.nbt(["{{ followerCount }} follower", "{{ followerCount }} followers"], i, "closeup.creator.followerCount", true),{followerCount:(0,f.jsx)(l.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:i},i)})})})]})]})}},857752:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(240684),n=i(194249),o=i(785893);let s=(0,r.ZP)({resolved:{},chunkName:()=>"EditorWithMentionsInternal",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(72586),i.e(46888),i.e(93179),i.e(35978)]).then(i.bind(i,194270)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>194270});function l(e){return(0,o.jsx)(s,{...e,fallback:(0,o.jsx)(n.Z,{})})}},194249:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(898781),o=i(785893);function s(){let e=(0,n.ZP)();return(0,o.jsx)(r.kC,{alignItems:"center",justifyContent:"center",children:(0,o.jsx)(r.$j,{accessibilityLabel:e.bt("Loading editor", "Loading editor", "EditorWithMentionsFallback.loading", undefined, true),show:!0})})}},634449:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(667294),n=i(676553);function o({children:e}){let t=(0,r.useContext)(n.Z);return e(t)}},676553:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(667294);let n=(0,r.createContext)([null,()=>{}])},495794:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var r=i(667294),n=i(883119),o=i(407043),s=i(316271),l=i(121151),a=i(898781),d=i(349700),c=i(780280),u=i(785893);let h={backgroundColor:"transparent",border:0,borderRadius:"8px",bottom:0,cursor:"pointer",height:"100%",left:0,padding:0,position:"relative",right:0,top:0,width:"100%"};function p({activeColor:e="#a3081a",delay:t=0,disabledTimer:i=!1,duration:o,height:l,hoverColor:a="#ad081b",onClick:d,text:c}){let[p,_]=(0,r.useState)(0),[g,m]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),b=(0,r.useCallback)(()=>m(!1),[]),y=(0,r.useCallback)(()=>m(!0),[]),v=(0,r.useCallback)(()=>x(!0),[]),P=(0,r.useCallback)(()=>x(!1),[]),S=(0,r.useRef)(null),A=(0,r.useRef)(null),w=(0,r.useCallback)(()=>{clearTimeout(S.current),clearTimeout(A.current),S.current=null,A.current=null}),E=(0,r.useCallback)(()=>{w(),d(),x(!1),_(0)},[d]);return(0,r.useEffect)(()=>{i||(A.current=setTimeout(()=>_(100),t),S.current=setTimeout(E,t+o))},[i]),(0,r.useEffect)(()=>w,[]),(0,u.jsx)(n.xu,{color:"primary","data-test-id":"timed-button",height:l,minWidth:100,onBlur:P,onFocus:v,onMouseEnter:y,onMouseLeave:b,overflow:"hidden",position:"relative",rounding:5,children:(0,u.jsxs)("button",{style:h,onClick:E,children:[(0,u.jsx)(n.xu,{color:"selected",dangerouslySetInlineStyle:{__style:{backgroundColor:i?"transparent":e,borderRadius:"8px 0px 0px 8px",transition:i?void 0:(0,s.Z)({duration:o,property:"width",timingFunction:"linear"})}},"data-test-id":"timed-button-progress-bar",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,width:`${p}%`}),(0,u.jsx)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:f||g?a:void 0}},display:"flex",justifyContent:"center",height:"100%",position:"relative",rounding:2,children:(0,u.jsx)(n.xu,{paddingX:2,children:(0,u.jsx)(n.xv,{color:"inverse",overflow:"normal",weight:"bold",children:c})})})]})})}let _={delay:700,duration:600,property:"opacity",timingFunction:"easeInOut"},g={delay:800,duration:600,property:"opacity",timingFunction:"easeInOut"},m={property:"opacity",duration:500,timingFunction:"easeIn",delay:3300};function f({autoAdvance:e=!0,completionButtonText:t,containsHlsVideoComponent:i,isDismissable:h=!0,onComplete:f,onDismiss:x,steps:b}){let{logContextEvent:y}=(0,o.v)(),v=(0,a.ZP)(),[P,S]=(0,r.useState)(0),[A,w]=(0,r.useState)(0),[E,I]=(0,r.useState)(!1),{isRTL:j}=(0,c.B)(),C=(0,r.useCallback)(()=>{I(!0)},[]),T=()=>{y({event_type:101,component:13473,element:11556,aux_data:{education_active_step_id:b[P]&&b[P].id}}),f()},D=()=>{y({event_type:101,component:13473,element:11557,aux_data:{education_active_step_id:b[P]&&b[P].id}}),x()},O=(0,r.useCallback)(()=>{P<b.length-1?(y({event_type:101,component:13472,element:11559}),S(P+1),I(!1)):T()},[y,b,P,T]);return(0,r.useEffect)(()=>{E&&w(1)},[P,E]),(0,u.jsx)(l.ZP,{accessibilityModalLabel:v.bt("In-product education modal", "In-product education modal", "EducationModal.accessibilityModalLabel", undefined, true),allowMediaPlay:i,heading:(0,u.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:{opacity:A,transition:(0,s.Z)(_)}},height:474,width:"100%",children:[(0,r.cloneElement)(b[P].element,{onStart:C}),(0,u.jsx)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:A,transition:e?(0,s.Z)(m):void 0}},display:"flex",left:!0,marginBottom:5,padding:2,position:"absolute",right:!0,children:(0,u.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:[b.length>1&&(0,u.jsx)(n.xv,{color:"subtle",size:"200",weight:"bold",children:(0,d.nk)(v.bt("{{ index }} of {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in guide screen (e.g. 1 of 3)", undefined, true),{index:P+1,totalSteps:b.length})}),(0,u.jsx)(n.xu,{bottom:!0,marginEnd:5,position:"absolute",right:!j,left:j,children:(0,u.jsx)(p,{disabledTimer:!e||P===b.length-1||!E,delay:0===P?3300:void 0,duration:9e3,height:36,onClick:O,text:P<b.length-1?v.bt("Next", "Next", "Button text to go to next step in education", undefined, true):t||v.bt("Take tour", "Take Tour", "Button text to start tour", undefined, true)})})]})}),h&&(0,u.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{opacity:A,transition:(0,s.Z)(g)}},position:"absolute",marginEnd:4,marginTop:4,right:!j,left:j,top:!0,children:(0,u.jsx)(n.hU,{accessibilityLabel:v.bt("Cancel", "Cancel", "Icon Button text to Cancel", undefined, true),icon:"cancel",onClick:D,iconColor:"gray",size:"md"})})]}),onDismiss:D,role:"alertdialog",size:"lg"})}},111284:(e,t,i)=>{"use strict";i.d(t,{Z:()=>P});var r=i(667294),n=i(883119),o=i(464657),s=i(792182),l=i(407043),a=i(766935),d=i(898781),c=i(349700),u=i(755742),h=i(829407);function p(e){return{type:"UPDATE_STATUS",payload:{status:e}}}var _=i(785893);function g({anchor:e,children:t,footer:i,onDismiss:r,size:o="lg",idealDirection:s}){let l=(0,d.ZP)();return(0,_.jsx)(n.J2,{anchor:e,onDismiss:()=>{},positionRelativeToAnchor:!1,size:o,idealDirection:s,children:(0,_.jsxs)(n.xu,{direction:"column",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,_.jsx)(n.xu,{position:"absolute",right:!0,top:!0,margin:4,children:(0,_.jsx)(n.hU,{accessibilityLabel:l.bt("End tour", "End tour", "Icon button to end the education tour", undefined, true),icon:"cancel",iconColor:"gray",onClick:r,size:"xs"})}),(0,_.jsx)(n.xu,{display:"flex",padding:2,marginTop:2,children:t}),(0,_.jsx)(n.xu,{children:i})]})})}let m={content:null,selector:null,index:-1,left:0,right:0,bottom:0,top:0,width:0,height:0,status:"INIT"};function f(e=m,t){switch(t.type){case"START_TOUR":{let{content:i,selector:r}=t.payload;return{...e,selector:r,content:i,status:"IN_PROGRESS",index:0}}case"NEXT_STEP":{let{content:i,index:r,selector:n}=t.payload;return{...e,content:i,selector:n,index:r}}case"UPDATE_RECT":return{...e,...t.payload};case"UPDATE_STATUS":{let{status:i}=t.payload;return{...e,status:i}}default:return e}}let x={__style:{color:"#000"}};function b({padding:e=16,bottomMargin:t=0,targetLeft:i,targetTop:r,targetWidth:o,targetHeight:l,showMask:a=!0}){let{width:d,height:c}=(0,s.Z)()||{width:0,height:0},u=r-e,h=i-e,p=l+2*e+t,g=o+2*e;return u<0?null:(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:x,position:"fixed",left:!0,top:!0,width:"100%",height:"100%",opacity:.7,children:(0,_.jsxs)("svg",{width:d,height:c,xmlns:"http://www.w3.org/2000/svg",children:[(0,_.jsxs)("defs",{children:[(0,_.jsxs)("mask",{id:"mask-main",children:[(0,_.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"white"}),(0,_.jsx)("rect",{x:h,y:u,width:g,height:p,fill:"black",rx:8,ry:8})]}),(0,_.jsxs)("clipPath",{id:"clip-path",children:[(0,_.jsx)("rect",{x:0,y:0,width:d,height:u}),(0,_.jsx)("rect",{x:0,y:u,width:h,height:p}),(0,_.jsx)("rect",{x:h+g,y:u,width:d-g-h,height:p}),(0,_.jsx)("rect",{x:0,y:u+p,width:d,height:c-p-u})]})]}),(0,_.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",mask:"url(#mask-main)"}),a&&(0,_.jsx)("rect",{x:0,y:0,width:d,height:c,fill:"currentColor",clipPath:"url(#clip-path)",pointerEvents:"auto"}),(0,_.jsx)("rect",{x:i,y:r,width:o,height:l,pointerEvents:"auto",fill:"transparent",display:"block"})]})})}function y({keyCode:e,handler:t}){(0,r.useEffect)(()=>{function i(i){i.keyCode===e&&t()}return window.addEventListener("keyup",i),()=>window.removeEventListener("keyup",i)},[e,t])}var v=i(902970);function P({onComplete:e,onDismiss:t,scrollOffset:i,steps:x,zIndex:P}){let{logContextEvent:S}=(0,l.v)(),A=(0,d.ZP)(),[w,E]=(0,o.Z)(),[I,j]=(0,r.useReducer)(f,m),[C,T]=(0,r.useState)(null),{width:D,height:O}=(0,s.Z)()||{width:0,height:0},z=e=>x[I.index]&&x[I.index].height?x[I.index].height:e,R=e=>{let t=e=>{let t=e.getBoundingClientRect();j(p("IN_PROGRESS")),T(e);let{bottom:i,left:r,right:n,top:o,width:s,height:l}=t,a=z(l);j({type:"UPDATE_RECT",payload:{bottom:i,left:r,right:n,top:o,width:s,height:a}})};if(e){let r=e.getBoundingClientRect();if((0,v.Z)({left:r.left,right:r.right,top:r.top,bottom:r.bottom,windowHeight:O,windowWidth:D,threshold:25}))t(e);else{let n=i||(z(r.height)>O?-25:-(O/2)+z(r.height)/2);j(p("SCROLLING")),function(e,{duration:t=660,offset:i,callback:r}){let n=window.pageYOffset,o=function(e,t=0){let i=e.getBoundingClientRect().top+window.pageYOffset;return i+t}(e,i),s=performance.now(),l=()=>{var i;let a=performance.now()-s,d=a>t?o:n+(o-n)*((i=a/t)<.5?2*i*i:-1+(4-2*i)*i);window.scroll(0,d),a>t?"function"==typeof r&&r(e):window.requestAnimationFrame(l)};l()}(e,{offset:n,callback:t})}}},k=()=>{S({event_type:101,component:13472,element:11556,aux_data:{education_active_guide_id:x[I.index]&&x[I.index].id}}),E(),e()},L=()=>{S({event_type:101,component:13472,element:11557,aux_data:{education_active_guide_id:x[I.index]&&x[I.index].id}}),E(),t()},N=(0,r.useCallback)(()=>{let{onNext:e}=x[I.index]||{};e&&e();let{content:t,selector:i}=x[I.index+1]||{};I.index<x.length-1?(S({event_type:101,component:13472,element:11559}),j({type:"NEXT_STEP",payload:{content:t,selector:i,index:I.index+1}})):k()},[S,x,I.index,k]);y({keyCode:u.Z.RIGHT,handler:N}),y({keyCode:u.Z.ESCAPE,handler:L}),(0,h.Z)(()=>{w();let{content:e,selector:t}=x[0]||{};j({type:"START_TOUR",payload:{content:e,selector:t}})}),(0,r.useLayoutEffect)(()=>{let e="string"==typeof I.selector?document.querySelector(I.selector):I.selector;R(e);let t=(0,a.Z)(()=>R(e),25);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[I.index,I.selector]);let{left:B,top:Z,height:M,width:F}=I,U=z(M);return(0,_.jsxs)(n.mh,{children:[(0,_.jsxs)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{zIndex:P||999}},left:!0,position:"absolute",right:!0,top:!0,children:[(0,_.jsx)(b,{padding:x[I.index]&&x[I.index].padding,bottomMargin:x[I.index]&&x[I.index].bottomMargin,targetLeft:B,targetTop:Z,targetWidth:F,targetHeight:U,showMask:"IN_PROGRESS"===I.status}),"IN_PROGRESS"===I.status&&(0,_.jsx)(g,{idealDirection:x[I.index]?x[I.index].idealDirection:void 0,anchor:C,size:x[I.index]&&x[I.index].size,footer:(0,_.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,_.jsx)(n.xu,{display:"flex",flex:"grow",paddingX:2,children:(0,_.jsx)(n.xv,{color:"subtle",size:"200",weight:"bold",children:(0,c.nk)(A.bt("{{ index }} of {{totalSteps}}", "{{ index }} of {{totalSteps}}", "Footer text indicating position in tour (e.g. 1 of 3)", undefined, true),{index:I.index+1,totalSteps:x.length})})}),(0,_.jsx)(n.xu,{"data-test-id":"guide-next-button",children:(0,_.jsx)(n.zx,{fullWidth:!0,color:"gray",onClick:N,text:I.index<x.length-1?A.bt("Next", "Next", "Button text to go to next guide", undefined, true):A.bt("Done", "Done", "Button text to end education tour", undefined, true)})})]}),onDismiss:L,children:I.content})]}),(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{left:B-20,top:Z-20}},height:U+40,position:"absolute",width:F+40})]})}},939853:(e,t,i)=>{"use strict";i.d(t,{I:()=>r});let r="completed-in-product-education"},902970:(e,t,i)=>{"use strict";function r({top:e,right:t,bottom:i,left:r,windowHeight:n,windowWidth:o,threshold:s=0}){return e>=0+s&&r>=0+s&&i<=n-s&&t<=o-s}i.d(t,{Z:()=>r})},43898:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(883119),n=i(785893);function o(e){let{htmlFor:t,errorMessage:i,errorMessageColor:o="error",icon:s}=e;return(0,n.jsx)(r.__,{htmlFor:t,children:(0,n.jsx)(r.xu,{marginTop:1,children:(0,n.jsxs)(r.kC,{direction:"row",gap:2,children:[s,(0,n.jsx)(r.xv,{color:o,size:"200",children:i})]})})})}},142103:(e,t,i)=>{"use strict";i.d(t,{Z:()=>E});var r=i(667294),n=i(702664),o=i(883119),s=i(464232),l=i(407043),a=i(11363),d=i(946984),c=i(918301),u=i(898781),h=i(349700),p=i(584595),_=i(957161),g=i(343341),m=i(829407),f=i(694379),x=i(785893);let b=({followText:e,followerCount:t,userFollowed:i})=>{let r=(0,u.ZP)();return(0,h.nk)(r.bt("{{ followCount }} {{ followText }}", "{{ followCount }} {{ followText }}", " - ", undefined, true),{followCount:(0,x.jsx)(o.xu,{"data-test-id":"followCount",paddingX:1,opacity:i?void 0:.8,children:(0,x.jsx)(o.xv,{color:i?"subtle":"inverse",children:(0,x.jsx)(f.Z,{value:t,shortform:!0,shortformMaximumFractionDigits:0})})},"followCount"),followText:(0,x.jsx)(o.xu,{"data-test-id":"followText",paddingX:1,children:(0,x.jsx)(o.xv,{color:i?"default":"inverse",weight:"bold",children:e})},"followText")})};var y=i(807532),v=i(461773),P=i(698330),S=i(201155);function A(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends r.PureComponent{constructor(...e){super(...e),A(this,"handleButtonClick",({event:e})=>{let{requireAuth:t,i18n:i,userFollowed:r}=this.props;if(t){e.stopPropagation(),t({loginModalHeader:(0,a.N4)({i18n:i,toFollow:!r})});return}let{shouldStopEventPropagation:n,loggingData:o}=this.props;n&&(e.preventDefault(),e.stopPropagation()),this.props.logContextEvent({event_type:101,component:13672,element:11951,object_id_str:this.props.id,view_type:this.props.viewType,view_parameter:this.props.viewParameter,clientTrackingParams:this.props.clientTrackingParams,...o||Object.freeze({})}),this.toggleFollowUnfollow()}),A(this,"handleClick",({event:e})=>{let{requireAuth:t}=this.props;if((t||this.props.shouldStopEventPropagation)&&e.stopPropagation(),t){t();return}this.toggleFollowUnfollow()}),A(this,"toggleFollowUnfollow",()=>{let{id:e,mostRecentPinId:t,loggingData:i,userFollowed:r,viewType:n,viewParameter:o,clientTrackingParams:s}=this.props;r?(this.props.logContextEvent({event_type:46,object_id_str:e,view_type:n,view_parameter:o,aux_data:{pin_id:t},clientTrackingParams:s,...i||Object.freeze({})}),this.unfollow()):(this.props.logContextEvent({event_type:45,object_id_str:e,view_type:n,view_parameter:o,aux_data:{pin_id:t},clientTrackingParams:s,...i||Object.freeze({})}),this.follow())}),A(this,"follow",()=>{let{follow:e,id:t,onUserFollow:i,mostRecentPinId:r,setMostRecentPinId:n,inviteCode:o,handleFollowSuccessFromInvite:s,loggingData:l,viewType:a,viewParameter:d}=this.props;e(t,r,()=>{o?(null==s||s(),this.props.logContextEvent({event_type:14858,object_id_str:t,view_type:a,view_parameter:d,...l||Object.freeze({})})):this.showConfirmation()},this.showError),i&&i(!0),n(null)}),A(this,"showToast",e=>{let{id:t,imageUrl:i,profileUrl:r,toastManagerContext:n,suppressToasts:o}=this.props;o||n.showOneToast(({hideToast:n})=>(0,x.jsx)(S.Z,{href:r,userId:t,imageUrl:i,handleHide:n,text:e}))}),A(this,"showConfirmation",()=>{let e=(0,x.jsx)(o.xv,{children:this.props.i18n.bt("Following! Their created Pins will show up in your home feed!", "Following! Their created Pins will show up in your home feed!", "userFollowButton.informationalToastText2", undefined, true)});this.showToast(e)}),A(this,"showError",e=>{let{fullName:t,userFollowed:i,showEmailVerificationReminderModal:r,loggingData:n,inviteCode:s,id:l,viewParameter:a,viewType:d}=this.props,c=i?this.props.i18n.bt("Error unfollowing {{ usernameComponent }}.", "Error unfollowing {{ usernameComponent }}.", "UserFollowButton.error.unfollowing", undefined, true):this.props.i18n.bt("Error following {{ usernameComponent }}.", "Error following {{ usernameComponent }}.", "UserFollowButton.error.following", undefined, true);if(e&&e.api_error_code===p.H9){r();return}let u=(0,x.jsx)(o.xv,{children:(0,h.nk)(c,{usernameComponent:(0,x.jsx)(o.xv,{weight:"bold",inline:!0,children:t})})});this.showToast(u),!i&&s&&this.props.logContextEvent({event_type:14859,object_id_str:l,view_type:d,view_parameter:a,...n||Object.freeze({})})}),A(this,"unfollow",()=>{let{id:e,onUserFollow:t,unfollow:i,mostRecentPinId:r,setMostRecentPinId:n}=this.props;i(e,r,()=>{},this.showError),t&&t(!1),n(null)})}renderButton(){let{button:e,followerCount:t,inline:i=!1,isOwnProfile:r,invertButtonColor:n,isSecondaryButton:s,size:l,showFollowerCount:a,userFollowed:d}=this.props,c=d?this.props.i18n.bt("Following", "Following", "User follow button", undefined, true):this.props.i18n.bt("Follow", "Follow", "User follow button", undefined, true);if(e)return e({followText:c,onClick:this.handleButtonClick,userFollowed:d});if(r)return(0,x.jsx)(o.zx,{fullWidth:!0,disabled:!0,text:this.props.i18n.bt("This is you", "This is you", "Button label to note that this is your Profile", undefined, true)});if(!a)return(0,x.jsx)(o.xu,{display:"inlineBlock","data-test-id":`user-${d?"unfollow":"follow"}-button`,children:(0,x.jsx)(o.zx,{accessibilityLabel:d?this.props.i18n.bt("Unfollow", "Unfollow", "userUnfollowButton.button.accessibilityLabel", undefined, true):this.props.i18n.bt("Follow", "Follow", "userFollowButton.button.accessibilityLabel", undefined, true),color:s||d?"gray":"red",selected:n?!d:!!d,fullWidth:i,onClick:this.handleButtonClick,size:null!=l?l:void 0,text:c})});{let e="number"==typeof t?(0,x.jsx)(b,{followerCount:t,userFollowed:d,followText:c}):c;return(0,x.jsx)(o.iP,{onTap:this.handleClick,children:(0,x.jsx)(o.xu,{color:d?"secondary":"primary",rounding:2,paddingX:3,paddingY:3,children:(0,x.jsx)(o.kC,{alignItems:"center",justifyContent:"start",children:e})})})}}render(){let{showPulsar:e,userFollowed:t}=this.props;return(0,x.jsxs)(o.xu,{position:"relative",display:"flex",children:[this.renderButton(),e&&(0,x.jsx)(o.iP,{onTap:this.handleClick,children:(0,x.jsx)(o.xu,{position:"absolute",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{marginLeft:-86,marginTop:-28}},children:(0,x.jsx)(o.o3,{paused:t||!1})})})]})}}function E(e){let{logContextEvent:t}=(0,l.v)(),i=(0,u.ZP)(),{id:r,setMostRecentPinId:o}=(0,y.f)(),a=(0,d.Z)(),h=(0,n.useDispatch)(),{showEmailVerificationReminderModal:p}=(0,c.y9)(),f=(0,P.mN)()(e.id),b=null==f?void 0:f.follower_count,S=f?f.explicitly_followed_by_me:e.userFollowed;return(0,m.Z)(()=>{let{id:t}=e,i=_.Z.getItem(s.AG)||"";i&&i===t&&(_.Z.removeItem(s.AG),h((0,v.ZN)(i,e.clientTrackingParams)))}),(0,x.jsx)(w,{...e,follow:(t,i,r,n)=>{h((0,v.yA)(t,i,e.clientTrackingParams,e.inviteCode)).then(r).catch(e=>{n(e)})},followerCount:b,i18n:i,logContextEvent:t,mostRecentPinId:r,requireAuth:a,setMostRecentPinId:o,showEmailVerificationReminderModal:p,toastManagerContext:(0,g.F9)(),unfollow:(t,i,r,n)=>{h((0,v.KF)(t,i,e.clientTrackingParams)).then(r,n)},userFollowed:S})}},833991:(e,t,i)=>{"use strict";i.d(t,{HW:()=>s,YW:()=>u,i3:()=>h,o2:()=>c});var r=i(667294),n=i(425288),o=i(785893);let s=660,l={educationId:null,paddingRight:0,zIndex:s};function a(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":let{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":let{paddingRight:r}=t.payload;return{...e,paddingRight:r};case"FOOTER_SET_Z_INDEX":let{zIndex:n}=t.payload;return{...e,zIndex:n};default:return e}}let{Provider:d,Consumer:c,useHook:u}=(0,n.Z)("footerContext");function h({children:e}){let[t,i]=(0,r.useReducer)(a,l),n=(0,r.useCallback)(e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),[]),s=(0,r.useCallback)(e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),[]),c=(0,r.useCallback)(e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}}),[]),u=(0,r.useMemo)(()=>({...t,setEducationId:s,setPaddingRight:n,setZIndex:c}),[t,s,n,c]);return(0,o.jsx)(d,{value:u,children:e})}},697335:(e,t,i)=>{"use strict";i.d(t,{c:()=>n,t:()=>o});var r=i(883521);function n({children:e}){let{height:t}=(0,r.J)();return e(t)}function o(){let{height:e}=(0,r.J)();return e}},883521:(e,t,i)=>{"use strict";i.d(t,{J:()=>d,Z:()=>p});var r=i(667294),n=i(425288),o=i(522679),s=i(977558),l=i(785893);let{Provider:a,useHook:d}=(0,n.Z)("Header"),c={childList:!0,attributes:!0,subtree:!0},u={height:s.cI,isInBiznuxFullscreen:!1,repinPinId:null,repinStartAnimation:!1,showAccountMenuFlyout:!1};function h(e,t){switch(t.type){case"showAccountMenuFlyout":return{...e,showAccountMenuFlyout:!0};case"hideAccountMenuFlyout":return{...e,showAccountMenuFlyout:!1};case"showRepinAnimation":return{...e,repinStartAnimation:!0,repinPinId:t.payload};case"hideRepinAnimation":return{...e,repinStartAnimation:!1,repinPinId:null};case"updateHeight":return{...e,height:t.payload};case"updateIsInBiznuxFullscreen":return{...e,isInBiznuxFullscreen:t.payload};default:throw Error("action type not supported")}}function p({children:e}){let t=(0,r.useRef)(null),[{height:i,isInBiznuxFullscreen:n,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_},g]=(0,r.useReducer)(h,u);(0,r.useEffect)(()=>{let e=document.getElementById(s.WZ);return e&&"undefined"!=typeof MutationObserver&&(t.current=new MutationObserver(()=>{e&&g({type:"updateHeight",payload:e.clientHeight})}),t.current.observe(e,c)),()=>{var e;null===(e=t.current)||void 0===e||e.disconnect()}});let m=(0,r.useMemo)(()=>({height:i,isInBiznuxFullscreen:n,repinPinId:d,repinStartAnimation:p,showAccountMenuFlyout:_,updateHeaderState:g}),[g,i,n,d,p,_]);return(0,l.jsx)(a,{value:m,children:(0,l.jsx)(o.t,{children:e})})}},977558:(e,t,i)=>{"use strict";i.d(t,{L1:()=>o,Rz:()=>a,WZ:()=>s,cI:()=>n,fe:()=>l,hu:()=>r});let r=64,n=80,o=22,s="HeaderContent",l=671,a={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},360400:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var r=i(667294),n=i(883119),o=i(112690),s=i(329900),l=i(252044),a=i(898781),d=i(785893);function c({user:e}){let t=(0,a.ZP)(),{full_name:i="",username:r,image_large_url:o}=e,s=i.length<=15?i:`${i.substring(0,15)}...`;return(0,d.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,d.jsx)(n.xu,{paddingX:1,children:(0,d.jsx)(n.HE,{role:"link",href:`/${encodeURIComponent(r)}/`,accessibilityLabel:t.bt("User's avatar", "User`s Avatar", "User`s Avatar", undefined, true),collaborators:[{name:i,src:null!=o?o:void 0}],size:"xs"})}),(0,d.jsx)(n.xu,{paddingX:1,children:(0,d.jsx)(n.xv,{size:"200",weight:"bold",children:(0,d.jsx)(n.rU,{href:`/${encodeURIComponent(r)}/`,rounding:2,tapStyle:"compress",children:(0,d.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{color:"#005062"}},children:s})})})})]})}function u({user:e}){let t=(0,a.ZP)();return(0,d.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,d.jsx)(n.xu,{marginTop:1,children:(0,d.jsx)(n.Tg,{href:"/",tapStyle:"none",accessibilityLabel:t.bt("Pinterest", "Pinterest", "InviteLandingPageV2.headerLogo.pinterestLogo", undefined, true),children:l.Z})}),e&&(0,d.jsx)(c,{user:e})]})}var h=i(698330);let p={container:{backgroundColor:"#FFE4C1"},header:{fontWeight:"normal"}};function _({titleText:e,bodyText:t,buttonText:i,deeplink:l}){let a=(0,o.Z)(),c=(0,h.Tt)();(0,r.useEffect)(()=>{a({event_type:13,view_type:3594})},[a]);let _=()=>{a({event_type:102,view_type:3594,element:12406})};return(0,d.jsx)(n.mh,{children:(0,d.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:p.container},position:"fixed",top:!0,bottom:!0,left:!0,right:!0,height:"100%",overflow:"auto","data-test-id":"v2-story-pin-invite-landing-page",role:"dialog","aria-label":e,children:(0,d.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:"100%",children:[(0,d.jsx)(n.xu,{paddingX:5,paddingY:9,children:(0,d.jsx)(u,{user:c})}),(0,d.jsxs)(n.kC,{alignItems:"center",direction:"column",children:[(0,d.jsx)(n.xu,{marginBottom:8,maxWidth:240,children:(0,d.jsx)(n.X6,{size:"500",accessibilityLevel:1,align:"center",color:"default",children:(0,d.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:p.header},children:e})})}),(0,d.jsx)(n.xu,{maxWidth:310,marginBottom:12,children:(0,d.jsx)(n.xv,{align:"center",color:"default",children:t})}),(0,d.jsx)(s.Z,{children:e=>(0,d.jsx)(n.xu,{marginBottom:12,children:(0,d.jsx)(n.zx,{size:"lg",color:"red",text:i,onClick:()=>{_(),e(l,"app-upsell-story")}})})})]})]})})})}},807532:(e,t,i)=>{"use strict";i.d(t,{C:()=>a,f:()=>l});var r=i(667294),n=i(425288),o=i(785893);let{Provider:s,useHook:l}=(0,n.Z)("MostRecentPin");function a({children:e}){let[t,i]=(0,r.useState)(),[n,l]=(0,r.useState)(),a=(0,r.useCallback)(e=>{let t=n?n.slice(0,10):[],i=[e].concat(t.filter(t=>t!==e));l(i)},[n]),d=(0,r.useMemo)(()=>({id:t,plpImageSignatures:n,setMostRecentPinId:i,setMostRecentPinImage:a}),[t,n,a]);return(0,o.jsx)(s,{value:d,children:e})}},379764:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(633988);let o=new r.H3([n.Z]),s=o},131555:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(784590);function n({children:e,fieldSetKey:t,pinId:i}){let{data:n,error:o,isLoaded:s}=(0,r.Z)({name:"PinResource",options:{id:i,field_set_key:t}});return e({pin:n,loading:!s,error:(o||{}).message})}},350118:(e,t,i)=>{"use strict";i.d(t,{AF:()=>l,H0:()=>a,S6:()=>d,_S:()=>c});var r=i(702664),n=i(425288),o=i(785893);let{Provider:s,useHook:l,useMaybeHook:a}=(0,n.Z)("Pins");function d(){let e=l();return t=>e[t]}function c({children:e}){let t=(0,r.useSelector)(({pins:e})=>e,r.shallowEqual);return(0,o.jsx)(s,{value:t,children:e})}},698330:(e,t,i)=>{"use strict";i.d(t,{Tt:()=>u,cm:()=>c,kW:()=>a,kY:()=>h,mN:()=>d});var r=i(702664),n=i(425288),o=i(19121),s=i(785893);let{Provider:l,useHook:a}=(0,n.Z)("Users");function d(){let e=a();return t=>e[t]}function c(){let e=a();return(t,i=!1)=>{let r=Object.keys(e).find(i=>e[i].username===t);if(r||!i)return e[null!=r?r:""]}}function u(){let{id:e}=(0,o.Z)(),t=a();return t[null!=e?e:""]}function h({children:e}){let t=(0,r.useSelector)(({users:e})=>e,r.shallowEqual);return(0,s.jsx)(l,{value:t,children:e})}},327096:(e,t,i)=>{"use strict";i.d(t,{j:()=>c,f:()=>d});var r=i(667294),n=i(425288);let o={currentPinDraftId:null,mostRecentTaggedObjectId:null,selectedStlItemId:null,stlCallout:{showCallout:!1},stlTaggedCoords:null,stlHoveredTaggedObjectId:null},s=(e=o,t)=>{switch(t.type){case"STL_SELECT":return{...e,selectedStlItemId:t.payload.selectedStlItemId};case"STL_SHEET":return{...e,currentPinDraftId:t.payload.currentPinDraftId};case"STL_TAGGED_PIN":return{...e,stlTaggedCoords:t.payload.stlTaggedCoords};case"STL_ERROR_STATE":return{...e,stlCallout:{showCallout:t.payload.stlCallout.showCallout,type:t.payload.stlCallout.type}};case"STL_MOST_RECENT_TAGGED_OBJECT_ID":return{...e,mostRecentTaggedObjectId:t.payload.mostRecentTaggedObjectId};case"SET_STL_HOVERED_TAGGED_OBJECT_ID":return{...e,stlHoveredTaggedObjectId:t.payload.stlHoveredTaggedObjectId};default:return e}};var l=i(785893);let{Provider:a,useHook:d}=(0,n.Z)("ShopTheLook");function c({children:e}){let[t,i]=(0,r.useReducer)(s,o),n=(0,r.useMemo)(()=>({shopTheLook:t,setStlSelection:e=>{i({type:"STL_SELECT",payload:{selectedStlItemId:e}})},setCurrentPinDraftId:e=>{i({type:"STL_SHEET",payload:{currentPinDraftId:e}})},setStlTaggedCoord:e=>{i({type:"STL_TAGGED_PIN",payload:{stlTaggedCoords:e}})},setStlCallout:({showCallout:e,type:t})=>{i({type:"STL_ERROR_STATE",payload:{stlCallout:{showCallout:e,type:t}}})},setMostRecentTaggedObjectId:e=>{i({type:"STL_MOST_RECENT_TAGGED_OBJECT_ID",payload:{mostRecentTaggedObjectId:e}})},setStlHoveredTaggedObjectId:e=>{i({type:"SET_STL_HOVERED_TAGGED_OBJECT_ID",payload:{stlHoveredTaggedObjectId:e}})}}),[t]);return(0,l.jsx)(a,{value:n,children:e})}},202870:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d,j:()=>a});var r=i(883119),n=i(898781),o=i(349700),s=i(773285),l=i(785893);let a=[0,2,3];function d({hasAffiliateProducts:e,href:t,isPromoted:i,onNavigateSponsorClick:d,sponsorName:c,sponsorUsername:u,sponsorshipStatus:h,textWeight:p="bold"}){let _;let g=(0,n.ZP)(),m=(0,s.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,f=(0,s.F)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,x=t||(u?`/${u}/`:null),b=x&&c?(0,l.jsx)(r.rU,{href:x,onClick:d,children:(0,l.jsx)(r.xv,{weight:p,size:"200",children:c})},c):void 0;return i?_=(0,o.nk)(g.bt("Promoted by {{ name }}", "Promoted by {{ name }}", "sponsorship.sponsorshipText.promotedByBrand", undefined, true),{name:b}):h||0===h?c&&!a.includes(h)?_=(0,o.nk)(g.bt("Paid partnership with {{ name }}", "Paid partnership with {{ name }}", "closeup.creator.sponsoredPinTitle", undefined, true),{name:b}):f&&2===h||(_=g.bt("Paid partnership", "Paid partnership", "closeup.creator.sponsoredPinTitle", undefined, true)):e&&(_=g.bt("Includes sponsored products", "Includes sponsored products", "sponsorship.sponsorshipText.affiliatedProducts", undefined, true)),(0,l.jsxs)(r.xv,{inline:!0,size:"200",lineClamp:2,children:[m&&!i&&"Ad • "||"",_]})}},777906:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(667294),n=i(883119),o=i(865607),s=i(785893);let l=function({badgeSize:e,badgeSpacing:t,fullName:i,identityIsVerified:l,isVerifiedMerchant:a,truncate:d=!1}){let c=i.split(" "),u=c.slice(0,c.length-1).join(" "),h=" ".concat(c[c.length-1]);return d?(0,s.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(n.xv,{lineClamp:1,weight:"bold",children:i}),(0,s.jsx)(n.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:l,isVerifiedMerchant:a})})]}):(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)("span",{children:u}),(0,s.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[h,"\xa0",(0,s.jsx)(n.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,s.jsx)(o.Z,{size:e,hasVerifiedIdentity:l,isVerifiedMerchant:a})})]})]})}},526760:(e,t,i)=>{"use strict";i.d(t,{FC:()=>l,FP:()=>o,M0:()=>n,Xq:()=>a,s0:()=>r,z9:()=>s});let r=44,n=236,o=157,s=320,l=213,a=7},607989:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(883119),n=i(121151),o=i(898781),s=i(785893);function l({cancelButtonLabel:e,confirmButtonLabel:t,heading:i,message:l,onCancel:a,onConfirm:d}){let c=(0,o.ZP)(),u=i||c.bt("Are you sure?", "Are you sure?", " - ", undefined, true),h=e||c.bt("Cancel", "Cancel", " - ", undefined, true);return(0,s.jsx)(n.ZP,{accessibilityModalLabel:u,footer:(0,s.jsxs)(r.xu,{marginEnd:-1,marginStart:-1,children:[(0,s.jsx)(r.xu,{"data-test-id":"cancel-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,onClick:a,size:"lg",text:h})}),(0,s.jsx)(r.xu,{"data-test-id":"confirm-button",padding:1,children:(0,s.jsx)(r.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:t})})]}),heading:u,onDismiss:a,role:"alertdialog",children:(0,s.jsx)(r.xu,{padding:4,children:(0,s.jsx)(r.xv,{children:l})})})}},800751:(e,t,i)=>{"use strict";i.d(t,{$o:()=>l,GW:()=>r,Jo:()=>o,Li:()=>y,MS:()=>S,Q8:()=>m,VX:()=>_,Zo:()=>d,aD:()=>c,b2:()=>h,e_:()=>b,g2:()=>p,it:()=>v,kY:()=>x,oM:()=>P,qN:()=>s,s4:()=>a,tK:()=>f,ym:()=>u,zQ:()=>g});let r="/business/hub/?show_vmp=true",n=["FR"],o=["US","GB","CA","AU","DE","FR"].concat(["ES","IT","AT","CH","NL","BR","MX"]).filter(e=>!n.includes(e)),s={PROCESSING:"PROCESSING",FAILED:"FAILED",COMPLETED:"COMPLETED",DISAPPROVED:"DISAPPROVED",UNDER_REVIEW:"UNDER_REVIEW"},l={APPROVED:"approved",PENDING:"pending",DISAPPROVED:"declined",APPEAL_PENDING:"appeal_pending"},a=Object.freeze({APPLIED:"APPLIED",ACCEPTED:"ACCEPTED",NON_COMPLIANT:"NON_COMPLIANT",SUSPENDED:"SUSPENDED",CANCELLED:"CANCELLED"}),d=Object.freeze({UNSTARTED:"workflow-status-unstarted",IN_PROGRESS:"workflow-status-in-progress",ACCEPTED:"check-circle",ATTENTION:"workflow-status-warning",REJECTED:"workflow-status-problem",RECOMMENDED:"info-circle"}),c=Object.freeze({UNSTARTED:"dark",IN_PROGRESS:"success",ACCEPTED:"success",ATTENTION:"warning",REJECTED:"error",RECOMMENDED:"subtle"}),u="Verified merchant program not yet available in this country",h=2e3,p={can_appeal:!0,is_appeal:!1,appeal_count:0,appeal_comment:"",shipping_policy_url:"",return_policy_url:"",review_status:2,review_reasons:[]},_=Object.freeze({ACCOUNT_AGE:"ACCOUNT_AGE",DOMAIN_AGE:"DOMAIN_AGE",PROFILE_IMAGE:"PROFILE_IMAGE",PROFILE_COVER_IMAGE:"PROFILE_COVER_IMAGE",BIO:"BIO",SHOP_TAB:"SHOP_TAB",PINNER_FEEDBACK:"PINNER_FEEDBACK"}),g=[_.ACCOUNT_AGE,_.DOMAIN_AGE,_.PROFILE_IMAGE,_.PROFILE_COVER_IMAGE,_.BIO,_.SHOP_TAB,_.PINNER_FEEDBACK],m=Object.freeze({PASS:"PASS",FAIL:"FAIL"}),f=30,x=6048e5,b="show_vmp",y="true",v=Object.freeze({ACTION_CARDS_BANNER:"ACTION_CARDS_BANNER",WELCOME_BANNER:"WELCOME_BANNER",CELEBRATION_BANNER:"CELEBRATION_BANNER"}),P=3,S=.5},814197:(e,t,i)=>{"use strict";i.d(t,{Cq:()=>c,Dk:()=>h,Fk:()=>n,fS:()=>d,km:()=>u,lI:()=>s,lJ:()=>o,mS:()=>a,qW:()=>l});var r=i(883119);let n=new r.Ry(1),o=3,s=new r.Ry(o),l=2,a=new r.Ry(l),d=3,c=4,u=new r.Ry(5),h=new r.Ry(100)},398061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l,e:()=>s});var r=i(883119),n=i(780280),o=i(785893);let s=new r.Ry(1);function l({children:e,isImagePinForUnauthOnTablet:t}){let{isAuthenticated:i}=(0,n.B)();return(0,o.jsxs)(r.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},zIndex:i?void 0:s,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,children:[(0,o.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}},633988:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(398061);let o=new r.H3([n.e]),s=o},456416:(e,t,i)=>{"use strict";i.d(t,{xH:()=>K,uC:()=>Y,sR:()=>q,DR:()=>X});var r=i(667294),n=i(702664),o=i(172045),s=i(883119),l=i(407043),a=i(186656),d=i(898781),c=i(391254),u=i(773285),h=i(780280),p=i(414327),_=i(784590),g=i(984206),m=i(19121),f=i(76696),x=i(231947),b=i(814197),y=i(785893);function v({boardPickerSuggestedBoards:e,index:t,item:i,pinId:n,saveSessionId:o,surfaceOriginViewParameter:a,useLegoLayout:d}){let{logContextEvent:c}=(0,l.v)();return(0,r.useEffect)(()=>{"shortlist"===i.category&&c({aux_data:{board_picker_surface_origin:a,board_picker_suggested_boards:e,pin_id:n,save_session_id:o},event_type:13,view_type:21,view_parameter:3988})},[c,i,o,a,e,n]),(0,y.jsx)(s.xu,{paddingX:d?4:3,paddingY:1,marginTop:t>0?2:1,children:(0,y.jsx)(s.xv,{size:d?"100":"200",children:i.title})})}var P=i(27255),S=i(486746);function A(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w extends r.Component{constructor(...e){super(...e),A(this,"state",{hovered:!1}),A(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),A(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),A(this,"handleTouch",()=>{let{board:e,onClick:t}=this.props;t(e)}),A(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),A(this,"tapAreaRef",(0,r.createRef)())}componentDidMount(){let{board:e,logContextEvent:t,pinId:i,saveSessionId:r,surfaceOriginViewParameter:n}=this.props;"boardless"===e.type&&t({aux_data:{board_picker_surface_origin:n,pin_id:i,save_session_id:r},event_type:13,view_parameter:3990,view_type:21})}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){let{hovered:e}=this.state,{accessibilityLabelText:t,board:i,buttonText:r,displayAlreadySavedMsg:n,i18n:o,isSectionOpen:l,shouldOpenSections:a,showSaveToProfile:d,showFlyoutSaveButton:c,useLegoLayout:u}=this.props,h=!!i.section_count&&i.section_count>0,{images:p,image_cover_url:_}=i||{},g=!(null!=_&&_.includes("custom"))&&p&&p["75x75"]&&p["75x75"][p["75x75"].length-1].url,m=g||_;return(0,y.jsx)(s.xu,{"data-test-id":h?"boardWithSection":"boardWithoutSection",children:(0,y.jsx)(s.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,y.jsxs)(s.xu,{alignItems:"center",color:e?"secondary":"default","data-test-id":`board-row-${i.name||""}`,display:"flex",height:u?64:52,marginStart:u?2:3,marginEnd:u?2:3,marginBottom:u?0:1,marginTop:u?0:1,padding:u?2:0,rounding:3,children:[(0,y.jsxs)(s.xu,{"aria-hidden":"true",flex:"none",height:u?48:36,marginBottom:u?0:1,marginStart:u?0:2,marginEnd:u?2:3,marginTop:u?0:1,overflow:"hidden",width:u?48:36,children:[d&&"boardless"===i.type&&(0,y.jsx)(s.zd,{rounding:2,width:48,height:48,children:(0,y.jsx)(s.xu,{color:e?"default":"secondary",display:"flex",height:"100%",width:"100%",children:(0,y.jsx)(s.xu,{padding:3,children:(0,y.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("Save to profile icon", "Save to profile icon", "BoardRow.TapArea.Icon", undefined, true),color:"default",icon:"history",size:24})})})}),m&&!a&&(0,y.jsx)(s.zd,{height:u?48:36,rounding:2,wash:!0,width:u?48:36,children:(0,y.jsx)(s.Ee,{src:m,alt:"",naturalHeight:u?48:36,naturalWidth:u?48:36,fit:"cover"})}),m&&a?(0,y.jsx)(s.zd,{rounding:2,wash:!0,width:u?48:36,height:u?48:36,children:(0,y.jsx)(s.Ee,{src:m,alt:"",naturalHeight:u?48:36,naturalWidth:u?48:36,fit:"cover"})}):(0,y.jsx)(s.zd,{height:u?48:36,width:u?48:36,rounding:2,children:(0,y.jsx)(s.xu,{color:a?"secondary":"transparent",width:"100%",height:"100%"})})]}),(0,y.jsxs)(s.xu,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:u?0:1,children:[(0,y.jsx)(s.xv,{lineClamp:1,weight:a||!a?"bold":"normal",children:i.name}),n&&(0,y.jsx)(s.xu,{marginTop:1,children:(0,y.jsx)(s.xv,{align:"start",color:"default",size:"100",children:o.bt("Saved here already", "Saved here already", "BoardFlyout.AlreadySaved.Message", undefined, true)})})]}),i&&(!e||e&&h&&!l)?(0,y.jsx)(s.xu,{children:(0,y.jsx)(S.Z,{board:i,showCollaborativeIcon:!!i.is_collaborative,showPrivateIcon:i.privacy===P.Z.BoardPrivacy.SECRET,showProtectedIcon:i.privacy===P.Z.BoardPrivacy.PROTECTED,showSectionsIcon:h&&a,useLegoLayout:u})}):null,e&&(0===i.section_count||!a)&&c&&(0,y.jsx)(s.xu,{marginEnd:u?0:2,flex:"none",children:(0,y.jsx)(s.zx,{accessibilityLabel:t||this.props.i18n.bt("Save button", "save button", "boardRow.saveButton", undefined, true),color:"red",onClick:this.handleButtonClick,text:r||this.props.i18n.bt("Save", "Save", "save button", undefined, true)})})]})})})}}A(w,"defaultProps",{shouldOpenSections:!0,showFlyoutSaveButton:!0});let E=e=>{let{logContextEvent:t}=(0,l.v)(),i=(0,d.ZP)();return(0,y.jsx)(w,{...e,i18n:i,logContextEvent:t})};var I=i(717615),j=i(24886);function C(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class T extends r.Component{constructor(...e){super(...e),C(this,"state",{hovered:!1}),C(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),C(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),C(this,"handleTouch",()=>{let{board:e,onClick:t,section:i}=this.props;t(i,e)}),C(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),C(this,"tapAreaRef",(0,r.createRef)())}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){var e,t,i,r,n,o;let{hovered:l}=this.state,{buttonText:a,section:d,showSectionSaveButton:c,useLegoLayout:u}=this.props;return(0,y.jsx)(s.iP,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,ref:this.tapAreaRef,children:(0,y.jsxs)(s.xu,{color:l?"secondary":"default","data-test-id":`section-row-${d.title||""}`,display:"flex",alignItems:"center",height:u?64:52,marginStart:u?2:0,marginEnd:u?2:0,padding:u?2:0,marginTop:u?0:1,rounding:3,dangerouslySetInlineStyle:{__style:u?{}:{marginLeft:53,marginRight:11}},children:[u&&!!(null!==(e=d.preview_pins)&&void 0!==e&&e.length)&&(0,y.jsx)(j.Z,{image_url:null!==(t=d.preview_pins[0].image_square_url)&&void 0!==t?t:"",naturalHeight:null!==(i=null===(r=d.preview_pins[0].image_square_size_pixels)||void 0===r?void 0:r.height)&&void 0!==i?i:1,naturalWidth:null!==(n=null===(o=d.preview_pins[0].image_square_size_pixels)||void 0===o?void 0:o.width)&&void 0!==n?n:1}),(0,y.jsx)(s.xu,{flex:"grow",paddingY:1,marginStart:u?0:4,children:(0,y.jsx)(s.xv,{lineClamp:1,weight:u?"bold":"normal",children:d.title})}),l&&c&&(0,y.jsx)(s.xu,{marginEnd:u?0:2,flex:"none",children:(0,y.jsx)(s.zx,{accessibilityLabel:"save button",color:"red",text:a||this.props.i18n.bt("Save", "Save", "save button", undefined, true),onClick:this.handleButtonClick})})]})})}}function D(e){let t=(0,d.ZP)();return(0,y.jsx)(T,{...e,i18n:t})}function O(e){let t=(0,d.ZP)(),{board:i,buttonText:r,onClick:n,onButtonClick:o,showSectionSaveButton:l,useLegoLayout:a}=e,c=(0,I.Z)(),u=(0,m.Z)(),h=(0,x.lJ)(u,c),p=(0,_.Z)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:h},noCache:!0}),g=p&&p.data||[];return(0,y.jsxs)(s.xu,{children:[!p.isLoaded&&(0,y.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,y.jsx)(s.$j,{accessibilityLabel:t.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),p.isLoaded&&(0,y.jsxs)(s.xu,{children:[a&&(0,y.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,y.jsx)(s.xv,{size:"100",children:t.bt("Section", "Section", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),g.map(e=>(0,y.jsx)(D,{board:i,buttonText:r,onButtonClick:o,onClick:n,section:e,showSectionSaveButton:l,useLegoLayout:a},e.id))]})]})}function z({onClick:e,title:t,showIcon:i}){let n=(0,d.ZP)(),[o,l]=(0,r.useState)(!1);return(0,y.jsx)(s.iP,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:()=>{e({title:t})},children:(0,y.jsxs)(s.xu,{color:o?"secondary":"default",display:"flex",alignItems:"center",height:i?64:52,marginStart:3,marginEnd:3,marginBottom:1,rounding:3,children:[(0,y.jsx)(s.xu,{flex:"none",marginBottom:1,marginStart:i?1:2,marginEnd:3,marginTop:1,overflow:"hidden",width:i?48:36,height:i?48:36,rounding:i?2:1,children:(0,y.jsx)(s.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,y.jsx)(s.JO,{icon:"add",color:"default",size:20,accessibilityLabel:n.bt("Create board icon", "Create board icon", "BoardSuggestionRow.AccessibilityLabel.Text", undefined, true)})})}),(0,y.jsx)(s.xu,{flex:"grow",paddingY:1,children:(0,y.jsx)(s.xv,{lineClamp:1,weight:"bold",children:t})}),o&&(0,y.jsx)(s.xu,{marginEnd:2,children:(0,y.jsx)(s.zx,{accessibilityLabel:"create button",color:"red",text:n.bt("Create", "Create", "create button to create a new board", undefined, true)})})]})})}function R(e){let t=(0,d.ZP)(),{suggestionsResource:i,onClick:n,pinBuilderSuggestions:o,inWebRepinFlowExp:l}=e,a=o||i&&i.data||[],c=(0,y.jsxs)(r.Fragment,{children:[l&&(0,y.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,y.jsx)(s.xv,{size:"100",children:t.bt("Suggestions", "Suggestions", "PinBetterSave.BoardFlyout.SectionPlaceholderText", undefined, true)})}),a.map((e,t)=>(0,y.jsx)(z,{title:e.title,onClick:n,showIcon:l},t))]});return(0,y.jsx)(r.Fragment,{children:a?c:(0,y.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,y.jsx)(s.$j,{accessibilityLabel:t.bt("loading board suggestions", "loading board suggestions", "accessibility text for loading spinner", undefined, true),show:!0})})})}function k({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){let n=(0,d.ZP)(),[o,l]=(0,r.useState)(!1);return(0,y.jsx)(s.xu,{"data-test-id":"create-board",height:"100%",display:"flex",children:(0,y.jsx)(s.iP,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onTap:t,rounding:2,children:(0,y.jsxs)(s.xu,{display:"flex",alignItems:"center",padding:i?4:2,color:o?"secondary":"default",width:"100%",height:"100%",children:[(0,y.jsx)(s.xu,{rounding:i?2:0,dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginStart:i?0:4,marginEnd:i?2:5,color:i?"secondary":"transparent",children:(0,y.jsx)(s.JO,{accessibilityLabel:"",size:i?20:28,icon:i?"add":"add-circle",color:i?"default":"error"})}),e?(0,y.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:n.bt("Create board", "Create board", " - ", undefined, true)}):(0,y.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:n.bt("Create section", "Create section", " - ", undefined, true)})]})})})}C(T,"defaultProps",{showSectionSaveButton:!0});var L=i(615298),N=i(217641);function B(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Z=e=>e?498:439,M=e=>e?80:52,F="allBoards",U="shortlist",H=`
.BoardsSlideLeft {
  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRight {
  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideLeftRTL {
  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRightRTL {
  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

@keyframes boardFlyoutSlideLeft {
  from {
    margin-left: 0%;
  }

  to {
    margin-left: -100%;
  }
}

@keyframes boardFlyoutSlideRight {
  from {
    margin-left: -100%;
  }

  to {
    margin-left: 0%;
  }
}

@keyframes boardFlyoutSlideLeftRTL {
  from {
    margin-right: -100%;
  }

  to {
    margin-right: 0%;
  }
}

@keyframes boardFlyoutSlideRightRTL {
  from {
    margin-right: 0%;
  }

  to {
    margin-right: -100%;
  }
}
`;class V extends r.PureComponent{constructor(...e){var t;super(...e),t=this,B(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,o.Z)()}),B(this,"getItems",e=>{let{boardResource:t,changeBoardModal:i,checkExperiment:r,showSaveToProfile:n}=this.props;if(!(null!=t&&t.data))return[];let{all_boards:o}=t.data,s=o.length>=3&&n&&r("web_top_choices_extract_profile").anyEnabled,l=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n.bt("Profile", "Profile", "pinBetterSave.initialSelection.boardlessPinsOption", undefined, true),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],a=this.getAllBoards().map((e,t)=>this.mapBoards(e,F,t)),d=this.getShortlist().map((e,t)=>this.mapBoards(e,U,t)),c=!s&&n&&!i&&o.length>=3?[...l,...d.slice(0,2)]:d,{searchQuery:u}=this.state;return u.length>=g.Z?[...(0,L.j)(a,u)]:[...o.length<3&&n?[{type:"header",title:this.props.i18n.bt("Quick save and organise later", "Quick save and organize later", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle", undefined, true)},...l]:[],...o.length>=3&&s?l:[],...o.length>=3&&c&&c.length?[{category:U,type:"header",title:e?this.props.i18n.bt("Top choices", "Top choices", "PinBetterSave.BoardFlyout.TopChoicesSectionTitle", undefined, true):this.props.i18n.bt("Top board suggestions", "Top board suggestions", "Header for top suggesions in board picker", undefined, true)},...c]:[],...o.length>0?[{type:"header",title:o.length<3&&n?this.props.i18n.bt("Save to board", "Save to board", "BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle", undefined, true):this.props.i18n.bt("All boards", "All boards", "Header for all boards in board picker", undefined, true)},...a]:[]]}),B(this,"mapBoards",(e,t,i)=>{let{selectedBoardId:r,selectedBoardCategory:n}=this.state,o=e.id===r&&t===n;return{...e,category:t,isOpen:o,gridIndex:i}}),B(this,"handleBack",()=>{let{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),B(this,"handleSectionClick",(e,t)=>{let{onItemChosen:i,logContextEvent:r,pinId:n,surfaceOriginViewParameter:o}=this.props,{saveSessionId:s,searchQuery:l}=this.state;r({event_type:101,component:13282,element:36,object_id_str:t.id,view_type:91,view_parameter:3133,aux_data:{board_id:t.id,board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,is_profile_save:!1,pin_id:n,save_session_id:s,search_query:l,section_id:e.id}}),i({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})}),B(this,"getPinBuilderSuggestions",async function(){let{logContextEvent:e,pinId:i,surfaceOriginViewParameter:r}=t.props,{saveSessionId:n}=t.state;if(i){let o=await (0,a.Z)({url:`/v3/pins/${i}/board_title_suggestions/`,data:{pin_id:i}});if(o.resource_response.data){let s=o.resource_response.data,l=s.map(e=>{var t;return{title:e.title,metadata:JSON.parse(null!==(t=null==e?void 0:e.metadata)&&void 0!==t?t:"{}")}})||[];t.setState({boardSuggestions:l}),e({aux_data:{board_picker_surface_origin:r,board_title_suggestions:JSON.stringify(t.getBoardTitleSuggestionsAuxData()),pin_id:i,save_session_id:n},component:13282,event_type:13,view_parameter:3992,view_type:21})}}}),B(this,"getAllBoards",()=>{var e;let{boardResource:t,advertiser_id:i}=this.props,r=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.all_boards)||[];return r.filter(e=>!i||"secret"!==e.privacy)}),B(this,"getShortlist",()=>{var e;let{suggestedBoardsShortListResource:t,displayShortlistMostRecentBoard:i,boardResource:r}=this.props,n=(null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.boards_shortlist)||[];return i?n:(null==t?void 0:t.data)||[]}),B(this,"getBoards",e=>e===F?this.getAllBoards():e===U?this.getShortlist():[]),B(this,"getSuggestedBoardsIds",()=>{let{showSaveToProfile:e}=this.props,t=e?this.getShortlist().slice(0,2):this.getShortlist(),i=t.map(e=>e.id);return e&&i.unshift("PROFILE_PINS"),i}),B(this,"getTopChoiceBoardsAuxData",()=>{let{showSaveToProfile:e}=this.props,t=e?this.getShortlist().slice(0,2):[...this.getShortlist()];return t.map(e=>{var t,i;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!==(t=e.recommendation_reason)&&void 0!==t?t:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!==(i=e.recommendation_reason)&&void 0!==i?i:"{}").score}})}),B(this,"getBoardTitleSuggestionsAuxData",()=>{let{boardSuggestions:e}=this.state;return e.map(e=>({board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}))}),B(this,"handleBoardWithSectionsClick",e=>{let{logContextEvent:t,pinId:i,setBoardWithSection:r,surfaceOriginViewParameter:n}=this.props,{saveSessionId:o,searchQuery:s,selectedBoardId:l,selectedBoardCategory:a}=this.state,d=this.getBoards(e.category).find(({id:t})=>t===e.id),c=l===e.id&&a===e.category;t({event_type:13,component:13282,element:36,object_id_str:e.id,view_type:275,aux_data:{board_id:e.id,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:i,save_session_id:o,search_query:s}}),d&&r&&r(d),this.setState({isSectionOpen:!0,selectedBoardId:c?"":e.id,selectedBoardCategory:c?"":e.category})}),B(this,"handleBoardClick",({board:e,toggleSections:t})=>{let{logContextEvent:i,onItemChosen:r,pinId:n,surfaceOriginViewParameter:o}=this.props,{saveSessionId:s,searchQuery:l}=this.state;this.setState({searchBoxFocused:!1}),t?(i({event_type:101,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===U?3988:3989,aux_data:{board_id:e.id,board_component:e.category===U?3988:3989,board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:n,save_session_id:s,search_query:l}}),this.handleBoardWithSectionsClick({category:e.category,gridIndex:e.gridIndex,id:e.id})):(i("boardless"===e.type?{event_type:101,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:3990,aux_data:{board_id:e.id,board_component:3990,board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!0,pin_id:n,save_session_id:s,search_query:l}}:{event_type:101,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===U?3988:3989,aux_data:{board_id:e.id,board_component:e.category===U?3988:3989,board_picker_surface_origin:o,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:"boardless"===e.type,pin_id:n,save_session_id:s,search_query:l}}),r({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))}),B(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),B(this,"handleCreateBoardClick",e=>{let{logContextEvent:t,onBoardCreate:i,pinId:r,surfaceOriginViewParameter:n}=this.props,{saveSessionId:o,searchQuery:s}=this.state;t({event_type:101,component:13282,element:249,view_type:91,view_parameter:e?87:3132,aux_data:{board_component:e?87:3132,board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),pin_id:r,save_session_id:o,search_query:s}}),i({title:s})}),B(this,"handleBoardSuggestionClick",e=>{let{logContextEvent:t,onBoardCreate:i,pinId:r,surfaceOriginViewParameter:n}=this.props,{saveSessionId:o}=this.state;t({event_type:101,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:n,board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),pin_id:r,save_session_id:o}}),i(e)})}componentDidMount(){let{logContextEvent:e,pinId:t,setBoardWithSection:i,surfaceOriginViewParameter:r}=this.props,{saveSessionId:n}=this.state;i&&i(null),e({event_type:13,component:13282,element:10960,aux_data:{board_picker_surface_origin:r,pin_id:t,save_session_id:n}})}componentDidUpdate(e){var t,i;let{saveSessionId:r}=this.state;if(!(null!==(t=e.suggestedBoardsShortListResource)&&void 0!==t&&t.isLoaded)&&null!==(i=this.props.suggestedBoardsShortListResource)&&void 0!==i&&i.isLoaded){let e=this.getSuggestedBoardsIds();e.length>0&&this.props.logContextEvent({event_type:13,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:r}})}}render(){let{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:n,customItem:o,onButtonClick:l,paneHeight:a,paneWidth:d,pinAlreadySavedBoard:u,pinId:h,requestContext:p,showSaveToProfile:_,showCreateBoardButton:g,showFlyoutSaveButton:m,showSections:f,showSectionSaveButton:x,suggestedBoardsShortListResource:P,surfaceOriginViewParameter:S,useStoryboardStyle:A,useLegoLayout:w}=this.props,{boardSuggestions:I,isSectionOpen:j,saveSessionId:C,searchBoxFocused:T,searchQuery:D}=this.state;if(!t)return null;let{isLoaded:z,error:L}=t,B=[];(z&&!L||P&&P.data&&!P.error)&&(B=this.getItems(!!w));let U=B.filter(e=>e&&e.category===F).length;U<=3&&0===I.length&&this.getPinBuilderSuggestions();let V=A?200:322,G=A?214:334,W=a||290,$=JSON.stringify(this.getTopChoiceBoardsAuxData()),X=p.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",Y="";null!==j&&(Y=p.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");let q=e=>(0,y.jsxs)(r.Fragment,{children:[!w&&(0,y.jsx)(s.iz,{}),(0,y.jsx)(s.xu,{overflow:"hidden",height:M(w),borderStyle:w&&U>=3&&B.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},children:(0,y.jsx)(k,{onCreateBoardClick:()=>this.handleCreateBoardClick(e),isBoardCreate:e,useLegoLayout:w})})]});return(0,y.jsxs)(s.xu,{width:w&&!n?"100%":d,rounding:2,overflow:"hidden",height:A||n?"100%":Z(w),color:"default",zIndex:b.lI,children:[(0,y.jsx)(c.Z,{unsafeCSS:H}),z?null:(0,y.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:w&&!n?360:d,children:(0,y.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})}),(0,y.jsx)(s.kC,{direction:"row",children:z&&(0,y.jsx)("div",{className:j?X:Y,children:(0,y.jsx)(s.xu,{position:"relative",children:(0,y.jsxs)(s.xu,{display:"flex",direction:"row",width:w&&!n?720:(null!=d?d:0)*2,zIndex:new s.Ry(0),children:[(0,y.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",width:w&&!n?360:d,children:[w&&!n&&(0,y.jsx)(s.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,y.jsx)(s.xv,{align:"center",size:"300",weight:"bold",children:_?this.props.i18n.bt("Save", "Save", "PinBetterSave.BoardFlyout.SavePlaceholder", undefined, true):this.props.i18n.bt("Save to board", "Save to board", "PinBetterSave.BoardFlyout.SaveToBoardPlaceholder", undefined, true)})}),!n&&(0,y.jsx)(s.xu,{padding:w?0:3,paddingX:w?4:3,height:w?64:"auto",children:(0,y.jsx)(N.Z,{accessibilityLabel:this.props.i18n.bt("Search through your boards", "Search through your boards", "search bar placeholder text", undefined, true),focused:T,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n.bt("Search", "Search", "search bar placeholder text", undefined, true),value:D})}),(0,y.jsxs)(s.xu,{minHeight:w?290:V,maxHeight:w?W:V,overflow:"scrollY",children:[P&&!P.isLoaded?(0,y.jsx)(s.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,y.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,y.jsx)(s.$j,{accessibilityLabel:this.props.i18n.bt("loading board picker", "loading board picker", "accessibility text for loading spinner", undefined, true),show:!0})})}):null,o,B.map((t,r)=>"header"===t.type?(0,y.jsx)(v,{boardPickerSuggestedBoards:$,item:t,index:r,pinId:h,saveSessionId:C,surfaceOriginViewParameter:S,useLegoLayout:w},`${t.title}`):(0,y.jsx)(s.xu,{children:(0,y.jsx)(E,{accessibilityLabelText:e,board:t,buttonText:i,displayAlreadySavedMsg:u&&u.id===t.id,onClick:e=>{this.handleBoardClick({board:e,toggleSections:f&&!!e.section_count})},onButtonClick:l,pinId:h,saveSessionId:C,shouldOpenSections:f,showFlyoutSaveButton:m,showSaveToProfile:_,surfaceOriginViewParameter:S,useLegoLayout:w})},`${t.category}-${t.id}`)),U<=3&&(0,y.jsx)(R,{onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:I,inWebRepinFlowExp:w})]}),g&&q(!0)]}),j&&(0,y.jsxs)(s.xu,{display:"flex",direction:"column",width:w&&!n?360:d,marginBottom:w?2:0,children:[(0,y.jsxs)(s.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,y.jsx)(s.sg,{span:2,children:(0,y.jsx)(s.xu,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3,children:(0,y.jsx)(s.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,y.jsx)(s.sg,{span:8,children:(0,y.jsx)(s.kC,{alignItems:"center",height:w?64:52,justifyContent:"center",children:(0,y.jsx)(s.xv,{weight:"bold",children:w?this.props.i18n.bt("Save Pin to", "Save Pin to", "PinBetterSave.BoardFlyout.SectionHeader", undefined, true):this.props.i18n.bt("Choose section", "Choose section", "Header for section header", undefined, true)})})}),(0,y.jsx)(s.sg,{span:2,children:(0,y.jsx)(s.xu,{})})]}),!w&&(0,y.jsx)(s.iz,{}),(0,y.jsx)(s.xu,{minHeight:w?354:G,maxHeight:w?W:G,overflow:"scrollY",children:B?(0,y.jsx)(r.Fragment,{children:B&&B.map(e=>"header"===e.type?null:(0,y.jsx)(s.xu,{children:e.isOpen&&(0,y.jsxs)(r.Fragment,{children:[w&&(0,y.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,y.jsx)(s.xv,{size:"100",children:this.props.i18n.bt("Board", "Board", "PinBetterSave.BoardFlyout.BoardPickerTitle", undefined, true)})}),(0,y.jsx)(E,{board:e,buttonText:i,displayAlreadySavedMsg:u&&u.id===e.id,isSectionOpen:!0,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:l,saveSessionId:C,shouldOpenSections:!1,showFlyoutSaveButton:m,useLegoLayout:w}),(0,y.jsx)(O,{board:e,buttonText:i,onClick:this.handleSectionClick,onButtonClick:l,showSectionSaveButton:x,useLegoLayout:w})]})},`${e.category}-${e.id}`))}):null}),g&&!n&&q(!1)]})]})})})})]})}}function G(e){let{logContextEvent:t}=(0,l.v)(),i=(0,d.ZP)(),{checkExperiment:r}=(0,u.F)();return(0,y.jsx)(V,{...e,checkExperiment:r,requestContext:(0,h.B)(),i18n:i,logContextEvent:t})}function W(e,t,i){let{advertiser:r}=e,n={};if(i&&i.user&&i.user.username&&i.id!==t.id&&(n.orbacActingAs=i,n.username=i.user.username),t&&r){let i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id,...n};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id,...n};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,...n}}function $(e){let{advertiser_id:t,hasMUA:i,boardFilter:r="all"}=e,{username:n}=e,o={field_set_key:"board_picker",filter:i?"protected":r,...n?{username:n}:Object.freeze({}),...t?{advertiser_id:t}:{}};return(!e.useStoryboardStyle||e.isORBACBeta)&&e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(o={...o,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:r}),o}function X(e,t){return(i,r)=>i((0,p.jB)("BoardPickerBoardsResource",$(W(r(),e,t))))}function Y(e){let t=(0,m.Z)(),i=(0,n.useSelector)(i=>W(i,t,e.orbacActingAs)),r={...e,...i},o=(0,_.Z)({name:"BoardPickerBoardsResource",options:$(r)});return(0,y.jsx)(G,{...r,boardResource:o})}function q(e){let t=(0,f.Z)(),i=(0,m.Z)(),r=(0,x.lJ)(i,t),{anyEnabled:n}=(0,u.F)().checkExperiment("web_m10n_business_access_orbac_www");return(0,y.jsx)(Y,{...e,orbacActingAs:r?t:void 0,isORBACBeta:n})}function K(e){let t=(0,_.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),{data:i}=(0,_.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pinId}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,y.jsx)(G,{...e,suggestedBoardsShortListResource:t,pinAlreadySavedBoard:null==i?void 0:i.pinned_to_board})}B(V,"defaultProps",{paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},970576:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(883119),n=i(499128),o=i(898781),s=i(349700),l=i(785893);function a({boardName:e,boardUrl:t,isBoardlessPin:i,isFromPinBuilder:a,hasNewPin:d,onChangeButtonClick:c,onVisitButtonClick:u=()=>{},onHide:h,onUndo:p,pinImageUrl:_}){let g;let m=(0,o.ZP)();return a?g={accessibilityLabel:m.bt("Visit Pin", "Visit Pin", "PostSavedPinToast.a11yVisitButton", undefined, true),label:m.bt("Visit", "Visit", "PostSavedPinToast.VisitButton", undefined, true),size:"lg",onClick:u}:(c||p)&&(g={accessibilityLabel:d&&i&&c?m.bt("Change Pin destination", "Change Pin destination", "PostSavedPinToast.a11yChangeButton", undefined, true):m.bt("Undo saved Pin", "Undo Saved Pin", "PostSavedPinToast.a11yUndoButton", undefined, true),label:d&&i&&c?m.bt("Change", "Change", "PostSavedPinToast.ChangeButton", undefined, true):m.bt("Undo", "Undo", "PostSavedPinToast.UndoButton", undefined, true),size:"lg",onClick:d&&i&&c?()=>c():p}),(0,l.jsx)(n.ZP,{primaryAction:g,duration:i?6e3:3e3,thumbnail:i?{icon:(0,l.jsx)(r.JO,{accessibilityLabel:m.bt("Saved to profile thumbnail", "Saved to profile thumbnail", "PostSavedPinToast.thumbnail.accessibilityLabel", undefined, true),color:"default",icon:"history",size:24})}:void 0,imageUrl:_,onHide:h,text:(0,l.jsx)(r.xv,{size:"200",overflow:"normal",children:(0,s.nk)(m.bt("Saved to {{ destination }}", "Saved to {{ destination }}", "PostSavedPinToast.SavedToBoardLabel", undefined, true),{destination:(0,l.jsx)(r.rU,{href:i?"/me/":null!=t?t:"",children:(0,l.jsx)(r.xv,{size:"200",weight:"bold",lineClamp:1,children:e},"PostSavedPinToastBoardName")})})})})}},274495:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(883119),n=i(785893);let o={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,n.jsx)(r.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8,children:(0,n.jsx)(r.xu,{dangerouslySetInlineStyle:o,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function l({disabled:e,name:t,onClick:i,size:o,submitting:l,text:a}){return(0,n.jsxs)(r.xu,{display:"flex",position:"relative","data-test-id":"submit-button",children:[l&&(0,n.jsx)(s,{}),(0,n.jsx)(r.zx,{color:"red",disabled:e||l,name:t,onClick:i,size:o,type:"submit",text:a})]})}},865607:(e,t,i)=>{"use strict";i.d(t,{O:()=>d,Z:()=>c});var r=i(667294),n=i(883119),o=i(898781),s=i(966113),l=i(785893);let a={xs:12,sm:16,md:20,lg:24};function d({children:e}){let t=(0,o.ZP)();return(0,l.jsx)(n.u,{link:(0,l.jsx)(n.rU,{href:s.vBy,target:"blank",children:(0,l.jsx)(n.xv,{color:"inverse",size:"100",weight:"bold",children:t.bt("Learn more", "Learn more", "verifiedBadge.tooltip.link", undefined, true)})}),text:t.bt("This retailer meets Pinterest's Merchant Guidelines", "This retailer meets Pinterest's Merchant Guidelines", "merchantVerification.badge.tooltip", undefined, true),children:e})}function c({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:i,showText:s,size:c}){let u=(0,o.ZP)(),h=(0,l.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(n.JO,{accessibilityLabel:u.bt("Merchant verification badge icon", "Merchant verification badge icon", "merchantVerification.badge.icon", undefined, true),color:"shopping",icon:"workflow-status-ok",inline:!0,size:a[c]}),s&&(0,l.jsx)(n.xu,{marginStart:2,children:(0,l.jsx)(n.xv,{color:"shopping",inline:!0,weight:"bold",children:u.bt("Verified merchant", "Verified merchant", "creator.header.verifiedMerchant", undefined, true)})})]});return(0,l.jsxs)(r.Fragment,{children:[i&&!t&&(0,l.jsx)(d,{children:h}),i&&t&&h,e&&!i&&(0,l.jsx)(n.JO,{accessibilityLabel:u.bt("Domain verification icon", "Domain verification icon", "domainVerification.badge.icon", undefined, true),color:"error",icon:"check-circle",size:a[c]})]})}},116485:(e,t,i)=>{"use strict";i.d(t,{AA:()=>o,E9:()=>m,EU:()=>b,IO:()=>x,KH:()=>c,Lg:()=>p,QR:()=>d,Uw:()=>n,ZR:()=>y,dy:()=>a,eA:()=>h,eV:()=>_,fo:()=>g,k7:()=>s,rT:()=>f,tz:()=>u,u9:()=>v,zR:()=>l,zu:()=>r});let r="OPEN_UNAUTH",n="openUnauthType",o="_isAfterLogin",s="_lastVisitedPages",l="_lastVisitedPagesBeforeLogin",a="_lastVisitedBoardPages",d="_lastVisitedPagesBeforeNavPage",c="_lastVisitedSessionPages",u="_unauthVisitedPages",h=20,p="_inviteCodeRedemption",_="_paidTrafficLand",g="_unauthReferrerString",m="unauthTopicsFollowed",f=["US","CA","NZ","AU"],x=new Set(["GB","IE"]),b=new Set(["AT","BE","CH","DE","DK","ES","FR","IT","NL","NO","PT","SE"]),y=new Set(["BR","MX","AR","CL","CO","PE"]),v="ad_img"},534427:(e,t,i)=>{"use strict";i.d(t,{E:()=>s,S:()=>l});var r=i(667294),n=i(844974);let o="_loggingInNotHome",s=e=>{e?(0,n.Nh)(o,1):(0,n.L_)(o)},l=()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{t(!0)},[]),e&&(0,n.qn)(o)}},987318:(e,t,i)=>{"use strict";i.d(t,{H:()=>o,o:()=>n});var r=i(425288);let{Provider:n,useHook:o}=(0,r.Z)("LimitedLogin")},616693:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var r,n,o,s=i(667294),l=i(883119),a=i(898781),d=i(376030),c=i(248058),u=i(785893);let h=c.Cc-2*c.iA/2*.3999999999999999,p=c.Ys-2*c.iA/2*.3999999999999999,_=279-2*c.j5/2*1.1,g=2-2*c.kq/2*1.1,m={targets:".simplePopExtensionContent",opacity:[0,1],duration:500,easing:"easeInOutQuad"},f={targets:["#content-morph",".content-bar"],opacity:[0,1]},x={targets:"#content-morph",width:30,height:30,x:220,y:203,rx:20},b={targets:".content-bar",width:0,height:0,x:215,y:218},y={targets:"#content-morph",x:301,y:24},v={targets:"#pinterest-logo",translateX:[c.Cc,h],translateY:p,scale:1.4,direction:"alternate"},P={targets:"#pinterest-logo",translateX:[h,c.Cc],translateY:c.Ys,scale:c.G9,direction:"alternate"},S={targets:"#pinterest-logo-pop-bg",translateX:[279,_],translateY:[2,g],scale:2.1,direction:"alternate"},A={targets:"#pinterest-logo-pop-bg",translateX:[_,279],translateY:[g,2],scale:1},w=e=>{let t=500+(e?0:750),i=t+300,r=i+280,n=i+210,o=d.Z.timeline({easing:"easeInOutQuad",loop:e,direction:"normal",autoplay:!1});return o.add({...f,duration:500}),e||o.add({duration:750}),o.add({...x,duration:300},t).add({...b,duration:300},t).add({...y,duration:300},i).add({...v,duration:280},i).add({...S,duration:210},i).add({...P,duration:190,easing:"cubicBezier(0, 0, 0.23, 0.8)"},r).add({...A,duration:300},n).add({duration:1400}),o};class E extends s.PureComponent{componentDidMount(){let{isLooping:e}=this.props;window.requestAnimationFrame(()=>{let t=w(e);(0,d.Z)(m).finished.then(()=>t.play())})}render(){return(0,u.jsx)(l.xu,{display:"flex",flex:"grow",justifyContent:"center",alignItems:"center",marginTop:c.VE,children:c.ZP})}}o={isLooping:!1},(n="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n="defaultProps","string"))?r:String(r))in E?Object.defineProperty(E,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):E[n]=o;let I=({header:e,installClick:t,isExtensionInstalled:i=!1,isFromPinBuilder:r,skipClick:n,subheader:o})=>{let d=(0,a.ZP)(),c=d.bt("Get the Pinterest browser button", "Get the Pinterest browser button", "extensionUpsell.modal.defaultHeader", undefined, true),h=d.bt("Save creative ideas from around the web", "Save creative ideas from around the web", "extensionUpsell.modal.defaultSubheader", undefined, true),p=d.bt("With the Pinterest Save button, you can save your favourite ideas without ever leaving the page you're on.", "With the Pinterest Save Button you can save your favorite ideas without ever leaving the page you're on.", "extensionUpsell.modal.defaultHeader", undefined, true),_=d.bt("Save your favourite ideas with just one click", "Save your favorite ideas with just one click", "extensionUpsell.modal.defaultSubheader", undefined, true);return r?(0,u.jsxs)(l.xu,{children:[(0,u.jsx)(l.Ee,{src:"https://i.pinimg.com/originals/d4/d9/89/d4d9897b5d404678fa38c9cad904fc85.png",alt:d.bt("Pinterest browser extension", "Pinterest Browser Extension", "extensionUpsell.graphicAltText", undefined, true),naturalHeight:258,naturalWidth:540,children:(0,u.jsx)(l.xu,{display:"block",height:40,marginEnd:4,marginStart:4,marginTop:4,position:"absolute",right:!0,top:!0,width:40,children:(0,u.jsx)(l.hU,{accessibilityLabel:d.bt("Close", "Close", "extensionUpsell.cancelLabel", undefined, true),icon:"cancel",iconColor:"darkGray",onClick:n,size:"md"})})}),(0,u.jsxs)(l.xu,{display:"flex",direction:"column",margin:"auto",width:360,children:[(0,u.jsx)(l.xu,{marginTop:8,children:(0,u.jsx)(l.X6,{size:"500",align:"center",children:e||_})}),(0,u.jsx)(l.xu,{marginTop:4,children:(0,u.jsx)(l.xv,{align:"center",children:o||p})}),(0,u.jsx)(l.xu,{display:"flex",direction:"row",marginTop:8,marginBottom:8,children:i?(0,u.jsx)(l.zx,{accessibilityLabel:d.bt("OK", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:n,text:d.bt("OK", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(l.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginStart:12,children:(0,u.jsx)(l.zx,{fullWidth:!0,accessibilityLabel:d.bt("Maybe later", "Maybe later", "extensionUpsell.button.maybeLater", undefined, true),onClick:n,text:d.bt("Maybe later", "Maybe later", "extensionUpsell.button.maybeLater", undefined, true),size:"lg"})}),(0,u.jsx)(l.xu,{display:"inlineBlock",marginStart:2,children:(0,u.jsx)(l.zx,{accessibilityLabel:d.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:d.bt("Get it now", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})})]})})]})]}):(0,u.jsxs)(l.xu,{padding:8,children:[(0,u.jsx)(l.X6,{align:"center",size:"500",children:e||h}),(0,u.jsx)(l.xu,{marginTop:4,children:(0,u.jsx)(l.xv,{align:"center",children:o||c})}),(0,u.jsx)(l.xu,{display:"flex",flex:"grow",marginTop:8,paddingY:8,children:(0,u.jsx)(E,{isLooping:!0})}),(0,u.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:i?(0,u.jsx)(l.zx,{accessibilityLabel:d.bt("OK", "Got it", "extensionUpsell.button.gotItLabel", undefined, true),color:"red",onClick:n,text:d.bt("OK", "Got it", "extensionUpsell.button.gotIt", undefined, true),size:"lg"}):(0,u.jsxs)(s.Fragment,{children:[(0,u.jsx)(l.xu,{"data-test-id":"cancel-extension-upsell",display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(l.zx,{fullWidth:!0,accessibilityLabel:d.bt("Cancel", "Cancel", "extensionUpsell.button.cancelLabel", undefined, true),onClick:n,text:d.bt("Cancel", "Cancel", "extensionUpsell.button.cancel", undefined, true),size:"lg"})}),(0,u.jsx)(l.zx,{accessibilityLabel:d.bt("Get the Pinterest browser extension", "Get the Pinterest browser extension", "extensionUpsell.button.getItNowLabel", undefined, true),color:"red",onClick:t,text:d.bt("Get it now", "Get it now", "extensionUpsell.button.getItNow", undefined, true),size:"lg"})]})})]})}},34596:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(616550),n=i(780280),o=i(50286),s=i(237056),l=i(898781),a=i(360400),d=i(785893);function c(){let e=(0,l.ZP)(),t=(0,s.Z)();return(0,d.jsx)(a.Z,{titleText:t?e.bt("Get the app to create Pins", "Get the app to create Pins", "inviteLandingPageV2.appUpsellPage.heading.sce", undefined, true):e.bt("Get the app to create Idea Pins", "Get the app to create Idea Pins", "inviteLandingPageV2.appUpsellPage.heading", undefined, true),bodyText:t?e.bt("The Pinterest app has the tools you need to publish your first Pin. Download, be inspired, then start creating.", "The Pinterest app has the tools you need to publish your first Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description.sce", undefined, true):e.bt("The Pinterest app has the tools you need to publish your first Idea Pin. Download, be inspired, then start creating.", "The Pinterest app has the tools you need to publish your first Idea Pin. Download, get inspired, then start creating.", "inviteLandingPageV2.appUpsellPage.description", undefined, true),buttonText:e.bt("Get the app", "Get the app", "inviteLandingPageV2.appUpsellPage.cta", undefined, true),deeplink:"/idea-pin-builder/"})}var u=i(930352);function h(){let{isAuthenticated:e,userAgent:t}=(0,n.B)(),i=(0,o.HG)(),{isTablet:s}=t;return!e||s?(0,d.jsx)(r.l_,{to:"/"}):i?(0,d.jsx)(u.Z,{}):(0,d.jsx)(c,{})}},930352:(e,t,i)=>{"use strict";i.d(t,{Z:()=>tm});var r=i(667294),n=i(702664),o=i(616550),s=i(14798),l=i(172045),a=i(883119),d=i(237056),c=i(998499),u=i(316271),h=i(898781),p=i(66743),_=i(309256),g=i(785893);let m={property:"opacity",duration:1600,timingFunction:"easeInOut",delay:500},f={start:{opacity:1},end:{opacity:0}},x=[{property:"height",duration:400,timingFunction:"easeInOut",delay:500},{property:"width",duration:400,timingFunction:"easeInOut",delay:500},{property:"left",duration:400,timingFunction:"easeInOut",delay:500},{property:"top",duration:400,timingFunction:"easeInOut",delay:500},{property:"box-shadow",duration:500,timingFunction:"easeInOut",delay:900}],b={start:{boxShadow:"0 0 0 500px rgba(197, 226, 238, 0)",top:"0%",left:"0%",height:"100%",width:"100%"},end:{boxShadow:"0 0 0 500px rgba(197, 226, 238, 1)",left:"8%",top:"8%",height:"84%",width:"84%"}},y=[{property:"opacity",duration:200,timingFunction:"easeInOut",delay:1500},{property:"left",duration:800,timingFunction:"easeInOut",delay:2e3}],v={start:{opacity:0,left:"0px"},end:{left:"164px",opacity:1}},P={property:"background-color",duration:"medium",timingFunction:"easeIn",delay:4200},S={start:{backgroundColor:"rgba(17, 82, 194, 0)",marginLeft:"8px"},end:{backgroundColor:"rgba(17, 82, 194, 1)"}};function A({onStart:e}){let t=(0,h.ZP)(),i=(0,r.useRef)(null),n=(0,r.useRef)(0),o=(0,r.useRef)(null),[s,l]=(0,r.useState)({cropper:!1,font:!1,image:!1,logo:!1}),[d,A]=(0,r.useState)(null),[w,E]=(0,r.useState)(!1),[I,j]=(0,r.useState)(b.start),[C,T]=(0,r.useState)(v.start),[D,O]=(0,r.useState)(f.start),[z,R]=(0,r.useState)(S.start),[k,L]=(0,r.useState)(" "),N=t.bt("Picture-perfect outdoor seating", "Picture-perfect outdoor seating", "Sample text describing an image of visually-appealing outdoor seating", undefined, true);(0,r.useEffect)(()=>{s.font||(0,_.a2)().then(()=>{A(_.Wt[p.WK]),l({...s,font:!0})}),Object.keys(s).reduce((e,t)=>e&&s[t],!0)&&E(!0)},[s]),(0,r.useEffect)(()=>{if(w){j(b.end),T(v.end),O(f.end),R(S.end),e&&e();let t=setTimeout(()=>setInterval(()=>(function(e){let t=n.current;L(e.substr(0,t)),t>N.length&&(clearInterval(o.current),o.current=null),n.current=t+1})(N),500/N.length),3200);i.current=t}return()=>{clearTimeout(i.current),clearInterval(o.current),i.current=null,o.current=null}},[w,e]);let B=[t.bt("Crop images or use a preset size", "Crop images or use a preset size", "Text describing editing images", undefined, true),t.bt("Add a logo to showcase your brand", "Add a logo to showcase your brand", "Text describing adding a logo to images", undefined, true),t.bt("Use fonts and colours to make text pop", "Use fonts and colors to make text pop", "Text describing the text overlay feature in Pin creation", undefined, true)];return(0,g.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-editing-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,g.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#c5e2ee"}},display:"flex",justifyContent:"center",minWidth:342,padding:8,position:"relative",width:342,children:(0,g.jsxs)(a.xu,{height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,g.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:2,top:!0,children:(0,g.jsx)(a.Ee,{alt:t.bt("Sample image of a Pin of outdoor furniture", "Sample image of a Pin of outdoor furniture", "Alt text describing image of outdoor furniture", undefined, true),fit:"contain",naturalHeight:568,naturalWidth:804,onLoad:()=>{l({...s,image:!0})},src:"https://s.pinimg.com/webapp/pin-87a15a9f.png"})}),(0,g.jsxs)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...I,transition:(0,c.Z)(x,{execution:"parallel"})}},position:"absolute",right:!0,rounding:2,children:[(0,g.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...D,transition:(0,u.Z)(m)}},left:!0,position:"absolute",right:!0,top:!0,children:(0,g.jsx)(a.Ee,{alt:"Cropper",fit:"contain",naturalHeight:804,naturalWidth:568,onLoad:()=>{l({...s,cropper:!0})},src:"https://s.pinimg.com/webapp/cropper-e71fa1c6.png"})}),(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...C,transition:(0,c.Z)(y,{execution:"parallel"})}},height:36,margin:4,position:"relative",top:!0,width:36,children:(0,g.jsx)(a.Ee,{alt:t.bt("A sample logo on an image to demonstrate editing on Pinterest", "A sample logo on an image to demonstrate editing on Pinterest", "A sample logo on an image to demonstrate image editing features on Pinterest", undefined, true),color:"transparent",fit:"contain",naturalHeight:70,naturalWidth:60,onLoad:()=>{l({...s,logo:!0})},src:"https://s.pinimg.com/webapp/logo-34fec719.png"})}),(0,g.jsx)(a.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{...z,borderRadius:"0 0 8px 8px",transition:(0,u.Z)(P)}},display:"flex",justifyContent:"center",left:!0,padding:4,position:"absolute",right:!0,children:(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...d,color:"white",fontSize:"21px",textAlign:"center"}},children:k})})]})]})}),(0,g.jsx)(a.xu,{alignItems:"center",display:"flex",flex:"grow",paddingX:10,children:(0,g.jsxs)(a.xu,{children:[(0,g.jsx)(a.X6,{children:t.bt("New ways to edit", "New ways to edit", "Heading for describing ways to edit Pins", undefined, true)}),(0,g.jsx)(a.xu,{paddingY:4,children:B.map((e,t)=>(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",flex:"none",paddingY:1,children:[(0,g.jsx)(a.xu,{color:"selected",display:"flex",height:8,rounding:"circle",width:8}),(0,g.jsx)(a.xu,{paddingX:2,children:(0,g.jsx)(a.xv,{overflow:"normal",children:(0,g.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`editing-screen-point-${t}`))})]})})]})}let w={start:{top:474},end:{top:-276}},E={property:"top",duration:8e3,timingFunction:"easeOut",delay:250};function I({onStart:e}){let t=(0,h.ZP)(),[i,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(w.start);(0,r.useEffect)(()=>{o&&(n(!0),e&&e()),i&&d(w.end)},[i,o,e]);let c=[t.bt("Make multiple Pins at the same time", "Make multiple Pins at a time", "Text describing that multiple Pins can be at once", undefined, true),t.bt("Create any format, from video to carousel", "Create any format, from video to carousel", "Text describing the different Pin formats that can be used", undefined, true),t.bt("See how Pins look before you publish", "See how Pins look before you publish", "Text describing the Pin preview feature", undefined, true)];return(0,g.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-publish-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#fbcccd"}},minWidth:342,position:"relative",width:342,children:(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...l,transition:(0,u.Z)(E)}},height:"100%",paddingX:8,position:"relative",width:"100%",children:(0,g.jsx)(a.Ee,{alt:t.bt("Example Pins", "Example Pins", "Alt text for an image showing example Pins", undefined, true),naturalHeight:1660,naturalWidth:606,onLoad:()=>s(!0),src:"https://s.pinimg.com/webapp/onboarding_multiPin-1d44baaf.png"})})}),(0,g.jsx)(a.xu,{alignItems:"center",display:"flex",flex:"grow",paddingX:10,children:(0,g.jsxs)(a.xu,{children:[(0,g.jsx)(a.X6,{children:t.bt("Why stop at one?", "Why stop at one?", "A heading text for describing creating multiple Pins at once", undefined, true)}),(0,g.jsx)(a.xu,{paddingY:4,children:c.map((e,t)=>(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,g.jsx)(a.xu,{color:"selected",display:"flex",flex:"none",height:8,rounding:"circle",width:8}),(0,g.jsx)(a.xu,{paddingX:2,children:(0,g.jsx)(a.xv,{children:(0,g.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`publish-screen-point-${t}`))})]})})]})}let j={property:"top",timingFunction:"easeInOut",duration:3700,delay:1725},C=[{property:"opacity",duration:500,timingFunction:"easeInOut",delay:4200},{property:"margin-top",duration:500,timingFunction:"easeInOut",delay:4200}],T=[{src:"https://s.pinimg.com/webapp/examplePins_01-125ae6f6.png",keyframe:{start:{top:-77},end:{top:-663}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_02-c1b9595c.png",keyframe:{start:{top:-1},end:{top:-636}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_03-434ea5a7.png",keyframe:{start:{top:-121},end:{top:-654}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_04-d8206ce6.png",keyframe:{start:{top:-5},end:{top:-646}},naturalHeight:1684,naturalWidth:360},{src:"https://s.pinimg.com/webapp/examplePins_05-4c1f579d.png",keyframe:{start:{top:-142},end:{top:-650}},naturalHeight:1684,naturalWidth:360}],D={start:{marginTop:24,maxWidth:500,opacity:0},end:{marginTop:0,maxWidth:500,opacity:1}};function O({onStart:e}){let t=(0,h.ZP)(),[i,n]=(0,r.useState)(!1),[o,s]=(0,r.useState)([]),[l,d]=(0,r.useState)(D.start),[p,_]=(0,r.useState)(T.reduce((e,t)=>[...e,t.keyframe.start],[]));return(0,r.useEffect)(()=>{let e=T.map(()=>!0);s(e)},[]),(0,r.useEffect)(()=>{0===o.filter(e=>e).length&&(n(!0),e&&e()),i&&(d(D.end),_(T.reduce((e,t)=>[...e,t.keyframe.end],[])))},[i,o,e]),(0,g.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-welcome-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[T.map((e,i)=>{let{src:r,naturalHeight:n,naturalWidth:l}=T[i],d=i>T.length/2?4:void 0,c=i<T.length/2-1?4:void 0;return(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{...p[i],transition:(0,u.Z)(j)}},height:240,marginEnd:c,marginStart:d,position:"relative",width:164,children:(0,g.jsx)(a.Ee,{alt:t.bt("Column of example Pins", "Column of example Pins", "Image alt text describing a column of example Pins", undefined, true),color:"transparent",naturalHeight:n,naturalWidth:l,onLoad:()=>{let e=[...o];e[i]=!1,s(e)},src:r})},`education-image-strip-${i}`)}),(0,g.jsx)(a.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:(0,g.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...l,transition:`${(0,c.Z)(C,{execution:"parallel"})}`}},direction:"column",display:"flex",justifyContent:"center",padding:12,children:[(0,g.jsx)(a.X6,{children:t.bt("Great Pins made easy", "Great Pins made easy", "In-product education heading text for creating Pins", undefined, true)}),(0,g.jsx)(a.xu,{paddingY:4,children:(0,g.jsx)(a.xv,{align:"center",children:(0,g.jsx)("span",{className:"deprecatedTextSizeXL",children:t.bt("Add text and logos, make multiple Pins at the same time and edit like a pro. New tools let you create Pins your way.", "Add text and logos, make multiple Pins at once and edit like a pro. New tools let you create Pins your way.", "Text describing how to make Pins on Pinterest", undefined, true)})})})]})})]})}var z=i(915206),R=i(407043),k=i(121151),L=i(349700),N=i(299295),B=i(346360),Z=i(474394),M=i(106331);function F(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class U extends r.Component{constructor(...e){super(...e),F(this,"state",{description:this.props.initialDescription,descriptionFocused:!1,dirtyFields:new Set,link:this.props.initialLink,linkError:null,publishOption:this.props.initialPublishOption,scheduledDate:this.props.initialScheduledDate,scheduledTime:this.props.initialScheduledTime,selectedItem:this.props.initialSelectedItem,title:this.props.initialTitle,titleFocused:!1}),F(this,"mounted",!1),F(this,"handleDescriptionFocus",()=>{this.setState({descriptionFocused:!0})}),F(this,"handleDescriptionBlur",()=>{this.setState({descriptionFocused:!1})}),F(this,"handleTitleFocus",()=>{this.setState({titleFocused:!0})}),F(this,"handleTitleBlur",()=>{this.setState({titleFocused:!1})}),F(this,"handleLinkBlur",({value:e})=>{let{i18n:t,ideaPinRenamingEnabled:i}=this.props;(0,B.qi)({i18n:t,ideaPinRenamingEnabled:i,link:e}).then(e=>{if(e&&e.length>0&&this.mounted){let{message:t}=e[0];this.setState({linkError:t})}})}),F(this,"handleDescriptionChange",({value:e})=>{this.setState(t=>({description:e.substring(0,N.JO),dirtyFields:t.dirtyFields.add("description")}))}),F(this,"handleLinkChange",({value:e})=>{this.setState(t=>({link:e,linkError:null,dirtyFields:t.dirtyFields.add("link")}))}),F(this,"handleTitleChange",({value:e})=>{this.setState(t=>({title:e.substring(0,N.Ke),dirtyFields:t.dirtyFields.add("title")}))}),F(this,"handleBoardItemChosen",e=>{this.setState(t=>({selectedItem:e,dirtyFields:t.dirtyFields.add("board")}))}),F(this,"handleSubmitClick",()=>{let{i18n:e,ideaPinRenamingEnabled:t,onDismiss:i,onSubmit:r}=this.props,{description:n,link:o,publishOption:s,scheduledDate:l,scheduledTime:a,selectedItem:d,title:c}=this.state;this.props.logContextEvent({event_type:101,component:13396,element:11331}),(0,B.qi)({i18n:e,ideaPinRenamingEnabled:t,link:o}).then(e=>{if(!e||e&&0===e.length)r({...null!=n?{description:n}:Object.freeze({}),...null!=o?{link:o}:Object.freeze({}),...null!=s?{publishOption:s}:Object.freeze({}),...void 0!==l?{scheduledDate:l}:Object.freeze({}),...void 0!==a?{scheduledTime:a}:Object.freeze({}),...void 0!==d?{selectedItem:d}:Object.freeze({}),...null!=c?{title:c}:Object.freeze({})}),i();else if(e&&this.mounted){let{message:t}=e[0];this.setState({linkError:t})}})})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){let{numPins:e,onDismiss:t}=this.props,{description:i,descriptionFocused:r,dirtyFields:n,link:o,linkError:s,selectedItem:l,title:d,titleFocused:c}=this.state,u=this.props.i18n.bt("Field updated", "Field updated", "Icon symbolizing that the value for a field will be updated", undefined, true);return(0,g.jsx)(k.ZP,{accessibilityModalLabel:this.props.i18n.bt("Edit Pin info", "Edit Pin info", "Label to describe the bulk Pin edit modal", undefined, true),footer:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"between",padding:1,children:[(0,g.jsx)(a.xu,{paddingX:3,children:(0,g.jsx)(a.xv,{color:"subtle",size:"200",children:(0,L.nk)(this.props.i18n.nbt(["Editing info for {{ numPins }} Pin", "Editing info for {{ numPins }} Pins"], e, "Number of Pins selected for bulk edit", true),{numPins:e})})}),(0,g.jsx)(a.xu,{"data-test-id":"pin-builder-edit-modal-save-button",children:(0,g.jsx)(a.zx,{color:"red",disabled:0===n.size,onClick:this.handleSubmitClick,text:this.props.i18n.bt("Update info", "Update info", "Button to save info to selected Pins", undefined, true)})})]}),heading:this.props.i18n.bt("Edit info", "Edit info", "Heading for the bulk Pin info edit modal", undefined, true),onDismiss:t,size:"md",children:(0,g.jsxs)(a.xu,{column:12,"data-test-id":"pinbuilder-bulk-edit-modal",paddingX:8,paddingY:6,children:[(0,g.jsxs)(a.xu,{marginBottom:6,children:[(0,g.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-board",children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,g.jsx)(a.xv,{children:this.props.i18n.bt("Board", "Board", "Label for bulk apply board dropdown", undefined, true)}),n.has("board")&&(0,g.jsx)(a.xu,{paddingX:1,children:(0,g.jsx)(a.JO,{accessibilityLabel:u,color:"success",icon:"check-circle",size:12})})]})}),(0,g.jsx)(z.Z,{flyoutSize:480,onItemChosen:this.handleBoardItemChosen,placeholder:void 0===l?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for board dropdown with multiple boards", undefined, true):this.props.i18n.bt("Select", "Select", "Placeholder text for board dropdown to select board", undefined, true),selectedItem:l,showButton:!1,showCreateBoardButton:!1,showFlyoutSaveButton:!1,showSectionSaveButton:!1,useLayer:!1})]}),(0,g.jsxs)(a.xu,{marginBottom:6,children:[(0,g.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-title",children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,g.jsx)(a.xv,{children:this.props.i18n.bt("Title", "Title", "Label for bulk apply title text field", undefined, true)}),n.has("title")&&(0,g.jsx)(a.xu,{paddingX:1,children:(0,g.jsx)(a.JO,{accessibilityLabel:u,color:"success",icon:"check-circle",size:12})})]})}),(0,g.jsx)(a.nv,{id:"pin-builder-edit-modal-title",onBlur:this.handleTitleBlur,onChange:this.handleTitleChange,onFocus:this.handleTitleFocus,onKeyDown:this.handleTitleChange,placeholder:void 0===d?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for title field with multiple titles", undefined, true):void 0,size:"lg",value:d||""}),(0,g.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:c&&(0,g.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,g.jsx)(a.xu,{flex:"grow",children:(0,g.jsx)(a.xv,{color:"subtle",size:"100",children:this.props.i18n.bt("The first 40 characters are what usually show up in feeds", "Your first 40 characters are what usually show up in feeds", "pinbuilder.header.editModal.title.helper", undefined, true)})}),(0,g.jsx)(a.xu,{flex:"none",children:(0,g.jsx)(a.xv,{color:"default",size:"100",children:N.Ke-(d||"").length})})]})})]}),(0,g.jsxs)(a.xu,{marginBottom:6,children:[(0,g.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-description",children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,g.jsx)(a.xv,{children:this.props.i18n.bt("Description", "Description", "Label for bulk apply description text field", undefined, true)}),n.has("description")&&(0,g.jsx)(a.xu,{paddingX:1,children:(0,g.jsx)(a.JO,{accessibilityLabel:u,color:"success",icon:"check-circle",size:12})})]})}),(0,g.jsx)(a.Kx,{id:"pin-builder-edit-modal-description",onBlur:this.handleDescriptionBlur,onChange:this.handleDescriptionChange,onFocus:this.handleDescriptionFocus,onKeyDown:this.handleDescriptionChange,placeholder:void 0===i?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for description field with multiple descriptions", undefined, true):void 0,rows:4,value:i||""}),(0,g.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:r&&(0,g.jsxs)(a.xu,{column:12,display:"flex",justifyContent:"between",children:[(0,g.jsx)(a.xu,{flex:"grow",children:(0,g.jsx)(a.xv,{color:"subtle",size:"100",children:this.props.i18n.bt("People will usually see the first 50 characters when they click on your Pin", "People will usually see the first 50 characters when they click on your Pin", "pinbuilder.header.editModal.description.helper", undefined, true)})}),(0,g.jsx)(a.xu,{flex:"none",children:(0,g.jsx)(a.xv,{color:"default",size:"100",children:N.JO-(i||"").length})})]})})]}),(0,g.jsxs)(a.xu,{children:[(0,g.jsx)(a.__,{htmlFor:"pin-builder-edit-modal-link",children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",marginBottom:1,children:[(0,g.jsx)(a.xv,{children:this.props.i18n.bt("Link", "Link", "Label for bulk apply link text field", undefined, true)}),(n.has("link")||!!s)&&(0,g.jsx)(a.xu,{paddingX:1,children:(0,g.jsx)(a.JO,{accessibilityLabel:u,color:s?"error":"success",icon:s?"alert":"check-circle",size:12})})]})}),(0,g.jsx)(a.nv,{hasError:!!s,id:"pin-builder-edit-modal-link",onBlur:this.handleLinkBlur,onChange:this.handleLinkChange,onKeyDown:this.handleLinkChange,placeholder:void 0===o?this.props.i18n.bt("Multiple", "Multiple", "Placeholder text for link field with multiple links", undefined, true):void 0,size:"lg",value:o||""}),(0,g.jsx)(a.xu,{column:12,marginTop:1,minHeight:15,children:!!s&&(0,g.jsx)(a.xu,{column:12,display:"flex",justifyContent:"between",children:(0,g.jsx)(a.xv,{color:"error",size:"100",children:s})})})]})]})})}}function H(e){let{logContextEvent:t}=(0,R.v)(),i=(0,h.ZP)(),r=(0,d.Z)(),o=(0,n.useSelector)(M.p),s=(0,n.useSelector)(e=>(0,M.xA)(e).length),l=(0,n.useDispatch)();return(0,g.jsx)(U,{...e,i18n:i,ideaPinRenamingEnabled:r,logContextEvent:t,...o,numPins:s,onSubmit:e=>l((0,Z.setPinBuilderSharedData)(e))})}function V(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G extends r.Component{constructor(...e){super(...e),V(this,"state",{showModal:!1}),V(this,"handleShowModal",()=>{this.props.logContextEvent({event_type:101,component:13208,element:11325}),this.setState({showModal:!0})}),V(this,"handleHideModal",()=>{this.setState({showModal:!1})})}render(){let{showModal:e}=this.state;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Edit", "Edit", "Button to bulk edit Pin images", undefined, true),icon:"edit",iconColor:"gray",onClick:this.handleShowModal,size:"md"}),e&&(0,g.jsx)(H,{onDismiss:this.handleHideModal})]})}}function W(e){let{logContextEvent:t}=(0,R.v)(),i=(0,h.ZP)();return(0,g.jsx)(G,{...e,i18n:i,logContextEvent:t})}var $=i(19121),X=i(717615),Y=i(231947),q=i(464232),K=i(957161);function J(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Q extends r.Component{constructor(...e){super(...e),J(this,"state",{checked:!1}),J(this,"handleChange",({checked:e})=>{this.setState({checked:e})}),J(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props,{checked:i}=this.state;t({event:e,checked:i})})}render(){let{alertText:e,buttonText:t,headingText:i,id:r,onDismiss:n}=this.props,{checked:o}=this.state;return(0,g.jsx)(a.u_,{accessibilityModalLabel:this.props.i18n.bt("Alert modal", "Alert modal", "Alert modal to confirm action", undefined, true),heading:(0,g.jsx)(a.xu,{display:"flex",alignItems:"center",justifyContent:"center",marginTop:6,children:(0,g.jsx)(a.X6,{size:"500",children:i})}),onDismiss:n,footer:(0,g.jsxs)(a.xu,{display:"flex",marginStart:-1,marginEnd:-1,children:[(0,g.jsx)(a.xu,{flex:"grow",paddingX:1,children:(0,g.jsx)(a.zx,{fullWidth:!0,text:this.props.i18n.bt("Cancel", "Cancel", "Button to close alert modal", undefined, true),onClick:n,size:"lg"})}),(0,g.jsx)(a.xu,{flex:"grow",paddingX:1,children:(0,g.jsx)(a.zx,{fullWidth:!0,text:t,onClick:this.handleButtonClick,color:"red",size:"lg"})})]}),size:"sm",role:"alertdialog",children:(0,g.jsxs)(a.xu,{children:[(0,g.jsx)(a.xv,{align:"center",children:e}),(0,g.jsxs)(a.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginTop:4,children:[(0,g.jsx)(a.XZ,{checked:o,id:r,size:"sm",onChange:this.handleChange}),(0,g.jsx)(a.__,{htmlFor:r,children:(0,g.jsx)(a.xu,{paddingX:2,children:(0,g.jsx)(a.xv,{children:this.props.i18n.bt("Do not show this message again", "Do not show this message again", "Checkbox option to never show alert modal again", undefined, true)})})})]})]})})}}function ee(e){let t=(0,h.ZP)();return(0,g.jsx)(Q,{...e,i18n:t})}var et=i(395024);function ei(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class er extends r.Component{constructor(...e){super(...e),ei(this,"state",{showModal:!1}),ei(this,"handleShowModal",()=>{this.setState({showModal:!0})}),ei(this,"handleHideModal",()=>{this.setState({showModal:!1})}),ei(this,"handleButtonClick",()=>{let{onClickDelete:e,logContextEvent:t}=this.props,i=K.Z.getItem(q.Lj);t({event_type:101,component:13208,element:11327}),i?e():this.handleShowModal()}),ei(this,"handleAlertButtonClick",({checked:e})=>{let{onClickDelete:t}=this.props;e&&K.Z.setItem(q.Lj,!0),t()})}render(){let{showModal:e}=this.state;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Delete", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),bgColor:"transparent",icon:"trash-can",onClick:this.handleButtonClick,iconColor:"gray",size:"md"}),e&&(0,g.jsx)(ee,{alertText:this.props.i18n.bt("This will delete your entire Pin canvas. This action cannot be undone", "This will delete your entire Pin canvas. This action cannot be undone", "Warning message shown before Pin drafts are deleted", undefined, true),buttonText:this.props.i18n.bt("Delete", "Delete", "Button to bulk delete selected Pin drafts", undefined, true),headingText:this.props.i18n.bt("Are you sure?", "Are you sure?", "Alert modal to confirm action", undefined, true),id:"pin-builder-delete-menu-alert-modal",onButtonClick:this.handleAlertButtonClick,onDismiss:this.handleHideModal})]})}}function en(e){let{logContextEvent:t}=(0,R.v)(),i=(0,h.ZP)(),r=(0,n.useDispatch)(),o=(0,$.Z)(),s=o.isAuth&&o.isEmployee;return(0,g.jsx)(er,{...e,onClickDelete:()=>r((0,et.Z)({i18n:i,isEmployee:s})),i18n:i,logContextEvent:t})}var eo=i(264938);function es(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class el extends r.Component{constructor(...e){super(...e),es(this,"handleSelectAllClick",()=>{let{onSelectAll:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11323}),e()}),es(this,"handleClearAllClick",()=>{let{onClickClear:e,logContextEvent:t}=this.props;t({event_type:101,component:13208,element:11324}),e()}),es(this,"handlePublishClick",()=>{let{numSelected:e,onClickPublish:t,logContextEvent:i}=this.props;i({event_type:101,component:13208,element:11328,aux_data:{pin_builder_data:JSON.stringify({publish_count:e})}}),t()})}render(){let{allSelected:e,numSelected:t}=this.props;return(0,g.jsxs)(a.xu,{alignItems:"center",color:"default",display:"flex",height:"100%",justifyContent:"between",children:[(0,g.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,g.jsx)(a.xu,{paddingX:6,children:(0,g.jsx)(a.xv,{color:"default",children:(0,L.nk)(this.props.i18n.nbt(["{{ numSelected }} Pin selected", "{{ numSelected }} Pins selected"], t, "Number of Pins selected for bulk edit or save", true),{numSelected:t})})}),(0,g.jsx)(a.xu,{color:"secondary",height:32,width:1}),(0,g.jsx)(a.xu,{"data-test-id":"pin-builder-select-all",paddingX:4,children:(0,g.jsx)(a.zx,{color:"white",onClick:e?this.handleClearAllClick:this.handleSelectAllClick,text:e?this.props.i18n.bt("Deselect all", "Deselect all", "Button to deselect all Pin drafts for bulk actions", undefined, true):this.props.i18n.bt("Select all", "Select all", "Button to select all Pin drafts for bulk actions", undefined, true)})})]}),(0,g.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingX:5,children:[(0,g.jsx)(a.xu,{"data-test-id":"pin-builder-edit-selected",paddingX:1,children:(0,g.jsx)(W,{})}),(0,g.jsx)(a.xu,{"data-test-id":"pin-builder-delete-selected",paddingX:1,children:(0,g.jsx)(en,{})}),(0,g.jsx)(a.xu,{"data-test-id":"pin-builder-publish-all",paddingX:1,children:(0,g.jsx)(a.zx,{color:"red",name:"publish",onClick:this.handlePublishClick,text:this.props.i18n.bt("Publish", "Publish", "Button to publish all selected Pins", undefined, true)})})]}),(0,g.jsx)(a.xu,{color:"secondary",height:32,width:1}),(0,g.jsx)(a.xu,{paddingX:6,children:(0,g.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Cancel changes", "Cancel changes", "Button to deselect all Pins", undefined, true),bgColor:"transparent",icon:"cancel",iconColor:"gray",onClick:this.handleClearAllClick,size:"md"})})]})]})}}function ea(e){let{logContextEvent:t}=(0,R.v)(),i=(0,h.ZP)(),r=(0,n.useDispatch)(),o=(0,$.Z)(),s=(0,X.Z)(),l=(0,Y.lJ)(o,s),a=o.isAuth?o.id:"",d=o.isAuth?o.country:"",c=o.isAuth&&o.isPartner,u=(0,n.useSelector)(({pinbuilder:e})=>e.selectedPinDraftIds.length),p=(0,n.useSelector)(({pinbuilder:{pinDrafts:e,pinDraftIds:t,selectedPinDraftIds:i}})=>t.filter(t=>!N.x1.includes(e[t].status)).length===i.length);return(0,g.jsx)(el,{...e,allSelected:p,i18n:i,logContextEvent:t,numSelected:u,onClickClear:()=>r((0,Z.clearSelectedPinBuilderPinDrafts)()),onClickPublish:()=>r((0,eo.Z)({country:d,i18n:i,isPartner:c,logContextEvent:t,orbacSubjectId:l,userId:a})),onSelectAll:()=>r((0,Z.selectAllPinBuilderPinDrafts)())})}var ed=i(347700),ec=i(665866),eu=i(780280),eh=i(938999);function ep(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let e_={checked:{__style:{border:"solid 2px #e60023"}},unchecked:{__style:{border:"dashed 2px #767676"}}};class eg extends r.Component{constructor(...e){super(...e),ep(this,"state",{isHovering:!1}),ep(this,"handleMouseEnter",()=>{this.setState({isHovering:!0})}),ep(this,"handleMouseLeave",()=>{this.setState({isHovering:!1})})}render(){let{checked:e,onClick:t}=this.props,{isHovering:i}=this.state;return(0,g.jsx)(a.xu,{rounding:"circle",color:e?"primary":"transparent",dangerouslySetInlineStyle:e?e_.checked:e_.unchecked,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:(0,g.jsx)(a.hU,{accessibilityLabel:e?this.props.i18n.bt("Deselect Pin", "Deselect Pin", "Button to deselect Pin from bulk editing", undefined, true):this.props.i18n.bt("Select Pin", "Select Pin", "Button to select Pin from bulk editing", undefined, true),bgColor:"transparent",icon:e||i?"check":void 0,iconColor:e?"white":"gray",onClick:t,size:"md"})})}}function em(e){let t=(0,h.ZP)();return(0,g.jsx)(eg,{...e,i18n:t})}var ef=i(327096);function ex(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eb=new a.H3([new a.Ry(N.v9)]);class ey extends r.Component{constructor(...e){super(...e),ex(this,"pinDraftRef",(0,r.createRef)()),ex(this,"handleSelectPinDraft",()=>{let{selectPinDraft:e,logContextEvent:t}=this.props;t({event_type:101,component:13308,element:11332}),e()}),ex(this,"getCallout",()=>({error:{title:this.props.i18n.bt("Product tagging limit reached", "Product tagging limit reached", "pinbuilder.productTagging.error", undefined, true),message:this.props.i18n.bt("To add another item, remove one or more tagged products", "To add another item, remove one or more tagged products", "pinbuilder.productTagging.error.instructions", undefined, true)},warning:{title:this.props.i18n.bt("Products will be deleted", "Products will be deleted", "pinbuilder.carousel.warningHeader", undefined, true),message:this.props.i18n.bt("Your tagged products will be deleted if you add a carousel image", "Your tagged products will be deleted if you add a carousel image", "pinbuilder.carousel.warning", undefined, true)}})),ex(this,"handleClick",()=>{let{deselectPinDraft:e,pinDraftId:t,selectedPinDraftIds:i,status:r}=this.props,n=!N.x1.includes(r);i.includes(t)?e():n&&this.handleSelectPinDraft()})}componentDidMount(){this.pinDraftRef.current&&!this.props.skipScrolling&&this.pinDraftRef.current.scrollIntoView({behavior:"smooth",block:"start"})}render(){let{numPinDrafts:e,pinDraftId:t,selectedPinDraftIds:i,status:r,setStlCallout:n,stlCallout:o,requestContext:{isRTL:s}}=this.props,{showCallout:l,type:d}=o||{},c=i.includes(t),u=i.length,h={__style:{top:"20px",opacity:c?void 0:.6,transition:`transform 250ms ${N.rc}`,transform:u>0?"scale(2)":void 0,...s?{left:"-60px",transformOrigin:"right center"}:{right:"-60px",transformOrigin:"left center"}}},p={backgroundColor:"rgba(255,255,255,0.7)",borderRadius:16,height:"100%",width:"100%",zIndex:"publishing"===r?N.v9:void 0},_="publishing"===r||"uploading"===r&&1===e,m=!N.x1.includes(r),f=this.getCallout();return(0,g.jsxs)(a.xu,{ref:this.pinDraftRef,"data-group-id":"pin-builder-pin-draft","data-test-id":`pin-builder-pin-draft-${t}`,paddingY:3,children:[(0,g.jsxs)(a.xu,{position:"relative",children:[(0,g.jsx)(ed.ZP,{pinDraftId:t}),e>1&&m&&(ec.Z.enabled("multi_pin")||ec.Z.enabled("multi_pin_pinner"))&&(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:h,"data-test-id":"pin-draft-select",position:"absolute",children:(0,g.jsx)(em,{checked:c,onClick:this.handleClick})}),(u>0||_)&&(0,g.jsx)(a.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eb,children:(0,g.jsx)(eh.Z,{onClick:this.handleClick,selected:c,style:p,children:_&&(0,g.jsx)(a.kC,{alignItems:"center",height:"100%",justifyContent:"center",children:(0,g.jsx)(a.$j,{accessibilityLabel:this.props.i18n.bt("Saving Pin...", "Saving Pin...", "Spinner accessibility label when saving the pin", undefined, true),show:!0})})})})]}),l&&d&&(0,g.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{marginBottom:"30px"}},position:"absolute",width:N.of,children:(0,g.jsx)(a.ci,{dismissButton:{accessibilityLabel:this.props.i18n.bt("Dismiss banner", "Dismiss banner", "pinbuilder.error.dismissButton", undefined, true),onDismiss:n},iconAccessibilityLabel:this.props.i18n.bt("Error icon", "Error icon", "pinBuilder.taggedObjects.error", undefined, true),message:f[d].message,title:f[d].title,type:d})})]})}}function ev(e){let{logContextEvent:t}=(0,R.v)(),i=(0,h.ZP)(),{shopTheLook:r,setStlCallout:o}=(0,ef.f)(),{pinDraftId:s,skipScrolling:l}=e,a=(0,n.useDispatch)(),{pinDraftIds:d,pinDrafts:c,selectedPinDraftIds:u}=(0,n.useSelector)(({pinbuilder:e})=>e),{stlCallout:p}=r;return(0,g.jsx)(ey,{...e,deselectPinDraft:()=>a((0,Z.deselectPinBuilderPinDraft)(s)),i18n:i,logContextEvent:t,numPinDrafts:d.length,requestContext:(0,eu.B)(),selectedPinDraftIds:u,selectPinDraft:()=>a((0,Z.selectPinBuilderPinDraft)(s)),setStlCallout:()=>o({showCallout:!1}),skipScrolling:l,status:c[s].status,stlCallout:p})}var eP=i(869636);function eS({setPinDraftRef:e}){(0,eP.Z)(1000287),(0,eP.Z)(1000288);let t=(0,n.useSelector)(M.VK),i=(0,n.useSelector)(({pinbuilder:e})=>e.selectedPinDraftIds.length>0),r={__style:{transformOrigin:"top center",transition:`transform 250ms ${N.rc}, height 250ms ${N.rc}`,transform:i?"scale(0.5)":void 0,height:i?"50%":"100%"}};return(0,g.jsx)(a.xu,{dangerouslySetInlineStyle:r,children:(0,g.jsx)(a.xu,{alignItems:"center",direction:"column",display:"flex",paddingY:7,children:(0,g.jsx)(a.xu,{children:(0,g.jsx)(a.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",children:(0,g.jsx)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:t.map(i=>(0,g.jsx)(a.xu,{ref:t=>e(i,t),children:(0,g.jsx)(ev,{pinDraftId:i,skipScrolling:1===t.length})},i))})})})})})}var eA=i(430957),ew=i(448994);let eE={__style:{borderRadius:2}};class eI extends r.Component{constructor(...e){var t,i,r;super(...e),t="handleAddDraftClick",i=()=>{let{addPinDraft:e,location:t,logContextEvent:i}=this.props;i({event_type:101,component:13395,element:11329});let{board:r,boardSection:n}=t.state||{},o=r?{selectedItem:{boardId:r.id,title:n?n.title:r.name,...n?{sectionId:n.id}:{}}}:{};e(o)},(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{disabled:e,isAddPinDraftRemoved:t,pinDraftIds:i,pinDraftRefs:r,scrollPosition:n,requestContext:{isRTL:o}}=this.props,s=i.length;return(0,g.jsxs)(a.xu,{"data-test-id":"pin-builder-controls",direction:"column",display:"flex",height:"100%",children:[!t&&(0,g.jsx)(a.xu,{"data-tutorial-id":"pin-builder-batch-create",flex:"none",padding:4,children:(0,g.jsx)("button",{disabled:e,onClick:this.handleAddDraftClick,style:{backgroundColor:"#fff",border:0,borderRadius:8,boxSizing:"border-box",cursor:e?"default":"pointer",height:60,outline:"none",opacity:e?.5:void 0,padding:0,width:40},children:(0,g.jsx)(a.xu,{alignItems:"center","data-test-id":"pin-builder-add-draft",display:"flex",justifyContent:"center",rounding:2,children:(0,g.jsx)(a.JO,{accessibilityLabel:this.props.i18n.bt("Create new Pin", "Create new Pin", "Button to add another Pin draft", undefined, true),color:e?"subtle":"default",icon:"add"})})})}),(0,g.jsx)(a.xu,{color:"lightWash",height:1,marginEnd:2,marginStart:2}),(0,g.jsx)(a.kC,{alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"start",overflow:"auto",children:(0,g.jsx)(a.xu,{marginTop:3,children:i.map((e,t)=>(0,g.jsxs)(a.xu,{paddingX:4,paddingY:1,position:"relative",children:[(0,g.jsx)(eA.Z,{pinDraftId:e,pinDraftRefs:r}),Math.min(Math.floor(n*s),s-1)===t&&(0,g.jsx)(a.xu,{bottom:!0,color:"dark",dangerouslySetInlineStyle:eE,left:!o,marginBottom:1,marginTop:1,position:"absolute",right:o,top:!0,width:4})]},e))})})]})}}function ej(e){let{isAddPinDraftRemoved:t}=e,{logContextEvent:i}=(0,R.v)(),s=(0,h.ZP)(),a=(0,$.Z)(),d=a.isAuth&&a.isEmployee,c=(0,n.useDispatch)(),{pinDrafts:u,pinDraftIds:p,selectedPinDraftIds:_}=(0,n.useSelector)(({pinbuilder:e})=>e);return(0,g.jsx)(eI,{...e,addPinDraft:(0,r.useCallback)(e=>c((0,ew.Z)({i18n:s,isEmployee:d,pinDraft:e,pinDraftId:(0,l.Z)(),storyPinPublishStopwatch:void 0})),[]),disabled:_.length>0||p.filter(e=>"succeeded"!==u[e].status).length>=N.TK,i18n:s,isAddPinDraftRemoved:t,location:(0,o.TH)(),logContextEvent:i,pinDraftIds:p,requestContext:(0,eu.B)()})}var eC=i(377184),eT=i(918301),eD=i(332611),eO=i(70943),ez=i(558068),eR=i(454074),ek=i(584595),eL=i(773285),eN=i(784590),eB=(i(6663),i(826067)),eZ=i(323716),eM=i(388619),eF=i(954931),eU=i(508847),eH=i(566101),eV=i(829407),eG=i(77891),eW=i(939853),e$=i(676553),eX=i(495794),eY=i(111284),eq=i(833991),eK=i(977558),eJ=i(725108),eQ=i(562559),e0=i(965900),e1=i(944546);function e2({onStart:e}){let t=(0,h.ZP)(),[i,n]=(0,r.useState)(!1),{appUI:{appInFocus:o}}=(0,e0.I)();(0,r.useEffect)(()=>{i&&e&&e()},[i,e]);let s=[t.bt("Combine up to 5 images", "Combine up to 5 images", "Text describing maximum images can be combined", undefined, true),t.bt("Reorder images to make it yours", "Reorder images to make it yours", "Text describing reordering images", undefined, true),t.bt("Pick the best Pin size for your content", "Pick the best Pin size for your content", "Text describing changing Pin size", undefined, true)];return(0,g.jsxs)(a.xu,{bottom:!0,"data-test-id":"pinbuilder-education-layouts-screen",display:"flex",height:"100%",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,width:"100%",children:[(0,g.jsx)(a.xu,{color:"secondary",position:"relative",width:342,children:(0,g.jsx)(eQ.Z,{aspectRatio:i?342/474:0,appInFocus:o,captions:"",hlsConfig:{startLevel:e1.VS},isAutoPlay:!0,loop:!0,onReady:()=>n(!0),playing:!0,onPlay:()=>{},onPlayError:()=>{},src:"https://v1.pinimg.com/videos/mc/hls/7f/20/86/7f20869b2522dca00ebf1f745313b90b.m3u8",volume:0})}),(0,g.jsx)(a.xu,{flex:"grow",display:"flex",alignItems:"center",paddingX:10,children:(0,g.jsxs)(a.xu,{children:[(0,g.jsx)(a.X6,{children:t.bt("Create a collage", "Create a collage", "A heading text for creating a collage Pin", undefined, true)}),(0,g.jsx)(a.xu,{paddingY:4,children:s.map((e,t)=>(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",paddingY:1,children:[(0,g.jsx)(a.xu,{color:"selected",display:"flex",flex:"none",rounding:"circle",width:8,height:8}),(0,g.jsx)(a.xu,{paddingX:2,children:(0,g.jsx)(a.xv,{children:(0,g.jsx)("span",{className:"deprecatedTextSizeXL",children:e})})})]},`layouts-screen-point-${t}`))})]})})]})}var e8=i(456463),e3=i(537929),e4=i(305782),e6=i(490072),e5=i(919974);function e7(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let e9=new a.H3([new a.Ry(eK.fe)]);class te extends r.Component{constructor(...e){super(...e),e7(this,"pinDraftRefs",new Map),e7(this,"setPinDraftRef",(e,t)=>{this.pinDraftRefs.set(e,t)})}componentDidUpdate(){let{footerContext:{zIndex:e,setZIndex:t},showInProductEducationExperience:i,viewEducation:r}=this.props,[n,o]=this.context;"number"==typeof e&&n&&n!==eW.I&&t(null),i&&!n&&(o(N.Lc),r())}render(){let{children:e}=this.props,[t,i]=this.context;return e({educationId:{value:t,set:i},pinDraftRefs:{set:this.setPinDraftRef,value:this.pinDraftRefs}})}}function tt({advertiser:e,externalButtonQuery:t,headerHeight:i,inStlToolingExp:s,pinDraftType:c,requestContext:u,providerClassChildrenContext:{educationId:{value:p,set:_},pinDraftRefs:{value:m,set:f}}}){let x=(0,r.useRef)(null),{previous:b}=(0,ez.Hv)(),[y,v]=(0,r.useState)(!1),[P,S]=(0,r.useState)(0),w=(0,eq.YW)(),E=(0,h.ZP)(),j=(0,d.Z)(),{logContextEvent:C}=(0,R.v)(),T=(0,eD.be)(),D=(0,eD.Am)(),z=(0,$.Z)(),k=(0,n.useDispatch)(),L=(0,o.k6)(),B=(0,o.TH)(),F=(0,eN.Z)({name:"UserResource",options:{username:z.isAuth&&z.username,field_set_key:"profile"}}),{showEmailVerificationReminderModal:U}=(0,eT.y9)(),{checkExperiment:H}=(0,eL.F)(),{closeupImageSignature:V,entryPoint:G,showDisabledPinCreationBanner:W}=(0,n.useSelector)(e=>e.pinbuilder),Y=(0,n.useSelector)(e6.NW),q=(0,n.useSelector)(M.VK),K=q[0],J=K?Y[K]:null,Q=null==J?void 0:J.type,ee=z.isAuth&&z.isEmployee,{isRTL:et}=u;(0,r.useEffect)(()=>{q.some(e=>Y[e].apiErrorCode===ek.H9)&&H("require_email_verification_pin_create").anyEnabled&&(U(),q.forEach(e=>k((0,e4.lT)(e,null))))}),(0,eP.Z)(1000161);let ei=(0,n.useSelector)(e=>{var t;let i=K?(0,e6.nL)()(e,{pinDraftId:K}):null;if(null===i)return null;let r="story"===Q?e.pinbuilder.storyPinItems:e.pinbuilder.pinItems,n=r[i];return n&&(null===(t=n.media)||void 0===t?void 0:t.type)}),{setExtraContext:er}=(0,eP.Z)(1000135,{format_type:Q,media_type:ei}),en=(0,r.useRef)(ei);(0,r.useEffect)(()=>{en.current!==ei&&(en.current=ei,er({firstPinDraftMediaType:ei}))});let eo=(0,X.Z)(),es=eo&&eo.id,el=(0,r.useRef)("not_set");(0,r.useEffect)(()=>{let i;"story"===c?i="story_pin":t&&(i="offsite_pin_creation"),ec.Z.initialize({user:F.isLoaded?F.data:null,requestContext:u,viewer:z,location:B,advertiser:e,scenario:i,orbacActingAs:eo})},[F.isLoaded]),(0,r.useEffect)(()=>{if(el.current!==es||!Y){var e,i,r,n;el.current=es;let o=null===(e=B.state)||void 0===e?void 0:e.disableAddPinDraft;if(q.length>0||o)return;let s=null===(i=B.state)||void 0===i?void 0:i.board,a=null===(r=B.state)||void 0===r?void 0:r.boardSection,d=s||c?{selectedItem:s?{boardId:s.id,title:a?a.title:s.name,...a?{sectionId:a.id}:Object.freeze({}),ownerUsername:null==s?void 0:null===(n=s.owner)||void 0===n?void 0:n.username}:void 0,...c?{type:c}:{}}:void 0,u=(0,l.Z)();k((0,ew.Z)({i18n:E,isEmployee:ee,pinDraft:d,pinDraftId:u,storyPinPublishStopwatch:void 0}));let{tab:h,url:p}=(0,eM.Z)({url:(0,eZ.Z)()});if(H("web_bizhub_create_pin_from_website").anyEnabled&&p&&(k((0,e4.c8)(u,"scrape")),k((0,e4.f9)(u,p,null,""))),t){k((0,e4.c8)(u,"external")),k((0,e4.e5)(u,t.method));let e={height:1,width:1,id:(0,l.Z)(),sourceURL:t.url,src:t.media,type:"webImage"};k((0,e4.dj)(u,e)),ec.Z.enabled("offsite_pin_creation_multi_select")?k((0,e4.f9)(u,t.url,null,t.media)):k((0,e4.q0)(u,"external",h===N.ro?"IDEA_PIN":"PIN"))}}}),(0,eV.Z)(()=>(s&&C({event_type:13,component:13308,view_type:212,aux_data:{...V?{image_signature:V}:{},entry_point_source:G}}),"story"===c&&C({event_type:13,view_type:226,view_parameter:3228}),t&&(window.opener||"bookmarklet"===t.method)&&(window.innerHeight<eC.CX||window.innerWidth<eC.N$)&&window.resizeTo(eC.N$,eC.CX),()=>{k((0,Z.clearPinBuilderPinDrafts)())})),(0,eV.Z)(()=>{let{tab:e}=(0,eM.Z)({url:(0,eZ.Z)()});if(e===N.ro){let e=(0,l.Z)();k((0,Z.clearPinBuilderPinDrafts)()),k((0,ew.Z)({i18n:E,isEmployee:ee,pinDraft:void 0,pinDraftId:e,storyPinPublishStopwatch:void 0})),k((0,e4.c8)(e,"scrape"))}});let ed=0===b.length,eu=q.length>0,eh=(0,r.useRef)(eu);(0,r.useEffect)(()=>{if(eh.current!==eu&&(eh.current=eu,!eu)){let{crossSite:e,redirUrl:t}=(0,eB.mB)(B.search);e?window.history.back():t&&(0,eH.Z)({url:t})&&(0,eF.Z)(t)?L.push((0,eU.Z)({url:t})):ed?L.push("/"):L.goBack()}});let ep=(0,n.useSelector)(e=>e.pinbuilder.selectedPinDraftIds.length>0),e_=ec.Z.enabled("multi_pin")||ec.Z.enabled("multi_pin_pinner"),eg=q.reduce((e,t)=>null!=e?e:Y[t].apiError,null),{tab:em}="undefined"!=typeof window&&(0,eM.Z)({url:(0,eZ.Z)()})||{};return(0,g.jsxs)(r.Fragment,{children:[ep&&(0,g.jsx)(a.xu,{height:i,left:!0,position:"fixed",right:!0,top:!0,zIndex:e9,children:(0,g.jsx)(ea,{})}),(0,g.jsxs)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{top:i}},direction:"column",display:"flex",left:!0,position:"fixed",right:!0,children:[null,(0,g.jsx)(a.xu,{flex:"none",children:eg?(0,g.jsx)(eJ.Z,{errorMessage:eg,primaryAction:(0,g.jsx)(a.hU,{accessibilityLabel:E.bt("Close error banner", "Close Error Banner", "Accessibility label to close the error banner", undefined, true),icon:"cancel",iconColor:"white",onClick:()=>{q.forEach(e=>k((0,e4.lT)(e,null)))},size:"sm"})}):(0,g.jsx)(eO.default,{placementId:1000161})}),(0,g.jsxs)(a.xu,{color:"secondary","data-test-id":"pin-builder",flex:"grow",height:"100%",onDragEnter:()=>{(ec.Z.enabled("multi_pin")||ec.Z.enabled("multi_pin_pinner"))&&v(!0)},onDragLeave:()=>v(!1),onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),v(!1),ec.Z.enabled("multi_pin")||ec.Z.enabled("multi_pin_pinner")){let t=(0,eR.Z)(e.dataTransfer);(0,eG.Z)({i18n:E,ideaPinRenamingEnabled:j,files:t,options:{allowVideo:ec.Z.enabled("video")}}).then(e=>{let t=e.reduce((e,t)=>"error"!==t.type?[...e,t]:e,[]);if(t.length>0){let e=z.isAuth?z.id:"",i=z.isAuth?z.country:"";k((0,e3.Z)({assets:t,checkExperiment:H,country:i,i18n:E,ideaPinRenamingEnabled:j,inCoverImageQualityExp:!1,isEmployee:ee,logContextEvent:C,userId:e}))}})}},position:"relative",children:[(0,g.jsx)(a.xu,{display:"visuallyHidden",children:(0,g.jsx)(a.X6,{accessibilityLevel:1,children:E.bt("Pin builder", "Pin Builder", "pinBuilder.heading", undefined, true)})}),W&&(0,g.jsx)(a.xu,{"data-test-id":"disable-banner",marginStart:7,marginTop:5,paddingX:3,children:(0,g.jsx)(e5.Z,{})}),(0,g.jsx)(a.xu,{ref:x,dangerouslySetInlineStyle:{__style:{border:`4px solid ${y?"#0074e8":"transparent"}`}},height:"100%",onScroll:e=>{let{clientHeight:t,scrollHeight:i,scrollTop:r}=e.currentTarget;S(r/(i-t))},overflow:"auto",children:(0,g.jsx)(eS,{setPinDraftRef:f})}),e_&&(0,g.jsx)(a.xu,{bottom:!0,left:!et,position:"absolute",right:et,top:!0,children:(0,g.jsx)(ej,{isAddPinDraftRemoved:em===N.ro,pinDraftRefs:m,scrollPosition:P})})]})]}),p===N.Lc&&(0,g.jsx)(eX.Z,{containsHlsVideoComponent:!!ec.Z.enabled("layouts"),onComplete:()=>{var e;null===(e=x.current)||void 0===e||e.scroll(0,0),_(N.aD)},onDismiss:()=>{_(eW.I),w.setZIndex(eq.HW),k(D(1000135,501657))},steps:[{id:"pinbuilder-welcome",element:(0,g.jsx)(O,{})},{id:"pinbuilder-editing",element:(0,g.jsx)(A,{})},...ec.Z.enabled("layouts")?[{id:"pinbuilder-layout",element:(0,g.jsx)(e2,{})}]:[],{id:"pinbuilder-publish",element:(0,g.jsx)(I,{})}]}),p===N.aD&&(0,g.jsx)(eY.Z,{onComplete:()=>{_(eW.I),w.setZIndex(eq.HW),k(T(1000135,501657))},onDismiss:()=>{_(eW.I),w.setZIndex(eq.HW),k(D(1000135,501657))},steps:(0,e8.Z)([{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-title-and-description"]',id:"guide-pin-builder-title",heading:E.bt("Title & description", "Title & description", "Heading text describing the title and description step when creating Pins", undefined, true),description:E.bt("Add a title and description to help tell your story. People see this in their home feed, in search and when they tap on your Pin.", "Add a title and description to help tell your story. People see this in their home feed, on search and when they tap on your Pin.", "Text describing the reason to add title and description to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-destination-link"]',id:"guide-pin-builder-link",heading:E.bt("Destination link", "Destination link", "Heading text describing the destination link step when creating Pins", undefined, true),description:E.bt("Pick where people land when they tap on your Pin. Make sure it’s relevant!", "Pick where people land when they tap on your Pin. Make sure it’s relevant!", "Text describing the reason to add a destination link to Pins when creating them", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-media-draft-view"]',id:"guide-pin-builder-media-draft-view",heading:E.bt("Edits", "Edits", "Heading text describing the ability to edit Pins while creating them", undefined, true),description:E.bt("Upload an image or video, then personalise it by cropping, trimming or adding logos and text", "Upload an image or video, then personalize it by cropping, trimming or adding logos and text", "Text describing the ability to edit images and videos when creating Pins", undefined, true),padding:0},{selector:'[data-test-id="pin-builder-draft"]:first-of-type [data-tutorial-id="pin-builder-batch-create"]',id:"guide-pin-builder-batch-create",heading:E.bt("Batch create", "Batch create", "Heading text describing the ability to create multipe Pins at once", undefined, true),description:E.bt("Lots to say? Add more images and videos to create multiple Pins in one go.", "Lots to say? Add more images and videos to create multiple Pins at once.", "Text describing the ability to create multiple Pins at once", undefined, true),padding:0}])})]})}function ti(e){let t=(0,n.useDispatch)(),i=(0,eq.YW)(),{search:r}=(0,o.TH)(),{tab:s}=(0,eB.mB)(r),l=(0,eD.Ig)(),a=(0,n.useSelector)(({experiences:e,pinbuilder:{pinDraftIds:t,pinDrafts:i}})=>{let r=t[0],n=r?i[r]:null,o=e&&e[1000135];return(null==n?void 0:n.type)!=="story"&&s!==N.ro&&(null==o?void 0:o.experience_id)===501657});return(0,g.jsx)(te,{footerContext:i,showInProductEducationExperience:a,viewEducation:()=>t(l(1000135,501657)),children:t=>(0,g.jsx)(tt,{...e,providerClassChildrenContext:t})})}e7(te,"contextType",e$.Z);var tr=i(293759),tn=i(699222),to=i(773515),ts=i(81636),tl=i(319915),ta=i(53987),td=i(248327),tc=i(418614),tu=i(947599),th=i(858416),tp=i(697335),t_=i(798477);let tg=(0,r.lazy)(()=>Promise.all([i.e(72586),i.e(48937),i.e(86352),i.e(22487)]).then(i.bind(i,616641)));function tm(){let e=(0,o.k6)(),t=(0,o.TH)(),i=(0,$.Z)(),r=(0,n.useSelector)(M.vd),l=(0,n.useDispatch)(),{checkExperiment:a}=(0,eL.F)(),d=(0,tn.Z)(),c=(0,tp.t)(),u=(0,eu.B)(),h=(0,ta.mY)(t)?"story":null;(0,ts.Q)({view_type:212}),(0,tc.Z)({name:"UserResource",getOptions:({advertiser:e,user:t})=>({field_set_key:"grid_item",user_id:(null==e?void 0:e.owner_user_id)||t.id||""})}),(0,tc.Z)({name:"UserResource",getOptions:({user:e})=>({field_set_key:"profile",username:e.username||""})}),(0,tc.Z)({name:"PinResource",getOptions:({routeData:e})=>({field_set_key:"detailed",id:e.params.pin_id}),disableFetch:({routeData:e})=>!e.params.pin_id});let p=(0,X.Z)(),{anyEnabled:_}=a("web_m10n_business_access_orbac_www"),m=(0,tr.Z)({isAdsManager:!1}),f=(0,s.Z)({bypass:m,skipActivation:!1}),x=(0,n.useSelector)(({feeds:e})=>e),b=(0,Y.nl)(i,p)&&"ad_creation"!==ec.Z.scenario()&&a("web_stl_tooling").anyEnabled,y=(0,eB.mB)(t.search),v=null;try{v=(0,to.Z)(y)?{...y,media:decodeURIComponent(y.media),url:decodeURIComponent(y.url)}:null}catch(e){}let P=i.isAuth?i.id:null,S=_?(0,Y.lJ)(i,p):"",A=S||P,w=()=>{let e=A?x[`storyPinData:${A}`]:[];return(null!=e?e:[]).map(({id:e})=>e)};return"story"===h?(0,g.jsx)(tl.Z,{name:"SafeSuspense_PinBuilderPage_StoryboardComponent",children:(0,g.jsx)(tu.Z,{children:(0,g.jsx)(tg,{advertiser:u.advertiser,onLegacyLayoutDismiss:({draftStage:e,pinDraftId:t})=>{let i=w();"upload"===e&&i.length>1||0===i.length?l((0,t_.Z)(t)):setTimeout(()=>{l((0,td.U)("StoryPinDraftsResource",{options:{redux_normalize_feed:!0,userId:A,orbacSubjectId:S}})),window.location.reload()},2e3)},onSuccess:({pinId:t,scheduledDate:n,scheduledTime:o})=>{if(r.length>0&&l({type:"PIN_BUILDER_DELETE_PIN_DRAFT",payload:{pinDraftId:r[0]}}),n&&o)d({pinId:t,showActionForScheduledPin:!m}),m&&e.push(i.isAuth?`/${i.username}/scheduled-pins/`:"/");else{if(f&&m){d({pinId:t});return}e.push(`/pin/${t}`)}},orbacSubjectId:S,requestContext:u,userId:A})})}):(0,g.jsx)(th.Wr,{children:(0,g.jsx)(ti,{advertiser:u.advertiser,headerHeight:c,inStlToolingExp:b,pinDraftType:h,requestContext:u,externalButtonQuery:v})})}},709622:(e,t,i)=>{"use strict";i.d(t,{Az:()=>m,DI:()=>y,Gl:()=>S,Hl:()=>T,Kb:()=>z,NA:()=>r,NG:()=>d,OC:()=>j,Pq:()=>E,QM:()=>_,Sk:()=>P,UF:()=>x,Uo:()=>I,WF:()=>l,Xm:()=>c,Zf:()=>o,_D:()=>O,_N:()=>p,ac:()=>s,e_:()=>h,gf:()=>f,hf:()=>A,i_:()=>a,jY:()=>b,ni:()=>v,qg:()=>u,rX:()=>n,vX:()=>w,wO:()=>D,yG:()=>g,yq:()=>C});let r="10",n=1,o=365,s=64,l=8,a=9,d=11,c=15,u=16,h=17,p=18,_=19,g=20,m=1e6,f=m,x="US";function b(e){let t="USD",i="$";switch(e){case"AT":case"BE":case"DE":case"ES":case"FI":case"FR":case"IE":case"IT":case"NL":case"PT":t="EUR",i="€";break;case"AU":t="AUD",i="$";break;case"CA":t="CAD",i="$";break;case"CH":t="CHF",i="CHF";break;case"DK":t="DKK",i="kr";break;case"GB":t="GBP",i="\xa3";break;case"NO":t="NOK",i="kr";break;case"NZ":t="NZD",i="$";break;case"SE":t="SEK",i="kr"}return[t,i]}let y={AU:{budget:1,duration:"10"},CA:{budget:1,duration:"10"},CZ:{budget:80,duration:"10"},FR:{budget:1,duration:"10"},GB:{budget:1,duration:"10"},IE:{budget:1,duration:"10"},NZ:{budget:1,duration:"10"},US:{budget:3,duration:"10"},AT:{budget:1,duration:"10"},DE:{budget:1,duration:"10"},IT:{budget:1,duration:"10"},ES:{budget:1,duration:"10"},NL:{budget:1,duration:"10"},PT:{budget:1,duration:"10"},BE:{budget:1,duration:"10"},CH:{budget:1,duration:"10"},SE:{budget:10,duration:"30"},NO:{budget:10,duration:"30"},DK:{budget:10,duration:"30"},FI:{budget:1,duration:"10"}},v={AU:{budget:10,duration:"10"},CA:{budget:9,duration:"10"},CZ:{budget:150,duration:"10"},FR:{budget:7,duration:"10"},GB:{budget:5,duration:"10"},IE:{budget:7,duration:"10"},NZ:{budget:10,duration:"10"},US:{budget:7,duration:"10"},AT:{budget:7,duration:"10"},DE:{budget:7,duration:"10"},IT:{budget:7,duration:"10"},ES:{budget:7,duration:"10"},NL:{budget:7,duration:"10"},PT:{budget:7,duration:"10"},BE:{budget:7,duration:"10"},CH:{budget:7,duration:"10"},SE:{budget:70,duration:"30"},NO:{budget:70,duration:"30"},DK:{budget:50,duration:"30"},FI:{budget:7,duration:"10"}},P={AT:1,AU:1,BE:1,CA:1,CH:1,CZ:11,DE:1,ES:1,DK:1,FI:1,FR:1,GB:1,IE:1,IT:1,NO:1,NZ:1,NL:1,PT:1,SE:1,US:1},S={PIN_SELECTION_MODAL:"PIN_SELECTION_MODAL",BUSINESS_FORM:"QUICK_PROMOTE_BUSINESS_FORM",BILLING_FORM:"QUICK_PROMOTE_BILLING_FORM",SUCCESS_MODAL:"SUCCESS_MODAL",ERROR_MODAL:"ERROR_MODAL",TAG_MODAL:"TAG_MODAL",GDPR_MODAL:"GDPR_MODAL"},A="QUICK_PROMOTE_PAGE",w=[S.GDPR_MODAL,S.PIN_SELECTION_MODAL,A,S.BUSINESS_FORM,S.BILLING_FORM,S.SUCCESS_MODAL,S.ERROR_MODAL],E={NARROW:"NARROW",MEDIUM:"MEDIUM",WIDE:"WIDE"},I=e=>e>=1&&e<=2,j="qp-fac-education-id",C="qp-fac-modal-education-id",T={CONSIDERATION:"CONSIDERATION",WEB_CONVERSION:"WEB_CONVERSION",CATALOG_SALES:"CATALOG_SALES"},D={PINS:0,PRODUCT_GROUPS:1,BOARDS:2,SELECTED:3,SEARCH_RESULTS:4},O={MOST_RECENT:"RECENT",PROMOTED_PINS:"PROMOTED"},z=300},596505:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(693967),o=i.n(n),s=i(883119),l=i(898781),a=i(785893);function d(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=()=>{};class u extends r.Component{constructor(e){super(e),d(this,"setValue",e=>{let t={selected:e};this.fireChangeEvent(t),this.setState(t),this.handleClose()}),d(this,"handleMouseDown",e=>{("mousedown"!==e.type||0===e.button)&&(this.isOpen?this.handleClose():this.handleOpen())}),d(this,"handleOpen",()=>{this._shouldManageOwnState?this.setState({isOpen:!0}):this.props.onOpen()}),d(this,"handleClose",()=>{this._shouldManageOwnState?this.setState({isOpen:!1}):this.props.onClose()}),this._shouldManageOwnState=e.onOpen===c&&e.onClose===c,this.state={selected:e.value,isOpen:!1},this.mounted=!0}static getDerivedStateFromProps(e,t){return e.value&&e.value!==t.selected?{selected:e.value}:null}componentDidUpdate(){this.mounted&&this.isOpen&&this.scrollItemIntoView(this.selectedOption)}get isOpen(){return this._shouldManageOwnState?!!this.state.isOpen:!!this.props.isOpen}scrollItemIntoView(e){let{menu:t}=this;t&&e&&(e.offsetTop>t.scrollTop+t.offsetHeight||e.offsetTop<t.scrollTop)&&(t.scrollTop=e.offsetTop-t.offsetTop)}fireChangeEvent(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}renderOption(e){let t=e===this.state.selected,i=o()({ReactDropdown__option:!0,"ReactDropdown__option--selected":t}),r=(0,a.jsx)("div",{className:i,onClick:()=>this.setValue(e),onMouseDown:()=>this.setValue(e),ref:t?e=>{this.selectedOption=e}:null,role:"button",tabIndex:"0",children:e.label},e.value);return r}renderMenu(e=[]){let t=e.map(e=>{if("group"!==e.type)return this.renderOption(e);{var t;let i=(0,a.jsx)("div",{className:"title",children:e.name});return(0,a.jsxs)("div",{className:"group",children:[i,null===(t=e.items)||void 0===t?void 0:t.map(e=>this.renderOption(e))]},e.name)}});return t.length?t:(0,a.jsx)("div",{className:"ReactDropdown--noresults",children:this.props.i18n.bt("No options found", "No options found", " - ", undefined, true)})}render(){let{isOpen:e}=this,t=o()({ReactDropdown:!0,"ReactDropdown--open":e}),i=o()({ReactDropdown__control:!0,"ReactDropdown__control--advertiserDropdown":this.props.isAdvertiserDropdown}),r=null;return e&&(r=(0,a.jsx)("div",{className:"ReactDropdown__menu",ref:e=>{this.menu=e},children:this.renderMenu(this.props.options)})),(0,a.jsxs)("div",{className:t,children:[(0,a.jsx)("div",{className:i,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown,children:(0,a.jsxs)("div",{className:"ReactDropdown__placeholder",children:[this.state.selected.label,(0,a.jsx)("span",{className:"caret",children:(0,a.jsx)(s.JO,{accessibilityLabel:this.props.i18n.bt("see options", "see options", "accessible label for dropdown arrow", undefined, true),color:"default",icon:"arrow-down",size:18})})]})}),r]})}}d(u,"defaultProps",{isAdvertiserDropdown:!1,isOpen:!1,onChange:c,onClose:c,onOpen:c,options:[],value:{label:"Select...",value:""}});let h=function(e){let t=(0,l.ZP)();return(0,a.jsx)(u,{...e,i18n:t})}},580189:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(170168);let n={0:r.C0,3:r.vI,4:r.YD};function o({currentSiteType:e,destinationSiteType:t,inputPath:i}){let r=Object.keys(n).includes(String(e))&&Object.keys(n).includes(String(t)),o="/"===i[0]?i:`/${i}`;return r&&t!==e?`${n[t]}${o}`:o}},151416:(e,t,i)=>{"use strict";i.d(t,{V3:()=>s,e_:()=>n,lE:()=>o});var r=i(425288);let{Provider:n,Consumer:o,useHook:s}=(0,r.Z)("pinBuilderContext",{shouldRenderPinEditorStandalone:!1,openHelpTextInNewWindow:!1,allowMultiplePins:!0,allowCarouselPin:!0})},916655:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(883119),o=i(407043),s=i(898781),l=i(454074),a=i(531245),d=i(281139),c=i(785893);let u={default:{backgroundImage:"linear-gradient(to left, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.03) 50%, rgba(0, 0, 0, 0))"},drag:{backgroundImage:"linear-gradient(to left, rgba(74, 144, 226, 0), rgba(74, 144, 226, 0.03) 50%, rgba(74, 144, 226, 0))"},error:{backgroundImage:"linear-gradient(to left, rgba(230, 0, 35, 0), rgba(230, 0, 35, 0.03) 50%, rgba(230, 0, 35, 0))"}};function h({addAssets:e,errorMessage:t,imageOnly:i,isDeprecateCoverExpEnabled:h=!1}){let{logContextEvent:p}=(0,o.v)(),_=(0,s.ZP)(),[g,m]=(0,r.useState)(!1),f=(0,r.useRef)(!1);(0,r.useEffect)(()=>(f.current=!0,()=>{f.current=!1}));let x=h?(0,c.jsx)(n.xu,{padding:5,children:(0,c.jsx)(n.xv,{color:"subtle",size:"100",children:_.bt("Supports PNG, JPG, GIF up to 10 MB", "Supports PNG, JPG, GIF up to 10MB", "emptyPane.fileTypeText", undefined, true)})}):(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)(n.xu,{display:"flex",padding:5,children:[(0,c.jsx)(n.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(n.JO,{accessibilityLabel:_.bt("Image icon", "Image icon", "accessibilitiy label for image icon", undefined, true),icon:"camera-roll",size:22})}),(0,c.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(n.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("High resolution images", "High resolution images", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(n.xv,{color:"subtle",size:"100",children:_.bt("PNG, JPG, GIF up to 10 MB", "PNG, JPG, GIF up to 10MB", "Image type and limits that can be uploaded", undefined, true)})]})]}),!i&&(0,c.jsxs)(n.xu,{display:"flex",padding:5,children:[(0,c.jsx)(n.xu,{alignItems:"center",display:"flex",marginEnd:3,children:(0,c.jsx)(n.JO,{accessibilityLabel:_.bt("Video icon", "Video icon", "accessibilitiy label for video icon", undefined, true),icon:"video-camera",size:24})}),(0,c.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,c.jsx)(n.xv,{color:"subtle",size:"100",weight:"bold",children:_.bt("High quality video", "High-quality video", "Text description of image that can be uploaded", undefined, true)}),(0,c.jsx)(n.xv,{color:"subtle",size:"100",children:_.bt("MOV, MP4, up to 2 GB, 5 min.", "MOV, MP4, up to 2GB, 5min.", "Video type and limits that can be uploaded", undefined, true)})]})]})]});return(0,c.jsx)(d.Z,{accept:[...a.xl,...i?[]:a.ss].join(","),allowMultipleFiles:!0,color:"white",hasError:!!t,id:"asset-picker-upload",onChange:t=>{m(!0);let i=Array.from(t.target.files);m(!0),p({event_type:101,component:13392,element:11265}),e(i).then(()=>{f.current&&m(!1)})},onDrop:t=>{m(!0);let i=(0,l.Z)(t.dataTransfer);m(!0),p({event_type:3502,component:13392,element:11265}),e(i).then(()=>{f.current&&m(!1)})},children:e=>(0,c.jsxs)(n.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[g?(0,c.jsx)(n.$j,{accessibilityLabel:_.bt("Loading...", "Loading...", "Loading assets", undefined, true),show:!0}):(0,c.jsx)(n.xu,{padding:2,children:(0,c.jsxs)(n.kC,{alignItems:"center",direction:"column",gap:{row:0,column:4},justifyContent:"center",children:[(0,c.jsx)(n.JO,{color:h?"default":"subtle",icon:h?"camera-roll":"arrow-circle-up",accessibilityLabel:i?_.bt("Add an image", "Add an image", "uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel", undefined, true):_.bt("Add an image or video", "Add an image or video", "Add an image or video as part of the pin", undefined, true),size:h?22:32}),(0,c.jsx)(n.xv,{children:h?_.bt("Drag and drop an image, or browse from your computer", "Drag and drop an image, or browse from your computer", "emptyPane.dragAndDropText", undefined, true):_.bt("Drag and drop assets", "Drag and drop assets", "A drag and drop prompt for adding assets", undefined, true)}),(0,c.jsx)(n.zx,{color:h?"gray":"red",text:h?_.bt("Browse", "Browse", "emptyPane.button", undefined, true):_.bt("Upload from your computer", "Upload from your computer", "Button text on asset picker to upload image from a computer", undefined, true)})]})}),(0,c.jsx)(n.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:h?void 0:{__style:u[e?"drag":t?"error":"default"]},display:"flex",justifyContent:"center",left:!0,right:!0,position:"absolute",children:t?(0,c.jsx)(n.xu,{padding:5,maxWidth:468,children:(0,c.jsx)(n.xv,{align:"center",color:"error",size:"200",children:t})}):x})]})})}},725108:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(898781),o=i(785893);function s({errorMessage:e,primaryAction:t,secondaryAction:i}){let s=(0,n.ZP)();return(0,o.jsxs)(r.xu,{alignItems:"center",color:"errorBase","data-test-id":"error-banner",display:"flex",height:64,paddingX:3,position:"relative",children:[(0,o.jsx)(r.xu,{paddingX:2,children:(0,o.jsx)(r.JO,{accessibilityLabel:s.bt("Error alert", "Error Alert", "Alert icon for error banner", undefined, true),color:"inverse",icon:"alert",size:24})}),(0,o.jsx)(r.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"start",paddingX:1,children:(0,o.jsx)(r.xv,{align:"center",color:"inverse",weight:"bold",children:e})}),(!!t||!!i)&&(0,o.jsxs)(r.kC,{alignItems:"end",justifyContent:"start",children:[!!i&&(0,o.jsx)(r.xu,{height:"100%",padding:1,children:i}),!!t&&(0,o.jsx)(r.xu,{height:"100%",padding:1,children:t})]})]})}},841064:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var r=i(667294),n=i(693967),o=i.n(n),s=i(883119),l=i(858472),a=i(665866),d=i(780280),c=i(19121),u=i(717615),h=i(231947),p=i(785893);function _(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let g={__style:{pointerEvents:"none"}};class m extends r.Component{constructor(...e){super(...e),_(this,"state",{focused:!1}),_(this,"setTextAreaRef",e=>{this.textArea=e}),_(this,"setTextAreaHeight",()=>{this.textArea&&(this.textArea.style.height="auto",this.textArea.style.height=`${this.textArea.scrollHeight}px`)}),_(this,"handleChange",e=>{let{onChange:t}=this.props;t({event:e,value:e.target.value})}),_(this,"handleInput",()=>{this.setTextAreaHeight()}),_(this,"handleBlur",e=>{this.setState({focused:!1},this.setTextAreaHeight);let{onBlur:t}=this.props;t&&t({event:e,value:e.currentTarget.value})}),_(this,"handleFocus",e=>{this.setState({focused:!0},this.setTextAreaHeight);let{onFocus:t}=this.props;t&&t({event:e,value:e.currentTarget.value})}),_(this,"getColor",()=>{let{errorMessage:e,warningMessage:t,showOnBlur:i,showWarningOnBlur:r,value:n}=this.props,{focused:o}=this.state;return e?l.x7:o||r&&t?"#0074e8":n&&!i?"transparent":"rgba(142, 142, 142, 0.5)"})}componentDidMount(){this.setTextAreaHeight(),this.props.shouldFocusOnRender&&this.textArea&&this.textArea.focus()}componentDidUpdate(){this.setTextAreaHeight()}render(){let{bold:e,muted:t,italic:i,disabled:r,errorMessage:n,warningMessage:l,height:d,helperMessage:c,hideScrollbars:u,id:_,maxLength:m,placeholder:f,requestContext:x,size:b,spellCheck:y,showOnBlur:v,showWarningOnBlur:P,value:S="",viewer:A,wrap:w,orbacActingAs:E}=this.props,{focused:I}=this.state,j={__style:{boxShadow:`0 ${I||n||P&&l?"2px":"1px"} 0 0 ${this.getColor()}`,paddingTop:8}},C=(0,h.nl)(A,E)&&"ad_creation"!==a.Z.scenario()&&x.experimentsClient.checkExperiment("web_stl_tooling").anyEnabled;return(0,p.jsxs)(s.xu,{column:12,display:"flex",direction:"column",children:[(0,p.jsxs)(s.xu,{column:12,position:"relative",children:[(0,p.jsx)("textarea",{className:o()(`TextArea__${C?"experimentalTextArea":"textArea"}`,{TextArea__bold:e,TextArea__dark:null==m&&!r,TextArea__hide_scrollbars:u,TextArea__disabled:r,TextArea__enabled:!r,TextArea__small:"sm"===b,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__wrap:w,TextArea__nowrap:!w,TextArea__sm:!w,TextArea__smHeight:"sm"===d,TextArea__mdHeight:"md"===d,TextArea__muted:!C&&t,TextArea__italic:!C&&S&&i}),disabled:r,id:_,onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onInput:this.handleInput,placeholder:f,spellCheck:y,ref:this.setTextAreaRef,rows:1,value:null==m||I?S:S.substring(0,m)}),null!=m&&!r&&(0,p.jsx)(s.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:g,children:(0,p.jsx)("div",{className:o()(`TextArea__${C?"ghostTextArea":"textArea"}`,"TextArea__dark",{TextArea__bold:e,TextArea__muted:!C&&t,TextArea__italic:!C&&i,TextArea__large:"lg"===b,TextArea__medium:"md"===b,TextArea__small:"sm"===b,TextArea__wrap:w,TextArea__nowrap:!w}),children:S.substring(0,m)})})]}),(0,p.jsxs)("div",{className:I||v||n||P&&l||!S?"":"TextArea__hidden",children:[!C&&(0,p.jsx)(s.xu,{column:12,dangerouslySetInlineStyle:j}),(0,p.jsx)(s.xu,{column:12,marginTop:C?0:1,minHeight:15,children:(I||v||!!n||P&&!!l)&&(0,p.jsxs)(s.xu,{column:12,display:"flex",justifyContent:"between",children:[!!n&&(0,p.jsx)(s.xu,{flex:"grow","data-test-id":"text-area-error",children:(0,p.jsx)(s.xv,{size:"100",color:"error",children:n})}),(P||I)&&!n&&!!l&&(0,p.jsx)(s.xu,{flex:"grow","data-test-id":"text-area-warning",children:(0,p.jsx)(s.xv,{size:"100",color:"subtle",children:l})}),(v||I)&&!n&&!l&&(0,p.jsx)(s.xu,{flex:"grow","data-test-id":"text-area-helper",children:(0,p.jsx)(s.xv,{size:"100",color:"subtle",children:c})}),I&&null!=m&&(0,p.jsx)(s.xu,{flex:"none",children:(0,p.jsx)(s.xv,{size:"100",color:n?"error":"subtle",children:m-S.length})})]})})]})]})}}function f(e){return(0,p.jsx)(m,{...e,requestContext:(0,d.B)(),viewer:(0,c.Z)(),orbacActingAs:(0,u.Z)()})}_(m,"defaultProps",{italic:!1,muted:!1,bold:!1,disabled:!1,size:"md",wrap:!0,hideScrollbars:!1,shouldFocusOnRender:!1,orbacActingAs:{}})},415480:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(667294),n=i(883119),o=i(898781),s=i(755742),l=i(780280),a=i(785893);function d(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends r.Component{constructor(e){var t;super(e),d(this,"state",{currentValue:this.props.value,hovered:!1}),d(this,"addStep",e=>{if(e&&"keyup"===e.type&&e.charCode!==s.Z.SPACE&&e.charCode!==s.Z.ENTER)return;let{maxValue:t,onChange:i,value:r,step:n=0}=this.props,o=this._roundToStepDecimalDigits(Math.min(t,r+n));i(o),this.setState({currentValue:o})}),d(this,"minusStep",e=>{if(e&&"keyup"===e.type&&e.charCode!==s.Z.SPACE&&e.charCode!==s.Z.ENTER)return;let{minValue:t,onChange:i,value:r,step:n=0}=this.props,o=this._roundToStepDecimalDigits(Math.max(t,r-n));i(o),this.setState({currentValue:o})}),d(this,"onChange",e=>{let t=Number(e.target.value);this.setState({currentValue:t})}),d(this,"onKeyUp",e=>{let{onChange:t}=this.props,{currentValue:i}=this.state;e&&[s.Z.ENTER,s.Z.UP,s.Z.DOWN].includes(e.keyCode)&&t(Number(i))}),d(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),d(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),d(this,"onBlur",()=>{let{minValue:e,maxValue:t,onChange:i,value:r}=this.props,n=parseFloat(this.state.currentValue),o=isNaN(n)?r:n,s=this._roundToStepDecimalDigits(Math.min(Math.max(o,e),t));i(s),this.setState({currentValue:s})});let i=(null!==(t=e.step)&&void 0!==t?t:0).toString().split(".");this._shiftBy=i[1]?10**i[1].length:1}componentDidUpdate(e){e.textBlockId!==this.props.textBlockId&&this.setState({currentValue:this.props.value})}_roundToStepDecimalDigits(e){return Math.round(e*this._shiftBy)/this._shiftBy}render(){let{disableOnBlur:e,iconName:t,id:i,requestContext:r,useLegoStyle:o}=this.props,{currentValue:s,hovered:l}=this.state,{isRTL:d}=r,c=[{iconName:"arrow-up",accessibilityLabel:this.props.i18n.bt("Increase by the step specified, for example 1 or 0.1", "Increase by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.addStep},{iconName:"arrow-down",accessibilityLabel:this.props.i18n.bt("Decrease by the step specified, for example 1 or 0.1", "Decrease by the step specified, for example 1 or 0.1", " - ", undefined, true),onClick:this.minusStep}],u={input:{border:"solid 2px #efefef",borderRadius:o?16:8,boxSizing:"border-box",fontSize:"16px",outline:"none",padding:"10px 16px",width:"100%",WebkitAppearance:"textfield",MozAppearance:"textfield"},buttonContainer:{__style:{borderRadius:d?o?"14px 0px 0px 14px":"6px 0px 0px 6px":o?"0px 14px 14px 0px":"0px 6px 6px 0px",left:d?"2px":"auto",right:d?"auto":"2px"}},button:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"50%",cursor:"pointer",userSelect:"none",outline:"none"}};return(0,a.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",height:40,width:"100%",children:(0,a.jsxs)(n.xu,{display:"flex",position:"relative",justifyContent:"center",alignItems:"center",column:12,height:"100%",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,rounding:2,children:[(0,a.jsx)("input",{autoComplete:"off","data-test-id":i,id:i,onBlur:e?void 0:this.onBlur,onChange:this.onChange,onKeyUp:this.onKeyUp,size:"20",style:u.input,type:"number",value:s}),l?(0,a.jsx)(n.xu,{position:"absolute",display:"flex",direction:"column",justifyContent:"center",alignItems:"center",color:"secondary",width:28,height:"100%",overflow:"hidden",dangerouslySetInlineStyle:u.buttonContainer,children:c.map(e=>(0,a.jsx)("div",{"data-test-id":e.iconName,onKeyUp:e.onClick,onClick:e.onClick,role:"button",tabIndex:"0",style:u.button,children:(0,a.jsx)(n.JO,{icon:e.iconName,accessibilityLabel:e.accessibilityLabel,size:8,color:"default"})},e.iconName))}):(0,a.jsx)(n.xu,{position:"absolute",right:!d,left:d,marginEnd:3,children:(0,a.jsx)(n.JO,{icon:t,accessibilityLabel:t,size:16})})]})})}}function u(e){let t=(0,o.ZP)();return(0,a.jsx)(c,{...e,i18n:t,requestContext:(0,l.B)()})}d(c,"defaultProps",{step:1})},815542:(e,t,i)=>{"use strict";i.d(t,{kw:()=>f,ZP:()=>y});var r=i(667294),n=i(883119),o=i(407043),s=i(382415),l=i(898781),a=i(755742),d=i(785893);function c(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends r.Component{constructor(...e){super(...e),c(this,"handleClick",()=>{let{color:e,onClick:t}=this.props;t({value:e})}),c(this,"handleKeyPress",e=>{let{onClick:t}=this.props;t&&(e.charCode===a.Z.SPACE||e.charCode===a.Z.ENTER)&&(e.preventDefault(),this.handleClick())})}render(){let{size:e,color:t,isSelected:i,dataTestId:r}=this.props;return(0,d.jsx)(n.iP,{rounding:"circle",onTap:this.handleClick,children:(0,d.jsx)(n.xu,{"data-test-id":r,role:"button",height:e,onKeyPress:this.handleKeyPress,overflow:"hidden",rounding:"circle",width:e,dangerouslySetInlineStyle:{__style:{boxSizing:"border-box",cursor:"pointer",border:"solid 2px #F0F0F0",backgroundColor:""===t?void 0:t,boxShadow:i?"0 0 0 2px #f35e5f":"none",outline:"none"}},tabIndex:0,children:""===t&&(0,d.jsx)(s.Z,{size:6})})})}}function h(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p={input:{minWidth:0,flex:1,fontSize:"16px",color:"#333",border:"0px",outline:"none",boxSizing:"border-box",padding:0}};class _ extends r.Component{constructor(...e){super(...e),h(this,"state",{color:this.props.color}),h(this,"isValidHex",e=>!!e&&/^#([0-9a-f]{6})$/i.test(e)),h(this,"startsWithValidHex",e=>!!e&&/^#([0-9a-f]{0,6})$/i.test(e)),h(this,"handleInputChange",e=>{let{onChange:t}=this.props,i="#"+e.target.value.toUpperCase();this.startsWithValidHex(i)&&(this.setState({color:i}),this.isValidHex(i)&&t(i))})}render(){let{id:e,width:t,height:i,color:r}=this.props,{color:o}=this.state,s=this.input===document.activeElement?o:r.toUpperCase();return(0,d.jsxs)(n.xu,{width:t,height:i,paddingX:2,rounding:2,display:"flex",alignItems:"center",borderStyle:"lg",children:[(0,d.jsx)(n.xv,{color:"subtle",children:"#"}),(0,d.jsx)("input",{id:e,ref:e=>this.input=e,style:p.input,value:s.replace("#",""),onChange:this.handleInputChange})]})}}function g(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let m=["#ffffff","#f15758","#e60023","#e37325","#f8b917","#0ba573","#096a56","#558dca","#0f4d8f","#7c499d","#73295E","#843922","#555555","#000000"],f=["#FFFFFF","#FCE2CF","#F7F2BB","#D8F0A8","#BEF4EE","#DCD4F7","#F9B8F2","#F65E55","#F69855","#F6E955","#79DD3C","#25E4F4","#AA6AFB","#F655C9","#C20000","#B85C00","#807500","#02882A","#0045CC","#8000BD","#97026D","#5E031A","#573700","#363F03","#01564C","#00205C","#370052","#111111"],x={container:{__style:{boxShadow:"0 0 0 2px #efefef inset"}}};class b extends r.Component{constructor(...e){super(...e),g(this,"state",{isOpen:!1}),g(this,"setAnchorRef",e=>{this.anchor=e}),g(this,"handleClick",()=>{this.setState(e=>({isOpen:!e.isOpen}))}),g(this,"handleDismiss",()=>{this.setState({isOpen:!1})}),g(this,"onNoColorFillChange",({checked:e})=>{this.props.onSelectColor({value:e?"":"#ffffff"}),this.props.logContextEvent({event_type:101,component:13780,element:12165,aux_data:{value:e}})}),g(this,"onColorClick",({value:e})=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:101,component:13780,element:12166,aux_data:{value:e}})}),g(this,"onHexColorChange",e=>{this.props.onSelectColor({value:e}),this.props.logContextEvent({event_type:7472,component:13780,element:12167,aux_data:{value:e}})})}renderTransparencyControl(){let{showTransparencyControl:e,transparencyIndex:t,onSelectTransparency:i}=this.props;if(!e||void 0===t||!i)return null;let r=this.props.i18n.bt("Full opacity", "Full opacity", "Adjust the transparency to opaque,", undefined, true),o=this.props.i18n.bt("Semi-transparent", "Semi-transparent", "Adjust the transparency to 75%.", undefined, true),s=[(0,d.jsx)(n.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-opaque-button",children:(0,d.jsx)(n.u,{text:r,children:(0,d.jsx)(n.JO,{accessibilityLabel:r,icon:"fill-opaque",color:0===t?"default":"subtle",size:20})})}),(0,d.jsx)(n.xu,{"data-group-id":"pinbuilder-editor-logo-transparency-button","data-test-id":"pinbuilder-editor-fill-transparent-button",children:(0,d.jsx)(n.u,{text:o,children:(0,d.jsx)(n.JO,{accessibilityLabel:o,icon:"fill-transparent",color:1===t?"default":"subtle",size:20})})})];return(0,d.jsx)(n.xu,{marginStart:4,children:(0,d.jsx)(n.sY,{selectedItemIndex:t,onChange:i,items:s})})}renderFlyout(){let{showNoFillControl:e,showTransparencyControl:t,colorSelected:i,imagePalette:o,showExpanded:s}=this.props;return(0,d.jsx)(n.J2,{anchor:this.anchor,idealDirection:"down",onDismiss:this.handleDismiss,size:"md",_deprecatedShowCaret:!0,children:(0,d.jsxs)(n.xu,{direction:"column",display:"flex",justifyContent:"center",paddingY:4,width:"100%",children:[e&&(0,d.jsxs)(n.xu,{marginBottom:4,children:[(0,d.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,paddingX:4,children:[(0,d.jsx)(n.XZ,{checked:!i,id:"no-color-fill",name:"no-color-fill",onChange:this.onNoColorFillChange,size:"sm"}),(0,d.jsx)(n.__,{htmlFor:"no-color-fill",children:(0,d.jsx)(n.xu,{paddingX:2,children:(0,d.jsx)(n.xv,{size:"200",children:this.props.i18n.bt("No background fill", "No background fill", "Don't fill any background color", undefined, true)})})})]}),(0,d.jsx)(n.iz,{})]}),(0,d.jsxs)(n.xu,{paddingX:4,children:[o&&o.length>0&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(n.xu,{paddingX:1,children:(0,d.jsx)(n.xv,{size:"100",children:this.props.i18n.bt("Your image colours", "Your image colors", "Colors from the image being added", undefined, true)})}),(0,d.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",wrap:!0,children:o.map((e,t)=>(0,d.jsx)(n.xu,{"data-group-id":"pinbuilder-editor-palette-color-picker-button",padding:1,children:(0,d.jsx)(u,{color:e,dataTestId:`pinbuilder-editor-palette-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e))}),(0,d.jsx)(n.xu,{paddingX:1,marginTop:2,children:(0,d.jsx)(n.xv,{size:"100",children:this.props.i18n.bt("More options", "More options", "Default colors", undefined, true)})})]}),(0,d.jsx)(n.kC,{alignItems:"stretch",justifyContent:"between",wrap:!0,children:(s?f:m).map((e,t)=>(0,d.jsx)(n.xu,{"data-group-id":"pinbuilder-editor-color-picker-button",padding:1,children:(0,d.jsx)(u,{color:e,dataTestId:`pinbuilder-editor-${t}-color-picker-button`,isSelected:i.toLowerCase()===e,onClick:this.onColorClick,size:28})},e))}),(0,d.jsxs)(n.xu,{display:"flex",alignItems:"center",marginTop:3,children:[(0,d.jsx)(_,{onChange:this.onHexColorChange,color:i,width:94,height:40}),t&&this.renderTransparencyControl()]})]})]})})}render(){let{id:e,width:t,showTransparencyControl:i,transparencyIndex:r,colorSelected:o}=this.props,{isOpen:l}=this.state,a={__style:{border:o&&"#ffffff"!==o.toLowerCase()?"none":"solid 2px #efefef",borderRadius:"16px 0 0 16px",background:o||"linear-gradient(to bottom right, white 48.5%, #e600234d 48.5%, #e600234d 51.5%, white 51.5%)"}};return(0,d.jsxs)(n.xu,{"data-test-id":e,width:t,children:[(0,d.jsx)(n.iP,{fullHeight:!0,onTap:this.handleClick,rounding:4,children:(0,d.jsxs)(n.xu,{rounding:4,overflow:"hidden",height:40,display:"flex",justifyContent:"end",color:"secondary",dangerouslySetInlineStyle:x.container,ref:this.setAnchorRef,children:[(0,d.jsx)(n.xu,{flex:"grow",dangerouslySetInlineStyle:a,children:o&&i&&1===r&&(0,d.jsx)(s.Z,{})}),(0,d.jsx)(n.xu,{alignItems:"center",color:"secondary","data-test-id":"storyboard-editor-details-layout-color-picker-icon",display:"flex",flex:"none",justifyContent:"center",width:28,children:(0,d.jsx)(n.JO,{accessibilityLabel:this.props.i18n.bt("Open drop-down colour picker", "Open dropdown color picker", "Open the color picker in a dropdown flyout", undefined, true),color:"default",icon:"arrow-down",size:8})})]})}),l&&this.renderFlyout()]})}}function y(e){let{logContextEvent:t}=(0,o.v)(),i=(0,l.ZP)();return(0,d.jsx)(b,{...e,i18n:i,logContextEvent:t})}g(b,"defaultProps",{showNoFillControl:!1,showTransparencyControl:!1,width:84})},456463:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(883119),n=i(785893);function o(e){return e.reduce((e,t)=>[...e,{selector:t.selector,content:(0,n.jsxs)(r.xu,{"data-test-id":`${t.id||""}`,paddingY:2,children:[t.heading&&(0,n.jsx)(r.xu,{children:(0,n.jsx)(r.X6,{size:"400",children:t.heading})}),(0,n.jsx)(r.xu,{paddingY:2,children:(0,n.jsx)(r.xv,{children:t.description})})]}),id:t.id,padding:t.padding,onNext:t.onNext}],[])}},596284:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var r=i(667294),n=i(702664),o=i(883119),s=i(237056),l=i(898781),a=i(299295),d=i(665866),c=i(773285),u=i(19121),h=i(717615),p=i(231947),_=i(841064),g=i(451105),m=i(305782),f=i(785893);function x({pinDraftId:e}){let t=(0,l.ZP)(),i=(0,s.Z)(),x=(0,u.Z)(),{checkExperiment:b}=(0,c.F)(),y=(0,h.Z)(),v=(0,p.nl)(x,y)&&"ad_creation"!==d.Z.scenario()&&b("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,[P,S]=(0,r.useState)(!1),A=(0,n.useDispatch)(),w=(0,n.useSelector)(t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altText}),E=(0,n.useSelector)(t=>{var i;return null===(i=t.pinbuilder.pinDrafts[e])||void 0===i?void 0:i.altTextError})||"";return(0,f.jsxs)(o.xu,{children:[!P&&!w&&(0,f.jsx)(o.xu,{"data-test-id":"pin-draft-alt-text-button",flex:"grow",children:(0,f.jsx)(o.zx,{onClick:()=>S(!0),text:t.bt("Add alt text", "Add alt text", "pinbuilder.alt_text.button", undefined, true),size:"lg"})}),(P||w)&&(0,f.jsxs)(o.xu,{children:[(0,f.jsx)(o.xu,{marginStart:1,marginBottom:1,children:v&&(0,f.jsx)(o.xv,{size:"100",color:"default",children:t.bt("Alt text", "Alt text", "pinbuilder.altText.title", undefined, true)})}),(0,f.jsx)(_.Z,{height:v?"md":void 0,size:"sm",helperMessage:t.bt("This text will be read aloud by screen readers", "This text will be read aloud by screen readers", "web.altText.helperMessage", undefined, true),id:`pin-draft-alttext-${e}`,maxLength:a.lx,onChange:({value:r})=>{A((0,m.DL)(e,r)),r&&r.length>a.lx&&A((0,m.KN)(e,(0,g.ZP)({errorId:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",i18n:t,ideaPinRenamingEnabled:i}).message)),E&&(!r||r.length<=a.lx)&&A((0,m.KN)(e,""))},onBlur:()=>{},placeholder:t.bt("Explain what people can see in the Pin", "Explain what people can see in the Pin", "web.altText.placeholder", undefined, true),value:w||"",viewer:x,errorMessage:E,muted:!0,italic:!0,shouldFocusOnRender:!0})]})]})}},956069:(e,t,i)=>{"use strict";i.d(t,{Py:()=>s,VX:()=>r,i9:()=>o,op:()=>l,tN:()=>n});let r=8,n=24,o=4,s=148,l=16},875108:(e,t,i)=>{"use strict";function r({x:e,y:t}){return e>0&&e<=100&&t>0&&t<=100}i.d(t,{Z:()=>r})},940765:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var r=i(702664),n=i(883119),o=i(407043),s=i(898781),l=i(19121),a=i(667294),d=i(299295),c=i(785893);function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h={__style:{zIndex:d.v9}};class p extends a.Component{constructor(...e){super(...e),u(this,"state",{showFlyout:!1}),u(this,"buttonRef",(0,a.createRef)()),u(this,"handleShowFlyout",()=>{this.setState({showFlyout:!0}),this.props.logContextEvent({event_type:101,component:13308,element:12123})}),u(this,"handleHideFlyout",()=>{this.setState({showFlyout:!1})})}render(){let{accessibilityLabel:e,icon:t,items:i,size:r}=this.props,{showFlyout:o}=this.state;return(0,c.jsxs)(n.xu,{position:"relative",dangerouslySetInlineStyle:o?h:void 0,children:[(0,c.jsx)(n.xu,{ref:this.buttonRef,children:(0,c.jsx)(n.hU,{accessibilityLabel:e,icon:t,onClick:this.handleShowFlyout,size:null!=r?r:"md",iconColor:"gray"})}),o&&(0,c.jsx)(n.Lt,{id:"icon-button-menu",anchor:this.buttonRef.current,idealDirection:"down",onDismiss:this.handleHideFlyout,disableMobileUI:!0,children:i.map(({onClick:e,legend:t,dataTestId:i})=>(0,c.jsx)(n.Lt.Item,{onSelect:()=>{this.handleHideFlyout(),e()},option:{label:t,value:t},children:(0,c.jsx)(n.xu,{"data-test-id":i,children:(0,c.jsx)(n.xv,{weight:"bold",children:t})})},`${t.toLocaleLowerCase()}`))})]})}}function _(e){let{logContextEvent:t}=(0,o.v)();return(0,c.jsx)(p,{...e,logContextEvent:t})}var g=i(794843),m=i(474394);let f=(e,t)=>{t({event_type:101,component:13308,element:12124,aux_data:{value:e}})};function x({pinDraftId:e}){let t=(0,s.ZP)(),{logContextEvent:i}=(0,o.v)(),a=(0,l.Z)(),d=a.isAuth&&a.isEmployee,u=(0,r.useDispatch)(),h=()=>u((0,g.Z)({i18n:t,isEmployee:d,pinDraftId:e})),p=()=>u((0,m.duplicatePinDraft)(e));return(0,c.jsx)(n.xu,{paddingX:3,"data-test-id":"pindraft-option-menu",children:(0,c.jsx)(_,{accessibilityLabel:t.bt("Options", "Options", "Button to open options menu for this Pin", undefined, true),icon:"ellipsis",items:[{legend:t.bt("Delete", "Delete", "Button to delete Pin draft", undefined, true),dataTestId:"delete-pin-draft",onClick:()=>{h(),f("delete",i)}},{legend:t.bt("Duplicate", "Duplicate", "Button to duplicate Pin draft to another", undefined, true),dataTestId:"duplicate-pin-draft",onClick:()=>{p(),f("duplicate",i)}}]})})}},984268:(e,t,i)=>{"use strict";i.d(t,{v2:()=>p,dV:()=>g,ir:()=>u,VX:()=>c,Bc:()=>d,jy:()=>h,LG:()=>_}),i(167912);var r,n,o=i(916117),s=i(883561);let l=({url:e})=>{if(!e||0===e.length)return!1;let t=RegExp("itunes\\.apple\\.com\\/(?:.*\\/)?app\\/(?:.*\\/)?id([0-9]+)"),i=RegExp("play.google.com/store/apps/details");return t.test(e)||i.test(e)};var a=i(566101);function d(e){if(e){var t,i;if(e.carousel_data&&e.carousel_data.carousel_slots&&e.carousel_data.carousel_slots.length>1||null!==(t=e.videos)&&void 0!==t&&t.video_list||(null!==(i=e.shopping_flags)&&void 0!==i?i:[]).includes(2)||e.aggregated_pin_data&&e.aggregated_pin_data.is_shop_the_look||e.story_pin_data_id&&e.story_pin_data_id.length>0)return!1;let r=e.link?e.link.trim():"";if(!(r.length>0&&(0,a.Z)({url:r}))||r.length>0&&l({url:r}))return!1;if("pin"===e.type)return!0}return!1}function c(e){return!!(e&&d(e))&&(!!e.rich_metadata&&!!e.rich_metadata.products&&e.rich_metadata.products.length>0&&!!e.rich_metadata.products[0].offer_summary&&!!e.rich_metadata.products[0].offer_summary.price||!!e.rich_summary&&!!e.rich_summary.products&&e.rich_summary.products.length>0&&!!e.rich_summary.products[0].offer_summary&&!!e.rich_summary.products[0].offer_summary.price)}function u(e,t){if(e){let i=t.toLowerCase();if(!t||t&&t.length<=3||e.title&&e.title.toLowerCase().includes(i)||e.grid_title&&e.grid_title.toLowerCase().includes(i)||e.closeup_description&&e.closeup_description.toLowerCase().includes(i)||e.description&&e.description.toLowerCase().includes(i))return!0}return!1}let h=e=>{let{data:t}=(0,o.u)(void 0!==r?r:r=i(802333),e),{title:n,gridTitle:l,richSummary:a,richMetadata:d}=t,c=n||l||a&&"mobile application"!==a.typeName&&a.displayName||(null==d?void 0:d.title);return c?(0,s.ZP)(c.trim(),30):""},p=({children:e,input:t})=>e(h(t)),_=e=>{var t,r,s,l,a,d;let{data:c}=(0,o.u)(void 0!==n?n:n=i(387399),e);return(null===(t=((null===(r=c.richSummary)||void 0===r?void 0:null===(s=r.products)||void 0===s?void 0:s[0])||{}).offerSummary)||void 0===t?void 0:t.price)||(null===(l=((null===(a=c.richMetadata)||void 0===a?void 0:null===(d=a.products)||void 0===d?void 0:d[0])||{}).offerSummary)||void 0===l?void 0:l.price)},g=({children:e,input:t})=>e(_(t))},699109:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(265696),n=i(955625);function o(e,t,i){return(0,r.Z)().then(r=>{let o=e[0],{media:s}=t[o]||{},{width:l}=s||{},a=e.every(e=>{let{media:i}=t[e]||{};if(!i)return!0;let{width:r}=i||{};return r===l})?l:n.IU,d=e.map((e,n)=>{let o=new r(document.createElement("div")),{canvasJson:s,media:l}=t[e]||{};if(!l)return t[e];let d=()=>{o.setAspectRatio(i);let r=0===n&&l.fileSrc&&"image/png"===l.fileSrc.type?"png":"jpeg";return{...t[e],canvasJson:o.toJSON(),media:l.width===(null==i?void 0:i.w)&&l.height===(null==i?void 0:i.h)&&l.width===a?l:{...l,...o.getCanvasOutput({width:a,format:r})}}};return s?o.loadFromJSON(s).then(d):o.setImage(l.src).then(d)});return Promise.all(d)})}},801815:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(724565);function n(e,t){let{layout:i}=t||{},{sections:n}=i||{},o=n&&1===n.length?n[0]:{},{media:s}=o||{},{viewbox:l,angle:a,width:d,height:c}=s||{},u={},h=!1;if(l){let t=Math.round(l.width*d),i=Math.round(l.height*c),n=Math.round(l.left*d-t/2),o=Math.round(l.top*c-i/2),s=a||0;u={origin_x:n,origin_y:o,width:t,height:i,rotation:s},h=n>Number.EPSILON||o>Number.EPSILON||1-l.width>Number.EPSILON||1-l.height>Number.EPSILON||0!==s;let p=e.duration?e.duration:0,_=e.trimmedStartTime?e.trimmedStartTime:0,g=e.trimmedEndTime?e.trimmedEndTime:p;return u={...u,time_start:(0,r.TA)(_),time_end:(0,r.TA)(g)},(h=h||_>Number.EPSILON||p-g>.01)?u:null}return null}},69183:(e,t,i)=>{"use strict";i.d(t,{B:()=>o,v:()=>n});var r=i(67347);function n(e,t,i){return new Promise(n=>{let o;let s=document.createElement("video"),l=()=>{let e=s.seekable.length;e&&s.seekable.end(e-1)>=t&&(window.clearInterval(o),s.currentTime=t)},a=0,d=()=>{o=window.setInterval(l,50)},c=()=>{s.removeEventListener("loadedmetadata",d);let{x:o,y:l,width:u,height:h}=i||{x:0,y:0,width:s.videoWidth,height:s.videoHeight},p=document.createElement("canvas");p.height=h,p.width=u;let _=p.getContext("2d");if(_.drawImage(s,o,l,p.width,p.height,0,0,p.width,p.height),function(e){let{height:t,width:i}=e,r=e.getContext("2d"),n=new Uint32Array(r.getImageData(0,0,i,t).data.buffer),o=n.filter(e=>4294967295!==e).length,s=i*t;return o/s<.005}(p)&&a<5){a+=1,s.addEventListener("loadedmetadata",d),s.src=e.src,s.load();return}if(a>0){let{duration:i,id:n,name:o,signature:s,size:l}=e;(0,r.nP)("storypin.publish.thumbnail.isblank",{sampleRate:1,tags:{duration:i,id:n,name:o,signature:s,size:l,time:t,retrySeekNumber:a}})}s.removeEventListener("seeked",c),s.remove(),n(p.toDataURL("image/jpeg",1))};s.addEventListener("loadedmetadata",d),s.addEventListener("seeked",c),s.src=e.src})}function o(e,t){return new Promise(i=>{let r=document.createElement("img");r.onload=function(){let{x:e,y:n,width:o,height:s}=t||{x:0,y:0,width:r.width,height:r.height},l=document.createElement("canvas");l.height=s,l.width=o;let a=l.getContext("2d");a.drawImage(r,e,n,l.width,l.height,0,0,l.width,l.height),i(l.toDataURL("image/jpeg",1))},r.src=e})}},623320:(e,t,i)=>{"use strict";i.d(t,{Ch:()=>P,Fv:()=>_,GV:()=>b,Ix:()=>f,Mi:()=>u,Yv:()=>x,f:()=>h,iX:()=>g,wL:()=>v,xc:()=>y,zp:()=>p});var r=i(214494),n=i(628551),o=i(186656),s=i(840839),l=i(66699),a=i(567831),d=i(893446),c=i(471155);function u(e,t=512){let i=e.split(";"),r=i[0].split(":")[1],n=i[1].split(",")[1],o=atob(n),s=[];for(let e=0;e<o.length;e+=t){let i=o.slice(e,e+t),r=Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);let n=new Uint8Array(r);s.push(n)}let l=new Blob(s,{type:r});return l}let h=e=>{let[t,i,r]=[e.substring(0,2),e.substring(2,4),e.substring(4,6)];return e?`https://i.pinimg.com/736x/${t}/${i}/${r}/${e}.jpg`:""};function p(e){return new Promise(t=>{let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=()=>{if(200===i.status){let e=i.response,r=new FileReader;r.onloadend=()=>{let e="string"==typeof r.result?r.result:"";t(e)},r.readAsDataURL(e)}},i.send()})}function _(e,t){return(0,o.Z)({url:"/v3/visual_links/boards/tagged/",data:{fields:["board.access","board.allow_homefeed_recommendations","board.category","board.collaborated_by_me","board.collaborating_users()","board.collaborator_count","board.collaborator_invites_enabled","board.created_at","board.description","board.followed_by_me","board.follower_count","board.id","board.image_cover_url","board.image_thumbnail_url","board.images[170x]","board.is_collaborative","board.layout","board.name","board.owner()","board.pin_count","board.pin_thumbnail_urls","board.privacy","board.type","board.url"],return_existing:!0,...e?{orbac_subject_id:e}:Object.freeze({})},method:"PUT"}).then(e=>{if(!e.resource_response.error){var i;t({event_type:20,object_id_str:null===(i=e.resource_response.data)||void 0===i?void 0:i.id})}return e.resource_response.data})}async function g(e){try{let t=await r.Z.create("PinResource",e).callCreate(),{data:i}=t.resource_response;return i&&{id:i.id}}catch(e){throw Error("Failed to create pin")}}function m(e,t){return new Promise((i,r)=>{let o=new FormData;o.append("img",e);let s=new XMLHttpRequest;s.open("POST",(0,a.Z)("/upload-image/"),!0),s.setRequestHeader("x-CSRFToken",(0,n.getCsrfToken)()),s.onload=()=>{if(200===s.status){let e=JSON.parse(s.responseText);e.success?i(e):r(Error(e.error))}else 413===s.status?r(Error(t.bt("Something went wrong while uploading your image. Try uploading a smaller image.", "Oops! Something went wrong while uploading your image. Try uploading a smaller image.", "pinBuilderResource.uploadImage.error.smallerImage", undefined, true))):r(Error((0,l.Z)(t.bt("Something went wrong while uploading your image (status code {{statusCode}})", "Oops! Something went wrong while uploading your image (Status code {{statusCode}})", "pinBuilderResource.uploadImage.genericError", undefined, true),{statusCode:s.status})))},s.send(o)})}function f(e,t){return"string"!=typeof e?m(e,t):e.startsWith("data")?m(u(e),t):p(e).then(e=>m(u(e),t))}function x(e,t,i,n){return new Promise((o,s)=>{r.Z.create("VIPEditResource",{type:t,video_signature:e,...i}).callCreate().then(e=>{let{onStartEdits:t,onFinishEdits:i}=n||{},{tracking_id:r}=e.resource_response.data,l=new Date;t&&t(r),(0,d.Z)(r,{delay:8e3,onError:e=>s(e),onProcessingStarted:e=>o({signature:e,uploadId:r}),onSuccess:e=>{let t=(new Date-l)/1e3;i&&i(r,t,e),o({signature:e,uploadId:r})},resolvedAfterProcessingStarted:!0})}).catch(()=>{s()})})}function b(e,t,i,r){return"string"!=typeof e?(0,c.Z)(e,t,!1,i,{},r):e.startsWith("data")?(0,c.Z)(u(e),t,!1,i,{},r):p(e).then(e=>(0,c.Z)(u(e),t,!1,i,{},r))}function y(e,t,i,r,n){return b(e,3===r?"ads-builder-pinimage":"pinimage",{onFailureUpload:({fileSizeBytes:e,uploadId:r})=>(function({fileSizeBytes:e,pinDraftId:t,uploadId:i},r){(0,s.Z)(r,{event_type:8785,aux_data:{file_size_mb:e/1048576,media_upload_id:i,pin_draft_id:t}})})({pinDraftId:t,uploadId:r,fileSizeBytes:e},i),onFinishProcessing:({fileSizeBytes:e,processingTime:r,signature:n,uploadId:o,uploadTime:l})=>(function({fileSizeBytes:e,imageSignature:t,pinDraftId:i,uploadId:r,uploadTimeSec:n},o){(0,s.Z)(o,{event_type:8781,aux_data:{file_size_mb:e/1048576,image_signature:t,media_upload_id:r,pin_draft_id:i,upload_time:n}})})({fileSizeBytes:e,imageSignature:n,pinDraftId:t,uploadId:o,uploadTimeSec:r+l},i),onStartUpload:({fileSizeBytes:e,uploadId:r})=>(function({fileSizeBytes:e,pinDraftId:t,uploadId:i},r){(0,s.Z)(r,{event_type:8780,aux_data:{file_size_mb:e/1048576,media_upload_id:i,pin_draft_id:t}})})({pinDraftId:t,uploadId:r,fileSizeBytes:e},i)},n)}function v(e,t,i,n,o){return y(e,t,i,o).then(({signature:e})=>{if(!e)throw Error();return{image_url:h(e),success:!0}}).then(e=>new Promise((t,i)=>{let o=e.image_url;r.Z.create("ScheduledPinResource",{image_url:o,method:"upload",...n?{orbac_subject_id:n}:{}}).callCreate().then(e=>{let{data:{image_signature:i}}=e.resource_response;t(i)}).catch(()=>{i(Error("Cannot schedule the Pin."))})})).catch(e=>{throw e})}function P(e,t,i,r,n=y){let o=e.filter(e=>!!e.media);return Promise.all(o.map(e=>{var o,s;let l=null!==(o=null===(s=e.media)||void 0===s?void 0:s.src)&&void 0!==o?o:"";return n(l,t,i,r).then(({signature:e,uploadId:t})=>{if(!e)throw Error();return{signature:e,uploadId:t}})})).then(e=>{var t,i,r,n;let s=o.findIndex((t,i)=>!!e[i].signature),{description:l}=null!==(t=o.find(e=>!!e.description))&&void 0!==t?t:{},{link:a}=null!==(i=o.find(e=>!!e.link))&&void 0!==i?i:{},{title:d}=null!==(r=o.find(e=>!!e.title))&&void 0!==r?r:{},c={description:null!=l?l:"",title:null!=d?d:"",link:null!=a?a:"",image_signature:null!==(n=e[s].signature)&&void 0!==n?n:""},u=o.map((t,i)=>{let{description:r,title:n,link:o}=t,{signature:s,uploadId:l}=e[i];return{title:n,description:r,link:o,image_signature:s,tracking_id:l}});return{metadata:c,slots:u}}).catch(e=>{throw e})}},346360:(e,t,i)=>{"use strict";i.d(t,{DY:()=>w,J6:()=>M,Oc:()=>A,f5:()=>F,gn:()=>P,qi:()=>S,x:()=>Z});var r=i(172045),n=i(214494),o=i(969759),s=i(299295),l=i(665866),a=i(886858),d=i(414327),c=i(134906),u=i(451105),h=i(502890),p=i(490072),_=i(122668),g=i(67347);let m=e=>e.reduce((e,t)=>e.concat(t),[]);function f(e,t){let{pinItemIds:i,pinItemIndex:r}=e.pinbuilder.pinDrafts[t];return i[r]}function x(e,t){let{pinbuilder:{pinItems:i}}=e,r=f(e,t);return i[r]}function b(e,t,i){if(e){let r=Object.keys(e),n=[];return r.forEach(r=>{let o=Object.keys(e[r]),s=e=>(0,u.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:i,dispatchId:r});o.length>0&&o.forEach(e=>{let t=parseInt(e,10);switch((0,g.nP)("pinbuilder.validator.signal",{sampleRate:1,tags:{errorCode:t}}),t){case 1:n.push(s("URL_UNREACHABLE"));break;case 2:n.push(s("URL_CONTAINS_PORN_DOMAIN"));break;case 304:n.push(s("IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO"));break;case 301:n.push(s("IMAGE_UNDER_MIN_DIMENSIONS"));break;case 9:n.push(s("LINK_LOADS_SLOWLY"));break;case 10:n.push(s("LINK_IS_AGGREGATOR"));break;case 305:n.push(s("IMAGE_IS_SCREENSHOT"));break;case 306:n.push(s("IMAGE_IS_BLURRY"));break;case 4:n.push(s("URL_IS_BLOCKED"))}})}),n}return[]}function y(e,t){return(i,r)=>{let n=r(),{pinItems:o}=n.pinbuilder,s={},{signals:l}=o[e];switch(t){case"link_url":Object.prototype.hasOwnProperty.call(l,"URL_CONTAINS_PORN_DOMAIN")&&(s.URL_CONTAINS_PORN_DOMAIN=!1),Object.prototype.hasOwnProperty.call(l,"URL_UNREACHABLE")&&(s.URL_UNREACHABLE=!1);break;case"image_signature":Object.prototype.hasOwnProperty.call(l,"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO")&&(s.IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO=!1),Object.prototype.hasOwnProperty.call(l,"IMAGE_UNDER_MIN_DIMENSIONS")&&(s.IMAGE_UNDER_MIN_DIMENSIONS=!1)}Object.keys(s).length>0&&i((0,h.nh)(e,{signals:s}))}}function v(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{selectedItem:n,pinIsAdsOnly:s}=o.pinbuilder.pinDrafts[e];r(s||n?null:(0,u.ZP)({errorId:"BOARD_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))})}}function P(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{isTaggable:n,pinTagIds:s}=x(o,e),l=s.filter(e=>"deleted"!==o.pinbuilder.pinTags[e].status),{isShowcase:a}=o.pinbuilder.pinDrafts[e];r(a&&l.length<1?(0,u.ZP)({errorId:"TAG_EMPTY",i18n:t,ideaPinRenamingEnabled:i,dispatchId:f(o,e)}):!n&&l.length>0?(0,u.ZP)({errorId:"TAG_INVALID",i18n:t,ideaPinRenamingEnabled:i,dispatchId:f(o,e)}):null)})}}function S({i18n:e,ideaPinRenamingEnabled:t,link:i,pinItemId:o,resources:a,dispatch:h,isShowcase:p}){return new Promise(_=>{let g=o||(0,r.Z)();if(i){if((0,c.CB)(i)){if(i.length>s.cH)_([(0,u.ZP)({errorId:"URL_IS_TOO_LONG",i18n:e,ideaPinRenamingEnabled:t,dispatchId:g})]);else if(l.Z.enabled("linkStatusValidation")){let r="PinCreationQualitySignalResource",o={pin_items:{[g]:{link_url:i}}};if(a&&a[r]&&a[r][i]){let n={[g]:a[r][i]};_(b(n,e,t))}else n.Z.create(r,o).callGet().then(n=>{let{data:s}=n.resource_response;!function(e,t,i){if(t){let r=i[Object.keys(i)[0]];e&&(e.PinCreationQualitySignalResource={...e.PinCreationQualitySignalResource,[t]:r})}}(a,i,s),h&&h((0,d.Sr)(r,o,n)),_(b(s,e,t))}).catch(()=>_(null))}else _(null)}else _([(0,u.ZP)({errorId:"URL_INVALID",i18n:e,ideaPinRenamingEnabled:t,dispatchId:g})])}else l.Z.enabled("requireLink")&&!p?_([(0,u.ZP)({errorId:"URL_MISSING",i18n:e,ideaPinRenamingEnabled:t,dispatchId:g})]):_(null)})}function A(e,t,i){return(r,n)=>{let o=n(),{pinbuilder:s,resources:l}=o,{pinDrafts:a,pinItems:d,storyPinItems:c}=s,{pinItemIds:u,type:h,isShowcase:p}=a[e];return u.filter(e=>"carousel"!==h||!!d[e].media).map(e=>("story"!==h&&r(y(e,"link_url")),S({i18n:t,ideaPinRenamingEnabled:i,link:"story"===h?c[e].linkBlock&&c[e].linkBlock.srcUrl:d[e].link,pinItemId:e,resources:l,dispatch:r,isShowcase:p})))}}function w(e,t,i,r){return(o,s)=>{let l=s(),{pinbuilder:c,resources:u}=l,{pinDrafts:h,pinItems:p,storyPinItems:_}=c,{pinItemIds:g,type:m}=h[e],f="PinCreationQualitySignalResource";if("story"===m)return Promise.resolve([]);let x={pin_items:g.reduce((e,t)=>{let r="story"===m,{title:n,description:o,media:s}=r?_[t]:p[t],l=r?_[t].linkBlock.srcUrl:p[t].link;return{...e,[t]:{title:n,description:o,image_signature:s&&"localImage"===s.type?s.signature:"",link_url:l,fields_to_check:[i]}}},{})},v=(0,a.Z)(x);if(!u||!u[f]||!u[f][v])return new Promise(e=>{n.Z.create(f,x).callGet().then(n=>{let{data:s}=n.resource_response;return g.map(e=>o(y(e,i))),o((0,d.Sr)(f,x,n)),e(b(s,t,r))}).catch(()=>e([]))});{let{data:e}=u[f][v];return g.map(e=>o(y(e,i))),Promise.resolve(b(e,t,r))}}}function E(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=(0,p.q7)(o,{pinDraftId:e}).filter(e=>null!==e.media);r(n.length<s.fk?(0,u.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}):null)})}}function I(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=(0,p.q7)(o,{pinDraftId:e}).filter(e=>!!e.blockIds.length);r(0===n.length?(0,u.ZP)({errorId:"STORY_PIN_NOT_ENOUGH_PAGES",i18n:t,ideaPinRenamingEnabled:i}):n.length>s.yX?(0,u.ZP)({errorId:"STORY_PIN_TOO_MANY_PAGES",i18n:t,ideaPinRenamingEnabled:i}):null)})}}function j(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=(0,p.pq)(o,{pinDraftId:e}),s=(0,_.yp)(o,{pinItemId:n[0]});return r(1!==s.filter(e=>("story_pin_image_block"===e.type||"story_pin_video_block"===e.type)&&!!e.media).length?(0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",i18n:t,ideaPinRenamingEnabled:i}):null)})}}function C(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=(0,p.pc)(o,{pinDraftId:e});return r(n?null:(0,u.ZP)({errorId:"STORY_PIN_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))})}}let T=[v,A,function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{type:n}=o.pinbuilder.pinDrafts[e],{media:s}=x(o,e);r("carousel"===n?null:s?null:(0,u.ZP)({errorId:"MEDIA_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))})}},P,function(e,t,i){return(r,n)=>{let l=n();return new Promise(r=>{let{publishOption:n,scheduledDate:a}=l.pinbuilder.pinDrafts[e],d=new Date;d.setHours(0,0,0,0),"publish-immediately"!==n&&(a?a<d?r((0,u.ZP)({errorId:"DATE_IN_PAST",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):a>(0,o.Z)(new Date,s.TZ)&&r((0,u.ZP)({errorId:"DATE_TOO_FAR_IN_FUTURE",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})):r((0,u.ZP)({errorId:"DATE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))),r(null)})}},function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{publishOption:n,scheduledTime:s}=o.pinbuilder.pinDrafts[e];r("publish-immediately"===n||s?null:(0,u.ZP)({errorId:"TIME_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))})}}],D=[v,A,function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{pinItemIds:n}=o.pinbuilder.pinDrafts[e],{canvasJson:s}=o.pinbuilder.storyPinItems[n[0]];r(s&&s.aspectRatio&&9===s.aspectRatio.w&&16===s.aspectRatio.h?null:(0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}))})}},function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{pinItemIds:n}=o.pinbuilder.pinDrafts[e],{media:s}=o.pinbuilder.storyPinItems[n[0]];r(s&&"localVideo"===s.type?(0,u.ZP)({errorId:"STORY_PIN_VIDEO_ON_COVER",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e}):null)})}},function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let{pinItemIds:n}=o.pinbuilder.pinDrafts[e],{title:s}=o.pinbuilder.storyPinItems[n[0]];s||r((0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_TITLE_MISSING",i18n:t,ideaPinRenamingEnabled:i,dispatchId:e})),r(null)})}},E],O=[v,j,I,C],z=(e,t)=>{let{pinItemIds:i}=e.pinbuilder.pinDrafts[t],r=i.length?e.pinbuilder.storyPinItems[i[0]]:{};return r.blockIds.length?O:D},R=[v,A,E],k=[v,j,I,C],L=(e,t)=>{let{pinItemIds:i}=e.pinbuilder.pinDrafts[t],r=i.length?e.pinbuilder.storyPinItems[i[0]]:{};return r.blockIds.length?k:R},N=[function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=(0,p.uO)(o,{pinDraftId:e}),s=!1;for(let e=0;e<n.length;e+=1){var l;if(null!==(l=n[e].media)&&void 0!==l&&l.type){let t;let{media:i}=n[e];switch(i.type){case"localImage":t=i.signatureEdited;break;case"localVideo":t=void 0===i.trimmedEndTime||void 0===i.trimmedStartTime||0===i.trimmedStartTime&&i.trimmedEndTime===i.duration?i.signature:i.signatureEdited;break;case"webImage":case"webVideo":t=i.signature}if(!t){s=!0;break}}}return r(s?(0,u.ZP)({errorId:"STORY_PIN_MEDIA_SIGNATURES_MISSING",i18n:t,ideaPinRenamingEnabled:i}):null)})}},function(e,t,i){return(r,n)=>{let o=n();return new Promise(r=>{let n=o.pinbuilder.pinDrafts[e].pinItemIds[0];return r(o.pinbuilder.storyPinItems[n].coverImgSignature?null:(0,u.ZP)({errorId:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",i18n:t,ideaPinRenamingEnabled:i}))})}}],B=(e,t)=>{let{pinItemIds:i}=e.pinbuilder.pinDrafts[t],r=i.length?e.pinbuilder.storyPinItems[i[0]]:{};return r.blockIds.length?N:[]};function Z(e,t,i){return(r,n)=>{let o=n(),{type:s}=o.pinbuilder.pinDrafts[e],l=m([..."story"===s?z(o,e):T].map(n=>r(n(e,t,i))));return Promise.all(l).then(e=>m(e.filter(Boolean)))}}function M(e,t,i){return(r,n)=>{let o=n(),{type:s}=o.pinbuilder.pinDrafts[e],l=m([..."story"===s?L(o,e):T].map(n=>r(n(e,t,i))));return Promise.all(l).then(e=>m(e.filter(Boolean)))}}function F(e,t,i){return(r,n)=>{let o=n(),s=o.pinbuilder.pinDrafts[e],l=o.pinbuilder.storyPinItems[s.pinItemIds[0]].blockIds.length>0,a=m([...l?B(o,e):[]].map(n=>r(n(e,t,i))));return Promise.all(a).then(e=>m(e.filter(Boolean)))}}},382964:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var r=i(667294),n=i(883119),o=i(319915),s=i(898781),l=i(947599),a=i(785893);function d(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let c=(0,r.lazy)(()=>Promise.all([i.e(32777),i.e(17621),i.e(19790),i.e(31642)]).then(i.bind(i,382210)));class u extends r.Component{constructor(...e){super(...e),d(this,"loaded",!1),d(this,"setRef",e=>{let{onLoaded:t}=this.props;!this.loaded&&t&&t(e),this.loaded=!0})}render(){let{borderRadius:e,height:t,width:i}=this.props;return(0,a.jsx)(o.Z,{name:"SafeSuspense_PinCanvasLoader_PinCanvas",children:(0,a.jsx)(l.Z,{fallback:(0,a.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(n.$j,{accessibilityLabel:this.props.i18n.bt("Loading image editor", "Loading image editor", "accessibility label for loading spinner", undefined, true),show:!0})}),children:(0,a.jsx)(c,{borderRadius:e,width:i,height:t,ref:this.setRef})})})}}function h(e){let t=(0,s.ZP)();return(0,a.jsx)(u,{...e,i18n:t})}},265696:(e,t,i)=>{"use strict";function r(){return Promise.all([i.e(32777),i.e(17621),i.e(19790)]).then(i.bind(i,237403)).then(({default:e})=>e)}i.d(t,{Z:()=>r})},955625:(e,t,i)=>{"use strict";i.d(t,{$R:()=>R,AW:()=>l,De:()=>U,Dp:()=>O,Hv:()=>E,IU:()=>d,IW:()=>I,Ir:()=>A,J6:()=>c,JK:()=>M,Nv:()=>x,QS:()=>G,SX:()=>k,VC:()=>C,Vv:()=>p,Wx:()=>u,ZT:()=>H,_y:()=>s,as:()=>F,bg:()=>T,f5:()=>f,fD:()=>_,fI:()=>D,fQ:()=>o,g6:()=>v,hp:()=>B,it:()=>g,ln:()=>y,oH:()=>S,pg:()=>V,qs:()=>h,re:()=>P,rh:()=>z,sT:()=>w,uN:()=>j,uO:()=>W,vF:()=>Z,xZ:()=>a,z2:()=>m,zA:()=>b,zU:()=>L,zs:()=>N});var r=i(858472);let n=r.x7,o=600,s=64,l=600,a=150,d=750,c="jpeg",u=.92,h="#efefef",p=.7,_=2,g=16,m=n,f=8,x=n,b=1,y="white",v="#efefef",P=.7,S=2,A=8,w="#ffb3be",E=1,I=16,j="#ffb3be",C=1,T="white",D=50,O=n,z=n,R=4,k="black",L=58,N="#0074e8",B=.94,Z=8,M="white",F="bold 16px sans-serif",U=.1,H={w:2,h:3},V=5,G={1:[{viewbox:{top:0,left:0,width:1,height:1},roundedCorners:{tl:!0,tr:!0,bl:!0,br:!0},internalEdges:{mt:!1,mb:!1,ml:!1,mr:!1}}],2:[{viewbox:{top:0,left:0,width:1,height:2/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[0]}}],3:[{viewbox:{top:0,left:0,width:1,height:1/3},roundedCorners:{tl:!0,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!1},alignedSections:{mb:[]},againstSections:{mb:[1]}},{viewbox:{top:1/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!1,mr:!1},alignedSections:{mt:[],mb:[]},againstSections:{mt:[0],mb:[2]}},{viewbox:{top:2/3,left:0,width:1,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!0},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!1},alignedSections:{mt:[]},againstSections:{mt:[1]}}],4:[{viewbox:{top:0,left:0,width:.5,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[2],mr:[1]},againstSections:{mb:[1,3],mr:[2,3]}},{viewbox:{top:.5,left:0,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[3],mr:[0]},againstSections:{mt:[0,2],mr:[2,3]}},{viewbox:{top:0,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[0],ml:[3]},againstSections:{mb:[1,3],ml:[0,1]}},{viewbox:{top:.5,left:.5,width:.5,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[1],ml:[2]},againstSections:{mt:[0,2],ml:[0,1]}}],5:[{viewbox:{top:0,left:0,width:.6,height:.5},roundedCorners:{tl:!0,tr:!1,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!1,mr:!0},alignedSections:{mb:[],mr:[1]},againstSections:{mb:[1],mr:[2,3,4]}},{viewbox:{top:.5,left:0,width:.6,height:.5},roundedCorners:{tl:!1,tr:!1,bl:!0,br:!1},internalEdges:{mt:!0,mb:!1,ml:!1,mr:!0},alignedSections:{mt:[],mr:[0]},againstSections:{mt:[0],mr:[2,3,4]}},{viewbox:{top:0,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!0,bl:!1,br:!1},internalEdges:{mt:!1,mb:!0,ml:!0,mr:!1},alignedSections:{mb:[],ml:[3,4]},againstSections:{mb:[3],ml:[0,1]}},{viewbox:{top:1/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!1},internalEdges:{mt:!0,mb:!0,ml:!0,mr:!1},alignedSections:{mt:[],mb:[],ml:[2,4]},againstSections:{mt:[2],mb:[4],ml:[0,1]}},{viewbox:{top:2/3,left:.6,width:.4,height:1/3},roundedCorners:{tl:!1,tr:!1,bl:!1,br:!0},internalEdges:{mt:!0,mb:!1,ml:!0,mr:!1},alignedSections:{mt:[],ml:[2,3]},againstSections:{mt:[3],ml:[0,1]}}]},W={sm:20,md:30,lg:40}},505132:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(883119),n=i(121151),o=i(898781),s=i(780280),l=i(553751),a=i(785893);function d(e){let t=(0,o.ZP)(),{onSectionCreate:i,onClose:d,selectedBoard:c,useLayer:u=!0}=e,{isRTL:h}=(0,s.B)(),p=u?n.ZP:r.u_,_=(0,a.jsx)(r.xu,{paddingX:4,paddingY:6,position:"relative",children:(0,a.jsxs)(r.kC,{alignItems:"center",justifyContent:"center",children:[(0,a.jsx)(r.xu,{maxWidth:400,children:(0,a.jsx)(r.X6,{align:"center",size:"500",children:t.bt("Add section", "Add section", "Modal header for adding a section", undefined, true)})}),(0,a.jsx)(r.xu,{left:h,paddingX:6,paddingY:5,position:"absolute",right:!h,top:!0,children:(0,a.jsx)(r.hU,{icon:"cancel",iconColor:"darkGray",size:"lg",accessibilityLabel:t.bt("Close", "Close", "CreateSection.Modal.Icon", undefined, true),onClick:d})})]})});return(0,a.jsx)(p,{accessibilityModalLabel:t.bt("Add a section to the board", "Add a section to the board", "modal to add a section to a board", undefined, true),heading:_,onDismiss:d,size:"sm",children:(0,a.jsx)(r.xu,{display:"flex",color:"default",rounding:2,children:(0,a.jsx)(l.Z,{board:c,completeCreateSectionAction:i,onClearModal:d,positionRelative:!0,showTitle:!1})})})}},239682:(e,t,i)=>{"use strict";function r(e,t,i){return{privacy_filter:t?"secret":"public",sort:i||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}i.d(t,{Z:()=>r})},59644:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r=(e,t)=>`${e}:${t||""}`},240265:(e,t,i)=>{"use strict";i.d(t,{O:()=>l,Q:()=>a});var r=i(414327),n=i(59644),o=i(956800);let s=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],l={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:i,username:r},n)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:r,page_size:25,group_by:i?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...n?{orbac_subject_id:n}:Object.freeze({})})},a=e=>s.reduce((t,i)=>{let s=[(0,o.N8)("profileBoards",(0,n.Z)(e,i))];return[!0,!1].forEach(t=>{[!0,!1].forEach(n=>{s.push((0,r.jB)(l.name,l.options({username:e,boardOrder:i,mixPublicSecret:t,filterStories:n})))})}),t.concat(s)},[])},254176:(e,t,i)=>{"use strict";i.d(t,{Br:()=>p,Cr:()=>E,K8:()=>b,L1:()=>k,Tq:()=>f,YQ:()=>R,YV:()=>w,ZP:()=>I,aX:()=>j,eo:()=>g,fJ:()=>N,md:()=>_,oG:()=>m,oL:()=>C,of:()=>y,xH:()=>x,xQ:()=>v,xR:()=>z,xk:()=>S,yT:()=>h,zS:()=>L});var r=i(214494),n=i(27255),o=i(186656),s=i(248327),l=i(414327),a=i(239682),d=i(240265),c=i(956800),u=i(492583);function h(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function p(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function _(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:r}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:r}}}let m=(e,t)=>i=>i((0,s.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function f(e,t,i){return(0,s.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}function x(e,t,i){return r=>(0,o.Z)({url:`/v3/boards/${e}/merge/${t}/`,method:"POST",data:i?{orbac_subject_id:i}:{}}).then(()=>Promise.all([r(g({boardId:e})),r(f(t,"pin_count")),r((0,c.N8)(u.Z.BOARD_SECTIONS,t))]))}function b(e){return t=>{e&&(0,d.Q)(e).forEach(e=>{t(e)})}}let y=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),v=e=>m(e,"pin_count");function P(e,t){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:t}}}function S(e,t){return i=>(i(P(e)),r.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callUpdate())}function A(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function w(e,t){return i=>(i(A(e)),r.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callDelete())}let E=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),I=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function j(e,t,i){let o={name:e,privacy:n.Z.BoardPrivacy.PUBLIC,username:t,...i?{orbac_subject_id:i}:Object.freeze({})};return e=>r.Z.create("BoardResource",o).callCreate().then(i=>{let r=i.resource_response.data;return e(t&&(0,l.jB)("BoardsResource",(0,a.Z)(t,!1))),r})}function C(e={},t,i){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:i}}let T=(e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),D=(e,t,i)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:i}}),O=(e,t,i,r)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:i,collaboratingUsers:r}}),z=(e,t,i)=>async n=>{n(T(e,t));let o=await r.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();return o.resource_response.error||i({event_type:29,object_id_str:e}),o},R=(e,t,i,n,o,s)=>async l=>{var a,d;let c="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource";l(D(e,null!==(a=null==n?void 0:n.id)&&void 0!==a?a:"",i));try{let i=await r.Z.create(c,{board_id:e,field_set_key:"boardEdit",invited_user_id:null!==(d=null==n?void 0:n.id)&&void 0!==d?d:"",...s?{orbac_subject_id:s}:{}}).callDelete();i.resource_response.error||o({event_type:"accepted"===t?25:29,object_id_str:e})}catch(r){l(O(e,i,t,[n]))}},k=(e,t,i,n)=>o=>{let s=r.Z.create("BoardResource",{board_id:i}).callDelete();return o(g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:n})),s},L=(e,t)=>i=>r.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then(r=>(i((0,c.Qv)("archived-boards",[{id:e,type:"board"}])),i(P(e,t)),r)),N=(e,t)=>i=>r.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then(r=>(i((0,c.Qv)(`profile-boards:${t}`,[{id:e,type:"board"}])),i(A(e)),r))},956800:(e,t,i)=>{"use strict";function r(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function n(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>s,N8:()=>n,Qv:()=>o,_f:()=>r,vX:()=>l});let o=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function s(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function l(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},314123:(e,t,i)=>{"use strict";function r(e,t){return{type:"PIN_BUILDER_REMOVE_PIN_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t}}}function n(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_UPLOAD",payload:{pinDraftId:e}}}function o(e,t){return(i,o)=>{let s=o(),{pinDraftIdUploadStatusMap:l}=s.pinbuilder,a=l[e];a&&a.items[t]&&a.items[t].xhr&&(a.items[t].xhr.abort(),i(Object.keys(a.items).length<=1?n(e):r(e,t)))}}i.d(t,{$Z:()=>o,su:()=>r,y2:()=>n})},761218:(e,t,i)=>{"use strict";function r(e){return{type:"PIN_BUILDER_ADD_CREATED_PIN_ID",payload:{pinId:e}}}i.d(t,{F:()=>r})},205474:(e,t,i)=>{"use strict";function r(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:i}}}i.d(t,{Z:()=>r})},174807:(e,t,i)=>{"use strict";function r(e,t,i,r){return{type:"PIN_DRAFT_ADD_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:r}}}i.d(t,{Z:()=>r})},622296:(e,t,i)=>{"use strict";function r(e,t,i){return{type:"PIN_ITEM_ADD_PIN_TAG",payload:{pinItemId:e,pinTagId:t,pinTag:i}}}i.d(t,{Z:()=>r})},347619:(e,t,i)=>{"use strict";function r(e,t,i){return{type:"PIN_TAG_ADD_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t,taggedObject:i}}}i.d(t,{Z:()=>r})},448994:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var r=i(172045),n=i(205474),o=i(174807),s=i(748254),l=i(690374);function a({i18n:e,isAppend:t,isEmployee:i,pinDraft:a,pinDraftId:d,storyPinPublishStopwatch:c}){return u=>{if(!a||!a.pinItemIds){let e=(0,r.Z)(),t=a&&"story"===a.type?s.Z:o.Z;u(t(d,e))}(null==a?void 0:a.type)==="story"&&u((0,l.Z)({i18n:e,isEmployee:i,pinDraftId:d,storyPinPublishStopwatch:c})),u((0,n.Z)(d,a,{isAppend:t}))}}},537929:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var r=i(172045),n=i(174807),o=i(448994),s=i(474394),l=i(798477),a=i(923490);function d({assets:e,checkExperiment:t,country:i,i18n:d,ideaPinRenamingEnabled:c,isEmployee:u,logContextEvent:h,userId:p,isShowcase:_,parentPinId:g,isQuizAd:m=!1}){return(f,x)=>{let b=x(),{pinDraftIds:y}=b.pinbuilder;e.concat().reverse().reduce((e,s)=>e.then(()=>{let e=(0,r.Z)(),l=(0,r.Z)();("localImage"===s.type||"webImage"===s.type||"localVideo"===s.type)&&(f((0,n.Z)(e,l,{media:s,..."webImage"===s.type?{link:s.sourceURL}:{}})),"localVideo"===s.type&&f((0,a.d)({pinDraftId:e,pinItemId:l,userId:p,country:i,i18n:d,logContextEvent:h,checkExperiment:t,ideaPinRenamingEnabled:c}))),f((0,o.Z)({i18n:d,isEmployee:u,pinDraft:{pinItemIds:[l],isShowcase:_,parentPinId:g,isQuizAd:m},pinDraftId:e,storyPinPublishStopwatch:void 0}))}),Promise.resolve()).then(()=>{let e=y.findIndex(e=>!(0,s._isPristine)(b,e));y.slice(0,e>=0?e:void 0).forEach(e=>f((0,l.Z)(e)))})}}},794843:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(172045),n=i(448994),o=i(798477);function s({i18n:e,isEmployee:t,pinDraftId:i}){return(s,l)=>{let a=l(),{pinDraftIds:d}=a.pinbuilder;s((0,o.Z)(i)),d.length<=1&&s((0,n.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))}}},395024:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(172045),n=i(448994),o=i(474394),s=i(798477);function l({i18n:e,isEmployee:t}){return(i,l)=>{let{pinbuilder:a}=l(),{pinDraftIds:d,selectedPinDraftIds:c}=a;c.forEach(e=>{i((0,o.deselectPinBuilderPinDraft)(e)),i((0,s.Z)(e))}),c.length===d.length&&i((0,n.Z)({i18n:e,isEmployee:t,pinDraft:void 0,pinDraftId:(0,r.Z)(),storyPinPublishStopwatch:void 0}))}}},474394:(e,t,i)=>{"use strict";i.r(t),i.d(t,{_isPristine:()=>v,addPinBuilderAsset:()=>y,addPinBuilderPinDraftItemUpload:()=>A,clearCreatedPinIds:()=>j,clearPinBuilderPinDrafts:()=>u,clearSelectedPinBuilderPinDrafts:()=>g,deselectAllPinBuilderPinDrafts:()=>x,deselectPinBuilderPinDraft:()=>_,duplicatePinDraft:()=>h,removeCreatedPinId:()=>I,selectAllPinBuilderPinDrafts:()=>m,selectAllPinBuilderStoryPinDrafts:()=>f,selectPinBuilderPinDraft:()=>p,setCloseupImageSignature:()=>C,setPinBuilderBatchEditMode:()=>P,setPinBuilderEntryPoint:()=>T,setPinBuilderPinItemUploadStatus:()=>w,setPinBuilderPinItemUploadXhr:()=>E,setPinBuilderSharedData:()=>b,setPinEditorPinDraft:()=>S,setShowDisabledPinCreationBanner:()=>O,setShowFeedbackModal:()=>D});var r=i(172045),n=i(299295),o=i(205474),s=i(174807),l=i(305782),a=i(748254),d=i(843030),c=i(490072);function u(){return{type:"PIN_BUILDER_CLEAR_PIN_DRAFTS"}}function h(e){return(t,i)=>{let n=i(),{pinDrafts:l,pinItems:c,storyPinItems:u,storyPinItemBlocks:h}=n.pinbuilder,p=l[e],_=(0,r.Z)(),g=p.pinItemIds.map(i=>{let n=(0,r.Z)();if(c[i])t((0,s.Z)(_,n,c[i]));else if(u[i]){let o=u[i],s=o.blockIds.map(e=>h[e]);t((0,a.Z)(_,n,{...o,blockIds:[]})),s.forEach(i=>{t((0,d.Uo)(e,n,(0,r.Z)(),{...i}))})}return n});return t((0,o.Z)(_,{...p,pinItemIds:g,storyPinDraftId:null},{insertBefore:e})),_}}function p(e){return{type:"PIN_BUILDER_SELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function _(e){return{type:"PIN_BUILDER_DESELECT_PIN_DRAFT",payload:{pinDraftId:e}}}function g(){return{type:"PIN_BUILDER_CLEAR_SELECTED_PIN_DRAFTS"}}function m(){return(e,t)=>{let{pinbuilder:i}=t(),{selectedPinDraftIds:r,pinDrafts:o,pinDraftIds:s}=i;s.forEach(t=>{let{status:i}=o[t];r.includes(t)||n.x1.includes(i)||e(p(t))})}}function f(){return(e,t)=>{let i=t(),{pinbuilder:r}=i,{selectedPinDraftIds:o}=r,s=(0,c.Wp)(i);Object.keys(s).forEach(t=>{let{status:i,storyPinDraftId:r}=s[t];r&&t&&!o.includes(t)&&!n.x1.includes(i)&&e(p(t))})}}function x(){return(e,t)=>{let{pinbuilder:i}=t(),{selectedPinDraftIds:r}=i;r.forEach(t=>{e(_(t))})}}function b(e){return(t,i)=>{let n=i(),{selectedPinDraftIds:o}=n.pinbuilder,{publishOption:s,scheduledDate:a,scheduledTime:d,selectedItem:c,...u}=e;o.forEach(e=>{t((0,l.NA)(e,{...null!=s?{publishOption:s}:Object.freeze({}),...void 0!==c?{selectedItem:c}:Object.freeze({}),...void 0!==a?{scheduledDate:a}:Object.freeze({}),...void 0!==d?{scheduledTime:d}:{}})),u.editorInstanceId=(0,r.Z)(),t((0,l.to)(e,u))})}}function y(e){return{type:"PIN_BUILDER_ADD_ASSET",payload:{asset:e}}}function v(e,t){let{pinDrafts:i,pinItems:r}=e.pinbuilder,{selectedItem:n,pinItemIds:o,publishOption:s}=i[t];return!n&&"publish-immediately"===s&&o.every(e=>{let{description:t,link:i,media:n,title:o}=r[e];return!t&&!i&&!o&&!n})}function P(e){return{type:"PIN_BUILDER_SET_BATCH_EDIT_MODE",payload:{isBatchEditMode:e}}}function S(e){return{type:"PIN_EDITOR_SET_PIN_DRAFT",payload:{editedPinDraftId:e}}}function A(e,t,i){return{type:"PIN_BUILDER_ADD_PIN_DRAFT_ITEM_UPLOAD",payload:{pinDraftId:e,pinItemId:t,upload:i}}}function w(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_STATUS",payload:{pinDraftId:e,pinItemId:t,status:i}}}function E(e,t,i){return{type:"PIN_BUILDER_SET_PIN_ITEM_UPLOAD_XHR",payload:{pinDraftId:e,pinItemId:t,xhr:i}}}function I(e){return{type:"PIN_BUILDER_REMOVE_CREATED_PIN_ID",payload:{pinId:e}}}function j(){return{type:"PIN_BUILDER_CLEAR_CREATED_PIN_IDS"}}function C(e){return{type:"PIN_BUILDER_SET_CLOSEUP_IMAGE_SIGNATURE",payload:{closeupImageSignature:e}}}function T(e){return{type:"PIN_BUILDER_ENTRY_POINT",payload:{entryPoint:e}}}function D(e){return{type:"PIN_BUILDER_SHOW_FEEDBACK_MODAL",payload:{showFeedbackModal:e}}}function O(e){return{type:"PIN_BUILDER_SHOW_DISABLE_PIN_CREATION_BANNER",payload:{showDisabledPinCreationBanner:e}}}},305782:(e,t,i)=>{"use strict";i.d(t,{$K:()=>H,$k:()=>ef,BG:()=>T,By:()=>eb,Cj:()=>X,DL:()=>e_,Fu:()=>eL,Fz:()=>Q,GX:()=>en,I0:()=>F,Ig:()=>em,Jr:()=>eT,KF:()=>eR,KN:()=>eg,KT:()=>W,N$:()=>Y,NA:()=>ev,Nv:()=>N,QZ:()=>G,Qc:()=>et,R6:()=>q,RR:()=>M,Si:()=>eD,TD:()=>k,Ug:()=>ec,Ve:()=>V,WE:()=>ej,WT:()=>eI,Wo:()=>K,XB:()=>ei,YN:()=>ed,YY:()=>ea,Yr:()=>U,_B:()=>$,_e:()=>eP,c8:()=>D,c_:()=>eh,cr:()=>eu,dI:()=>ee,dj:()=>el,e5:()=>O,ej:()=>J,f9:()=>es,hb:()=>ep,iX:()=>eO,kp:()=>ey,lT:()=>L,m_:()=>ek,n6:()=>R,p3:()=>z,q0:()=>ex,qF:()=>er,rS:()=>B,th:()=>ez,to:()=>eA,u9:()=>eS,vS:()=>eE,xb:()=>Z,z0:()=>eC});var r=i(172045),n=i(214494),o=i(299295),s=i(665866),l=i(573545),a=i(840839),d=i(414327),c=i(451105),u=i(801815),h=i(69183),p=i(623320),_=i(254176),g=i(956800),m=i(314123),f=i(761218),x=i(205474),b=i(174807),y=i(502890),v=i(798477),P=i(458253),S=i(827628),A=i(923490),w=i(31100),E=i(472278),I=i(90326),j=i(492583);function C(e,t,i,r){return(0,c.ZP)({errorId:e,i18n:t,ideaPinRenamingEnabled:r,dispatchId:i})}function T(){return{type:"PIN_DRAFT_CLEAR_STATE"}}function D(e,t){return{type:"PIN_DRAFT_SET_VIEW",payload:{pinDraftId:e,view:t}}}function O(e,t){return{type:"PIN_DRAFT_SET_CREATE_METHOD",payload:{pinDraftId:e,createMethod:t}}}function z(e,t){return{type:"PIN_DRAFT_SET_STATUS",payload:{pinDraftId:e,status:t}}}function R(e,t){return{type:"PIN_DRAFT_SET_PUBLISHING_STATUS",payload:{pinDraftId:e,publishingStatus:t}}}function k(e,t){return{type:"PIN_DRAFT_SET_IS_AD_INELIGIBLE",payload:{pinDraftId:e,isAdIneligible:t}}}function L(e,t,i){return{type:"PIN_DRAFT_SET_API_ERROR",payload:{pinDraftId:e,apiError:t,apiErrorCode:i}}}function N(e,t){return{type:"PIN_DRAFT_SET_SELECTED_ITEM",payload:{pinDraftId:e,selectedItem:t}}}function B(e,t){return{type:"PIN_DRAFT_SET_ADS_ONLY_STATUS",payload:{pinDraftId:e,pinIsAdsOnly:t}}}function Z(e,t){return{type:"PIN_DRAFT_SET_BOARD_ERROR",payload:{pinDraftId:e,boardError:t}}}function M(e,t){return{type:"PIN_DRAFT_SET_PUBLISH_OPTION",payload:{pinDraftId:e,publishOption:t}}}function F(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE",payload:{pinDraftId:e,scheduledDate:t}}}function U(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_DATE_ERROR",payload:{pinDraftId:e,scheduledDateError:t}}}function H(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME",payload:{pinDraftId:e,scheduledTime:t}}}function V(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_TIME_ERROR",payload:{pinDraftId:e,scheduledTimeError:t}}}function G(e,t){return{type:"PIN_DRAFT_SET_LAST_EDITED_TIME",payload:{pinDraftId:e,lastEditedTime:t}}}function W(e,t){return{type:"PIN_DRAFT_SET_LAST_SAVED_TIME",payload:{pinDraftId:e,lastSavedTime:t}}}function $(e,t){return{type:"PIN_DRAFT_SET_MEDIA_ERROR",payload:{pinDraftId:e,mediaError:t}}}function X(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_INDEX",payload:{pinDraftId:e,pinItemIndex:t}}}function Y(e,t){return{type:"PIN_DRAFT_SET_PIN_ID",payload:{pinDraftId:e,pinId:t}}}function q(e,t){return{type:"PIN_DRAFT_SET_SCHEDULED_PIN",payload:{pinDraftId:e,scheduledPin:t}}}function K(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN",payload:{pinDraftId:e,storyPin:t}}}function J(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_DRAFT_ID",payload:{pinDraftId:e,storyPinDraftId:t}}}function Q(e,t){return{type:"PIN_DRAFT_UPDATE_STORY_PIN_METADATA",payload:{pinDraftId:e,storyPinMetadata:t}}}function ee(e,t){return{type:"PIN_DRAFT_SET_IS_COMMENTS_ALLOWED",payload:{pinDraftId:e,isCommentsAllowed:t}}}function et(e,t){return{type:"PIN_DRAFT_SET_IS_SHOPPING_REC_ALLOWED",payload:{pinDraftId:e,isShoppingRecAllowed:t}}}function ei(e,t){return{type:"PIN_DRAFT_SET_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function er(e,t){return{type:"PIN_DRAFT_SET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e,pinItemIds:t}}}function en(e){return{type:"PIN_DRAFT_RESET_STORY_PIN_SELECTED_PIN_ITEM_IDS",payload:{pinDraftId:e}}}function eo(e,t){return{type:"PIN_DRAFT_SET_URL_CREATION_SOURCE",payload:{pinDraftId:e,urlCreationSource:t}}}function es(e,t,i,r){return{type:"PIN_DRAFT_SET_WEBSITE_LINK",payload:{pinDraftId:e,websiteLink:t,websiteDefaultImageUrl:r,error:i}}}function el(e,t){return{type:"PIN_DRAFT_ADD_WEBSITE_MEDIA",payload:{pinDraftId:e,media:t}}}function ea(e,t){return{type:"PIN_DRAFT_REMOVE_WEBSITE_MEDIA",payload:{pinDraftId:e,mediaUrl:t}}}function ed(e,t){return{type:"PIN_DRAFT_ADD_INTEREST_TAG",payload:{pinDraftId:e,tag:t}}}function ec(e,t){return{type:"PIN_DRAFT_REMOVE_INTEREST_TAG",payload:{pinDraftId:e,id:t}}}function eu(e,t){return{type:"PIN_DRAFT_SET_INTEREST_TAGS",payload:{pinDraftId:e,tags:t}}}function eh(e){return{type:"PIN_DRAFT_CLEAR_INTEREST_TAGS",payload:{pinDraftId:e}}}function ep(e){return{type:"PIN_DRAFT_CLEAR_WEBSITE_MEDIA",payload:{pinDraftId:e}}}function e_(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT",payload:{pinDraftId:e,altText:t}}}function eg(e,t){return{type:"PIN_DRAFT_SET_ALT_TEXT_ERROR",payload:{pinDraftId:e,altTextError:t}}}function em(e,t){return{type:"PIN_DRAFT_SET_SHOWCASE_BANNER_ERROR",payload:{pinDraftId:e,showcaseBannerError:t}}}function ef(e,t){return{type:"PIN_DRAFT_SET_CREATIVE_STUDIO_PIN_DATA",payload:{pinDraftId:e,creativeStudioPinParams:t}}}function ex(e,t="upload",i){return(n,o)=>{let{pinbuilder:{pinDrafts:l}}=o(),{pinItemIds:a,pinItemIndex:d,websiteLink:c,websiteMedia:u}=l[e];if(u.length>0){let t=a[d];n((0,y.mO)(t,u[0])),n((0,y.PF)(t,"webImage"===u[0].type&&u[0].sourceURL?u[0].sourceURL:c)),n((0,y.lZ)(t,null)),n(eo(e,i))}u.length>1&&(s.Z.enabled("multi_pin")||s.Z.enabled("multi_pin_pinner")?u.slice(1).forEach(e=>{let t=(0,r.Z)();n((0,x.Z)(t));let o=(0,r.Z)();n((0,b.Z)(t,o,{media:e,link:"webImage"===e.type?e.sourceURL:c})),n(eo(t,i))}):u.slice(1).forEach(t=>{let o=(0,r.Z)();n((0,b.Z)(e,o,{media:t,link:c})),n(eo(o,i))})),n(ep(e)),n(es(e,"")),n(D(e,t))}}function eb(e){return(t,i)=>{let r=i(),{pinItemIds:n,pinItemIndex:o,websiteLink:s,websiteMedia:l}=r.pinbuilder.pinDrafts[e],a=[];if(l.length>0){let e=n[o];t((0,y.mO)(e,l[0])),t((0,y.PF)(e,"webImage"===l[0].type&&l[0].sourceURL?l[0].sourceURL:s)),t((0,y.lZ)(e,null)),l.forEach(e=>{a.push(e)})}return t(D(e,"board")),a}}function ey(e,t){return(i,n)=>{let o=n(),{pinDrafts:s,pinItems:l,storyPinItems:a}=o.pinbuilder,{pinItemIds:d,type:c}=s[e],u=d.indexOf(t),h=d.length-1,p="story"===c?E.hC:y.mO;if(u===h){let{media:r}="story"===c?a[t]:l[t];r&&"webImage"===r.type&&i((0,y.PF)(t,"")),r&&"localVideo"===r.type&&i((0,m.$Z)(e,t)),i(p(t,null))}else i({type:"PIN_DRAFT_REMOVE_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t}}),"carousel"===c&&l[d[h]].media&&i((0,b.Z)(e,(0,r.Z)(),null,{saveIndex:!0}))}}function ev(e,t){return{type:"PIN_DRAFT_UPDATE_DATA",payload:{pinDraftId:e,pinDraft:t}}}function eP(e,t){return{type:"PIN_DRAFT_SET_UPLOAD_START_TIME",payload:{pinDraftId:e,uploadStartTime:t}}}function eS(e,t){return(i,r)=>{let n=r(),{pinItemIds:o,pinItemIndex:s}=n.pinbuilder.pinDrafts[e];if(i({type:"PIN_DRAFT_SET_PIN_ITEM_SHAREABLE",payload:{pinDraftId:e,pinItemShareable:t}}),t){let e=o[s],{description:t,descriptionError:r,link:l,linkError:a,title:d,titleError:c}=n.pinbuilder.pinItems[e];o.forEach(e=>i((0,y.nh)(e,{description:t,descriptionError:r,link:l,linkError:a,title:d,titleError:c})))}}}function eA(e,t){return(i,r)=>{let n=r(),{pinItemIds:o,pinItemIndex:s,pinItemShareable:l}=n.pinbuilder.pinDrafts[e],a=l?o:[o[s]];a.forEach(e=>i((0,y.nh)(e,t)))}}function ew(e,t){let i=t?(0,u.Z)(e,t):null;if(e.customCoverImg){if(i){let{origin_x:t=0,origin_y:r=0,width:n=e.width,height:o=e.height}=i;return(0,h.B)(e.customCoverImg.src,{x:t,y:r,width:n,height:o})}return Promise.resolve(e.customCoverImg.src)}if(!i)return(0,h.v)(e,e.thumbnail,null);{let{origin_x:t=0,origin_y:r=0,width:n=e.width,height:o=e.height}=i,{trimmedStartTime:s,trimmedEndTime:l,duration:a,thumbnail:d}=e,c=s||0,u=d>=c&&d<=(l||a)?d:c;return(0,h.v)(e,u,{x:t,y:r,width:n,height:o})}}function eE(e,t,i,r=2){return async(o,s)=>{let l=s(),{pinbuilder:a}=l,{pinDrafts:d}=a,{interestTags:c}=d[t],u=c.map(e=>e.id);if(u.length>0)try{await n.Z.create("InterestTaggingResource",{pinId:i,interestIds:u,zenSource:r}).callCreate(),e({event_type:8521,aux_data:{pin_id:i,story_pin_creation_id:t}})}catch(s){let{api_error_code:r,message:n,message_detail:o}=s||{};throw e({event_type:8522,aux_data:{error_message:o||n,pin_id:i,status_code:r,story_pin_creation_id:t}}),Error("Cannot add tags to the Pin.")}}}function eI(e,t){return(i,r)=>{let n=r(),{pinDrafts:s}=n.pinbuilder;i(G(e,new Date)),(t||!o.qm.includes(s[e].status))&&i(z(e,"edited"))}}function ej(e,t,i,r,n,o,s){return new Promise((i,r)=>{let l;let{pinbuilder:{pinDrafts:a,pinItems:d,storyPinItems:c,storyPinItemBlocks:u}}=t,{pinItemIds:h,type:_}=a[e],g=h[0];if("story"===_){var m;let e=c[g],t=e.blockIds.map(e=>u[e]),i=t.filter(e=>{var t;return["localImage","localVideo"].includes(null===(t=e.media)||void 0===t?void 0:t.type)});l=null===(m=i[0])||void 0===m?void 0:m.media}else l=d[g].media;if(!l)throw Error("Invalid media");if("localImage"===l.type)(0,p.wL)(l.src,e,n,o,s).then(e=>{i({image_signature:e})}).catch(()=>{r(Error("Cannot schedule the Pin."))});else if("localVideo"===l.type){let t=l.uploadId;ew(l,null).then(t=>(0,p.wL)(t,e,n,o,s)).then(e=>i({image_signature:e,media_upload_id:t})).catch(()=>{r(Error("Cannot schedule the Pin"))})}else throw Error("Cannot upload this media type.")})}function eC(e,t,i){return(r,n)=>{let o=n(),{pinDrafts:s}=o.pinbuilder,{selectedItem:l}=s[e],{board:a}=t,d=a&&a.id||l&&l.boardId;r(Y(e,t.id)),r((0,_.Br)({boardId:d,sectionId:t.section?t.section.id:null,increment:1})),r((0,g.vX)({feedId:t.section?t.section.id:d,feedType:t.section?j.Z.BOARD_SECTION_PINS:j.Z.BOARDFEED,itemIds:[t.id],itemType:"pin"})),r((0,g.vX)({feedId:i,feedType:j.Z.STORY_PINS_FEED,itemIds:[t.id],itemType:"pin",prepend:!0})),r((0,I.JS)({userId:i,increment:1}))}}function eT(e){return(t,i)=>{let r=i(),{pinbuilder:{pinDraftIdUploadStatusMap:n}}=r;return!!n&&!!n[e]&&"uploading"===n[e].status}}function eD(e,t,i,r){return async n=>{let o=!0;try{await n((0,S.Z)({pinDraftId:e,validationKey:"save",i18n:t,ideaPinRenamingEnabled:r,logContextEvent:i}))}catch(e){o=!1}return{pinDraftId:e,isValid:o}}}function eO({pinDraftId:e,userId:t,orbacSubjectId:i,country:r,isPartner:c,i18n:u,ideaPinRenamingEnabled:h,logContextEvent:m,checkExperiment:x,siteType:b}){return(A,E)=>{let{pinbuilder:{pinDrafts:T}}=E(),{scheduledDate:D,scheduledTime:O}=T[e];A(D&&O?function({pinDraftId:e,userId:t,i18n:i,logContextEvent:r,orbacSubjectId:l,siteType:a,ideaPinRenamingEnabled:d}){return(c,u)=>{let h=u(),{pinbuilder:{pinDrafts:p,pinItems:_}}=h;c(z(e,"publishing"));let{altText:g,pinItemIds:m,pinItemIndex:f,scheduledDate:x,scheduledTime:b,selectedItem:y}=p[e],A=m[f],{description:E,link:j,media:C,title:T}=_[A];return c((0,S.Z)({pinDraftId:e,validationKey:"save",i18n:i,ideaPinRenamingEnabled:d,logContextEvent:r})).then(()=>{if(c(eT(e)))return s.Z.enabled("multi_pin")||s.Z.enabled("multi_pin_pinner")?(c((0,P.g)(e,"queueCreate")),c(z(e,"uploading"))):c((0,v.Z)(e)),null;if(!x||!b)throw Error("Cannot schedule a Pin without a scheduled date or time.");let d=new Date(x.getFullYear(),x.getMonth(),x.getDate(),b.getHours(),b.getMinutes(),b.getSeconds()).getTime()/1e3;return Promise.all([ej(e,h,c,i,r,l,a),d]).then(([e,t])=>{if(!y)throw Error("Cannot schedule a Pin without a board.");let i=T.substring(0,o.Ke),r=E.substring(0,o.JO),{image_signature:s,media_upload_id:a}=e,d={board:y.boardId,description:r,image_signature:s,link:j,media_upload_id:a,scheduled_timestamp:t,title:i,...g?{alt_text:g}:Object.freeze({}),...y.sectionId?{section:y.sectionId}:{},...l?{orbac_subject_id:l}:{}};return n.Z.create("ScheduledPinResource",d).callCreate()}).then(i=>{if(!C)throw Error("Cannot schedule a Pin without an image.");let{data:r}=i.resource_response,n={...r,localMedia:C.src};c(q(e,n)),c((0,w.Tn)(r)),c((0,I.h6)({userId:l||t,increment:1})),c(z(e,"succeeded"))})}).catch(()=>{throw c(z(e,"attempted")),Error("Cannot schedule the Pin.")})}}({pinDraftId:e,userId:t,i18n:u,ideaPinRenamingEnabled:h,logContextEvent:m,orbacSubjectId:i,siteType:b}):function({checkExperiment:e,country:t,i18n:i,ideaPinRenamingEnabled:r,isPartner:c,logContextEvent:u,orbacSubjectId:h,pinDraftId:m,siteType:x,userId:b}){return async(e,A)=>{let w=A(),{pinbuilder:E}=w,{pinDrafts:T}=E,{status:D}=T[m];"uploading"!==D&&e(z(m,"publishing"));try{await e((0,S.Z)({pinDraftId:m,validationKey:"save",i18n:i,ideaPinRenamingEnabled:r,logContextEvent:u}))}catch(t){e(z(m,"created")),e(R(m,"clientError"));return}if(e(R(m,"publishing")),e(eT(m))){e((0,P.g)(m,"queueCreate")),e(s.Z.enabled("multi_pin")||s.Z.enabled("multi_pin_pinner")?z(m,"uploading"):(0,v.Z)(m));return}try{let r=await function(e,t,i,r,n,s,a,d,c,u){let{advertiser:h,pinbuilder:_}=t,{pinDrafts:g,pinItems:m}=_,{altText:f,pinIsAdsOnly:x,pinItemIds:b,pinItemIndex:y,selectedItem:v,type:P}=g[e];if(!x&&!v)throw Error(a.bt("Cannot create a Pin without a board.", "Cannot create a Pin without a board.", "pinBuilder.error.noBoard", undefined, true));if(!P)throw Error("PinBuilder Exception: Undefined PinDraft type");let S=n&&h&&(h.owner_user_id!==n||h.client_business_id)?h.id:null,A={field_set_key:"create_success",skip_pin_create_log:!0,...f?{alt_text:f}:Object.freeze({}),...v&&v.sectionId?{section:v.sectionId}:Object.freeze({}),...v&&v.boardId?{board_id:v.boardId}:Object.freeze({}),...S?{advertiser_id:S}:Object.freeze({}),...r?{orbac_subject_id:r}:Object.freeze({}),...x?{is_removable:!0,create_default_board:!0}:Object.freeze({})};return new Promise((t,n)=>{if("carousel"===P)(0,p.Ch)(b.map(e=>m[e]),e,d,u).then(e=>{t({...A,...e.metadata,carousel_data_json:{carousel_slots:e.slots}})}).catch(e=>{n(e)});else if("single"===P){let c=b[y],{description:h,link:_,media:f,canvasJson:x,title:v,userMentionTags:P}=m[c],{creativeStudioPinParams:S}=g[e];if(!f)throw Error(a.bt("Cannot create a Pin without an image or video.", "Cannot create a Pin without an image or video.", "pinBuilder.error.noMedia", undefined, true));let w=v.substring(0,o.Ke),E=h.substring(0,o.JO);if("localImage"===f.type)(0,p.xc)(f.src,e,d,u,r).then(({signature:e})=>{e?t({...A,image_signature:e,description:E,link:_,title:w,method:"uploaded",upload_metric:{source:(0,l.Z)(s)},user_mention_tags:P,...S&&e===S.imageSignature?{creative_studio_pin_params:{creative_studio_prompt_id:S.promptId,creative_studio_parent_pin_id:S.parentPinId,is_product_repin:S.isParentPinProductPin&&_===S.parentPinLink}}:Object.freeze({})}):n()}).catch(()=>{let t=a.bt("Your upload failed for some reason. Please try again.", "Hmm, your upload failed for some reason. Please try again.", "pinBuilder.mediaUpload.error", undefined, true);i($(e,t)),n(Error(a.bt("Cannot create Pin because the image could not be uploaded.", "Cannot create Pin because the image could not be uploaded.", "pinBuilder.error.noImageUploaded", undefined, true)))});else if("webImage"===f.type){let{createMethod:i}=g[e];t({...A,description:E,link:_,title:w,image_url:f.src,method:i||"scraped",scrape_metric:{source:"www_url_scrape"},user_mention_tags:P})}else if("localVideo"===f.type)ew(f,x).then(t=>(0,p.xc)(t,e,d,u)).then(({signature:e})=>{if(e)t({...A,image_signature:e,description:E,link:_,title:w,media_upload_id:f.uploadId,user_mention_tags:P});else throw Error()}).catch(()=>{let t=a.bt("Hmm, your upload failed. Please try again.", "Hmm, your upload failed for some reason. Please try again.", "Error message uploading a video file and process fails", undefined, true);i($(e,t)),n(Error(a.bt("Cannot create Pin because the video could not be uploaded.", "Cannot create Pin because the video could not be uploaded.", "pinBuilder.error.noVideoUploaded", undefined, true)))});else throw Error(a.bt("Cannot create Pin because the media type is not recognised.", "Cannot create Pin because the media type is not recognized.", "pinBuilder.error.noMediaRecognized", undefined, true))}})}(m,w,e,h,b,c,i,u,0,x),v=await n.Z.create("PinResource",r).callCreate(),{data:P}=v.resource_response;e((0,d.Sr)("PinResource",r,v)),s.Z.enabled("videoTagging")&&e(eE(u,m,P.id)),await e((e,i)=>{var n;let{pinbuilder:{pinDrafts:o}}=i();e((n=P.id,(e,t)=>{let i=t(),{pinbuilder:{pinDrafts:r,pinDraftIds:o,pinItems:l,storyPinItems:d}}=i,{pinItemIds:c,type:h,interestTags:p,urlCreationSource:_}=r[m],g=c[0],f="story"===h,{title:x,description:b,media:y}=f?d[g]:l[g],v=f?[]:l[g].userMentionTags,P=f?d[g].linkBlock&&d[g].linkBlock.srcUrl:l[g].link,S=y&&"localVideo"===y.type?"video":"image",A="single"===h?S:h,{canvasJsons:w,signals:E}=c.reduce((e,t)=>{let i=f?d[t]:l[t],{canvasJson:r,signals:n}=i,o=Object.keys(n).map(e=>({signal:e,value:n[e]}));return{canvasJsons:[...e.canvasJsons,r],signals:[...e.signals,...o]}},{canvasJsons:[],signals:[]}),I={signals:E,is_multi_pin_create:o.length>1,num_images:!!w&&Math.max(...w.map(e=>e&&e.layout?e.layout.sections.length:1))||1,text:w.reduce((e,t)=>(t&&t.text&&e.push({font_family:t.text.fontFamily,position:t.text.position,font_size:t.text.fontSize,margin:t.text.margin,bg_color:t.text.backgroundColor,bg_opacity:t.text.backgroundOpacity,text_color:t.text.textColor}),e),[]),logo:w.reduce((e,t)=>(t&&t.logo&&e.push({position:t.logo.position,margin:t.logo.margin,size:t.logo.size,bg_color:t.logo.backgroundColor,bg_opacity:t.logo.backgroundOpacity}),e),[])};y&&"localVideo"===y.type&&s.Z.enabled("videoTagging")&&(I.interest_tags=p.length);let j={pin_draft_id:m,has_description:!!b,has_link:!!P,has_title:!!x,is_video:"video"===A,media_upload_id:y&&"localVideo"===y.type?y.uploadId:void 0,pin_builder_data:JSON.stringify(I),pin_format:A,num_user_mention_tags:v.length,signals:JSON.stringify(E),..."image"===A||"carousel"===A||"video"===A&&s.Z.enabled("videoEditing")?{has_logo:w.some(e=>!!e&&!!e.logo),has_text:w.some(e=>!!e&&!!e.text),is_cropped:w.some(e=>{if(!e||!e.layout)return!1;let t=e.layout.sections.map(e=>e.media);return t.length>1||1===t.length&&!!t[0]&&(0!==t[0].angle||t[0].flipX||t[0].flipY||t[0].viewbox&&(1!==t[0].viewbox.width||1!==t[0].viewbox.height))}),is_trimmed:y&&"localVideo"===y.type?!!y.trimmedStartTime&&!!y.trimmedEndTime&&!!y.duration&&(y.trimmedStartTime>0||y.duration-y.trimmedEndTime>.01):void 0}:Object.freeze({}),pin_builder_scenario:s.Z.scenario(),..._?{url_creation_source:_}:Object.freeze({})};if((0,a.Z)(u,{event_type:1,object_id_str:n,aux_data:{...j}}),y&&"localVideo"===y.type){if(y.customCoverImg)(0,a.Z)(u,{event_type:7896,object_id_str:n});else{let e=(100*y.thumbnail/y.duration).toFixed(2);(0,a.Z)(u,{event_type:7517,object_id_str:n,aux_data:{percentage_scrubbed:e}})}}}));let{pinItemIds:l,pinItemIndex:d,selectedItem:c}=o[m],p=l[d],f=P.board&&P.board.id||c&&c.boardId;return e((0,y.f5)(p,P.id,r&&r.advertiser_id,t,u,h)).then(()=>{e(Y(m,P.id)),e((0,_.Br)({boardId:f,sectionId:P.section?P.section.id:null,increment:1})),e((0,g.vX)({feedId:P.section?P.section.id:f,feedType:P.section?j.Z.BOARD_SECTION_PINS:j.Z.BOARDFEED,itemIds:[P.id],itemType:"pin"})),e((0,I.JS)({userId:b,increment:1}))})}),e(z(m,"succeeded")),e(R(m,"succeeded")),e((0,f.F)(P.id))}catch(t){e((e,n)=>{let o=n();if(t&&(t.message||t.message_detail)){let n=t.message_detail||t.message,{pinItemIds:s,pinItemIndex:l}=o.pinbuilder.pinDrafts[m],a=s[l],d=[];switch(t.api_error_code){case 9:switch((t.data||{}).source_field){case"description":d.push({...C("DESCRIPTION_INVALID",i,a,r),message:n});break;case"title":d.push({...C("TITLE_INVALID",i,a,r),message:n});break;default:d.push({...C("URL_INVALID",i,a,r),message:n})}break;case 2378:d.push({...C("CAROUSEL_DIFFERENT_RATIOS",i,m,r),dispatchId:m,message:n});break;default:e(L(m,n,t.api_error_code))}d.length>0&&e((0,S.d)(d,u))}}),e(z(m,"attempted")),e(R(m,"serverError"))}}}({checkExperiment:x,country:r,i18n:u,ideaPinRenamingEnabled:h,isPartner:c,logContextEvent:m,orbacSubjectId:i,pinDraftId:e,siteType:b,userId:t}))}}function ez({pinDraftId:e,i18n:t,logContextEvent:i,siteType:r,ideaPinRenamingEnabled:n}){return(o,s)=>{let l=s(),{pinbuilder:a}=l,{pinDrafts:d,pinItems:c,storyPinItems:u}=a,{pinItemIds:h,pinItemIndex:_,type:g}=d[e];if("single"===g||"story"===g){let s=h[_],{media:l}="story"===g?u[s]:c[s];if(l&&!l.signature){let{src:a}=l;(0,p.GV)(a,3===r?"ads-builder-pinimage":"pinimage").then(({signature:r})=>{o((0,y.Sz)(s,{signature:r})),o((0,S.Z)({pinDraftId:e,validationKey:"signal",i18n:t,ideaPinRenamingEnabled:n,logContextEvent:i,options:{fieldToCheck:"image_signature"}})).catch(()=>{})})}}}}function eR({pinDraftId:e,selectedId:t,cachedItems:i,editedMedia:r,canvasJson:n,userId:o,country:s,i18n:l,logContextEvent:a,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{let p=h(),{pinItemIds:_,type:g}=p.pinbuilder.pinDrafts[e];_.forEach(e=>{let{canvasJson:o,media:s}=i[e]||{},l=t===e?r:s,a=t===e?n:o,d="story"===g?E.WZ:y.k8;a&&l&&u(d(e,l,a))});let{media:m}=i[t];"single"===g&&m&&"localVideo"===m.type?u((0,A.q)({pinDraftId:e,userId:o,country:s,i18n:l,ideaPinRenamingEnabled:c,logContextEvent:a})):u(ez({pinDraftId:e,i18n:l,logContextEvent:a,siteType:d,ideaPinRenamingEnabled:c}))}}function ek({pinDraftId:e,userId:t,country:i,isPartner:n,i18n:o,logContextEvent:s,orbacSubjectId:l,checkExperiment:a,siteType:d,ideaPinRenamingEnabled:c}){return(u,h)=>{let{pinbuilder:{pinDrafts:p}}=h(),{pinItemIds:_,pinItemIndex:g,websiteLink:m,websiteMedia:f,selectedItem:x,createMethod:v}=p[e],P="webImage"===f[0].type&&f[0].sourceURL?f[0].sourceURL:m,S=_[g];u((0,y.mO)(S,f[0])),u((0,y.PF)(S,P)),u(eO({pinDraftId:e,userId:t,orbacSubjectId:l,country:i,isPartner:n,i18n:o,logContextEvent:s,checkExperiment:a,siteType:d,ideaPinRenamingEnabled:c})),f.slice(1).forEach(e=>{let h=(0,r.Z)(),p=(0,r.Z)();u((0,b.Z)(h,p,{media:e,link:P})),u(N(h,x)),v&&u(O(h,v)),u(eO({pinDraftId:h,userId:t,orbacSubjectId:l,country:i,isPartner:n,i18n:o,logContextEvent:s,checkExperiment:a,siteType:d,ideaPinRenamingEnabled:c}))})}}function eL(e){return(t,i)=>{let r=i(),{pinbuilder:{pinDrafts:n}}=r;for(let[i,r]of Object.entries(n))if(r.pinId===e){t((0,v.Z)(i));return}}}},502890:(e,t,i)=>{"use strict";i.d(t,{C_:()=>b,OD:()=>f,PF:()=>g,Sz:()=>_,b0:()=>j,f5:()=>A,hL:()=>I,jP:()=>u,k8:()=>y,kS:()=>h,kf:()=>w,lZ:()=>m,mO:()=>p,nh:()=>v,oe:()=>E,yV:()=>S});var r=i(172045),n=i(214494),o=i(954931),s=i(623320),l=i(622296),a=i(277348),d=i(562501),c=i(957025);function u(e,t,i){return{type:"PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t,signals:i}}}function h(e,t,i){return{type:"PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t,signals:i}}}function p(e,t){return{type:"PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function g(e,t){return{type:"PIN_ITEM_SET_LINK",payload:{pinItemId:e,link:t}}}function m(e,t,i){return{type:"PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t,signals:i}}}function f(e,t){return{type:"PIN_ITEM_SET_TAG_ERROR",payload:{pinItemId:e,tagError:t}}}function x(e,t){return(i,r)=>{let{pinbuilder:{pinTags:n}}=r(),{status:o}=n[t];i("created"===o?{type:"PIN_ITEM_REMOVE_PIN_TAG",payload:{pinItemId:e,pinTagId:t}}:(0,a.Cf)(t,"deleted"))}}function b(e,t){return{type:"PIN_ITEM_SET_SELECTED_PIN_TAG_ID",payload:{pinItemId:e,selectedPinTagId:t}}}function y(e,t,i){return{type:"PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function v(e,t){return{type:"PIN_ITEM_UPDATE_DATA",payload:{pinItemId:e,pinItem:t}}}let P=(e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})};function S(e){let t=(0,c.A$)();return(i,r)=>{let n=r(),{selectedPinTagId:o}=n.pinbuilder.pinItems[e];i(b(e,null)),o&&0===t(n,{pinTagId:o}).length&&i(x(e,o))}}function A(e,t,i,r,l,a){return(d,c)=>{let{pinbuilder:u}=c(),{pinItems:h,pinTags:p,taggedObjects:_}=u;if(!h[e])return Promise.resolve();let{pinTagIds:g}=h[e],m=g.reduce((e,t)=>{let{taggedObjectIds:i}=p[t];return i.forEach(t=>e.push(_[t])),e},[]);return m.length>0?(0,s.Fv)(a,l).then(e=>{var d;let c=(d=e.id,m.map(e=>{let{id:t,link:i,media:r,type:n}=e,l=!!(0,o.Z)(i)&&/\/pin\/[\w-]+\/?$/.test(i);return l||"pin"===n?{id:t}:(0,s.iX)({link:i,board_id:d,image_url:r?r.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...a?{orbac_subject_id:a}:Object.freeze({})})}));return Promise.all(c).then(e=>{let o=e.map(e=>e.id),s=g.map(e=>{let{taggedObjectIds:t,x:i,y:n}=p[e],s=o.splice(0,t.length);return{country:r,height:0,tagged_objects:s,width:0,x_coord:100*i,y_coord:100*n}});n.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:s,advertiserId:i,...a?{orbacSubjectId:a}:Object.freeze({})}).callUpdate({}).catch(e=>{P(e,l)})})}):Promise.resolve()}}function w(e,t){return{type:"PIN_ITEM_SET_IS_TAGGABLE",payload:{pinItemId:e,isTaggable:t}}}function E(e,t){return i=>{i((0,l.Z)(e,t,{id:t,x:0,y:0})),i(b(e,t))}}function I(e,t,i){return n=>{let o=(0,r.Z)();n((0,l.Z)(e,o,{id:o,x:t,y:i})),n(b(e,o))}}function j(e){let t=(0,d.vd)(),i=(0,c.A$)();return(r,n)=>{let o=n();r(f(e,null));let s=t(o,{pinItemId:e});s.forEach(t=>{let n=i(o,{pinTagId:t});0===n.length&&r(x(e,t))})}}},277348:(e,t,i)=>{"use strict";i.d(t,{Cf:()=>l,Dn:()=>d,Go:()=>a,mz:()=>s,uM:()=>o});var r=i(347619),n=i(647117);function o(e,t,i){return{type:"PIN_TAG_SET_COORDINATES",payload:{pinTagId:e,x:t,y:i}}}function s(e,t,i){return{type:"PIN_TAG_SET_LINK",payload:{pinTagId:e,link:t,error:i}}}function l(e,t){return{type:"PIN_TAG_SET_STATUS",payload:{pinTagId:e,status:t}}}function a(e,t){return(i,r)=>{let{pinbuilder:{taggedObjects:o}}=r(),{status:s}=o[t];i("created"===s?{type:"PIN_TAG_REMOVE_TAGGED_OBJECT",payload:{pinTagId:e,taggedObjectId:t}}:(0,n.k)(t,"deleted"))}}function d(e,t,i){return(n,o)=>{n((0,r.Z)(e,t,{...i,id:t,link:o().pinbuilder.pinTags[e].link})),n(s(e,""))}}},98432:(e,t,i)=>{"use strict";i.d(t,{Z:()=>A});var r=i(172045),n=i(299295),o=i(665866),s=i(388628),l=i(573545),a=i(224496),d=i(531245),c=i(123463),u=i(451105),h=i(265696),p=i(314123),_=i(174807),g=i(305782),m=i(502890),f=i(923490),x=i(998285),b=i(554410),y=i(472278),v=i(843030),P=i(296342),S=i(67347);function A({pinDraftId:e,files:t,isPartner:i,userId:A,country:w,i18n:E,logContextEvent:I,orbacSubjectId:j,checkExperiment:C,ideaPinRenamingEnabled:T,isMaxVideo:D}){return(O,z)=>{let R=z(),{pinItemIds:k,pinItemIndex:L,pinItemShareable:N,status:B,type:Z,isShowcase:M}=R.pinbuilder.pinDrafts[e],F=k.length,U="story"===Z,H=(null==C?void 0:C("aid_exp_showcase_video_card_creation").anyEnabled)||!1;O((0,g.p3)(e,"processing")),O((0,g._B)(e,null));let V=(t=!1)=>new Promise(i=>{t&&U?O((0,g.WT)(e,!0)):O((0,g.p3)(e,B)),i()});M&&!H&&t.forEach(t=>{if(d.ss.includes(t.type)){let t=(0,u.ZP)({errorId:"SHOWCASE_UNSUPPORTED_FORMAT",i18n:E,ideaPinRenamingEnabled:T,dispatchId:k[L]});O((0,g.Ig)(e,t.message))}else O((0,g.Ig)(e,null))});let G=t.map(e=>(0,c.Z)({i18n:E,file:e,options:{allowVideo:o.Z.enabled("video")&&(!M||H),forStoryPin:U},ideaPinRenamingEnabled:T}));return Promise.all(G).then(t=>{let d=!1,c=[],u=[],z=k[0],{pinItems:B,storyPinItemBlocks:M,storyPinItems:H}=R.pinbuilder,{description:G,media:W,title:$}=U?H[z]:B[z],X=U&&H[z].blockIds||[],Y=k.length<=1&&(!W&&!U||U&&!X.length),q=k[L],K=H[q],J=!1;K&&(J=U?!!K.blockIds.find(e=>!!M[e].media):!!K.media);let Q=!U||U&&!J||Y,ee="story"===Z?t:"carousel"!==Z&&t.length>0&&"localVideo"===t[0].type?t.slice(0,1):t.filter(e=>"localVideo"!==e.type);if(ee.forEach(e=>{"localImage"===e.type?(u.push(e),(0,S.nP)("pin_builder.media_upload.image_selected",{sampleRate:1,tags:{source:(0,l.Z)(i)}})):"localVideo"===e.type?(u.push(e),(0,S.nP)("pin_builder.media_upload.video_selected",{sampleRate:1,tags:{source:(0,l.Z)(i)}})):c.push(e)}),U&&c.length&&function(e){e.forEach(e=>{switch(e.id){case"STORY_PIN_VIDEO_OVER_MAX_DURATION":(0,S.nP)("story_pin.upload.video.over_max_duration",{sampleRate:1,tags:{app_type:"web"}});break;case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":(0,S.nP)("story_pin.upload.video.over_max_file_size",{sampleRate:1,tags:{app_type:"web"}});break;case"VIDEO_UNRECOGNIZED_ENCODING":case"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME":case"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX":case"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI":(0,S.nP)("story_pin.upload.video.invalid_format",{sampleRate:1,tags:{app_type:"web"}})}})}(c),!u.length)return c.length>0&&(c.length>1?O((0,g._B)(e,E.bt("Sorry, your files could not be uploaded. Please make sure the files chosen meet our requirements", "Uh oh, your files could not be uploaded. Please make sure the files chosen fit within our requirements", "pinbuilder.processFiles.invalidFiles", undefined, true))):O((0,g._B)(e,c[c.length-1].message))),V();c.length>0&&O((0,g._B)(e,E.bt("One or more of your files could not be uploaded", "Uh oh, one or more of your files could not be uploaded", "pinbuilder.processFiles.invalidFiles", undefined, true)));let et="carousel"===Z||"single"===Z&&u.length>1,ei=W||u[0],er=U?n.yX:n.dS,en=(t,i,n,o,s)=>{let l=o?Object.assign(t,o.getCanvasOutput({width:s})):t;U&&"localImage"===l.type&&delete l.fileSrc;let c=o?o.toJSON():null,h=U?void 0:B[z].link,g={media:l,canvasJson:c},S=k[L];if(U){if(0===i&&Q){let{media:t}=H[S];d=!!t&&1===u.length,t&&"localVideo"===t.type&&O((0,p.$Z)(e,S)),O((0,y.JQ)({canvasAspectRatio:a.ap,pinDraftId:e,pinItemId:S,pinItem:g})),U&&0===L&&(O((0,v.Uo)(e,S,(0,r.Z)(),P.j7)),O((0,y.d5)(e,S,7)))}else S=(0,r.Z)(),O((0,x.Z)({canvasAspectRatio:a.ap,options:{saveIndex:Y},pinDraftId:e,pinItem:g,pinItemId:S})),U&&O((0,y.d5)(e,S,7))}else{let t={...N?{description:G,link:h,title:$}:{},...g};if(0===i){let{media:i}=B[S];d=!!i&&1===u.length,i&&"localVideo"===i.type&&O((0,p.$Z)(e,S)),O((0,m.nh)(S,t))}else S=(0,r.Z)(),O((0,_.Z)(e,S,t))}"localVideo"===l.type?O((0,f.d)({pinDraftId:e,pinItemId:S,userId:A,country:w,i18n:E,logContextEvent:I,orbacSubjectId:n,checkExperiment:C,ideaPinRenamingEnabled:T,isMaxVideo:D})):"localImage"===l.type&&U&&O((0,b.U)(e,S,I))},eo=t=>u.slice(0,Q?er-F+1:er-F).reduce((e,i,r)=>e.then(()=>"localImage"===i.type&&t?(t.resize(i.width,i.height),t.setImage(i.src).then(()=>{let{width:e}=ei;if(t){if(U){let t=i.width/i.height;if(t<1)e=Math.min(P.er,i.width);else{let r=Math.min(P.er,i.height);e=r*t}}else{var n,o;let e=Y&&u.length>1?(0,s.Z)(null!==(n=ei.width)&&void 0!==n?n:1,null!==(o=ei.height)&&void 0!==o?o:1):{w:ei.width,h:ei.height};t.setAspectRatio(e)}}return en(i,r,j,t,e)})):en(i,r,j)),Promise.resolve()).then(()=>{!c.length&&et&&!d&&F+u.length<=n.dS&&O((0,_.Z)(e,(0,r.Z)(),null,{saveIndex:!0})),O((0,g._B)(e,c.length?c[c.length-1].message:null)),!U&&!et&&o.Z.enabled("imageSignals")&&O((0,g.th)({pinDraftId:e,i18n:E,logContextEvent:I,ideaPinRenamingEnabled:T}))});return et||U?(0,h.Z)().then(e=>{let t=new e(document.createElement("div"));return eo(t).then(()=>V(!0))}):eo().then(()=>V(!0))})}}},264938:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(474394),n=i(838548);function o({checkExperiment:e,country:t,i18n:i,isPartner:o,logContextEvent:s,orbacSubjectId:l,siteType:a,userId:d}){return(c,u)=>{let{pinbuilder:h}=u(),{selectedPinDraftIds:p}=h;p.forEach(u=>{c((0,r.deselectPinBuilderPinDraft)(u)),c((0,n.Z)({pinDraftId:u,userId:d,orbacSubjectId:l,country:t,isPartner:o,i18n:i,logContextEvent:s,checkExperiment:e,siteType:a,ideaPinRenamingEnabled:!1}))})}}},798477:(e,t,i)=>{"use strict";function r(e){return{type:"PIN_BUILDER_REMOVE_PIN_DRAFT_ID",payload:{pinDraftId:e}}}i.d(t,{Z:()=>r})},838548:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var r=i(665866),n=i(214494),o=i(668627),s=i(414327),l=i(954931),a=i(623320),d=i(798477);let c=(e,t)=>({pinId:e,isSTL:t}),u=(e,t)=>{t({event_type:9070,view_type:212,component:13308,element:10973,aux_data:{api_error_code:e.api_error_code,api_error_message:e.message}})};function h(e,t,i){return e.map(e=>{let{id:r,link:n,media:o,type:s}=e,d=!!(0,l.Z)(n)&&/\/pin\/[\w-]+\/?$/.test(n);return d||"pin"===s?{id:r}:(0,a.iX)({link:n,board_id:t,image_url:o?o.url:"",method:"scraped",scrape_metric:{source:"www_url_scrape"},...i?{orbac_subject_id:i}:Object.freeze({})})})}var p=i(474394),_=i(305782),g=i(458253),m=i(923490);function f({pinDraftId:e,userId:t,orbacSubjectId:i,country:l,isPartner:f,i18n:x,logContextEvent:b,checkExperiment:y,siteType:v,ideaPinRenamingEnabled:P}){return(S,A)=>{let{pinbuilder:{pinDrafts:w,pinDraftIds:E,pinItems:I,storyPinItems:j}}=A(),{mode:C,pinItemIds:T,pinItemIndex:D,type:O}=w[e],z=T[D],{media:R}="story"===O?j[z]:I[z];if("create"===C){if(R&&["localVideo","webVideo"].includes(R.type)&&r.Z.enabled("disabledVideoPinCreation")||R&&["assetImage","localImage","webImage"].includes(R.type)&&r.Z.enabled("disabledPinCreation")){S((0,p.setShowDisabledPinCreationBanner)(!0));return}if(R&&"localVideo"===R.type&&0===E.length){S((0,m.d)({pinDraftId:e,pinItemId:z,userId:t,country:l,i18n:x,logContextEvent:b,checkExperiment:y,ideaPinRenamingEnabled:P})),S((0,g.g)(e,"queueCreate"));return}S((0,_.iX)({checkExperiment:y,country:l,i18n:x,ideaPinRenamingEnabled:P,isPartner:f,logContextEvent:b,orbacSubjectId:i,pinDraftId:e,siteType:v,userId:t}))}else"edit"===C&&S((t,r)=>{let{pinbuilder:{pinDrafts:p}}=r(),{pinItemIds:_,pinItemIndex:g}=p[e],m=_[g];t((t,r)=>{let p=r(),{pinItems:_,pinTags:g}=p.pinbuilder,{pinTagIds:f}=_[m],x=f.map(t=>{let{status:r}=g[t];if("deleted"===r){let{taggedObjectIds:r}=g[t];return n.Z.create("VisualLinkPinTagResource",{pinTagId:t,id:e,orbacSubjectId:i,taggedObjectIds:r}).callDelete()}return"created"===r?function(e,t,i,r,o,s){let{pinbuilder:l}=i,{pinTags:d,taggedObjects:c}=l,{taggedObjectIds:p,x:_,y:g}=d[e];return(0,a.Fv)(s,o).then(e=>{let i=p.map(e=>c[e]),l=h(i,e.id,s);return Promise.all(l).then(e=>n.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:[{country:r,height:0,tagged_objects:e.map(e=>e.id),width:0,x_coord:100*_,y_coord:100*g}],...s?{orbacSubjectId:s}:Object.freeze({})}).callUpdate().catch(e=>{u(e,o)}))})}(t,e,p,l,b,i):"edited"===r?function(e,t,i,r,o){let{pinTags:s,taggedObjects:l}=i.pinbuilder,{pinTagKey:d,taggedObjectIds:c,x:u,y:p}=s[e];return(0,a.Fv)(r,o).then(i=>{let o=c.filter(e=>"created"===l[e].status).map(e=>l[e]),s=h(o,i.id,r);return Promise.all(s).then(i=>{let o=n.Z.create("VisualLinkPinTagsAndObjectsResource",{pinId:t,pinTagsAndObjects:[{height:0,tagged_objects:i.map(e=>e.id),width:0,x_coord:100*u,y_coord:100*p}],...r?{orbacSubjectId:r}:Object.freeze({})}).callUpdate(),s=n.Z.create("ApiResource",{url:"/v3/visual_links/pin_tags/tagged_objects/batch/",options:{method:"POST",data:{pin_tag_key:d,tagged_objects:i.map(e=>e.id).join(","),tagged_object_source:"pinterest-client",...r?{orbac_subject_id:r}:Object.freeze({})}}}),a=n.Z.create("VisualLinkTaggedObjectsResource",{id:t,pinTagId:e,taggedObjectIds:c.filter(e=>"deleted"===l[e].status)}).callDelete();return Promise.all([o,s,a]).then(()=>n.Z.create("VisualLinkPinTagResource",{pinTagId:e,id:t,pinTag:{dimensions:{x:100*u,y:100*p}},taggedObjectIds:c,...r?{orbacSubjectId:r}:Object.freeze({})}).callCreate())})})}(t,e,p,i,b):null});Promise.all(x).then(()=>{t((0,s.jB)("PinResource",(0,o.Z)(e))),t((0,s.jB)("VisualLinkTopTaggedObjectsResource",c(e,!0))),t((0,d.Z)(e))})})})}}},458253:(e,t,i)=>{"use strict";function r(e,t){return{type:"PIN_BUILDER_SET_PIN_DRAFT_UPLOAD_STATUS",payload:{pinDraftId:e,status:t}}}i.d(t,{g:()=>r})},647117:(e,t,i)=>{"use strict";function r(e,t){return{type:"TAGGED_OBJECT_SET_STATUS",payload:{taggedObjectId:e,status:t}}}i.d(t,{k:()=>r})},827628:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c,d:()=>d});var r=i(451105),n=i(346360),o=i(305782),s=i(502890),l=i(472278),a=i(395164);function d(e,t,i){return(n,d)=>{e.forEach(e=>{let c=e.dispatchId||"";switch((0,a.T)({name:"React PinBuilder Exception",message:Array.isArray(e.message)?e.message.join(""):e.message,message_detail:JSON.stringify({dispatchId:e.dispatchId,pinDraftId:i})}),(0,r.GB)(e.id,e.message,t),e.id){case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":n((0,o.KN)(c,e.message));break;case"BOARD_MISSING":n((0,o.xb)(c,e.message));break;case"DATE_TOO_FAR_IN_FUTURE":case"DATE_IN_PAST":case"DATE_MISSING":n((0,o.Yr)(c,e.message));break;case"CAROUSEL_DIFFERENT_RATIOS":case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":case"STORY_PIN_COVER_PAGE_TITLE_MISSING":case"STORY_PIN_TITLE_MISSING":case"STORY_PIN_NOT_ENOUGH_PAGES":case"STORY_PIN_VIDEO_ON_COVER":n((0,o.lT)(c,e.message));break;case"CAROUSEL_INVALID_FORMAT":case"MEDIA_MISSING":n((0,o._B)(c,e.message));break;case"TIME_MISSING":n((0,o.Ve)(c,e.message));break;case"TITLE_INVALID":n((0,s.kS)(c,e.message));break;case"DESCRIPTION_INVALID":n((0,s.jP)(c,e.message));break;case"IMAGE_IS_BLURRY":case"IMAGE_IS_SCREENSHOT":case"LINK_LOADS_SLOWLY":case"LINK_IS_AGGREGATOR":case"IMAGE_UNDER_MIN_DIMENSIONS":case"VIDEO_UNDER_MIN_DIMENSIONS":case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":n((0,s.nh)(c,{signals:{[e.id]:!0}}));break;case"TAG_INVALID":case"URL_INVALID":case"URL_IS_REDIRECT":case"URL_MISSING":case"URL_UNREACHABLE":case"URL_CONTAINS_PORN_DOMAIN":case"URL_IS_TOO_LONG":case"URL_IS_BLOCKED":{let{pinbuilder:t}=d(),{pinDrafts:i,pinDraftIds:r}=t,o="URL_UNREACHABLE"===e.id||"URL_CONTAINS_PORN_DOMAIN"===e.id?{[e.id]:!0}:void 0;r&&"story"===i[r[0]].type?(n((0,l.qG)(c,e.message)),n((0,l.pq)(c,{isFetching:!1}))):n((0,s.lZ)(c,e.message,o))}}})}}let c=function({pinDraftId:e,validationKey:t,i18n:i,logContextEvent:r,options:o,ideaPinRenamingEnabled:s}){return(l,c)=>l(function({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:r,options:o}){return s=>{try{switch(t){case"save":return s((0,n.x)(e,i,r));case"edit":return s((0,n.J6)(e,i,r));case"publishStoryPin":return s((0,n.f5)(e,i,r));case"link":return Promise.all(s((0,n.Oc)(e,i,r))).then(e=>e.filter(Boolean).flat());case"signal":let l=o?o.fieldToCheck:null;return s((0,n.DY)(e,i,l,r)).then(e=>e.filter(Boolean));default:return Promise.resolve([])}}catch(i){return(0,a.T)({name:"React PinBuilder Validation Exception",message:i.message,message_detail:JSON.stringify({pinDraftId:e,validationKey:t,options:o}),...i.lineNumber&&{line:i.lineNumber},...i.stack&&{stack:i.stack}}),Promise.resolve([])}}}({pinDraftId:e,validationKey:t,i18n:i,ideaPinRenamingEnabled:s,options:o})).then(t=>{if(t.length>0&&(l(d(t,r,e)),t.some(e=>e.blocking)))throw Error();return Promise.resolve()})}},923490:(e,t,i)=>{"use strict";i.d(t,{d:()=>x,q:()=>b});var r=i(299295),n=i(665866),o=i(724565),s=i(840839),l=i(471155),a=i(801815),d=i(623320),c=i(314123),u=i(474394),h=i(305782),p=i(502890),_=i(458253),g=i(472278),m=i(843030),f=i(67347);function x({pinDraftId:e,pinItemId:t,userId:i,country:a,i18n:x,logContextEvent:b,orbacSubjectId:y,checkExperiment:v,ideaPinRenamingEnabled:P,isMaxVideo:S}){return(A,w)=>{var E;let I;let j=w(),{createFlow:C,pinbuilder:T}=j||{},{forms:D}=C||{},{campaigns:O}=D||{},z=!!O&&(null===(E=O["0"])||void 0===E?void 0:E.premiereSpotlightEnabled),{pinDrafts:R,pinDraftIds:k,pinItems:L,storyPinItemBlocks:N,storyPinItems:B}=T,{pinItemIds:Z,status:M,type:F}=R[e],U="story"===F,{media:H}=U?B[t]:L[t],V=U?Z.findIndex(e=>e===t):void 0,G=U&&B[t]&&B[t].blockIds.length?B[t].blockIds.find(e=>"story_pin_video_block"===N[e].type):null,W=G?N[G].media:H;if(!W||"localVideo"!==W.type)throw Error("Unable to upload video - media is invalid.");A((0,h._B)(e,null)),"succeeded"===M&&A((0,h.p3)(e,"uploading")),A((0,_.g)(e,"uploading")),A((0,u.addPinBuilderPinDraftItemUpload)(e,t,{status:"uploading",xhr:null}));let $=e=>A((0,g.Bl)(t,{uploadProgress:Math.round(100*(e.loaded/e.total))}));U&&G&&($=t=>A((0,m.PF)(e,G,{uploadProgress:Math.round(100*(t.loaded/t.total))}))),I=U?"video-story-pin":"ad_creation"===n.Z.scenario()?"ads-video":"video",(z||S&&["ads-video","video"].includes(I))&&(I="premiere-ads-video");let X=(y,S=0)=>{(0,l.Z)(W.fileSrc,I,U||!n.Z.enabled("videoEditing"),{onCancelUpload:e=>{(0,s.Z)(b,{event_type:7684,aux_data:{file_size_mb:W.fileSrc.size/1048576,media_upload_id:e,story_pin_page_id:V,video_duration:W.duration}})},onFailureUpload:({message:e,failureReason:t,uploadId:i})=>{(0,s.Z)(b,{event_type:8786,aux_data:{error_message:e,file_size_mb:W.fileSrc.size/1048576,media_upload_failure_reason:t||"general",media_upload_id:i,story_pin_page_id:V,video_duration:W.duration}}),(0,f.nP)("video_pin_creation.uploading.failure",{sampleRate:1,tags:{failure_reason:e}})},onFinishProcessing:({processingTime:e,signature:t,uploadId:i})=>{(0,s.Z)(b,{event_type:7520,aux_data:{file_size_mb:W.fileSrc.size/1048576,media_upload_id:i,processing_time:e,story_pin_page_id:V,video_duration:W.duration,video_signature:t}}),(0,s.Z)(b,{event_type:7521,aux_data:{file_size_mb:W.fileSrc.size/1048576,media_upload_id:i,story_pin_page_id:V,video_duration:W.duration,video_signature:t}})},onFinishUpload:({amzId2:e,amzRequestId:t,statusCode:i,uploadId:r,uploadTime:n})=>(function({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:r,uploadId:n,uploadTime:o,video:l},a){(0,s.Z)(a,{event_type:7519,aux_data:{aws_tracking_ids:JSON.stringify([t,e]),file_size_mb:l.fileSrc.size/1048576,media_upload_id:n,status_code:i,story_pin_page_id:r,upload_time:o,video_duration:l.duration}}),(0,f.nP)("video_pin_creation.uploading.success",{sampleRate:1,tags:{app_type:"web"}})})({amzId2:e,amzRequestId:t,statusCode:i,storyPageNumber:V,uploadId:r,uploadTime:n,video:W},b),onProgress:e=>U?$(e):A((0,p.Sz)(t,{uploadProgress:Math.round(100*(e.loaded/e.total))})),onStartProcessing:({signature:e,uploadId:t})=>{(0,s.Z)(b,{event_type:8809,aux_data:{file_size_mb:W.fileSrc.size/1048576,media_upload_id:t,story_pin_page_id:V,video_duration:W.duration,video_signature:e}})},onStartUpload:({uploadId:i})=>A((r,n)=>{let o=n(),{pinbuilder:l}=o,{storyPinItemBlocks:a,storyPinItems:d}=l;if(U){if(d[t]&&d[t].blockIds.length){let n=d[t].blockIds.find(e=>"story_pin_video_block"===a[e].type);n&&r((0,m.PF)(e,n,{uploadId:i}))}else r((0,g.Bl)(t,{uploadId:i}))}else r((0,p.Sz)(t,{uploadId:i}));(0,s.Z)(b,{event_type:7518,aux_data:{file_size_mb:W.fileSrc.size/1048576,media_upload_id:i,story_pin_page_id:V,video_duration:W.duration}})}),setXhr:i=>A((0,u.setPinBuilderPinItemUploadXhr)(e,t,i))}).then(r=>{let s=w(),{pinbuilder:l}=s,{pinDraftIdUploadStatusMap:f}=l;if(f[e]&&A((0,u.setPinBuilderPinItemUploadXhr)(e,t,null)),U){if(G){if(A((0,m.PF)(e,G,{signature:r.signature})),f[e]&&f[e].items[t]&&"queueEdit"===f[e].items[t].status){"queueCreate"===f[e].status&&A(function({country:e,i18n:t,ideaPinRenamingEnabled:i,logContextEvent:r,pinDraftId:n,pinItemId:s,userId:l}){return(a,p)=>{let _=p(),{pinbuilder:{storyPinItemBlocks:g,storyPinItems:f}}=_;if(f[s]&&f[s].blockIds.length){let _=f[s].blockIds.find(e=>"story_pin_video_block"===g[e].type),x=_?g[_].media:null;if(_&&x&&"localVideo"===x.type&&x.signature&&void 0!==x.trimmedEndTime&&void 0!==x.trimmedStartTime&&!(0===x.trimmedStartTime&&x.trimmedEndTime===x.duration)){let{signature:g,trimmedEndTime:f,trimmedStartTime:b}=x;a((0,u.setPinBuilderPinItemUploadStatus)(n,s,"uploadingEdit")),a((0,m.PF)(n,_,{signature:null})),(0,d.Yv)(g,"video-story-pin",{time_start:(0,o.TA)(b),time_end:(0,o.TA)(f)},{onStartEdits:e=>a((0,m.PF)(n,_,{uploadId:e}))}).then(o=>{let d=p(),{pinbuilder:g}=d,{pinDraftIdUploadStatusMap:f}=g;a((0,m.PF)(n,_,{signature:o.signature})),f[n]&&a((0,u.setPinBuilderPinItemUploadStatus)(n,s,"completed"));let x=Object.keys(f[n].items).filter(e=>f[n].items[e].status.startsWith("uploading")||f[n].items[e].status.startsWith("queue"));(0===x.length||1===x.length&&x[0]===s)&&"queueCreate"===f[n].status&&(a((0,h.iX)({pinDraftId:n,userId:l,country:e,isPartner:!1,i18n:t,logContextEvent:r,ideaPinRenamingEnabled:i})),a((0,c.y2)(n)))}).catch(()=>{a((0,h._B)(n,t.bt("Video edit upload failed", "Video edit upload failed", "pinbuilder.upload.video.edit.error", undefined, true))),a((0,h.p3)(n,"attempted")),a((0,m.PF)(n,_,{signature:g})),a((0,u.setPinBuilderPinItemUploadStatus)(n,s,"queueEdit"))})}}}}({country:a,i18n:x,ideaPinRenamingEnabled:P,logContextEvent:b,pinDraftId:e,pinItemId:t,userId:i}));return}}else A((0,g.Bl)(t,{signature:r.signature}))}else A((0,p.Sz)(t,{signature:r.signature}));f[e]&&A((0,u.setPinBuilderPinItemUploadStatus)(e,t,"completed"));let S=Object.keys(f[e].items).filter(t=>f[e].items[t].status.startsWith("uploading")||f[e].items[t].status.startsWith("queue"));"queueCreate"===f[e].status&&(0===S.length||1===S.length&&S[0]===t)&&(A((0,h.iX)({pinDraftId:e,userId:i,orbacSubjectId:y,country:a,isPartner:!1,i18n:x,logContextEvent:b,checkExperiment:v,ideaPinRenamingEnabled:P})),A((0,_.g)(e,"completed")));let E=0===S.length||1===S.length&&!!f[e].items[t];E&&(n.Z.enabled("multi_pin")||n.Z.enabled("multi_pin_pinner")||n.Z.enabled("offsite_pin_creation_multi_select")||U||"queueCreate"!==f[e].status)&&A((0,c.y2)(e))}).catch(i=>{let n=w(),{pinbuilder:o}=n,{pinDraftIdUploadStatusMap:s}=o;if(!i||i.isError){if(U&&S<r.g1)X(y,S+1);else{let i=k.length>1?x.bt("Upload failed", "Upload failed", "pinbuilder.upload.video.upload.error", undefined, true):x.bt("Upload failed. Try again?", "Upload failed. Try again?", "pinbuilder.upload.video.upload.error", undefined, true);A((0,h._B)(e,i)),A((0,h.p3)(e,"attempted")),A((0,c.su)(e,t)),1===Object.keys(s[e].items).length&&A((0,c.y2)(e))}}})};X(y)}}function b({pinDraftId:e,userId:t,country:i,i18n:r,logContextEvent:n,ideaPinRenamingEnabled:o}){return(s,l)=>{let u=l(),{pinbuilder:_}=u,{pinDrafts:g,pinItems:m,pinDraftIds:f}=_,{pinItemIds:x,pinItemIndex:b,type:y}=g[e];if("single"===y){let u=x[b],{media:_,canvasJson:g}=m[u],y=_&&_.signature?_.signature:null;if(_&&y){let m=g?(0,a.Z)(_,g):null;m&&(0,d.Yv)(y,"video",m,{onStartEdits:e=>s((0,p.Sz)(u,{uploadId:e}))}).then(()=>{let a=l(),{pinbuilder:d}=a,{pinDraftIdUploadStatusMap:u}=d;"queueCreate"===u[e].status&&s((0,h.iX)({pinDraftId:e,userId:t,country:i,isPartner:!1,i18n:r,logContextEvent:n,ideaPinRenamingEnabled:o})),s((0,c.y2)(e))}).catch(()=>{let t=f.length>1?r.bt("Upload failed", "Upload failed", "pinbuilder.upload.video.edit.error", undefined, true):r.bt("Upload failed. Try again?", "Upload failed. Try again?", "pinbuilder.upload.video.edit.error", undefined, true);s((0,h._B)(e,t)),s((0,h.p3)(e,"attempted")),s((0,c.y2)(e))})}}}}},31100:(e,t,i)=>{"use strict";i.d(t,{Jc:()=>a,TX:()=>s,Tn:()=>o,hg:()=>l});var r=i(214494),n=i(90326);function o(e){return{type:"SCHEDULED_PIN_CREATE_COMPLETE",payload:{scheduledPin:e}}}function s(e,t,i){return o=>(o({type:"SCHEDULED_PIN_DELETE_COMPLETE",payload:{scheduledPinId:e}}),o((0,n.h6)({userId:t,increment:-1})),r.Z.create("ScheduledPinResource",{scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callDelete())}function l(e,t,i){return o=>(o({type:"SCHEDULED_PIN_PUBLISH_COMPLETE",payload:{scheduledPinId:e}}),o((0,n.h6)({userId:t,increment:-1})),r.Z.create("ScheduledPinResource",{method:"publish",scheduled_pin_id:e,...i?{orbac_subject_id:i}:{}}).callCreate())}function a(e){return t=>{let{boardId:i,description:n,ideaPinDetails:o,ideaPinDetailsTemplateType:s,link:l,sectionId:a,scheduledPinId:d,scheduledTimestamp:c,userMentionTags:u,title:h}=e,p=r.Z.create("ScheduledPinResource",{board:i,description:n,idea_pin_details:o,idea_pin_details_template_type:s,link:l,section:a,scheduled_pin_id:d,scheduled_timestamp:c,user_mention_tags:u,title:h}).callUpdate();return t({type:"SCHEDULED_PIN_UPDATE_COMPLETE",payload:e}),p}}},639952:(e,t,i)=>{"use strict";i.d(t,{Cp:()=>a,FK:()=>l,H5:()=>b,MI:()=>_,O0:()=>p,QZ:()=>s,W:()=>f,WF:()=>c,Wz:()=>y,a5:()=>u,dz:()=>m,e0:()=>h,e2:()=>o,iW:()=>x,n1:()=>n,rm:()=>d,xu:()=>g});var r=i(53987);let n=()=>({type:"DISMISS_UNAUTH_SAVE"}),o=()=>({type:"COMPLETE_UNAUTH_SAVE_ACTION"}),s=e=>({type:"SET_UNAUTH_SAVE_PIN_ID",payload:{unauthSavePinId:e}}),l=()=>({type:"HIDE_NAV_FOOTER"}),a=()=>({type:"SHOW_NAV_FOOTER"}),d=e=>({type:"SET_LOGIN_SIGNUP_FROM",payload:{from:e}}),c=()=>({type:"SHOW_REPIN_ANIMATION"}),u=()=>({type:"HIDE_REPIN_ANIMATION"}),h=e=>({type:"SET_NUM_SIGNUP_STEPS",payload:{steps:e}}),p=()=>({type:"SET_OWN_PROFILE_PINS_REFRESH"}),_=e=>({type:"SHOW_BIZ_NUX_HOMEFEED_LOADER",payload:e}),g=e=>({type:"SET_VIEWED_IMAGE",payload:{viewedImageSignature:e}}),m=e=>({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),f=()=>({type:"DISMISS_UNAUTH_APP_UPSELL"}),x=e=>e?{type:"LOGGED_OUT_USER_INFO_FOUND",payload:e}:{type:"LOGGED_OUT_USER_INFO_NOT_FOUND"},b=e=>({type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}),y=(e,t)=>({type:"SET_LANDING_PAGE_TYPE",payload:e?(0,r.bo)(e)?"today":(0,r.dr)(e)?"ideas":t&&(0,r.dZ)(e,t)?"own_section":t&&(0,r.J)(e,t)?"own_board":(0,r.OJ)(e)?"section":(0,r.am)(e)?"board":(0,r.L6)(e)?"closeup":(0,r.C$)(e)?"home":(0,r.cD)(e)?"profile":(0,r.En)(e)?"search":(0,r.$V)(e)?"topic":"":""})},748254:(e,t,i)=>{"use strict";function r(e,t,i,r){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:i,options:r}}}i.d(t,{Z:()=>r})},685839:(e,t,i)=>{"use strict";function r(e){return function(t,i){t&&console.log(`${e} - ${i}`)}}i.d(t,{Z:()=>r})},690374:(e,t,i)=>{"use strict";i.d(t,{Z:()=>P});var r=i(296342),n=i(172045),o=i(186656),s=i(349700),l=i(685839),a=i(623320);let d=[200,201,204];async function c(e,t,i,r,n,o,l){let a=n.upload_id||"",c=n.upload_url||"",u=n.upload_parameters||{};null==o||o.addSubspan({name:`${t}_page_publish-${a}`,startTime:performance.now(),bypassIsTimingCheck:!0});let{onFailure:h,onFinishUpload:p,onStartUpload:_,onUploadProgress:g}=r;_&&_(a);let m=new Date,f=new XMLHttpRequest;"image"===t?f.open("POST",c.replace("pinterest-media-upload.s3.amazonaws","u.pinimg"),!0):f.open("POST",c,!0),f.onload=()=>{if(d.includes(f.status)){if(p){let e=(new Date-m)/1e3,t=f.getResponseHeader("x-amz-request-id"),i=f.getResponseHeader("x-amz-id-2");p(a,{amzId2:i,amzRequestId:t,uploadTimeSec:e,statusCode:f.status})}}else{let e="image"===t?1:8,i=(0,s.nk)(l.bt("Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}", "Failed to upload the {{ mediaType }} with XHR status code: {{ xhrStatus }}", "uploadMedia.xhrOnLoad.failure", undefined, true),{mediaType:t,xhrStatus:f.status}).join();h({uploadId:a,errorMsg:i,mediaUploadFailureReason:e,retry:!0})}},f.onerror=()=>{let e="image"===t?1:8,i=(0,s.nk)(l.bt("Failed to upload the {{ mediaType }}", "Failed to upload the {{ mediaType }}", "uploadMedia.xhrOnError.failure", undefined, true),{mediaType:t}).join();h({uploadId:a,errorMsg:i,mediaUploadFailureReason:e,retry:!0})},g&&(f.upload.onprogress=e=>{g(Math.round(100*(e.loaded/e.total)))});let x=new FormData;return Object.keys(u).forEach(e=>{e&&u[e]&&x.append(e,u[e])}),x.append("file",e),f.send(x),{uploadId:a,xhr:f}}function u(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h=["webImage","webVideo"];class p{constructor(e){u(this,"upload",()=>{}),u(this,"onFailure",({errorMsg:e,mediaUploadFailureReason:t,retry:i,uploadId:r})=>{i&&this.numAttempts<this.maxUploadAttempts?this.upload():(this.status="failed",this.callbackHandlers.onFailure({errorMsg:e,mediaUploadFailureReason:t,uploadId:r,storyPinPublishStopwatch:this.storyPinPublishStopwatch}))}),u(this,"onFinishProcessing",(e,t)=>{this.signature=t.signature,this.callbackHandlers.onFinishProcessing&&this.callbackHandlers.onFinishProcessing(e,t,this.storyPinPublishStopwatch)}),u(this,"onFinishUpload",(e,t)=>{this.status="uploaded",this.callbackHandlers.onFinishUpload&&this.callbackHandlers.onFinishUpload(e,t,this.storyPinPublishStopwatch)}),u(this,"onStartProcessing",(e,t)=>{this.signature=t.signature,this.callbackHandlers.onStartProcessing&&this.callbackHandlers.onStartProcessing(e,t,this.storyPinPublishStopwatch)}),u(this,"cancel",()=>{this.xhr&&(this.xhr.abort(),this.callbackHandlers.onCancel&&this.callbackHandlers.onCancel(this.uploadId||"",this.storyPinPublishStopwatch))}),this.i18n=e.i18n,this.maxUploadAttempts=e.maxUploadAttempts||1,this.media=e.media,this.numAttempts=0,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.vipRegistration=e.vipRegistration,this.vipType=e.vipType,this.callbackHandlers=e.callbackHandlers}}class _ extends p{constructor(e){super(e),u(this,"getClassName",()=>"ImageUpload"),u(this,"onProcessingFailed",e=>{if(this.uploadId){let t=(0,s.nk)(this.i18n.bt("Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process image with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.ImageUpload.onProcessingFailed", undefined, false),{failureCode:e,uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:3,mediaStatusFailureReason:e})}}),u(this,"onProcessingTimeout",()=>{if(this.uploadId){let e=(0,s.nk)(this.i18n.bt("Timed out on processing image with uploadId {{ uploadId }}", "Timed out on processing image with uploadId {{ uploadId }}", "MediaUpload.ImageUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:4})}}),u(this,"upload",()=>{"localImage"===this.media.type&&(this.numAttempts+=1,c((0,a.Mi)(this.media.src),"image",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then(e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"}))}),this.signature=h.includes(e.media.type)?e.media.signature:null,this.status=h.includes(e.media.type)?"uploaded":"pending"}}class g extends p{constructor(e){super(e),u(this,"getClassName",()=>"VideoUpload"),u(this,"onProcessingFailed",e=>{if(this.uploadId){let t=(0,s.nk)(this.i18n.bt("Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "Failed to process video with uploadId {{ uploadId }} and failureCode {{ failureCode }}", "MediaUpload.VideoUpload.onProcessingFailed", undefined, false),{uploadId:this.uploadId,failureCode:e}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:t,mediaUploadFailureReason:10,mediaStatusFailureReason:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}}),u(this,"onProcessingTimeout",()=>{if(this.uploadId){let e=(0,s.nk)(this.i18n.bt("Timed out on processing video with uploadId {{ uploadId }}", "Timed out on processing video with uploadId {{ uploadId }}", "MediaUpload.VideoUpload.onProcessingTimeout", undefined, false),{uploadId:this.uploadId}).join("");this.onFailure({uploadId:this.uploadId,errorMsg:e,mediaUploadFailureReason:11,storyPinPublishStopwatch:this.storyPinPublishStopwatch})}}),u(this,"upload",()=>{"localVideo"===this.media.type&&(this.numAttempts+=1,c(this.media.fileSrc,"video",this.vipType,{onFailure:e=>this.onFailure(e),onFinishUpload:this.onFinishUpload,onStartUpload:this.callbackHandlers.onStartUpload,onUploadProgress:this.callbackHandlers.onUploadProgress},this.vipRegistration,this.storyPinPublishStopwatch,this.i18n).then(e=>{this.uploadId=e.uploadId,this.xhr=e.xhr,this.status="uploading"}))}),this.signature=h.includes(e.media.type)?e.media.signature:null,this.status=h.includes(e.media.type)?"uploaded":"pending"}}var m=i(214494),f=i(67347);async function x(e,t){let i=await m.Z.create("VIPResource",{upload_ids:e}).callGet(),{data:r}=i.resource_response;return e.reduce((e,i)=>(r[i]?e[i]={failureCode:r[i].failure_code,signature:r[i].signature,status:r[i].status}:(0,f.nP)("storypin.publish.vip_status_check.missing_upload_id",{sampleRate:1,tags:{retryCount:t}}),e),{})}function b(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let y=(0,l.Z)("[MEDIA UPLOAD MANAGER]");class v{constructor(e){var t=this;b(this,"getMediaRegistrationsFromVIP",async function({durationMs:e,mediaType:i}){var r;let l="image"===i?2:1;t.vipRegistrationPool[i].fetchingData=!0,t.debugLog(`Getting media registration urls for ${i}s`);let a=[];for(let t=0;t<l;t+=1)a.push({id:(0,n.Z)(),media_type:"image"===i?"image-story-pin":"video-story-pin",...e?{upload_aux_data:{clips:[{durationMs:e,isFromImage:"image"===i,startTimestampMs:-1}]}}:{}});let{requestCount:d}=t.vipRegistrationPool[i];return t.vipRegistrationPool[i].requestCount+=1,null===(r=t.storyPinPublishStopwatch)||void 0===r||r.subspanStart({name:`${i}_registration_${d}`,bypassIsTimingCheck:!0}),(0,o.Z)({url:"/v3/media/uploads/register/batch/",method:"POST",data:{media_info_list:JSON.stringify(a)},callOptions:{showError:3===t.vipRegistrationPool[i].retries}}).then(e=>{var r;let n="object"==typeof e.resource_response.data?Object.values(e.resource_response.data):[];t.vipRegistrationPool[i].data=n,t.vipRegistrationPool[i].retries=0,t.vipRegistrationPool[i].fetchedLast=performance.now(),t.vipRegistrationPool[i].fetchingData=!1,null===(r=t.storyPinPublishStopwatch)||void 0===r||r.subspanStop({name:`${i}_registration_${d}`,bypassIsTimingCheck:!0})},r=>{var n;(0,f.nP)(`storypin.publish.registration.${i}.failure`,{sampleRate:1,tags:{reason:r.message,retryCount:t.vipRegistrationPool[i].retries}}),t.vipRegistrationPool[i].retries<3?(t.debugLog(`${i} registration failed. ${3-t.vipRegistrationPool[i].retries} retries remaining. ${r}`),t.vipRegistrationPool[i].retries+=1,t.getMediaRegistrationsFromVIP({durationMs:e,mediaType:i})):(t.debugLog(`${i} registration failed. ${r}`),t.onFailure((0,s.nk)(t.i18n.bt("Failed to register {{ mediaType }} upload with message: {{ error }}", "Failed to register {{ mediaType }} upload with message: {{ error }}", "MediaUploadManager.getMediaRegistrationsFromVIP.failure", undefined, false),{error:r,mediaType:i}).join(""),"image"===i?13:7)),null===(n=t.storyPinPublishStopwatch)||void 0===n||n.subspanStop({name:`${i}_registration_${d}`,bypassIsTimingCheck:!0})})}),b(this,"initVIPRegistrationPools",()=>{this.getMediaRegistrationsFromVIP({mediaType:"image"}),this.getMediaRegistrationsFromVIP({mediaType:"video"})}),b(this,"checkAllUploadsProcessingOrCompleted",()=>{let e=0,t=Object.keys(this.mediaUploadsMap);for(let i of t){let t=this.mediaUploadsMap[i];this.debugLog(`Status of media upload ID ${i} ${t.mediaUpload.getClassName()} ${t.status}`),("completed"===t.status||"processing"===t.status&&"VideoUpload"===t.mediaUpload.getClassName())&&(e+=1)}return this.debugLog("Checking if all upload processes completed"),this.debugLog(`Completed ${e} out of ${Object.keys(this.mediaUploadsMap).length}`),e===Object.keys(this.mediaUploadsMap).length}),b(this,"checkUploadsFailed",()=>!!Object.keys(this.mediaUploadsMap).find(e=>"failed"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].processingRetryCount>2)),b(this,"updateUploadStatus",(e,t)=>this.mediaUploadsMap[e].status=t),b(this,"updateVIPStatusMap",e=>{let t=new Date,i=({mediaId:e,mediaUpload:i,signature:r,uploadId:n})=>{let o=(t-this.vipStatusMap[n].timeSet)/1e3;i.onFinishProcessing(n,{processingTimeSec:o,signature:r}),this.updateUploadStatus(e,"completed")};for(let r of Object.keys(e)){let{failureCode:n,signature:o,status:s}=e[r];if(r in this.vipStatusMap){let{mediaId:e}=this.vipStatusMap[r],l=this.mediaUploadsMap[e];if(n&&this.mediaUploadsMap[e].processingRetryCount>2){l.mediaUpload.onProcessingFailed(n),this.updateUploadStatus(e,"failed");break}let a=this.vipStatusMap[r].status;a!==s||"failed"===s?(this.vipStatusMap[r]={...this.vipStatusMap[r],status:s,timeSet:t},"processing"===s?(l.mediaUpload.onStartProcessing(r,{signature:o}),this.debugLog("Skipping media completion"),i({mediaId:e,mediaUpload:l.mediaUpload,signature:o,uploadId:r})):"succeeded"===s?(this.debugLog("Waited for media completion"),i({mediaId:e,mediaUpload:l.mediaUpload,signature:o,uploadId:r})):"failed"===s&&(this.mediaUploadsMap[e].processingRetryCount+=1,this.debugLog(`Media upload ${r} failed, but will keep checking ${3-this.mediaUploadsMap[e].processingRetryCount} times if a retry succeeds.`))):this.statusTimeoutMap[s]&&(t-this.vipStatusMap[r].timeSet)/1e3>=this.statusTimeoutMap[s].timeoutSec&&(l.mediaUpload.onProcessingTimeout(),this.statusTimeoutMap[s].onTimeout(r,e,this.mediaUploadsMap[e].mediaUpload.getClassName()))}}}),b(this,"refreshImageRegistration",async function(){t.vipRegistrationPool.image={fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},await t.getMediaRegistrationsFromVIP({mediaType:"image"})}),b(this,"getMediaRegistration",async function({durationMs:e,mediaType:i}){if(!e&&t.vipRegistrationPool[i]){t.vipRegistrationPool[i].fetchingData&&await new Promise(e=>{let r=0,n=setInterval(()=>{r+=1,t.vipRegistrationPool[i].fetchingData&&100!==r||(clearInterval(n),e())},100)});let r=performance.now()-t.vipRegistrationPool[i].fetchedLast>=18e5;(0===t.vipRegistrationPool[i].data.length||r)&&await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e})}else await t.getMediaRegistrationsFromVIP({mediaType:i,durationMs:e});return Promise.resolve(t.vipRegistrationPool[i].data.pop())}),b(this,"hasAnyVideoUploads",()=>{for(let e of Object.keys(this.mediaUploadsMap))if("VideoUpload"===this.mediaUploadsMap[e].mediaUpload.getClassName())return!0;return!1}),b(this,"getVipMapStatusesToString",()=>{let e="{";for(let i of Object.keys(this.vipStatusMap)){var t;e+=`[${i}]:${null!==(t=this.vipStatusMap[i].status)&&void 0!==t?t:"null"} `}return e+"}"}),b(this,"handleFailure",(e,t)=>{this.failed||(this.onFailure(e,t),this.failed=!0)}),b(this,"handleCheckUploadsCompleted",()=>{let e=this.checkAllUploadsProcessingOrCompleted();return e&&!this.completed&&(this.debugLog("All submitted media processed, calling onCompleted if it exists"),this.completed=!0,this.onCompleted()),e}),b(this,"onFinishUpload",(e,t)=>{this.vipStatusMap[e]={mediaId:t,status:null,timeSet:new Date},this.updateUploadStatus(t,"uploaded"),this.debugLog(`Finished uploading media ID ${t}`),this.statusCheckInProgress||(this.statusCheckInProgress=!0,this.waitThenCheckStatus())}),b(this,"onUploadFailed",(e,t,i)=>{this.updateUploadStatus(e,"failed"),this.handleFailure(t,i),this.debugLog(`Failed uploading media ID ${e}`)}),b(this,"removeMediaUpload",e=>{this.mediaUploadsMap[e]&&(this.mediaUploadsMap[e].mediaUpload.cancel(),delete this.mediaUploadsMap[e])}),b(this,"addMediaUpload",({media:e,mediaId:t,uploadHandlers:i})=>{let r="localImage"===e.type||"webImage"===e.type?"image":"video",n=Math.round(1e3*(e.duration||0));this.getMediaRegistration({mediaType:r,durationMs:n}).then(r=>{let n={...i,onFailure:({uploadId:e,errorMsg:r,mediaUploadFailureReason:n})=>{this.onUploadFailed(t,r,n),i.onFailure({uploadId:e,errorMsg:r,mediaUploadFailureReason:n})},onFinishUpload:(e,r)=>{this.onFinishUpload(e,t),i.onFinishUpload&&i.onFinishUpload(e,r)}},o="localImage"===e.type||"webImage"===e.type?new _({callbackHandlers:n,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:r,vipType:"image-story-pin"}):new g({callbackHandlers:n,i18n:this.i18n,maxUploadAttempts:this.maxMediaUploadAttempts,media:e,storyPinPublishStopwatch:this.storyPinPublishStopwatch,vipRegistration:r,vipType:"video-story-pin"});if(this.mediaUploadsMap[t]){this.debugLog(`Cancelling existing upload media ID ${t}`),this.mediaUploadsMap[t].mediaUpload.cancel();let{uploadId:e}=this.mediaUploadsMap[t].mediaUpload;e&&e in this.vipStatusMap&&delete this.vipStatusMap[e]}this.debugLog(`Added media ID to upload ${t}`),this.mediaUploadsMap[t]={mediaUpload:o,status:"pending",processingRetryCount:0},o.upload(),this.updateUploadStatus(t,"uploading")})}),b(this,"reset",()=>{this.failed=!1,this.statusCheckFailureCount=0,this.completed=!1}),b(this,"cancelAll",()=>{for(let e of Object.keys(this.mediaUploadsMap))"uploading"===this.mediaUploadsMap[e].status&&this.mediaUploadsMap[e].mediaUpload.cancel()}),b(this,"checkStatus",async function(){if(t.checkUploadsFailed()){t.statusCheckInProgress=!1,t.debugLog(`There is a failure in check status ${t.getVipMapStatusesToString()}`);return}t.debugLog(`Checking status ${t.getVipMapStatusesToString()}`),t.statusCheckInProgress=!0;let e=Object.keys(t.vipStatusMap);if(e.length>0)try{let n=await x(e,t.statusCheckFailureCount);t.updateVIPStatusMap(n),t.debugLog(`Check status response received ${t.getVipMapStatusesToString()}`);let o=t.handleCheckUploadsCompleted(),s=Object.keys(t.vipStatusMap);for(let e of s){let{mediaId:n}=t.vipStatusMap[e];if(t.mediaUploadsMap[n]){if("completed"===t.mediaUploadsMap[n].status){let o=t.mediaUploadsMap[n].mediaUpload.signature;if(t.mediaUploadsMap[n].mediaUpload.vipType.includes("video")&&o){var i,r;null===(i=t.storyPinPublishStopwatch)||void 0===i||i.updateSubspanName({currentName:`video_page_upload-${e}`,newName:`video_page_upload-${o}`,bypassIsTimingCheck:!0}),null===(r=t.storyPinPublishStopwatch)||void 0===r||r.updateSubspanName({currentName:`video_page_publish-${e}`,newName:`video_page_publish-${o}`,bypassIsTimingCheck:!0})}delete t.vipStatusMap[e]}}else(0,f.nP)("storypin.publish.media_uploads_map.missing_upload_id",{sampleRate:1,tags:{retryCount:t.statusCheckFailureCount,mediaId:n,vipId:e,mediaType:t.mediaUploadsMap[n].mediaUpload.getClassName()}})}o?t.statusCheckInProgress=!1:t.waitThenCheckStatus()}catch(e){t.statusCheckFailureCount+=1,t.statusCheckFailureCount>4?(t.debugLog(`Failing upload because status check failed ${t.statusCheckFailureCount} times`),t.handleFailure((0,s.nk)(t.i18n.bt("Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "Could not check VIP status with error: {{ errorName }} {{ errorMessage }}", "MediaUploadManager.checkStatus.error", undefined, false),{errorName:null==e?void 0:e.name,errorMessage:null==e?void 0:e.message}).join(""),14),t.statusCheckInProgress=!1):(t.debugLog(`Continuing upload because status check only failed ${t.statusCheckFailureCount} times`),t.waitThenCheckStatus())}else t.handleCheckUploadsCompleted()||t.waitThenCheckStatus()}),b(this,"waitThenCheckStatus",()=>{setTimeout(this.checkStatus,this.hasAnyVideoUploads()?3e3:1e3)}),this.onCancel=e.onCancel,this.onCompleted=e.onCompleted,this.onFailure=e.onFailure,this.statusTimeoutMap=e.statusTimeoutMap,this.maxMediaUploadAttempts=e.maxMediaUploadAttempts,this.inDebugMode=e.inDebugMode,this.storyPinPublishStopwatch=e.storyPinPublishStopwatch,this.i18n=e.i18n,this.statusCheckInProgress=!1,this.completed=!1,this.failed=!1,this.vipRegistrationPool={image:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1},video:{fetchedLast:0,retries:0,data:[],requestCount:0,fetchingData:!1}},this.statusCheckFailureCount=0,this.mediaUploadsMap={},this.vipStatusMap={}}debugLog(e){y(this.inDebugMode,e)}}function P({i18n:e,isEmployee:t,pinDraftId:i,storyPinPublishStopwatch:n}){return o=>{let s=new v({i18n:e,inDebugMode:t,maxMediaUploadAttempts:r.dD,onCancel:()=>{},onCompleted:()=>{},onFailure:()=>{},statusTimeoutMap:{registered:{onTimeout:(e,t,i)=>{(0,f.nP)("storypin.publish.media_uploads_map.timeout.registered",{sampleRate:1,tags:{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i}})},timeoutSec:240},processing:{onTimeout:(e,t,i)=>{(0,f.nP)("storypin.publish.media_uploads_map.timeout.processing",{sampleRate:1,tags:{retryCount:this.statusCheckFailureCount,mediaId:t,uploadId:e,mediaType:i}})},timeoutSec:180}},storyPinPublishStopwatch:n});s.initVIPRegistrationPools(),o({type:"PIN_DRAFT_SET_STORY_PIN_UPLOAD_MANAGER",payload:{pinDraftId:i,uploadManager:s}})}}},998285:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(172045),n=i(748254),o=i(472278),s=i(843030),l=i(252570),a=i(52925),d=i(296342);function c({canvasAspectRatio:e,options:t,pinDraftId:i,pinItem:c,pinItemId:u}){return h=>{if(h((0,n.Z)(i,u,{...c,backgroundColor:d.Lh,media:null},t)),null!=c&&c.media){let{media:t}=c;"localImage"===t.type?h((0,s.Uo)(i,u,(0,r.Z)(),{media:t,edits:(0,l.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_image_block"},0)):"localVideo"===t.type&&h((0,s.Uo)(i,u,(0,r.Z)(),{media:t,edits:(0,l.Z)({canvasAspectRatio:e,media:t}),type:"story_pin_video_block"},0));let n="localImage"===t.type?(0,a.MW)(t):Promise.resolve([]);n.then(e=>{h((0,o.iY)(u,e)),e.length>0&&h((0,o.vi)(i,u,e[0]))})}}}},554410:(e,t,i)=>{"use strict";i.d(t,{X:()=>h,U:()=>u});var r=i(186656),n=i(956800),o=i(474394),s=i(798477),l=i(843030),a=i(840839),d=i(623320),c=i(67347);function u(e,t,i){return async(r,n)=>{var o,s;let{pinDrafts:c,storyPinItemBlocks:u,storyPinItems:h}=n().pinbuilder,p=c[e].pinItemIds.findIndex(e=>e===t),_=h[t].blockIds.find(e=>{var t;return(null===(t=u[e].media)||void 0===t?void 0:t.type)==="localImage"});if(_&&(null===(o=u[_].media)||void 0===o?void 0:o.type)==="localImage"){let t=u[_].media,{signature:n,uploadId:o}=await (s=t.src,new Promise((t,r)=>{if(s.startsWith("data")){let n=(0,d.Mi)(s);(0,d.GV)(n,"image-story-pin",{onFailureUpload:({fileSizeBytes:t,uploadId:r})=>(function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:r},n){(0,a.Z)(n,{event_type:8785,aux_data:{file_size_mb:e/1048576,media_upload_id:r,story_pin_page_id:i,story_pin_upload_id:t}})})({fileSizeBytes:t,pinDraftId:e,storyPageNumber:p,uploadId:r},i),onFinishProcessing:({fileSizeBytes:t,processingTime:r,signature:n,uploadId:o,uploadTime:s})=>(function({fileSizeBytes:e,imageSig:t,pinDraftId:i,storyPageNumber:r,uploadId:n,uploadTimeSec:o},s){(0,a.Z)(s,{event_type:8781,aux_data:{file_size_mb:e/1048576,image_signature:t,media_upload_id:n,story_pin_page_id:r,story_pin_upload_id:i,upload_time:o}})})({fileSizeBytes:t,imageSig:n,pinDraftId:e,storyPageNumber:p,uploadId:o,uploadTimeSec:s+r},i),onStartUpload:({fileSizeBytes:t,uploadId:r})=>(function({fileSizeBytes:e,pinDraftId:t,storyPageNumber:i,uploadId:r},n){(0,a.Z)(n,{event_type:8780,aux_data:{file_size_mb:e/1048576,media_upload_id:r,story_pin_page_id:i,story_pin_upload_id:t}})})({fileSizeBytes:t,pinDraftId:e,storyPageNumber:p,uploadId:r},i)}).then(({signature:e,uploadId:i})=>t({uploadId:i,signature:e||""})).catch(e=>{r(e)})}else r(Error("Image must be of b64 format"))}));r((0,l.PF)(e,_,{signature:n,uploadId:o}))}}}function h(e,t,i){return async(l,a)=>{let{pinDrafts:d,selectedPinDraftIds:u}=a().pinbuilder;try{await (0,r.Z)({url:`/v3/storypins/drafts/${e}/`,method:"DELETE",data:{...i?{orbac_subject_id:i}:Object.freeze({})}}),l((0,n.EX)({feedType:"storyPinData",feedId:t,itemIds:[e],itemType:"storypindata"})),l({type:"STORY_PIN_DATA_DELETE",payload:{storyPinDataId:e}});let a=Object.keys(d).find(t=>d[t].storyPinDraftId===e);a&&(l((0,s.Z)(a)),u.includes(a)&&l((0,o.deselectPinBuilderPinDraft)(a)))}catch(e){throw(0,c.nP)("story_pin.drafts.delete.failure",{sampleRate:1,tags:{app_type:"web"}}),Error("Unable to delete the draft")}}}},472278:(e,t,i)=>{"use strict";i.d(t,{Bl:()=>p,Dt:()=>c,EH:()=>E,Gm:()=>A,JQ:()=>S,WZ:()=>m,d5:()=>v,dP:()=>x,eU:()=>b,go:()=>w,h4:()=>u,hC:()=>h,iY:()=>P,j8:()=>d,kh:()=>a,pq:()=>_,qG:()=>g,vi:()=>y});var r=i(172045),n=i(843030),o=i(252570),s=i(52925),l=i(296342);function a(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION",payload:{pinItemId:e,description:t}}}function d(e,t){return{type:"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR",payload:{pinItemId:e,descriptionError:t}}}function c(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE",payload:{pinItemId:e,title:t}}}function u(e,t){return{type:"STORY_PIN_ITEM_SET_TITLE_ERROR",payload:{pinItemId:e,titleError:t}}}function h(e,t){return{type:"STORY_PIN_ITEM_SET_MEDIA",payload:{pinItemId:e,media:t}}}function p(e,t){return{type:"STORY_PIN_ITEM_UPDATE_MEDIA",payload:{pinItemId:e,media:t}}}function _(e,t){return{type:"STORY_PIN_ITEM_UPDATE_LINK_BLOCK",payload:{pinItemId:e,linkBlock:t}}}function g(e,t){return{type:"STORY_PIN_ITEM_SET_LINK_ERROR",payload:{pinItemId:e,linkError:t}}}function m(e,t,i){return{type:"STORY_PIN_ITEM_SET_EDITED_IMAGE",payload:{pinItemId:e,editedMedia:t,canvasJson:i}}}function f(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_DATA",payload:{pinDraftId:e,pinItemId:t,pinItem:i}}}function x(e,t){return{type:"STORY_PIN_ITEM_SET_BLOCK_IDS",payload:{pinItemId:e,blockIds:t}}}function b(e,t){return{type:"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID",payload:{pinItemId:e,blockId:t}}}function y(e,t,i){return{type:"STORY_PIN_ITEM_SET_BACKGROUND_COLOR",payload:{pinDraftId:e,pinItemId:t,backgroundColor:i}}}function v(e,t,i){return{type:"STORY_PIN_ITEM_SET_LAYOUT",payload:{pinDraftId:e,pinItemId:t,layout:i}}}function P(e,t){return{type:"STORY_PIN_ITEM_SET_DOMINANT_COLORS",payload:{pinItemId:e,dominantColors:t}}}function S({canvasAspectRatio:e,pinDraftId:t,pinItem:i,pinItemId:a}){return d=>{if(i.media){let{media:c}=i;"localImage"===c.type?d((0,n.Uo)(t,a,(0,r.Z)(),{media:c,edits:(0,o.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_image_block"},0)):"localVideo"===c.type&&d((0,n.Uo)(t,a,(0,r.Z)(),{media:c,edits:(0,o.Z)({canvasAspectRatio:e,media:c}),type:"story_pin_video_block"},0));let u="localImage"===c.type?(0,s.MW)(c):Promise.resolve([]);u.then(e=>d(f(t,a,{...i,backgroundColor:e.length>0?e[0]:l.Lh,dominantColors:e,media:null})))}else d(f(t,a,i))}}function A(e,t){return{type:"STORY_PIN_ITEM_SET_SELECTED_PIN_TAG_ID",payload:{pinItemId:e,selectedPinTagId:t}}}function w(e,t){return{type:"STORY_PIN_ITEM_UPDATE_CWT_DATA",payload:{pinItemId:e,cwtData:t}}}function E(e,t){return i=>{i({type:"STORY_PIN_ITEM_ADD_PIN_TAG",payload:{pinItemId:e,pinTagId:t,pinTag:{id:t,x:0,y:0}}}),i(A(e,t))}}},843030:(e,t,i)=>{"use strict";function r(e,t,i,r,n){return{type:"STORY_PIN_ITEM_ADD_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i,storyPinItemBlock:r,index:n}}}function n(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_EDITS",payload:{pinDraftId:e,blockId:t,edits:i}}}function o(e,t,i){return{type:"STORY_PIN_ITEM_BLOCK_UPDATE_MEDIA",payload:{pinDraftId:e,blockId:t,media:i}}}function s(e,t){return{type:"STORY_PIN_ITEM_BLOCK_SET_PLAYING",payload:{blockId:e,playing:t}}}function l(e,t,i){return{type:"STORY_PIN_ITEM_REMOVE_BLOCK",payload:{pinDraftId:e,pinItemId:t,blockId:i}}}function a(e,t,i){return{type:"STORY_PIN_ITEM_REORDER_BLOCKS",payload:{pinDraftId:e,pinItemId:t,blockIds:i}}}function d(e,t,i){return{type:"STORY_PIN_ITEM_UPDATE_BLOCK",payload:{pinDraftId:e,blockId:t,storyPinItemBlock:i}}}i.d(t,{Ny:()=>l,PF:()=>o,Uo:()=>r,_E:()=>n,_Z:()=>d,gs:()=>s,mI:()=>a})},461773:(e,t,i)=>{"use strict";i.d(t,{KF:()=>c,ZN:()=>l,fv:()=>d,kE:()=>h,yA:()=>a});var r=i(214494),n=i(186656),o=i(90326);function s(e,t,i,n){return r.Z.create("UserFollowResource",{user_id:e,invite_code:n||void 0,aux_data:t?{pin_id:t}:void 0,client_tracking_params:i})}function l(e,t=null,i,r){return n=>{s(e,t,i,r).callCreate().catch(()=>n((0,o.P_)(e,!1))),n((0,o.P_)(e,!0))}}function a(e,t=null,i,r){return async n=>{n((0,o.P_)(e,!0)),await s(e,t,i,r).callCreate().catch(t=>{throw n((0,o.P_)(e,!1)),t})}}function d(e,t=null,i){return r=>{s(e,t,i).callDelete().catch(()=>r((0,o.P_)(e,!0))),r((0,o.P_)(e,!1))}}function c(e,t=null,i){return async r=>{r((0,o.P_)(e,!1)),await s(e,t,i).callDelete().catch(t=>{throw r((0,o.P_)(e,!0)),t})}}let u=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),h=e=>t=>{e.length>0&&((0,n.Z)({url:"/v3/users/follow/",method:"PUT",data:{followee_ids:e.join(",")}}).catch(()=>t(u(e,!1))),t(u(e,!0)))}},205992:(e,t,i)=>{"use strict";i.d(t,{Cp:()=>_,GT:()=>a,V6:()=>s,W2:()=>c,W6:()=>g,_L:()=>p,fm:()=>l,hT:()=>d});var r=i(214494),n=i(56528),o=i(248327);function s(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}let l=e=>({type:"USER_DOMAIN_VERIFIED",payload:{verifiedWebsite:e}}),a=e=>({type:"USER_DOMAIN_UNVERIFIED",payload:{verifiedWebsite:e}});function d(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}let c=(e,t,i)=>r=>{r({type:"USER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})},u=(e,t,i)=>r=>{r({type:"USER_PARTNER_SETTING_CHANGE",payload:{id:e,field:t,value:i}})},h=e=>{let t=e.split(" ");return{first_name:t[0],last_name:t[1]}},p=({field:e,value:t,passcode:i,onSettingSavedHn:n,showErrorHn:s,surfaceTag:l,userId:a})=>(d,p)=>{let _=p().users[a],g={user_id:a,surface_tag:l};if("full_name"===e){if(_.is_partner)g.business_name=t;else{let e=h(t);g.first_name=e.first_name,g.last_name=e.last_name||""}}else g[e]=t;i&&(g.passcode=i),r.Z.create("UserSettingsResource",g).callUpdate().then(()=>{if("profile_image_url"===e)d((0,o.b)("UserResource",{options:g}));else if("full_name"===e){if(_.is_partner)d(c(a,"first_name",t));else{let e=h(t);d(c(a,"first_name",e.first_name)),d(c(a,"last_name",e.last_name))}}_.is_partner&&("account_type"===e||"contact_name"===e)?d(u(a,e,t)):d(c(a,e,t)),n()},s)},_=(e,t,i,r,o,s)=>()=>{(0,n.Z)({new:t,new_confirm:i,old:e,passcode:r}).then(o,s)},g=(e,t,i,n,o,s)=>l=>{l(c(e,`${t}.${i}`,n));let a={},d="EmailSettingsResource";void 0!==o?(a={section:t,option:i,value:n,od:o.od,user_id:o.user_id},d="UnsubEmailSettingsResource"):a={section:t,option:i,value:n},r.Z.create(d,a).callUpdate().then(s).catch(()=>l(c(e,`${t}.${i}`,!n)))}},90326:(e,t,i)=>{"use strict";i.d(t,{Ge:()=>d,JS:()=>s,OF:()=>y,P_:()=>l,Q_:()=>h,b8:()=>p,eR:()=>b,h2:()=>c,h6:()=>u});var r=i(214494),n=i(186656),o=i(735422);function s(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}let l=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),a=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),d=({id:e,orbacSubjectId:t,blockSource:i,blockContext:n,logContextEvent:o})=>async s=>{s(a(e,!0));let l=await r.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t,block_source:i,block_context:n}).callCreate().catch(()=>s(a(e,!1)));return o({event_type:54,object_id_str:e}),l},c=(e,t)=>async i=>{i(a(e,!1));let n=await r.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch(()=>i(a(e,!0)));return t({event_type:55,object_id_str:e}),n};function u(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}let h=(e,t)=>()=>{let i=r.Z.create("UserStateResource",{state:e,value:t});return i.callCreate()},p=(e,t,i)=>(r,s)=>{(0,n.Z)({url:"/v3/users/me/",method:"POST"}).then(()=>{i({event_type:48,object_id_str:s().session.userId}),e(),(0,o.Dm)()},t)},_=e=>e>=200&&e<400,g=(e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"",m=async(e,t,i)=>{let n=await r.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(n.resource_response.data[e]){let r=n.resource_response.data[e],{status:o,signature:s}=r;if("processing"===o||"registered"===o)setTimeout(async()=>{m(e,t,i)},5e3);else if("succeeded"===o){let e=g(s);t(e)}else i()}else i()},f=(e,t,i,n,o)=>{let s=new FormData;return s.append("img",e),r.Z.create("VIPResource",{type:t}).callCreate().then(t=>{if(t.resource_response.data){let{upload_id:r,upload_url:s,upload_parameters:l}=t.resource_response.data,a=new XMLHttpRequest;a.open("POST",s,!0),a.onload=()=>{_(a.status)?(i(100),m(r,n,o)):o()},a.upload.onprogress=e=>{let t=Math.round(100*e.loaded/e.total);i(t)};let d=new FormData;for(let e in l)d.append(e,l[e]);d.append("file",e),a.send(d)}},()=>{o()})},x=e=>new Promise((t,i)=>{f(e,"pinimage",()=>{},e=>{t(e)},e=>{i(e)})}),b=e=>new Promise((t,i)=>{"string"==typeof e?e.startsWith("data")&&x(function(e,t=512){let i=e.split(";"),r=i[0].split(":")[1],n=i[1].split(",")[1],o=atob(n),s=[];for(let e=0;e<o.length;e+=t){let i=o.slice(e,e+t),r=Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);let n=new Uint8Array(r);s.push(n)}let l=new Blob(s,{type:r});return l}(e)).then(e=>t(e)):i("Invalid Image")}),y=e=>()=>(0,n.Z)({url:"/v3/register/exists/",data:{email:e}})},492583:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});let r={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},20064:(e,t,i)=>{"use strict";i.d(t,{E:()=>n,Z:()=>o});var r=i(767546);let n={description:"",descriptionError:null,editorInstanceId:"",isTaggable:!0,link:"",linkError:null,media:null,pinTagIds:[],selectedPinTagId:null,tagError:null,title:"",titleError:null,canvasJson:null,signals:{},userMentionTags:[]},o=(e=n,t)=>{switch(t.type){case"PIN_DRAFT_ADD_PIN_ITEM":case"PIN_ITEM_UPDATE_DATA":{let{pinItem:i}=t.payload;return{...e,...i,signals:{...e.signals,...null==i?void 0:i.signals}}}case"PIN_ITEM_ADD_PIN_TAG":{let{pinTagId:i}=t.payload;return{...e,pinTagIds:[...e.pinTagIds,i]}}case"PIN_ITEM_REMOVE_PIN_TAG":{let{pinTagId:i}=t.payload;return{...e,pinTagIds:e.pinTagIds.filter(e=>e!==i)}}case"PIN_ITEM_SET_DESCRIPTION":{let{description:i}=t.payload;return{...e,description:i}}case"PIN_ITEM_SET_DESCRIPTION_ERROR":{let{descriptionError:i,signals:r}=t.payload;return{...e,descriptionError:i,signals:{...e.signals,...r}}}case"PIN_ITEM_SET_IS_TAGGABLE":{let{isTaggable:i}=t.payload;return{...e,isTaggable:i}}case"PIN_ITEM_SET_LINK":{let{link:i}=t.payload;return{...e,link:i}}case"PIN_ITEM_SET_LINK_ERROR":{let{linkError:i,signals:r}=t.payload;return{...e,linkError:i,signals:{...e.signals,...r}}}case"PIN_ITEM_SET_MEDIA":{let{media:i}=t.payload,r=(null==i?void 0:i.type)!=="localVideo"&&(!!i&&!e.link||e.isTaggable);return{...e,canvasJson:null,isTaggable:r,media:i,pinTagIds:[],selectedPinTagId:null}}case"PIN_ITEM_UPDATE_MEDIA":{let{media:i}=t.payload;return{...e,media:e.media?(0,r.Z)(e.media,i):null}}case"PIN_ITEM_SET_SELECTED_PIN_TAG_ID":{let{selectedPinTagId:i}=t.payload;return{...e,selectedPinTagId:i}}case"PIN_ITEM_SET_TAG_ERROR":{let{tagError:i}=t.payload;return{...e,tagError:i}}case"PIN_ITEM_SET_TITLE":{let{title:i}=t.payload;return{...e,title:i}}case"PIN_ITEM_SET_TITLE_ERROR":{let{titleError:i,signals:r}=t.payload;return{...e,titleError:i,signals:{...e.signals,...r}}}case"PIN_ITEM_SET_EDITED_IMAGE":{let{editedMedia:i,canvasJson:r}=t.payload;return{...e,media:i,canvasJson:r}}default:return e}}},106331:(e,t,i)=>{"use strict";i.d(t,{FQ:()=>f,JT:()=>u,ND:()=>p,Ob:()=>v,Qj:()=>b,VK:()=>g,_V:()=>S,d_:()=>m,gF:()=>h,gI:()=>P,gl:()=>c,jP:()=>y,nJ:()=>d,p:()=>x,pX:()=>A,vd:()=>_,xA:()=>a});var r=i(442279),n=i(47615),o=i(490072),s=i(562501);function l(e){return e.values().next().value}let a=e=>e.pinbuilder.selectedPinDraftIds,d=e=>e.pinbuilder.createdPinIds,c=e=>{let{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).reduce((e,i)=>t.includes(i.pinId)&&"carousel"===i.type?[...e,i.pinId||""]:e,[])},u=e=>{let{pinbuilder:{createdPinIds:t,pinDrafts:i,pinDraftIds:r}}=e;return Object.keys(i).reduce((e,n)=>{let o=i[n],s=o&&o.pinId;return r.includes(n)&&s&&t.includes(s)&&!0!==o.isAdIneligible&&!0!==o.isShowcase&&!0!==o.isQuizAd?[...e,s]:e},[])},h=e=>{let{pinbuilder:{createdPinIds:t,pinDrafts:i}}=e;return Object.values(i).filter(e=>e&&e.pinId&&e.isShowcase&&t.includes(e.pinId)).map(e=>e.pinId||"")},p=e=>{let{pinbuilder:{pinDrafts:t}}=e;return Object.values(t).filter(e=>e&&e.isShowcase&&!e.pinId&&"created"!==e.status).map(e=>e.status)},_=e=>e.pinbuilder.pinDraftIds,g=(0,r.P1)([_,o.OW],(e,t)=>e.filter(e=>"story"!==t[e].type)),m=(0,r.P1)([_,o.OW],(e,t)=>e.filter(e=>"succeeded"!==t[e].status)),f=(0,r.P1)([_,o.OW],(e,t)=>e.filter(e=>"succeeded"!==t[e].status&&"story"!==t[e].type)),x=(0,r.P1)([a,o.OW,s.ng],(e,t,i)=>{let{descriptions:r,links:n,publishOptions:o,scheduledDates:s,scheduledTimes:a,selectedItems:d,titles:c}=e.reduce((e,r)=>{let{pinItemIds:n,publishOption:o,scheduledDate:s,scheduledTime:l,selectedItem:a}=t[r];return e.publishOptions.add(o),e.scheduledDates.add(s?s.toDateString():null),e.scheduledTimes.add(l?l.toTimeString():null),e.selectedItems.add(a?JSON.stringify(a,Object.keys(a).sort()):null),n.forEach(t=>{let{description:r,link:n,title:o}=i[t];e.descriptions.add(r),e.titles.add(o),e.links.add(n)}),e},{descriptions:new Set,links:new Set,publishOptions:new Set,scheduledDates:new Set,scheduledTimes:new Set,selectedItems:new Set,titles:new Set}),u=l(s),h=l(a),p=l(d),_=u&&new Date(u),g=h&&new Date(`${new Date().toDateString()} ${h}`),m=p&&JSON.parse(p);return{initialDescription:1===r.size?l(r):void 0,initialLink:1===n.size?l(n):void 0,initialPublishOption:1===o.size?l(o):void 0,initialScheduledDate:1===s.size?_:void 0,initialScheduledTime:1===a.size?g:void 0,initialSelectedItem:1===d.size?m:void 0,initialTitle:1===c.size?l(c):void 0}}),b=(e,t,i)=>{let{pinTags:r,pinDrafts:o,pinItems:l}=e.pinbuilder,{type:a}=o[t],{media:d}=l[i];if("carousel"===a)return"CAROUSEL";let c=r&&Object.keys(r).length>0;if(c){let t=(0,s.jk)(),r=t(e,{pinItemId:i});if(r.length>0)return"COLLECTIONS"}return(null==d?void 0:d.type)==="localVideo"?"VIDEO":(0,n.Sl)(d)?"STATIC":null},y=(e,t)=>{let i={};for(let n of e){var r;let{publishingStatus:e}=t[n];i[e]=(null!==(r=i[e])&&void 0!==r?r:0)+1}return i},v=({pinbuilder:e})=>e.isBatchEditMode,P=e=>{let{pinbuilder:{createdPinIds:t,pinDrafts:i,pinDraftIds:r}}=e;if(r){let e={};for(let n of r){let r=i[n],o=r&&r.pinId;if(o&&t.includes(o)&&i[n].isQuizAd){let{parentPinId:t,quizResultIndex:r}=i[n];if(t&&"number"==typeof r){let i=e[t]||[];i[r]=o,e[t]=i}return e}}}return{}},S=(e,t,i)=>{let{pinbuilder:{pinDrafts:r,pinDraftIds:n}}=e,o=n&&n.reduce((e,n)=>r[n]&&r[n].parentPinId===t&&r[n].quizResultIndex===i?[...e,n]:e,[])||[];return o.length>0},A=e=>{let{pinDrafts:t,pinDraftIds:i=[]}=e.pinbuilder,r=i.reduce((e,i)=>t[i]&&t[i].isQuizAd?[...e,i]:e,[]),n={};i.forEach(e=>{n[e]&&!n[e].isQuizAd&&delete t[e]});let{publishing:o=0,clientError:s=0,serverError:l=0,succeeded:a=0}=y(r,t),d=s+l;return o>0?{quizPinPublishingCount:o+a,quizStatus:"publishing"}:d>0?{quizPinPublishingCount:d,quizStatus:"error"}:null}},490072:(e,t,i)=>{"use strict";i.d(t,{DJ:()=>x,Dt:()=>S,Fh:()=>j,IF:()=>d,NW:()=>l,OK:()=>s,OW:()=>o,Sg:()=>f,V$:()=>m,W3:()=>A,Wp:()=>D,Xe:()=>a,fw:()=>w,gQ:()=>v,jX:()=>b,jl:()=>y,kD:()=>h,mR:()=>E,mf:()=>u,nL:()=>I,pc:()=>g,pq:()=>c,q7:()=>p,uO:()=>_,v8:()=>P,wN:()=>C,xA:()=>T});var r=i(442279),n=i(122668);let o=e=>e.pinbuilder.pinDrafts,s=(e,t)=>e.pinbuilder.pinDrafts[t],l=e=>{let{pinDrafts:t}=e.pinbuilder,i={};return Object.keys(t).forEach(e=>{"story"!==t[e].type&&(i[e]=t[e])}),i},a=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].view,d=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIndex,c=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].pinItemIds,u=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isCommentsAllowed,h=(e,t)=>e.pinbuilder.pinDrafts[t.pinDraftId].isShoppingRecAllowed,p=(e,t)=>{let{pinDrafts:i,storyPinItems:r}=e.pinbuilder,{pinItemIds:n}=i[t.pinDraftId];return n.map(e=>r[e])},_=(e,t)=>{let{pinDrafts:i,storyPinItemBlocks:r,storyPinItems:n}=e.pinbuilder;return i[t.pinDraftId].pinItemIds.map(e=>n[e].blockIds.map(e=>r[e])).flat()},g=(e,t)=>{var i,r;let{pinDrafts:o}=e.pinbuilder,{pinItemIds:s,storyPinMetadata:l}=o[t.pinDraftId],a=(0,n.YE)(e,{pinItemId:s[0]}),d=Object.keys(a);return null!==(i=null==l?void 0:null===(r=l.title)||void 0===r?void 0:r.trim())&&void 0!==i?i:a&&d.length>0?a[d[d.length-1]].text.trim():""},m=(e,t)=>{var i;let{pinDrafts:r}=e.pinbuilder,{storyPinMetadata:n}=r[t.pinDraftId];return null!==(i=null==n?void 0:n.description)&&void 0!==i?i:""},f=(e,t)=>{var i;let{pinDrafts:r}=e.pinbuilder,{storyPinMetadata:n}=r[t.pinDraftId];return null!==(i=null==n?void 0:n.userMentionTags)&&void 0!==i?i:[]},x=(e,t)=>{var i;let{pinDrafts:r}=e.pinbuilder,{storyPinMetadata:n}=r[t.pinDraftId];return(null==n?void 0:null===(i=n.link)||void 0===i?void 0:i.trim())||""},b=(e,t)=>{let{pinDrafts:i}=e.pinbuilder,{pinDraftId:r}=t;return i[r].selectedItem},y=(e,t)=>{let i=c(e,t)[0],r=(0,n.iD)();return r(e,{pinItemId:i})},v=(e,t)=>{let{pinDrafts:i}=e.pinbuilder,{pinItemIds:r}=i[t.pinDraftId],o=[];return r.forEach(t=>{let i=(0,n.YE)(e,{pinItemId:t}),r=Object.keys(i).map(e=>i[e]);o.push(...r)}),o},P=(e,t)=>{let{pinDrafts:i}=e.pinbuilder,{pinDraftId:r}=t;return i[r].interestTags||[]},S={PENDING:0,VALID:1,INVALID:2},A=(e,t)=>{var i;let{pinDrafts:r}=e.pinbuilder,{storyPinMetadata:n}=r[t.pinDraftId];return null!==(i=null==n?void 0:n.linkStatus)&&void 0!==i?i:S.VALID},w=(e,t)=>{let{pinDrafts:i}=e.pinbuilder,{storyPinMetadata:r}=i[t.pinDraftId];return null==r?void 0:r.linkError},E=(e,t,i)=>{let r=_(e,t);return r.filter(e=>i.includes(e.type))},I=()=>(0,r.P1)([c,d],(e,t)=>e[t]),j=(e,t)=>{let i=e.pinDrafts[t.pinDraftId],r=i.pinItemIds,n=!!(i.apiError||i.boardError||i.mediaError),o=r.reduce((t,i)=>{let r=e.pinItems[i]||e.storyPinItems[i];return!!(t||r.descriptionError||r.linkError||r.tagError||r.titleError)},!1);return n||o},C=(e,t)=>{let{pinItemIds:i,selectedItem:r=null}=e.pinDrafts[t.pinDraftId],n=i.reduce((t,i)=>{let r=e.pinItems[i]||e.storyPinItems[i];return!!(t||r.description||r.link||r.media||r.title)},!1);return!!r||n},T=({pinbuilder:e})=>e.selectedPinDraftIds,D=({pinbuilder:{pinDraftIds:e,pinDrafts:t}})=>Object.keys(t).filter(t=>e.includes(t)).reduce((e,i)=>({...e,[i]:t[i]}),{})},562501:(e,t,i)=>{"use strict";i.d(t,{Bg:()=>c,CQ:()=>p,M:()=>a,jk:()=>_,ng:()=>s,vd:()=>h,wc:()=>l});var r=i(442279),n=i(957025),o=i(351870);let s=e=>e.pinbuilder.pinItems,l=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].isTaggable,a=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].selectedPinTagId,d=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].pinTagIds,c=(e,t)=>e.pinbuilder.pinItems[t.pinItemId].media,u=(0,r.P1)([d,n.Oo],(e,t)=>e.reduce((e,i)=>{let{status:r,taggedObjectIds:n}=t[i];return"deleted"!==r&&n.forEach(t=>e.push(t)),e},[])),h=()=>(0,r.P1)([d,n.Oo],(e,t)=>e.filter(e=>"deleted"!==t[e].status)),p=()=>(0,r.P1)([u,o.nb],(e,t)=>e.map(e=>t[e]).filter(e=>"deleted"!==e.status)),_=()=>(0,r.P1)([u,o.nb],(e,t)=>e.filter(e=>"deleted"!==t[e].status))},957025:(e,t,i)=>{"use strict";i.d(t,{A$:()=>l,Oo:()=>o});var r=i(442279),n=i(351870);let o=e=>e.pinbuilder.pinTags,s=(e,t)=>e.pinbuilder.pinTags[t.pinTagId].taggedObjectIds,l=()=>(0,r.P1)([s,n.nb],(e,t)=>e.filter(e=>"deleted"!==t[e].status))},122668:(e,t,i)=>{"use strict";i.d(t,{AC:()=>h,CI:()=>a,NR:()=>u,X4:()=>g,YE:()=>p,YP:()=>b,bS:()=>c,i3:()=>x,iD:()=>f,mX:()=>d,wH:()=>l,yp:()=>_});var r=i(442279),n=i(957025),o=i(351870);let s=["story_pin_heading_block","story_pin_paragraph_block"],l=(e,t)=>e.pinbuilder.storyPinItems[t];function a({storyPinItemBlocks:e,storyPinItemBlockIds:t}){return t.find(t=>!!e[t].media)}let d=(e,t)=>{let i=e.pinbuilder.storyPinItems[t.pinItemId];return i?a({storyPinItemBlocks:e.pinbuilder.storyPinItemBlocks,storyPinItemBlockIds:i.blockIds}):null};function c({storyPinItemBlockIds:e,storyPinItemBlocks:t}){return e.find(e=>s.includes(t[e].type))}let u=(e,t)=>e.pinbuilder.storyPinItems[t.pinItemId].selectedBlockId;function h({pinItemId:e,storyPinItemBlocks:t,storyPinItems:i}){let r=i[e],n={};return r&&r.blockIds.filter(e=>s.includes(t[e].type)).forEach(e=>{n[e]=t[e]}),n}let p=(e,t)=>{let{pinItemId:i}=t,{storyPinItemBlocks:r,storyPinItems:n}=e.pinbuilder;return h({storyPinItems:n,pinItemId:i,storyPinItemBlocks:r})},_=(e,t)=>{let i=e.pinbuilder.storyPinItems[t.pinItemId];return i?i.blockIds.map(t=>e.pinbuilder.storyPinItemBlocks[t]):[]},g=(e,t,i)=>{let r=e.pinbuilder.storyPinItems[t.pinItemId];return r.blockIds.find(t=>e.pinbuilder.storyPinItemBlocks[t].type===i)},m=(0,r.P1)([(e,t)=>e.pinbuilder.storyPinItems[t.pinItemId].pinTagIds,n.Oo],(e,t)=>e.reduce((e,i)=>{let{status:r,taggedObjectIds:n}=t[i];return"deleted"!==r&&n.forEach(t=>e.push(t)),e},[])),f=()=>(0,r.P1)([m,o.nb],(e,t)=>e.map(e=>t[e]).filter(e=>"deleted"!==e.status)),x=()=>(0,r.P1)([m,o.nb],(e,t)=>e.filter(e=>"deleted"!==t[e].status)),b=(e,t)=>e.pinbuilder.storyPinItems[t.pinItemId].cwtData},351870:(e,t,i)=>{"use strict";function r(e){return e.pinbuilder.taggedObjects}function n(e,t){var i;return null===(i=r(e)[t])||void 0===i?void 0:i.media}i.d(t,{nb:()=>r,xe:()=>n})},960278:(e,t,i)=>{"use strict";i.d(t,{I:()=>a,Z:()=>l});var r=i(773285),n=i(784590),o=i(845772);let s=({boardId:e,ownerUsername:t,ownerName:i,ownerImgSrc:s})=>{let{anyEnabled:l}=(0,r.F)().checkExperiment("web_m10n_business_access_orbac_ga"),a=(0,o.Z)(),{data:d,isLoaded:c}=(0,n.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...l&&a?{orbac_subject_id:a}:{}}}),u=[{name:i,src:s,href:`/${t}/`,isDim:!1}];return c&&d&&d.length>0&&d.forEach(e=>{u.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})}),u},l=s;function a({children:e,...t}){let i=s(t);return e(i)}},217641:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(667294),n=i(883119),o=i(785893);function s(e){let{accessibilityLabel:t,focused:i,id:s,onBlur:l,onChange:a,onFocus:d,placeholder:c,value:u,size:h="lg"}=e,p=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(i){let e=p.current;window.requestAnimationFrame(()=>{let t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[i]),(0,o.jsx)(n.xu,{ref:p,children:(0,o.jsx)(n.Um,{accessibilityLabel:t,id:s,onBlur:l,onChange:a,onFocus:d,placeholder:c,size:h,value:u})})}},553751:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var r=i(667294),n=i(702664),o=i(883119),s=i(112690),l=i(898781),a=i(755742),d=i(19121),c=i(717615),u=i(231947),h=i(274495),p=i(678638),_=i(785893);function g(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends r.Component{constructor(e){super(e),g(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:i,dispatch:r,completeCreateSectionAction:n,pinImport:o,viewer:s,orbacActingAs:l,logContextEvent:a}=this.props,d=(0,u.lJ)(s,l);return this.setState({isSaving:!0}),r((0,p.vB)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:i&&i.id,name:this.state.inputName.trim(),pinImport:o},this.props.i18n,d,a)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),g(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:i}=this.state;[a.Z.ENTER,a.Z.NUMPAD_ENTER].includes(e.which)&&!t&&i.trim()&&this.onCreateSection()}),g(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),g(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:i,inputRef:r}=this.state;r&&(!t.inputRef||i)&&r.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:i,inputName:r,isSaving:n}=this.state,s=!!r.trim()&&!i;return(0,_.jsxs)(o.xu,{display:"flex",direction:"column",color:"default",flex:"grow",top:!0,bottom:!0,right:!0,position:t?"relative":"absolute",rounding:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},children:[e&&(0,_.jsx)(o.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,_.jsx)(o.X6,{size:"400",children:this.props.i18n.bt("Add section", "Add section", "Title in the add section modal", undefined, true)})}),(0,_.jsxs)(o.xu,{padding:4,children:[(0,_.jsx)(o.xu,{marginBottom:2,children:(0,_.jsx)(o.__,{htmlFor:"sectionEditName",children:(0,_.jsx)(o.xv,{size:"200",color:i?"error":"subtle",children:this.props.i18n.bt("Name", "Name", "Board section name", undefined, true)})})}),(0,_.jsx)(o.xu,{children:(0,_.jsx)(o.xu,{ref:this.handleInputRef,children:(0,_.jsx)(o.nv,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n.bt("Like \"Lighting\"", "Like \"Lighting\"", "Placeholder for board section name", undefined, true),size:"lg",type:"text",value:r})})})]}),(0,_.jsx)(o.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow"}),(0,_.jsx)(o.xu,{padding:4,children:(0,_.jsx)(o.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(h.Z,{disabled:!s||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n.bt("Add", "Add", "add a new section", undefined, true)})})})]})}}let f=function(e){let t=(0,n.useDispatch)(),i=(0,l.ZP)(),r=(0,d.Z)(),o=(0,c.Z)();return(0,_.jsx)(m,{...e,dispatch:t,i18n:i,logContextEvent:(0,s.Z)(),viewer:r,orbacActingAs:o})}},818747:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(89254),o=i(785893);function s({url:e,description:t,color:i}){return i=i||"#8fa7bf",(0,o.jsx)(r.xu,{rounding:2,height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:i}},children:(0,o.jsxs)(r.xu,{maxHeight:200,padding:4,overflow:"hidden",children:[e&&(0,o.jsx)(r.xu,{marginBottom:2,children:(0,o.jsx)(r.xv,{color:"inverse",size:"100",children:(0,n.Z)(e).hostname||e})}),(0,o.jsx)(r.xu,{maxHeight:144,children:(0,o.jsx)(r.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},850760:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var r=i(667294),n=i(883119),o=i(407043),s=i(312918),l=i(142103),a=i(785893);function d(e,t,i){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends r.PureComponent{constructor(...e){super(...e),d(this,"state",{}),d(this,"handleUserFollow",(e,t)=>{this.setState({isFollowing:t}),t?this.props.logContextEvent({event_type:45,object_id_str:e,view_type:3,view_parameter:73}):this.props.logContextEvent({event_type:46,object_id_str:e,view_type:3,view_parameter:73})})}static getDerivedStateFromProps(e,t){return void 0===t.isFollowing&&e.user?{isFollowing:e.user.followed_by_me}:Object.freeze({})}render(){let{user:e}=this.props,{id:t,full_name:i,image_medium_url:r,username:o}=e,d=o?`/${o}/`:"";return t&&i?(0,a.jsxs)(n.xu,{display:"flex",alignItems:"center",marginStart:-1,marginEnd:-1,children:[(0,a.jsx)(n.xu,{flex:"grow",paddingX:1,children:(0,a.jsx)(s.Z,{fullName:i,imageUrl:r,profileUrl:d,openNewTab:!0})}),(0,a.jsx)(n.xu,{flex:"none",paddingX:1,children:(0,a.jsx)(l.Z,{fullName:i,suppressToasts:!0,id:t,imageUrl:r||"",isOwnProfile:!1,onUserFollow:e=>this.handleUserFollow(t,e),profileUrl:d,size:"md"})})]}):null}}let u=function(e){let{logContextEvent:t}=(0,o.v)();return(0,a.jsx)(c,{...e,logContextEvent:t})}},854907:(e,t,i)=>{"use strict";function r(e){let t=[],i="";for(let r of e)if(i){let e=!!r.match(/\s/),n=!!i.match(/\s/);if(e===n)i+=r;else if(!n&&i.includes("-")){let e=0;for(let r=0;r<i.length;r+=1)"-"===i[r]&&(t.push(i.substring(e,r+1)),e=r+1);t.push(i.substring(e)),i=r}else t.push(i),i=r}else i=r;return i.length&&t.push(i),t}function n({boxHeight:e,boxWidth:t,font:i,startFontSize:n,text:o}){var s,l;if("undefined"==typeof document||!document.body)return{fontSize:n,lines:[]};let{body:a}=document,d=document.createElement("div");a.appendChild(d);let c=null==o?void 0:o.split(/\r?\n/g),u=n,h=(null===(s=i.fontOverrides)||void 0===s?void 0:s.letterSpacing)!=null?`${i.fontOverrides.letterSpacing}px`:void 0,p=(null===(l=i.fontOverrides)||void 0===l?void 0:l.lineHeight)||1.1,_={letterSpacing:h,lineHeight:String(p),fontFamily:i.fontFamily,fontSize:`${u}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(d.style,_);let g=document.createElement("div");for(g.style.display="inline",d.appendChild(g),(null!=c?c:[]).forEach((e,t)=>{let i=document.createElement("span");i.style.wordBreak="break-word",g.appendChild(i),i.appendChild(document.createTextNode(e)),t!==(null!=o?o:"").length-1&&i.appendChild(document.createElement("br"))});(g.offsetHeight>e||g.offsetWidth>t)&&u>0;)u-=1,d.style.fontSize=`${u}px`;return g.remove(),d.remove(),{fontSize:u,lines:u>0?function({font:e,fontSize:t,textList:i,width:n}){var o,s;if("undefined"==typeof document||!document.body||n<=0||t<=0)return[];let{body:l}=document,a=document.createElement("div");l.appendChild(a);let d=(null===(o=e.fontOverrides)||void 0===o?void 0:o.letterSpacing)!=null?`${e.fontOverrides.letterSpacing}px`:void 0,c=(null===(s=e.fontOverrides)||void 0===s?void 0:s.lineHeight)||1.1,u={letterSpacing:d,lineHeight:String(c),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(a.style,u);let h=document.createElement("div");h.style.display="inline",a.appendChild(h);let p=document.createTextNode("");h.appendChild(p);let _=[],g="",m=e=>{let t=e.trim();return p.textContent=t,{text:t,width:h.offsetWidth}},f=e=>{let t=!!e.match(/\s/),i=0===g.length;if(p.textContent=`${g}${e}`,h.offsetWidth>n){if(t)_.push(m(g)),g="";else if(i)for(let t of e)f(t);else _.push(m(g)),g="",f(e)}else g+=e};for(let e of null!=i?i:[]){0===e.length&&_.push(m(g));let t=r(e);t.forEach(e=>f(e)),g.length&&(_.push(m(g)),g="")}return h.remove(),a.remove(),_}({font:i,fontSize:u,textList:c,width:t}):[]}}function o(e){let t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("height").replace("px","")),r=parseFloat(t.getPropertyValue("font-size").replace("px","")),n=parseFloat(t.getPropertyValue("line-height").replace("px",""));Number.isNaN(n)&&(n=1.2*r);let o=Math.ceil(i/n);return o}i.d(t,{KV:()=>n,Yd:()=>r,xW:()=>o})},962047:(e,t,i)=>{"use strict";i.d(t,{A7:()=>f,CP:()=>o,K3:()=>l,Lr:()=>g,NF:()=>_,R4:()=>c,RJ:()=>m,RO:()=>u,S8:()=>a,SO:()=>x,VH:()=>b,Z0:()=>h,iS:()=>n,k5:()=>d,uK:()=>s});var r=i(858472);let n=320,o=10,s=100,l=250,a=100,d=100,c=3,u=2,h=1,p=r.x7,_=p,g=6,m={upload:228,design:226,details:437,target:432},f=1200,x=1400,b=104},919974:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var r=i(883119),n=i(898781),o=i(785893);let s=function(){let e=(0,n.ZP)();return(0,o.jsx)(r.xu,{paddingX:10,width:"100%",children:(0,o.jsx)(r.xu,{color:"errorWeak",display:"flex",direction:"column",smDirection:"row",padding:7,position:"relative",rounding:4,children:(0,o.jsxs)(r.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,o.jsx)(r.xu,{flex:"none",children:(0,o.jsx)(r.JO,{accessibilityLabel:e.bt("Workflow status problem icon", "Workflow status problem icon", "disablePinCreationBanner.icon.accessibilityLabel", undefined, true),color:"error",icon:"workflow-status-problem",size:32})}),(0,o.jsxs)(r.xu,{marginBottom:"auto",marginTop:"auto",paddingX:4,display:"flex",direction:"column",flex:"grow",children:[(0,o.jsx)(r.X6,{size:"400",children:e.bt("Oops...", "Oops...", "disablePinCreationBanner.icon.title", undefined, true)}),(0,o.jsx)(r.xu,{marginTop:2,children:(0,o.jsx)(r.xv,{children:e.bt("Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "disablePinCreationBanner.icon.message", undefined, true)})})]})]})})})}},52925:(e,t,i)=>{"use strict";i.d(t,{Cl:()=>b,MW:()=>p,Nq:()=>g,St:()=>h,T0:()=>v,V3:()=>P,Zy:()=>m,dz:()=>_,eE:()=>y,qk:()=>x,wX:()=>S,x5:()=>f});var r=i(616550),n=i(16243),o=i.n(n),s=i(780280),l=i(170168),a=i(490072),d=i(962047),c=i(296342),u=i(854907);function h(e){return["#111111","#370052","#00205C","#01564C","#363F03","#573700","#5E031A","#97026D","#8000BD","#0045CC"][e]}function p(e,t=5){return"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.body&&window.document.body?new Promise(i=>{let{height:r,src:n,width:s}=e,l=e=>{let t=e.toString(16);return 1===t.length?"0"+t:t},a=(e,t,i)=>"#"+l(e)+l(t)+l(i),d=document.createElement("canvas");d.width=s,d.height=r;let c=document.createElement("img");c.onload=()=>{let e=d.getContext("2d");e.drawImage(c,0,0);let n=e.getImageData(0,0,s,r).data,l=[],u=s*r;for(let e=0;e<u;e+=10){let t=4*e;l.push([n[t],n[t+1],n[t+2]])}let h=o()(l,t).palette();d.remove(),c.remove(),i(h.map(e=>a(e[0],e[1],e[2])))},c.src=n}):Promise.reject([])}function _({blockStyle:e,canvasAspectRatio:t,media:i}){let r;if(!e)return{left:0,scale:1,top:0,transform:{rotate:0,scaleX:1,scaleY:1}};let n=c.q8/t,{height:o=100,width:s=100,x_coord:l=0,y_coord:a=0}=e;return r=i.width>i.height?c.q8/i.width*(s/100):n/i.height*(o/100),{left:l?l/100*c.q8:0,scale:r,top:a?a/100*n:0,transform:{rotate:0,scaleX:1,scaleY:1}}}function g(e,t,i){let r=e.split(/\r?\n/g),n=[],o="",s=e=>{let t=e.trim(),r=i.measureText(t);return{text:t,width:r.width}},l=e=>{let r=!!e.match(/\s/),a=0===o.length,d=i.measureText(`${o}${e}`);if(d.width>t){if(r)n.push(s(o)),o="";else if(a)for(let t of e)l(t);else n.push(s(o)),o="",l(e)}else o+=e};for(let e of r){0===e.length&&n.push(s(o));let t=(0,u.Yd)(e);t.forEach(e=>l(e)),o.length&&(n.push(s(o)),o="")}return n}function m(e,t,i,r,n,o,s){e.beginPath(),e.moveTo(t+o,i),e.lineTo(t+r-o,i),e.quadraticCurveTo(t+r,i,t+r,i+o),e.lineTo(t+r,i+n-o),e.quadraticCurveTo(t+r,i+n,t+r-o,i+n),e.lineTo(t+o,i+n),e.quadraticCurveTo(t,i+n,t,i+n-o),e.lineTo(t,i+o),e.quadraticCurveTo(t,i,t+o,i),e.closePath(),e.fillStyle=s,e.fill()}function f(e){return e.includes("ads-latest")||0===e.indexOf(l.vI)}function x(e){return e.includes("analytics-latest")||0===e.indexOf(l.YD)}function b(e){return e.includes("trends-latest")||0===e.indexOf(l.L1)}function y(e,t){return e.isAuth&&e.isEmployee&&"true"===new URLSearchParams(t).get("debug")}function v(){let{isInternalIP:e}=(0,s.B)(),{search:t}=(0,r.TH)();return!!(e&&"true"===new URLSearchParams(t).get("force-publish-failure"))}function P(e){let{entryType:t,isAdsManagerIdeaPinDraft:i,isDraft:r,mediaType:n,storyPinSelectCount:o}=e;return{entry_type:t,is_ads_manager_idea_pin_draft:null!=i&&i,is_draft:r,idea_pin_media_type:n,story_pin_select_count:o}}function S({disabledIdeaPinCreation:e,link:t,linkStatus:i,textBlocks:r,title:n}){let o=r.reduce((e,t)=>e||t.text.length>d.K3,!1),s=n.length>d.S8,l=!!(t&&i!==a.Dt.VALID);return e||s||o||l}},252570:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(296342);let n={rotate:0,scaleX:1,scaleY:1};function o({canvasAspectRatio:e,media:t}){let i=t.width/t.height,o=r.q8/e,s=e=>(o-t.height*e)/2,l=({left:e,scale:t})=>({left:e||0,scale:t,top:s(t),transform:n});if(i<e){let e=r.q8/t.width;return l({scale:e})}{let e=o/t.height,i=t.width*e,n=(r.q8-i)/2;return l({left:n,scale:e})}}},296342:(e,t,i)=>{"use strict";i.d(t,{Af:()=>c,Ei:()=>a,II:()=>v,Lh:()=>f,U:()=>g,UC:()=>u,Zy:()=>l,dD:()=>o,er:()=>m,hb:()=>b,in:()=>d,j7:()=>x,kX:()=>p,me:()=>h,mx:()=>y,n5:()=>s,q8:()=>_,xH:()=>n});var r=i(224496);let n=1048576,o=3,s=20,l=3,a=10,d=50,c=10,u=720,h=1080,p=1200,_=375,g=_/r.ap,m=1200,f="#FFFFFF",x={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},b=420,y=325,v=768},201155:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var r=i(883119),n=i(499128),o=i(898781),s=i(784590),l=i(50286),a=i(785893);function d({ideaPinImages:e}){let t=e.map((e,t)=>{var i,n,o;return(0,a.jsx)(r.xu,{height:48,width:28,color:"default",borderStyle:"sm",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},children:(0,a.jsx)(r.Ee,{alt:"",src:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",color:"#696969",fit:"cover",naturalHeight:null!==(n=null==e?void 0:e.height)&&void 0!==n?n:1,naturalWidth:null!==(o=null==e?void 0:e.width)&&void 0!==o?o:1})},t)});return(0,a.jsx)(r.kC,{justifyContent:"center",children:(0,a.jsx)(r.kC,{justifyContent:"start",width:{1:28,2:40,3:48}[e.length],children:t})})}function c({handleHide:e,text:t,userId:i,href:c,imageUrl:u}){let h=(0,o.ZP)(),p=(0,l.HG)(),_=(0,s.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:i}}),g=Array.isArray(t)?t.join(" "):t;if(0===(_.data||[]).length)return(0,a.jsx)(n.ZP,{duration:5e3,onHide:e,text:g,href:c,thumbnail:u?{image:(0,a.jsx)(r.Ee,{alt:h.bt("Image of who you followed", "Image of who you followed", "userFollowingToast.thumbnail.userImage", undefined, true),fit:"cover",naturalHeight:1,naturalWidth:1,src:u})}:void 0});let m=(_.data||[]).slice(0,3).map(e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[p?"236x":"170x"]}),f=(0,a.jsx)(d,{ideaPinImages:m});return(0,a.jsx)(n.ZP,{href:c,duration:5e3,onHide:e,_dangerouslySetThumbnail:f,text:g})}},152028:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var r=i(883119),n=i(81226),o=i(898781),s=i(785893);function l({duration:e}){let t=(0,o.ZP)();return(0,s.jsxs)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,s.jsx)(r.JO,{accessibilityLabel:t.bt("Video camera icon", "Video camera icon", "Video camera indicator icon for a Pin", undefined, true),color:"light",icon:"video-camera"}),(0,s.jsx)(r.xu,{marginStart:1,children:(0,s.jsx)(r.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,n.Z)(e)})})]})}},714922:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(34596);let n=r.Z},216834:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(34596);let n=r.Z},76510:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(34596);let n=r.Z},562647:(e,t,i)=>{"use strict";function r(e){let[t,i]=e.split(/\/(.*)+/);return{filepath:i,site:t}}function n(e,t){return t?`${e||""}/${t}`:`/${e||""}`}i.d(t,{ac:()=>r,ke:()=>n})},582406:(e,t,i)=>{"use strict";i.d(t,{MM:()=>s,uo:()=>l,wH:()=>o});var r=i(425288),n=i(562647);let{Provider:o,useHook:s}=(0,r.Z)("HandlerId");function l(){let e=s();return(0,n.ac)(e).site}},597897:(e,t,i)=>{"use strict";i.d(t,{U:()=>o,Z:()=>s});var r=i(667294);let n=(0,r.createContext)();function o(){return(0,r.useContext)(n)}let s=n},373897:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=Array(t);i<t;i++)r[i]=e[i];return r},e.exports.__esModule=!0,e.exports.default=e.exports},163405:(e,t,i)=>{var r=i(373897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},366115:e=>{e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},474704:(e,t,i)=>{var r=i(386116);e.exports=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,a=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return l=e.done,e},e:function(e){a=!0,s=e},f:function(){try{l||null==i.return||i.return()}finally{if(a)throw s}}}},e.exports.__esModule=!0,e.exports.default=e.exports},238416:(e,t,i)=>{var r=i(464062);e.exports=function(e,t,i){return(t=r(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},310434:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},107867:(e,t,i)=>{var r=i(206015);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},564836:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},379498:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},742281:e=>{e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},242122:(e,t,i)=>{var r=i(238416);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}e.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},7071:e=>{e.exports=function(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n},e.exports.__esModule=!0,e.exports.default=e.exports},206015:e=>{function t(i,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},600861:(e,t,i)=>{var r=i(163405),n=i(379498),o=i(386116),s=i(742281);e.exports=function(e){return r(e)||n(e)||o(e)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},295036:(e,t,i)=>{var r=i(918698).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=r(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},464062:(e,t,i)=>{var r=i(918698).default,n=i(295036);e.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},918698:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},386116:(e,t,i)=>{var r=i(373897);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports},693967:(e,t)=>{var i;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=o(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)r.call(e,i)&&e[i]&&(t=o(t,i));return t}(i)))}return e}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0!==(i=(function(){return n}).apply(t,[]))&&(e.exports=i)}()},497326:(e,t,i)=>{"use strict";function r(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}i.d(t,{Z:()=>r})},204942:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(383997);function n(e,t,i){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},487462:(e,t,i)=>{"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}i.d(t,{Z:()=>r})},894578:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(589611);function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},601413:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(204942);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){(0,r.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},263366:(e,t,i)=>{"use strict";function r(e,t){if(null==e)return{};var i,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}i.d(t,{Z:()=>r})},589611:(e,t,i)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}i.d(t,{Z:()=>r})},383997:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var r=i(671002);function n(e){var t=function(e,t){if("object"!=(0,r.Z)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=(0,r.Z)(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.Z)(t)?t:String(t)}},671002:(e,t,i)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,{Z:()=>r})}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,35074,67631,16550,26067,17492,48327,42298,99246,16117,13254,14140,31583,65610,96833,27316,71526,27405,76030,44854,51105,15071],()=>(t(367677),t(644551),t(61746))),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/idea-ads-tool.en_GB-133f665b5ec6cc63.mjs.map